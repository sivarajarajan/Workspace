
ElectricFlow	Logged in as 'rajsivar'    Logout    Help   
More
 
HomeProjectsJobsWorkflowsCloudArtifactsSearchAdministrationChange History
Job: job-cdvr_cornercase_via_ssh-4161154
Workspace File	/	Run corner script.b8d63ec8-4c3b-11e8-a420-024219187219.log
 	
 		
More


2018/04/30 06:03:51 UTC ############################## C O N F I G U R A T I O N ##############################

The following configuration is being used (aws_dcpt01):

{'EXTRACONF': None,
 'GITLASTCOMMIT': '4adcc3a5390',
 'GITREPO': 'origin\tlocalhost/cdvr-sanity-e3e0058 (fetch)',
 'LABNAME': 'aws_dcpt01',
 'activemq': {'service': 'nds_activemq'},
 'adZone': 'mkt1',
 'authz': {'consul_search_string': '-authz-',
           'host': 'authz.cdvr.dcpt01.ciscocdvr.net',
           'service': 'nds_authz'},
 'basic-feature-channels': ['GenericCh1', 'GenericCh2'],
 'basic_feature': {'allinstances': True,
                   'delete_household': False,
                   'household_prefix': 'AWS_AUTO',
                   'households_needed': 5,
                   'max_failures_allowed': 10,
                   'print_cfg': False,
                   'stop_on_first_failure': False,
                   'throttle_milliseconds': 250},
 'bsm': {'host': 'datamasters', 'service': 'nds_bsm'},
 'bsm-rest': {'host': 'datamasters', 'service': 'nds_bsm-rest'},
 'caSystemId': 2558,
 'carm': {'host': 'datamasters', 'service': 'nds_carm'},
 'catalogueId': 1,
 'catchup-restart-channels': ['GenericCh16', 'GenericCh17'],
 'ccm': {'host': 'datamasters', 'service': 'nds_ccm'},
 'cdvrServices': ['CDVR-ENABLED', 'ALLOW-CDVR-TIME-BASED-RECORDING'],
 'ci': {'earliestSecondsFromNowToSchedule': 120,
        'host': 'ci',
        'ingest_delay_factor_per_minute': 0.069400000000000003,
        'ingest_minimum_delay': 120,
        'port': 5155,
        'service': 'nds_ci'},
 'cmdc': {'host': 'cmdc', 'port': 5600, 'service': 'nds_cmdc'},
 'cmdcRegion': 101,
 'cmsrules': {'service': 'nds_cmsrules'},
 'cmsstatus': {'service': 'nds_cmsstatus'},
 'consul': {'host': 'consul.service.cdvr',
            'port': 8500,
            'running_instances_collection_api': '/v1/catalog/nodes'},
 'contentplayback': {'host': 'cdvr.pe1.ciscocdvr.net',
                     'port': 80,
                     'url': '/cdvr/'},
 'corner': {'allinstances': True,
            'delete_household': False,
            'household_prefix': 'AUTO_3006_cornercase_set2_scripts_',
            'households_needed': 5,
            'print_cfg': False,
            'stop_on_first_failure': False,
            'throttle_milliseconds': 250},
 'cornercase-channelsets': {'set1': ['GenericCh3',
                                     'GenericCh4',
                                     'GenericCh5'],
                            'set2': ['GenericCh6',
                                     'GenericCh7',
                                     'GenericCh8'],
                            'set3': ['GenericCh9',
                                     'GenericCh10',
                                     'GenericCh11',
                                     'GenericCh12',
                                     'GenericCh13']},
 'cos': {'active_storage_path': 'rio/active',
         'api': 'v2p',
         'urls': ['http://192.168.22.6',
                  'http://192.168.22.7',
                  'http://192.168.22.8',
                  'http://192.168.22.9',
                  'http://192.168.22.10',
                  'http://192.168.22.11',
                  'http://192.168.22.12',
                  'http://192.168.22.13',
                  'http://192.168.22.14',
                  'http://192.168.22.15',
                  'http://192.168.22.16',
                  'http://192.168.22.17',
                  'http://192.168.22.18',
                  'http://192.168.22.19',
                  'http://192.168.22.20',
                  'http://192.168.22.21',
                  'http://192.168.22.22',
                  'http://192.168.22.23',
                  'http://192.168.22.24',
                  'http://192.168.22.25',
                  'http://192.168.22.29',
                  'http://192.168.22.30',
                  'http://192.168.22.31',
                  'http://192.168.22.32',
                  'http://192.168.22.33',
                  'http://192.168.22.34',
                  'http://192.168.22.35',
                  'http://192.168.22.36',
                  'http://192.168.22.37',
                  'http://192.168.22.38',
                  'http://192.168.22.39',
                  'http://192.168.22.40'],
         'x-auth-key': 'rootroot',
         'x-auth-user': 'mostest:mostest'},
 'dashboardCheck': {'enabled': False, 'nodes': ['kibana', 'uchima']},
 'enabledServices': ['CATCHUP_ENABLER',
                     'RESTART_ENABLER',
                     'CDVR-ENABLED',
                     'ALLOW-CDVR-TIME-BASED-RECORDING'],
 'externalAuthz': {'host': 'cmdc-0', 'isenabled': True, 'port': 9988},
 'hc': {'host': 'external-ma', 'port': 6410, 'service': 'nds_hc'},
 'health-check': {'enabled': False,
                  'nodes': ['pps', 'upm', 'sr', 'ma-batch', 'ma-api']},
 'hornetq': {'host': 'pps.cdvr.dcpt01.ciscocdvr.net', 'service': 'hornetq'},
 'idsync': {'host': 'datamasters', 'service': 'nds_idsync'},
 'ignore_dataplane_tests': False,
 'ipom': {'host': '211.208.160.45', 'port': 8081},
 'lab-description': 'AWS',
 'longterm': {'allinstances': True,
              'delete_household': False,
              'filename': 'keyvalues',
              'household_prefix': 'LONG',
              'households_needed': 5,
              'longterm_duration': 1,
              'print_cfg': False,
              'stop_on_first_failure': False,
              'throttle_milliseconds': 250},
 'longterm-channels': ['GenericCh14', 'GenericCh15'],
 'lsm': {'host': 'datamasters', 'service': 'nds_lsm'},
 'ma': {'config_keys': ['ma-api', 'ma-batch']},
 'ma-api': {'corelocation': '/var/log/nds/core*',
            'host': 'external-ma',
            'port': 6410,
            'service': 'nds_ma-api'},
 'ma-batch': {'corelocation': '/var/log/nds/core*',
              'host': 'external-ma',
              'port': 6419,
              'service': 'nds_ma-batch'},
 'marketingTarget': 'mkt1',
 'mongo': {'consul_search_string': 'mongo-0',
           'host': 'pps.cdvr.dcpt01.ciscocdvr.net',
           'service': 'mongod'},
 'mos': {'active_name': 'recmgmt',
         'v1url': 'http://vdc3-mos-v1api.mos-dns-cache.vdc3.vcte.com',
         'v2url': 'https://vdc3-mos-v2api.mos-dns-cache.vdc3.vcte.com'},
 'msr': {'active_name': 'source1',
         'functional_port': 9998,
         'host': '192.168.21.66',
         'sanity_port': 8080,
         'v1url': 'https://ui.rio-mos-dns.vdc7.vcte.com:7001',
         'v2url': 'https://ui.rio-mos-dns.vdc7.vcte.com:8043'},
 'ndsconsole': {'host': 'ci', 'service': 'nds_ndsconsole'},
 'nm': {'host': 'datamasters', 'service': 'nds_nm'},
 'oasm': {'host': 'datamasters', 'service': 'nds_oasm'},
 'performance': {'allinstances': True,
                 'delete_household': False,
                 'household_prefix': 'PERF',
                 'households_needed': 50000,
                 'print_cfg': False,
                 'stop_on_first_failure': False,
                 'throttle_milliseconds': 250},
 'pps': {'api': 'v2',
         'booked_to_recording_delay': 60,
         'consul_search_string': '-pps-',
         'corelocation': '/var/log/nds/core*',
         'fetch_bookingCatalog_delay': 2,
         'host': 'pps.cdvr.dcpt01.ciscocdvr.net',
         'port': 6060,
         'protocol': 'http',
         'recording_to_recorded_delay': 90,
         'series_bookingstatecheck_waittime': 5,
         'service': 'nds_pps'},
 'prm_supported': False,
 'protocol': 'http',
 'proxyHostNeeded': False,
 'proxyhost': {'host': '192.168.0.30', 'port': 8080},
 'quotas': {'diskQuota': 108000, 'numOfTuners': 4},
 'rally_initiatives_to_run': ['Core DVR Functionality'],
 'recorderRegion': 'PRIMETIME_RECORDER',
 'recording_api': 'v2p',
 'recording_mode': 'unique_copy',
 'region': 101,
 'rm': {'host': 'rr.cdvr.dcpt01.ciscocdvr.net',
        'port': 80,
        'protocol': 'http'},
 'sanity': {'allinstances': True,
            'delete_household': True,
            'household_prefix': 'AWS_SANITY',
            'households_needed': 10,
            'print_cfg': False,
            'stop_on_first_failure': False,
            'throttle_milliseconds': 250},
 'service_restart': False,
 'sgw': {'host': 'authz.cdvr.dcpt01.ciscocdvr.net', 'service': 'nds_sgw'},
 'sm': {'host': '211.208.132.19', 'port': 8080},
 'sr': {'corelocation': '/opt/cisco/seriesresolution/core*',
        'service': 'cisco_seriesresolution'},
 'ssh_userid': 'ecuser',
 'test-flags': ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy'],
 'test_channels': {'GenericCh1': {'Description': 'Service programming is determined by a test script',
                                  'ServiceId': 500,
                                  'cmdcRegion': 101,
                                  'region': 101},
                   'GenericCh10': {'Description': 'Service programming is determined by a test script',
                                   'ServiceId': 509,
                                   'cmdcRegion': 101,
                                   'region': 101},
                   'GenericCh11': {'Description': 'Service programming is determined by a test script',
                                   'ServiceId': 510,
                                   'cmdcRegion': 101,
                                   'region': 101},
                   'GenericCh12': {'Description': 'Service programming is determined by a test script',
                                   'ServiceId': 511,
                                   'cmdcRegion': 101,
                                   'region': 101},
                   'GenericCh13': {'Description': 'Service programming is determined by a test script',
                                   'ServiceId': 512,
                                   'cmdcRegion': 101,
                                   'region': 101},
                   'GenericCh14': {'Description': 'Service programming is determined by a test script',
                                   'ServiceId': 513,
                                   'cmdcRegion': 101,
                                   'region': 101},
                   'GenericCh15': {'Description': 'Service programming is determined by a test script',
                                   'ServiceId': 514,
                                   'cmdcRegion': 101,
                                   'region': 101},
                   'GenericCh16': {'Description': 'Service programming is determined by a test script',
                                   'ServiceId': 515,
                                   'cmdcRegion': 101,
                                   'region': 101},
                   'GenericCh17': {'Description': 'Service programming is determined by a test script',
                                   'ServiceId': 516,
                                   'cmdcRegion': 101,
                                   'region': 101},
                   'GenericCh2': {'Description': 'Service programming is determined by a test script',
                                  'ServiceId': 501,
                                  'cmdcRegion': 101,
                                  'region': 101},
                   'GenericCh3': {'Description': 'Service programming is determined by a test script',
                                  'ServiceId': 502,
                                  'cmdcRegion': 101,
                                  'region': 101},
                   'GenericCh4': {'Description': 'Service programming is determined by a test script',
                                  'ServiceId': 503,
                                  'cmdcRegion': 101,
                                  'region': 101},
                   'GenericCh5': {'Description': 'Service programming is determined by a test script',
                                  'ServiceId': 504,
                                  'cmdcRegion': 101,
                                  'region': 101},
                   'GenericCh6': {'Description': 'Service programming is determined by a test script',
                                  'ServiceId': 505,
                                  'cmdcRegion': 101,
                                  'region': 101},
                   'GenericCh7': {'Description': 'Service programming is determined by a test script',
                                  'ServiceId': 506,
                                  'cmdcRegion': 101,
                                  'region': 101},
                   'GenericCh8': {'Description': 'Service programming is determined by a test script',
                                  'ServiceId': 507,
                                  'cmdcRegion': 101,
                                  'region': 101},
                   'GenericCh9': {'Description': 'Service programming is determined by a test script',
                                  'ServiceId': 508,
                                  'cmdcRegion': 101,
                                  'region': 101},
                   'longProgramLength': 5,
                   'mediumProgramLength': 3,
                   'shortProgramLength': 2,
                   'xlongProgramLength': 10},
 'test_results': {'filename': 'ec_results.json', 'format': 'json'},
 'tests-to-run': ['sanity', 'basic-feature'],
 'tgs': {'host': 'cmdc', 'service': 'nds_tgs'},
 'tpi': {'host': 'cmdc', 'service': 'nds_tpi'},
 'tstvm': {'host': 'cmdc', 'service': 'nds_tstvm'},
 'tui': {'host': 'cmdc', 'service': 'nds_tui'},
 'ubs': {'service': 'nds_ubs'},
 'upm': {'consul_search_string': '-upm-',
         'corelocation': '/var/log/nds/core*',
         'host': 'upm.cdvr.dcpt01.ciscocdvr.net',
         'port': 6040,
         'protocol': 'http',
         'service': 'nds_upm'},
 'username': 'centos',
 'v2p': {'api_port': 8043,
         'api_token': '52d6ce4e-b9ca-4343-bbd2-192f92e01b07',
         'assets_url': 'am1.ciscocdvr.net',
         'interface_port': 7001,
         'masters': ['v2pc-ui.ciscocdvr.net'],
         'mgmt_port': 8443,
         'pam_node': '0.0.0.0',
         'protocol': 'https',
         'sm_api_token': 'eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6ImFkbWluIiwicm9sZXMiOlHAiOjE1MjQ1NzUwNzd9.H08XWgINkpQGzLRB_CJOvScnXJpmqnVgJZomOuqEqoeQbt-uBNK2sau_62qmLOcOULKR66zf8547LVXCfTHE4bweqmRkgPFy4fEhj74S5upJGBgs2F3vPKTLtSmBVBGXdGRNGxBnjayd9g5bhTotr94Y9jlST4fRuUSXfrNUElbYxv-uaWt6Z8AAeaJCfOHhuof7pB5D65cHBZBm6C1eWQ5nYgaqWiY7Ha7hsSgRK4MGFw0vK40df5OOG0LQmbn0C-Eapm5zTRqRDZjS8MSTJ30GEue3AqyVdKz32t7KcMkFd7fAm16H4x1whWyzJ5edY9C6Misg5o5ek3FSGFeJ6g',
         'use_proxy': False},
 'vcmgateway': {'service': 'nds_vcmgateway'},
 'vcmingest': {'service': 'nds_vcmingest'},
 'vcmpublish': {'service': 'nds_vcmpublish'},
 'vcmsupport': {'service': 'nds_vcmsupport'},
 'vcmworkflow': {'service': 'nds_vcmworkflow'},
 'vmr': {'host': '192.168.21.66', 'port': 9999},
 'vsrm': {'host': 'rr.cdvr.dcpt01.ciscocdvr.net',
          'port': 80,
          'protocol': 'http'}}


2018/04/30 06:03:51 UTC ############################## STARTED :  corner_delete_household ##############################
Starting test corner_delete_household
waiting a few seconds in an effort for PVR deletion to catch up
waiting a few seconds in an effort for PVR deletion to catch up

2018/04/30 06:03:58 UTC ############################## ENDED :  corner_delete_household ##############################

2018/04/30 06:03:58 UTC ############################## STARTED :  corner_create_household ##############################
Starting test corner_create_household
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Create household via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_0
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Create household via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_1
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Create household via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Create household via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_3
waiting a few seconds in an effort for PVR creation to catch up before 1st use
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Create household via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_4
waiting a few seconds in an effort for PVR creation to catch up before 1st use

2018/04/30 06:04:05 UTC ############################## ENDED :  corner_create_household ##############################

2018/04/30 06:04:05 UTC ############################## STARTED :  corner_0001_getCatalogServices ##############################
Starting test corner_0001_getCatalogServices

2018/04/30 06:04:05 UTC ############################## ENDED :  corner_0001_getCatalogServices ##############################

2018/04/30 06:04:05 UTC ############################## STARTED :  corner_0002_getOffers ##############################
Starting test corner_0002_getOffers

2018/04/30 06:04:05 UTC ############################## ENDED :  corner_0002_getOffers ##############################

2018/04/30 06:04:05 UTC ############################## STARTED :  corner_0003_setOffers ##############################
Starting test corner_0003_setOffers
Skipping Enabler services as there is no UPM

2018/04/30 06:04:05 UTC ############################## ENDED :  corner_0003_setOffers ##############################

2018/04/30 06:04:05 UTC ############################## STARTED :  corner_0012_US31839_TC1469_Booking_request_fails_for_single_event_booking_for_future ##############################

US31839: As a SP, I want to fail a booking request if there is not enough available space in the Household's storage quota

TC1469:Booking request fails for single event booking for future
Starting test corner_0012_US31839_TC1469_Booking_request_fails_for_single_event_booking_for_future


### STEP1: Ingest 3 events of n minutes each ##########################################################################

{'services': { 500: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'EventDQ99_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'EventDQ99_2', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'EventDQ99_3', 'rating': 1}],
         'lineupLength': 12,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:12:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.8328
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################



### STEP2: Fetch the original storage space of household before doing any booking and save it in a variable ############

Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Retrieve Total diskQuota fetched  via URL :  http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_0/diskQuota
Diskquota for the household is 108000
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525068386000~1525075586000?lang=eng&serviceList=500&count=255&region=101&catalogueId=1


### STEP3: Fetch the grid and book first program, modify storage space such that booked program will acquire 98% of space #######################

Content Id dictionary from the Grid Response {u'programid://2147478362~programid://2147482784': [1525068960000, 1525069200000, 240000], u'programid://2147478361~programid://2147482786': [1525068720000, 1525068960000, 240000], u'programid://2147478360~programid://2147482785': [1525068480000, 1525068720000, 240000]}
Content id details of event in sorted manner:  [(u'programid://2147478360~programid://2147482785', [1525068480000, 1525068720000, 240000]), (u'programid://2147478361~programid://2147482786', [1525068720000, 1525068960000, 240000]), (u'programid://2147478362~programid://2147482784', [1525068960000, 1525069200000, 240000])]
List of all content ids for booking:  [u'programid://2147478360~programid://2147482785', u'programid://2147478361~programid://2147482786', u'programid://2147478362~programid://2147482784']

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_0/bookings 
PPS Booking completed successfully
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_0/bookings
 
All programs with the contentids [u'programid://2147478360~programid://2147482785'] is in BOOKED state
Booking done and verified for first event
New storage value to be updated:  244  seconds
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
DiskQuota is modified  via URL :  http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_0/diskQuota
Storage quota was updated succesfully


### STEP4: Record the event and fetch the remaining storage space #########################################################################################

system will wait for  92.0  seconds for program to start
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_0/recordings
 
All Program with the contentid [u'programid://2147478360~programid://2147482785'] is in RECORDING state
script will wait for  180.0  seconds for recording to complete
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_0/recordings
 
All Programs with the contentids [u'programid://2147478360~programid://2147482785'] is in RECORDED state
Remaining diskspace left is fetched  via URL :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_0/pvrs/nPVR
disc space left after recording event :  4  seconds


### STEP5: Book the next event from contentid list, verify that booking should fail due to storage space conflict #####################################


PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_0/bookings 
PPS Booking completed successfully
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_0/bookings
 
All programs with the contentids [u'programid://2147478362~programid://2147482784'] is in BOOKED state

#################### DEBUG STARTED ####################

Script Fetching the Household Booked/Recorded Catalog at 2018-04-30 06:13:32.914369
get all Catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_0/catalog
 
Household Booked/Recorded Catalog Response:
[
    {
        "pvr": "nPVR", 
        "partialContent": false, 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set2_scripts_0", 
        "channelId": "500", 
        "isSynchronized": true, 
        "duration": "00:04:06", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T06:08:00Z", 
        "content": {
            "instanceId": "programid://2147482785", 
            "broadcastDateTime": 1525068480000, 
            "seasonPremiere": false, 
            "locator": "{NWUzMTgzYzMxN2Y1MDYxMjY1MWE=,java.lang.String,NORMAL}[+]{hashKey,NORMAL}", 
            "erotic": false, 
            "audioType": "stereo", 
            "duration": 240000, 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": false, 
            "macrovision": false, 
            "id": "programid://2147478360", 
            "mixSource": false, 
            "externalKey": "EventDQ99_1_500_tk04300612", 
            "audioDescription": false, 
            "restartAvailable": false, 
            "title": "EventDQ99_1", 
            "allOfferIdList": [
                2
            ], 
            "mixContentId": false, 
            "contentNdsDrmAttributes": {
                "isBto": false, 
                "lastOfferEndDateTime": 1765963847000, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "rentalDuration": 2147483647, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isExtendedRental": false, 
                "isIppv": false, 
                "isPar": false, 
                "isOppv": false
            }, 
            "source": "ltv", 
            "live": false, 
            "subtitlesHardOfHearing": false, 
            "type": "instance", 
            "channel": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
            "videoFormat": "sd", 
            "wideScreen": false, 
            "isPurchasable": true, 
            "hdcp": false, 
            "serviceId": "500", 
            "adult": false, 
            "sortTitle": "EventDQ99_1", 
            "endAvailability": 1525068720000, 
            "hasChapters": false, 
            "cdvrAvailable": true, 
            "seasonFinale": false, 
            "shortSynopsis": "EventDQ99_1 - synopsis", 
            "synopsis": "EventDQ99_1 - synopsis", 
            "broadcaster": "VGE", 
            "serviceEquivalenceKey": "500", 
            "ict": false
        }, 
        "title": "EventDQ99_1", 
        "recurrence": "NONE", 
        "state": "RECORDED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "37683", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{500,java.lang.Integer,NORMAL}-|-{OTNmNWU5MWE4ZWFlZTJhOGY3NDI=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "500", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 500, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 500", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 500", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "500", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "500", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_11209~PPS_INSTANCE_37683", 
        "startTime": "2018-04-30T06:07:55Z", 
        "bookingDuration": "00:04:00", 
        "notificationHandles": [
            "5ae6b26247551d206618c73d"
        ], 
        "created": "2018-04-30T06:06:26Z", 
        "lastModified": "2018-04-30T06:12:19Z", 
        "contentPlayUri": "?recId=387c7a47-20fc-48b3-aac0-b583e8c36cfb", 
        "uri": "/pps/households/AUTO_3006_cornercase_set2_scripts_0/catalog/5ae6b26247551d206618c73d", 
        "scheduleInstance": "programid://2147478360~programid://2147482785", 
        "keep": false, 
        "contentId": "PPS_CONTENT_11209~PPS_INSTANCE_37683"
    }, 
    {
        "pvr": "nPVR", 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set2_scripts_0", 
        "channelId": "500", 
        "isSynchronized": true, 
        "duration": "00:04:00", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T06:16:00Z", 
        "content": {
            "instanceId": "programid://2147482784", 
            "broadcastDateTime": 1525068960000, 
            "seasonPremiere": false, 
            "locator": "{NjkzNjMyZjU5YWY2N2E3MDcwZDU=,java.lang.String,NORMAL}[+]{hashKey,NORMAL}", 
            "erotic": false, 
            "audioType": "stereo", 
            "duration": 240000, 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": false, 
            "macrovision": false, 
            "id": "programid://2147478362", 
            "mixSource": false, 
            "externalKey": "EventDQ99_3_500_tk04300620", 
            "audioDescription": false, 
            "restartAvailable": false, 
            "title": "EventDQ99_3", 
            "allOfferIdList": [
                2
            ], 
            "mixContentId": false, 
            "contentNdsDrmAttributes": {
                "isBto": false, 
                "lastOfferEndDateTime": 1765963847000, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "rentalDuration": 2147483647, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isExtendedRental": false, 
                "isIppv": false, 
                "isPar": false, 
                "isOppv": false
            }, 
            "source": "ltv", 
            "live": false, 
            "subtitlesHardOfHearing": false, 
            "type": "instance", 
            "channel": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
            "videoFormat": "sd", 
            "wideScreen": false, 
            "isPurchasable": true, 
            "hdcp": false, 
            "serviceId": "500", 
            "adult": false, 
            "sortTitle": "EventDQ99_3", 
            "endAvailability": 1525069200000, 
            "hasChapters": false, 
            "cdvrAvailable": true, 
            "seasonFinale": false, 
            "shortSynopsis": "EventDQ99_3 - synopsis", 
            "synopsis": "EventDQ99_3 - synopsis", 
            "broadcaster": "VGE", 
            "serviceEquivalenceKey": "500", 
            "ict": false
        }, 
        "title": "EventDQ99_3", 
        "recurrence": "NONE", 
        "state": "BOOKED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "37686", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{500,java.lang.Integer,NORMAL}-|-{OTNmNWU5MWE4ZWFlZTJhOGY3NDI=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "500", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 500, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 500", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 500", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "500", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "500", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_11212~PPS_INSTANCE_37686", 
        "startTime": "2018-04-30T06:16:00Z", 
        "bookingDuration": "00:04:00", 
        "notificationHandles": [
            "5ae6b40a2660f71ffec4eaf1"
        ], 
        "created": "2018-04-30T06:13:30Z", 
        "lastModified": "2018-04-30T06:13:30Z", 
        "contentPlayUri": "?recId=5831a69e-eca7-43ee-b134-14706d8e2b26", 
        "uri": "/pps/households/AUTO_3006_cornercase_set2_scripts_0/catalog/5ae6b40a2660f71ffec4eaf1", 
        "scheduleInstance": "programid://2147478362~programid://2147482784", 
        "keep": false, 
        "contentId": "programid://2147478362~programid://2147482784"
    }
]
Script Fetching Household Failed Recording Catalog at 2018-04-30 06:13:32.935021
get all failed recording catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_0/catalog?filter:state=FAILED
 
Failed Recording Catalog is empty

#################### DEBUG ENDED   ####################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Failed: Booking done successfully for second event which was not expected
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX   ^ ^ ^ ^ ^   XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX   E R R O R   XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

2018/04/30 06:13:53 UTC ############################## ENDED :  corner_0012_US31839_TC1469_Booking_request_fails_for_single_event_booking_for_future ##############################

2018/04/30 06:13:53 UTC ############################## STARTED :  corner_0013_US31739_TC1369_delete_recording ##############################
US31739:Schedule event based recording on control plane
TC1369:Record future program from EPG Grid, user delete recording from the recorded library
US31745:Enable Subscriber Browse for Recorded Content via control plane
TC1387: After you delete a recorded content, it should not be shown in the recorded library
TC1386: Record a content. display in the recorded library right after the recording completes
TC1379: check the Recorded content after recording
TC1376: Only one recorded content in the recorded library
TC1381: Browse recorded library with only Individual recorded contents. Navigation to recorded content:  page up/page down, arrow up/arrow down, arrow right/ arrow left, select key
Starting test corner_0013_US31739_TC1369_delete_recording


### STEP1: Ingest 2 events, n minutes each ###########################################################################################################

{'services': { 505: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'recfutpro46_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'recfutpro46_2', 'rating': 1}],
         'lineupLength': 8,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.5552
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################



### STEP2: Book the event and verify BOOKED state ######################################################################################################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525068974000~1525076174000?lang=eng&serviceList=505&count=255&region=101&catalogueId=1
Content id details of event in sorted manner:  [(u'programid://2117205306~programid://1039519268', [1525069020000, 1525069260000, 240000]), (u'programid://2117205307~programid://1039519269', [1525069260000, 1525069500000, 240000])]
List of all content ids for booking:  [u'programid://2117205306~programid://1039519268', u'programid://2117205307~programid://1039519269']

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings 
PPS Booking completed successfully
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://2117205306~programid://1039519268'] is in BOOKED state
Booking done and verified


### STEP3: Record the event and verify RECORDED state ########################################################################################

system will wait for  44.0  seconds for program to start
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
All Program with the contentid [u'programid://2117205306~programid://1039519268'] is in RECORDING state
script will wait for  180.0  seconds for recording to complete
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
All Programs with the contentids [u'programid://2117205306~programid://1039519268'] is in RECORDED state


### STEP4: Delete the event after recording, verify its not present in recording library ############################################################


Delete PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae6b4ae5a35bf20e5a9884c
PPS Booking Deleted successfully
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
Recording Catalog is empty
Recorded catalog is empty

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: Event was succesfully deleted and verified from recorded library

2018/04/30 06:22:50 UTC ############################## ENDED :  corner_0013_US31739_TC1369_delete_recording ##############################

2018/04/30 06:22:50 UTC ############################## STARTED :  corner_0014_US31837_TC1231_changed_HHquota_global_not_affected ##############################

US31837:As a SP, I want a way to change the storage quota limit at the household level via my Billing System

TC1231:Update household quota, verify global quota value is not affected

TC1233:Update household quota value, verify update is applied
Starting test corner_0014_US31837_TC1231_changed_HHquota_global_not_affected
Cleaning up the Booked/Recording catalog for the household

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

###STEP1 : Retrieve the diskquota value of two household #####################################


Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Retrieve Total diskQuota fetched  via URL :  http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_1/diskQuota
Diskquota for the household is 108000
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Retrieve Total diskQuota fetched  via URL :  http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_3/diskQuota
Diskquota for the household is 108000
###STEP 2 : modify the diskquota value for the first household and verify it#####################################


Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
DiskQuota is modified  via URL :  http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_1/diskQuota
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Retrieve Total diskQuota fetched  via URL :  http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_1/diskQuota
Diskquota for the household is 162000
Testcase passed :storage quota is successfully updated for the first household household 
###STEP 3:Retrive the diskquota value for the second household and verify that it is not changed (retains the global diskquota value)################


Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Retrieve Total diskQuota fetched  via URL :  http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_3/diskQuota
Diskquota for the household is 108000

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed : Global storage quota is not affected while changing the household storage

2018/04/30 06:23:30 UTC ############################## ENDED :  corner_0014_US31837_TC1231_changed_HHquota_global_not_affected ##############################

2018/04/30 06:23:30 UTC ############################## STARTED :  corner_0017_US31837_TC1234_modified_diskquota_and_record_to_100percent ##############################

US31837: As a SP, I want a way to change the storage quota limit at the household level via my Billing System

TC1234:Update storage quota, record new programs to 100% of new quota
Starting test corner_0017_US31837_TC1234_modified_diskquota_and_record_to_100percent
### STEP1: Ingest the catalog for 3 individual event of n min each ###################################### 
 
 
{'services': { 506: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'disrech155_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'disrech155_2', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'disrech155_3', 'rating': 1}],
         'lineupLength': 12,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:12:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.8328
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

### STEP2: Fetch the content ID of all the three event and diskquota for the first event  ###################################### 
 
 
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Retrieve Total diskQuota fetched  via URL :  http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/diskQuota
Diskquota for the household is 108000
original diskquota is 108000
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525069552000~1525076752000?lang=eng&serviceList=506&count=255&region=101&catalogueId=1
ContentId dictionary from the grid response
{u'programid://1246178711~programid://1745399395': [1525069620000, 1525069860000, 240000, u'disrech155_1'], u'programid://1246178712~programid://1745399396': [1525069860000, 1525070100000, 240000, u'disrech155_2'], u'programid://1246178713~programid://1745399394': [1525070100000, 1525070340000, 240000, u'disrech155_3']}
ContentId list after sorting
[(u'programid://1246178711~programid://1745399395', [1525069620000, 1525069860000, 240000, u'disrech155_1']), (u'programid://1246178712~programid://1745399396', [1525069860000, 1525070100000, 240000, u'disrech155_2']), (u'programid://1246178713~programid://1745399394', [1525070100000, 1525070340000, 240000, u'disrech155_3'])]
### STEP3: Modify the diskquota as required by the first event booking , so that the storage quota is full##################################### 
 
 
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
DiskQuota is modified  via URL :  http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/diskQuota
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Retrieve Total diskQuota fetched  via URL :  http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/diskQuota
Diskquota for the household is 240
### STEP4: Do the pps booking for the first event verify that the event is successfully recorded##################################### 
 
 
Full Diskquota is 240

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings 
PPS booking is successful for the event contentId programid://1246178711~programid://1745399395
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://1246178711~programid://1745399395'] is in BOOKED state
Recording will start in 8.0 seconds
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
All Program with the contentid [u'programid://1246178711~programid://1745399395'] is in RECORDING state
Program Recording completes in 3.0 minutes
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
All Programs with the contentids [u'programid://1246178711~programid://1745399395'] is in RECORDED state
### STEP5: Do the pps booking for the second event verify that the event is successfully recorded##################################### 
 
 
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Retrieve Total diskQuota fetched  via URL :  http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/diskQuota
Diskquota for the household is 240
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
DiskQuota is modified  via URL :  http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/diskQuota
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Retrieve Total diskQuota fetched  via URL :  http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/diskQuota
Diskquota for the household is 480
full diskquota is 480
Remaining diskspace left is fetched  via URL :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/pvrs/nPVR

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings 
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://1246178712~programid://1745399396'] is in BOOKED state
booking is verified successfully
Recording will start in 1seconds
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
All Program with the contentid [u'programid://1246178712~programid://1745399396'] is in RECORDING state
Program Recording completes in 0.483333333333 minutes
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
All Programs with the contentids [u'programid://1246178712~programid://1745399396'] is in RECORDED state
Recording is successful
### STEP6.retrieve the total diskquota and verified that full diskquota is occupied ############################### 
 
 
Remaining diskspace left is fetched  via URL :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/pvrs/nPVR
Total  diskquota after booking  is480

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################


#################### DEBUG STARTED ####################

Script Fetching the Household Booked/Recorded Catalog at 2018-04-30 06:36:51.242559
get all Catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog
 
Household Catalog is empty
Script Fetching Household Failed Recording Catalog at 2018-04-30 06:36:51.249584
get all failed recording catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog?filter:state=FAILED
 
Failed Recording Catalog is empty

#################### DEBUG ENDED   ####################

Testcase Passed: Complete diskquota is occupied after second recording is complete

2018/04/30 06:36:51 UTC ############################## ENDED :  corner_0017_US31837_TC1234_modified_diskquota_and_record_to_100percent ##############################

2018/04/30 06:36:51 UTC ############################## STARTED :  corner_0018_US31812_TC1235_storageQuota_after_eventdelete ##############################

US31812: As a viewer, I want to be able to see my current storage quota status

TC1235: Available storage quota updated on UX after events are deleted
Starting test corner_0018_US31812_TC1235_storageQuota_after_eventdelete
### STEP1: Ingest the catalog for 3 individual event of n min each ###################################### 
 
 
{'services': { 505: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'delevesto145_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'delevesto145_2', 'rating': 1}],
         'lineupLength': 8,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.5552
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

### STEP2: Fetch the content ID of all the three event and diskquota for the first event  ###################################### 
 
 
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Retrieve Total diskQuota fetched  via URL :  http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/diskQuota
Diskquota for the household is 108000
original diskquota is 108000
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525070352000~1525077552000?lang=eng&serviceList=505&count=255&region=101&catalogueId=1
ContentId dictionary from the grid response
{u'programid://1106253121~programid://314919264': [1525070400000, 1525070640000, 240000, u'delevesto145_1'], u'programid://1106253120~programid://314919263': [1525070640000, 1525070880000, 240000, u'delevesto145_2']}
ContentId list after sorting
[(u'programid://1106253121~programid://314919264', [1525070400000, 1525070640000, 240000, u'delevesto145_1']), (u'programid://1106253120~programid://314919263', [1525070640000, 1525070880000, 240000, u'delevesto145_2'])]
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
DiskQuota is modified  via URL :  http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/diskQuota
### STEP3: Modify the diskquota as required by the first event booking ############################ 
 
 
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Retrieve Total diskQuota fetched  via URL :  http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/diskQuota
Diskquota for the household is 268
full diskquota is 268
Remaining diskspace left is fetched  via URL :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/pvrs/nPVR
### STEP4: Do the pps booking for the first event verify that the event is successfully recorded ###################################### 
 
 

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings 
PPS booking is successful for the event contentId programid://1106253121~programid://314919264
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://1106253121~programid://314919264'] is in BOOKED state
Recording will start in 1seconds
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
All Program with the contentid [u'programid://1106253121~programid://314919264'] is in RECORDING state
Program Recording completes in 2.78333333333 minutes
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
All Programs with the contentids [u'programid://1106253121~programid://314919264'] is in RECORDED state
####STEP5: Retrieve the left diskquota after recording gets completed ######################################### 


Remaining diskspace left is fetched  via URL :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/pvrs/nPVR
Disk space left afetr recording is 28
### STEP6:Delete the first pps booking and verify the storage space is updated  ######################################### 


contentURI for the first program  is successfully retrieved

Delete PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae6ba1047551d206618c73f
PPS Booking Deleted successfully
Remaining diskspace left is fetched  via URL :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/pvrs/nPVR

#################### DEBUG STARTED ####################

Script Fetching the Household Booked/Recorded Catalog at 2018-04-30 06:45:30.758670
get all Catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog
 
Household Catalog is empty
Script Fetching Household Failed Recording Catalog at 2018-04-30 06:45:30.765871
get all failed recording catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog?filter:state=FAILED
 
Failed Recording Catalog is empty

#################### DEBUG ENDED   ####################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed : Diskquota changed to the original value after deleting the recording

2018/04/30 06:45:50 UTC ############################## ENDED :  corner_0018_US31812_TC1235_storageQuota_after_eventdelete ##############################

2018/04/30 06:45:50 UTC ############################## STARTED :  corner_0019_US31812_TC1236_storageQuota_increased ##############################

US31812: As a viewer, I want to be able to see my current storage quota status

TC1236:Available storage quota updated on UX after quota increased
Starting test corner_0019_US31812_TC1236_storageQuota_increased
### STEP1: Ingest the catalog for 2 individual event of n min each ###################################### 
 
 
{'services': { 505: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'avaisto145_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'avaisto145_2', 'rating': 1}],
         'lineupLength': 12,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:12:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.8328
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

### STEP2:Fetch the content ID of all the three event and diskquota for the first event  ###################################### 
 
 
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Retrieve Total diskQuota fetched  via URL :  http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/diskQuota
Diskquota for the household is 108000
original diskquota is 108000
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525070892000~1525078092000?lang=eng&serviceList=505&count=255&region=101&catalogueId=1
ContentId dictionary from the grid response
{u'programid://1856687964~programid://1726148121': [1525071300000, 1525071660000, 360000, u'avaisto145_2'], u'programid://1856687963~programid://1726148120': [1525070940000, 1525071300000, 360000, u'avaisto145_1']}
ContentId list after sorting
[(u'programid://1856687963~programid://1726148120', [1525070940000, 1525071300000, 360000, u'avaisto145_1']), (u'programid://1856687964~programid://1726148121', [1525071300000, 1525071660000, 360000, u'avaisto145_2'])]
### STEP3: Modify the diskquota as required by the first event booking ###################################### 
 
 
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
DiskQuota is modified  via URL :  http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/diskQuota
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Retrieve Total diskQuota fetched  via URL :  http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/diskQuota
Diskquota for the household is 720
### STEP4: Do the pps booking for the first event verify that the event is successfully recorded ###################################### 
 
 
full diskquota is 720

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings 
PPS booking is successful for the event contentId programid://1856687963~programid://1726148120
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://1856687963~programid://1726148120'] is in BOOKED state
pps booking is successfull and verified 
Recording will start in 1seconds
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
All Program with the contentid [u'programid://1856687963~programid://1726148120'] is in RECORDING state
Program Recording completes in 4.78333333333 minutes
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
All Programs with the contentids [u'programid://1856687963~programid://1726148120'] is in RECORDED state
Recording is successful
### STEP5: After recording gets complted , increase the diskquota and check whether the same is being updated in the UX #################################### 
 
 
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
DiskQuota is modified  via URL :  http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/diskQuota
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Retrieve Total diskQuota fetched  via URL :  http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/diskQuota
Diskquota for the household is 1440

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: Diskquota space has increased and updated in the UX 

2018/04/30 06:56:50 UTC ############################## ENDED :  corner_0019_US31812_TC1236_storageQuota_increased ##############################

2018/04/30 06:56:50 UTC ############################## STARTED :  corner_0020_US31812_TC1237_storageQuota_decreased ##############################

US31812: As a viewer, I want to be able to see my current storage quota status

TC1237:Available storage quota updated on UX after quota decreased
Starting test corner_0020_US31812_TC1237_storageQuota_decreased
### STEP1 ingest the catalog for 4 individual event of n min each #####################################

{'services': { 505: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'decstor145_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'decstor145_2', 'rating': 1}],
         'lineupLength': 12,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:12:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.8328
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

### STEP2 fetch the content ID of all the three event and diskquota for the first event  #####################################

Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Retrieve Total diskQuota fetched  via URL :  http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/diskQuota
Diskquota for the household is 108000
original diskquota is 108000
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525071552000~1525078752000?lang=eng&serviceList=505&count=255&region=101&catalogueId=1
ContentId dictionary from the grid response
{u'programid://1930589285~programid://1852072486': [1525071960000, 1525072320000, 360000, u'decstor145_2'], u'programid://1930589286~programid://1852072485': [1525071600000, 1525071960000, 360000, u'decstor145_1']}
ContentId list after sorting
[(u'programid://1930589286~programid://1852072485', [1525071600000, 1525071960000, 360000, u'decstor145_1']), (u'programid://1930589285~programid://1852072486', [1525071960000, 1525072320000, 360000, u'decstor145_2'])]
###STEP3: modify the diskquota as required by the first event booking , so that the storage quota is 50% full#######

Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
DiskQuota is modified  via URL :  http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/diskQuota
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Retrieve Total diskQuota fetched  via URL :  http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/diskQuota
Diskquota for the household is 720
full diskquota is 720
###STEP4: do the pps booking for the first event verify that the event is successfully recorded#######


PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings 
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://1930589286~programid://1852072485'] is in BOOKED state
pps booking is successful for the event contentId programid://1930589286~programid://1852072485
Recording will start in 46.0seconds
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
All Program with the contentid [u'programid://1930589286~programid://1852072485'] is in RECORDING state
Program Recording completes in 5.0 minutes
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
All Programs with the contentids [u'programid://1930589286~programid://1852072485'] is in RECORDED state
###STEP5: after recording gets complted , decrease the diskquota and check whether the same is being updated in the UX and no space is left for new booking####

Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
DiskQuota is modified  via URL :  http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/diskQuota
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Retrieve Total diskQuota fetched  via URL :  http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/diskQuota
Diskquota for the household is 360
Remaining diskspace left is fetched  via URL :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/pvrs/nPVR
Available diskquota for booking  is0

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: Complete diskquota is occupied after second recording is complete

2018/04/30 07:07:50 UTC ############################## ENDED :  corner_0020_US31812_TC1237_storageQuota_decreased ##############################

2018/04/30 07:07:50 UTC ############################## STARTED :  corner_0038_US31724_TC1396_Cancel_the_future_recording ##############################
{'TC1398': ['US31724', '', 3], 'TC1399': ['US31724', '', 3], 'TC1396': ['US31724', '', 3]}

US31724: UseCase: Enable Subscriber Browse for Scheduled Content via Control Plane

TC1396: Booking program displays from Search. Verify that the user can cancel the future recording from search

TC1398: Browse a scheduled recordings option from search

TC1399: Browse a scheduled recordings option from the booking list
Starting test corner_0038_US31724_TC1396_Cancel_the_future_recording


### STEP1: Ingest 1 event of n minutes ############################################

{'services': { 505: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'delbukf56_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'delbukf56_2', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'delbukf56_3', 'rating': 1}],
         'lineupLength': 12,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:12:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Wait time for the catalog ingest to get synced with the CI Host in seconds: 120.8328
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################



### STEP2: Book and verify state of the event #########################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525072212000~1525079412000?lang=eng&serviceList=505&count=255&region=101&catalogueId=1
Content id details of event in sorted manner:  [(u'programid://1458898047~programid://1689067752', [1525072260000, 1525072500000, 240000]), (u'programid://1458898046~programid://1689067750', [1525072500000, 1525072740000, 240000]), (u'programid://1458898045~programid://1689067751', [1525072740000, 1525072980000, 240000])]
List of all content ids for booking:  [u'programid://1458898047~programid://1689067752', u'programid://1458898046~programid://1689067750', u'programid://1458898045~programid://1689067751']

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings 
PPS Booking completed successfully
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://1458898047~programid://1689067752'] is in BOOKED state
Booking done and verified


### STEP3: Delete the booking ####################################################################################################


Delete PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae6c154a3078b20f29fe83a
PPS Booking Deleted successfully


### STEP4: Verify, booking deleted from booked catalog #################################################################################

Booked library fetched  via URL :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
Booked Library is empty

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: Verified the Event is successfully deleted

2018/04/30 07:10:34 UTC ############################## ENDED :  corner_0038_US31724_TC1396_Cancel_the_future_recording ##############################

2018/04/30 07:10:34 UTC ############################## STARTED :  corner_0039_US31833_TC1325_Stop_Playback ##############################
US31833: As a user I want to be able to setup playback session for recorded content
TC1325: Playback recorded content, stop playback and delete the recorded content during playback
US31742: UseCase: Delete single recording
TC1199: Delete single recording during playback . Then press stop during playback
### STEP1: Verify PRM Supported and run only proceed further if the lab supports PRM ########### 
 

Testcase Not Supported: Cannot stop the playback if PRM is not supported
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX   ^ ^ ^ ^ ^ ^ ^   XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX   W A R N I N G   XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

2018/04/30 07:10:34 UTC ############################## ENDED :  corner_0039_US31833_TC1325_Stop_Playback ##############################

2018/04/30 07:10:34 UTC ############################## STARTED :  corner_0040_US31724_TC1410_Cancel_all_booked_contents_record_them_again ##############################
{'TC1410': ['US31724', '', 3]}

US31724: Enable Subscriber Browse for Scheduled Content via Control Plane

TC1410: Cancel all booked /or scheduled contents, book them again, display in the booking list. 
Starting test corner_0040_US31724_TC1410_Cancel_all_booked_contents_record_them_again


###STEP1: Ingest 2 events of n minute with post time ##############################################################

{'services': { 505: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'rebookm41_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'rebookm41_2', 'rating': 1}],
         'lineupLength': 8,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Wait time for the catalog ingest to get synced with the CI Host in seconds: 120.5552
Doing cleanup before script execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################



###STEP2: Book the event, verify Booked state #######################################################################################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525072375000~1525079575000?lang=eng&serviceList=505&count=255&region=101&catalogueId=1
ContentId dictionary from the grid response {u'programid://1632934398~programid://2147482798': [1525072680000, 1525072920000, 240000], u'programid://1632934399~programid://2147482797': [1525072440000, 1525072680000, 240000]}
ContentID list from ContentId dictionary [(u'programid://1632934399~programid://2147482797', [1525072440000, 1525072680000, 240000]), (u'programid://1632934398~programid://2147482798', [1525072680000, 1525072920000, 240000])]
List of all content ids for booking:  [u'programid://1632934399~programid://2147482797', u'programid://1632934398~programid://2147482798']

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings 
PPS Booking completed successfully for:  programid://1632934399~programid://2147482797
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://1632934399~programid://2147482797'] is in BOOKED state
Booking library:  [
    {
        "pvr": "nPVR", 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set2_scripts_2", 
        "channelId": "505", 
        "isSynchronized": true, 
        "duration": "00:04:00", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T07:14:00Z", 
        "content": {
            "instanceId": "programid://2147482797", 
            "broadcastDateTime": 1525072440000, 
            "seasonPremiere": false, 
            "locator": "{OGUwMGM3Y2JiZWUyNmIyNDJlY2Y=,java.lang.String,NORMAL}[+]{hashKey,NORMAL}", 
            "erotic": false, 
            "audioType": "stereo", 
            "duration": 240000, 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": false, 
            "macrovision": false, 
            "id": "programid://1632934399", 
            "mixSource": false, 
            "externalKey": "rebookm41_1_505_tk04300718", 
            "audioDescription": false, 
            "restartAvailable": false, 
            "title": "rebookm41_1", 
            "allOfferIdList": [
                2
            ], 
            "mixContentId": false, 
            "contentNdsDrmAttributes": {
                "isBto": false, 
                "lastOfferEndDateTime": 1765963847000, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "rentalDuration": 2147483647, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isExtendedRental": false, 
                "isIppv": false, 
                "isPar": false, 
                "isOppv": false
            }, 
            "source": "ltv", 
            "live": false, 
            "subtitlesHardOfHearing": false, 
            "type": "instance", 
            "channel": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
            "videoFormat": "sd", 
            "wideScreen": false, 
            "isPurchasable": true, 
            "hdcp": false, 
            "serviceId": "505", 
            "adult": false, 
            "sortTitle": "rebookm41_1", 
            "endAvailability": 1525072680000, 
            "hasChapters": false, 
            "cdvrAvailable": true, 
            "seasonFinale": false, 
            "shortSynopsis": "rebookm41_1 - synopsis", 
            "synopsis": "rebookm41_1 - synopsis", 
            "broadcaster": "VGE", 
            "serviceEquivalenceKey": "505", 
            "ict": false
        }, 
        "title": "rebookm41_1", 
        "recurrence": "NONE", 
        "state": "BOOKED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "37736", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{505,java.lang.Integer,NORMAL}-|-{NDJkNjI0ZjQxZDg0ZDY5MmFmZjg=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "505", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 505, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 505", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 505", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "505", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "505", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_11328~PPS_INSTANCE_37736", 
        "startTime": "2018-04-30T07:14:00Z", 
        "bookingDuration": "00:04:00", 
        "notificationHandles": [
            "5ae6c1f72660f71ffec4eaf3"
        ], 
        "created": "2018-04-30T07:12:55Z", 
        "lastModified": "2018-04-30T07:12:55Z", 
        "contentPlayUri": "?recId=590ccf28-6f82-4d0d-aedf-058d93dcc09c", 
        "uri": "/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae6c1f72660f71ffec4eaf3", 
        "scheduleInstance": "programid://1632934399~programid://2147482797", 
        "keep": false, 
        "contentId": "programid://1632934399~programid://2147482797"
    }
]
List of all content ids for booking:  [u'programid://1632934399~programid://2147482797', u'programid://1632934398~programid://2147482798']

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings 
PPS Booking completed successfully for:  programid://1632934398~programid://2147482798
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://1632934398~programid://2147482798'] is in BOOKED state
Booking library:  [
    {
        "pvr": "nPVR", 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set2_scripts_2", 
        "channelId": "505", 
        "isSynchronized": true, 
        "duration": "00:04:00", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T07:14:00Z", 
        "content": {
            "instanceId": "programid://2147482797", 
            "broadcastDateTime": 1525072440000, 
            "seasonPremiere": false, 
            "locator": "{OGUwMGM3Y2JiZWUyNmIyNDJlY2Y=,java.lang.String,NORMAL}[+]{hashKey,NORMAL}", 
            "erotic": false, 
            "audioType": "stereo", 
            "duration": 240000, 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": false, 
            "macrovision": false, 
            "id": "programid://1632934399", 
            "mixSource": false, 
            "externalKey": "rebookm41_1_505_tk04300718", 
            "audioDescription": false, 
            "restartAvailable": false, 
            "title": "rebookm41_1", 
            "allOfferIdList": [
                2
            ], 
            "mixContentId": false, 
            "contentNdsDrmAttributes": {
                "isBto": false, 
                "lastOfferEndDateTime": 1765963847000, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "rentalDuration": 2147483647, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isExtendedRental": false, 
                "isIppv": false, 
                "isPar": false, 
                "isOppv": false
            }, 
            "source": "ltv", 
            "live": false, 
            "subtitlesHardOfHearing": false, 
            "type": "instance", 
            "channel": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
            "videoFormat": "sd", 
            "wideScreen": false, 
            "isPurchasable": true, 
            "hdcp": false, 
            "serviceId": "505", 
            "adult": false, 
            "sortTitle": "rebookm41_1", 
            "endAvailability": 1525072680000, 
            "hasChapters": false, 
            "cdvrAvailable": true, 
            "seasonFinale": false, 
            "shortSynopsis": "rebookm41_1 - synopsis", 
            "synopsis": "rebookm41_1 - synopsis", 
            "broadcaster": "VGE", 
            "serviceEquivalenceKey": "505", 
            "ict": false
        }, 
        "title": "rebookm41_1", 
        "recurrence": "NONE", 
        "state": "BOOKED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "37736", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{505,java.lang.Integer,NORMAL}-|-{NDJkNjI0ZjQxZDg0ZDY5MmFmZjg=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "505", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 505, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 505", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 505", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "505", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "505", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_11328~PPS_INSTANCE_37736", 
        "startTime": "2018-04-30T07:14:00Z", 
        "bookingDuration": "00:04:00", 
        "notificationHandles": [
            "5ae6c1f72660f71ffec4eaf3"
        ], 
        "created": "2018-04-30T07:12:55Z", 
        "lastModified": "2018-04-30T07:12:55Z", 
        "contentPlayUri": "?recId=590ccf28-6f82-4d0d-aedf-058d93dcc09c", 
        "uri": "/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae6c1f72660f71ffec4eaf3", 
        "scheduleInstance": "programid://1632934399~programid://2147482797", 
        "keep": false, 
        "contentId": "programid://1632934399~programid://2147482797"
    }, 
    {
        "pvr": "nPVR", 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set2_scripts_2", 
        "channelId": "505", 
        "isSynchronized": true, 
        "duration": "00:04:00", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T07:18:00Z", 
        "content": {
            "instanceId": "programid://2147482798", 
            "broadcastDateTime": 1525072680000, 
            "seasonPremiere": false, 
            "locator": "{NTE3Y2Y1OTlhNmQwNmM3NDg0MjE=,java.lang.String,NORMAL}[+]{hashKey,NORMAL}", 
            "erotic": false, 
            "audioType": "stereo", 
            "duration": 240000, 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": false, 
            "macrovision": false, 
            "id": "programid://1632934398", 
            "mixSource": false, 
            "externalKey": "rebookm41_2_505_tk04300722", 
            "audioDescription": false, 
            "restartAvailable": false, 
            "title": "rebookm41_2", 
            "allOfferIdList": [
                2
            ], 
            "mixContentId": false, 
            "contentNdsDrmAttributes": {
                "isBto": false, 
                "lastOfferEndDateTime": 1765963847000, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "rentalDuration": 2147483647, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isExtendedRental": false, 
                "isIppv": false, 
                "isPar": false, 
                "isOppv": false
            }, 
            "source": "ltv", 
            "live": false, 
            "subtitlesHardOfHearing": false, 
            "type": "instance", 
            "channel": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
            "videoFormat": "sd", 
            "wideScreen": false, 
            "isPurchasable": true, 
            "hdcp": false, 
            "serviceId": "505", 
            "adult": false, 
            "sortTitle": "rebookm41_2", 
            "endAvailability": 1525072920000, 
            "hasChapters": false, 
            "cdvrAvailable": true, 
            "seasonFinale": false, 
            "shortSynopsis": "rebookm41_2 - synopsis", 
            "synopsis": "rebookm41_2 - synopsis", 
            "broadcaster": "VGE", 
            "serviceEquivalenceKey": "505", 
            "ict": false
        }, 
        "title": "rebookm41_2", 
        "recurrence": "NONE", 
        "state": "BOOKED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "37737", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{505,java.lang.Integer,NORMAL}-|-{NDJkNjI0ZjQxZDg0ZDY5MmFmZjg=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "505", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 505, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 505", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 505", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "505", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "505", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_11329~PPS_INSTANCE_37737", 
        "startTime": "2018-04-30T07:18:00Z", 
        "bookingDuration": "00:04:00", 
        "notificationHandles": [
            "5ae6c1f9f365362240f145af"
        ], 
        "created": "2018-04-30T07:12:57Z", 
        "lastModified": "2018-04-30T07:12:57Z", 
        "contentPlayUri": "?recId=c7b1e870-c43b-4722-8885-c08716a63e25", 
        "uri": "/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae6c1f9f365362240f145af", 
        "scheduleInstance": "programid://1632934398~programid://2147482798", 
        "keep": false, 
        "contentId": "programid://1632934398~programid://2147482798"
    }
]
All the events were succesfully booked, will delete the bookings now


###STEP3: Delete the booking ###########################################################################################


Delete PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae6c1f72660f71ffec4eaf3
PPS Booking Deleted successfully
Booked event was succesfully deleted

Delete PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae6c1f9f365362240f145af
PPS Booking Deleted successfully
Booked event was succesfully deleted
Verifying booking catalog for succesfull deletion of events
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
Booking Catalog is empty
Booking catalog is empty after deletion of events
All the events were succesfully deleted and verified from booked catalog


###STEP4: Rebook the event and verify Booked state #################################################################################################

List of all content ids for booking:  [u'programid://1632934399~programid://2147482797', u'programid://1632934398~programid://2147482798']

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings 
PPS Booking completed successfully for:  programid://1632934399~programid://2147482797
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://1632934399~programid://2147482797'] is in BOOKED state
Rebooking done succesfully for:  programid://1632934399~programid://2147482797
List of all content ids for booking:  [u'programid://1632934399~programid://2147482797', u'programid://1632934398~programid://2147482798']

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings 
PPS Booking completed successfully for:  programid://1632934398~programid://2147482798
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://1632934398~programid://2147482798'] is in BOOKED state
Rebooking done succesfully for:  programid://1632934398~programid://2147482798

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: Events were succesfully rebooked

2018/04/30 07:13:23 UTC ############################## ENDED :  corner_0040_US31724_TC1410_Cancel_all_booked_contents_record_them_again ##############################

2018/04/30 07:13:23 UTC ############################## STARTED :  corner_0041_US31724_TC1402_Cancel_Booking_Before1Minute ##############################
{'TC1402': ['US31724', '', 3]}

US31724: UseCase: Enable Subscriber Browse for Scheduled Content via Control Plane
TC1402: Cancel the scheduled recordings from the booking list 1 minute before the recording starts, display in the booking list
Starting test corner_0041_US31724_TC1402_Cancel_Booking_Before1Minute


### STEP1: Ingest 1 event of n minutes (Post time 5 minutes later than present time) #########################################################################################

{'services': { 505: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'cancelmn56_1', 'rating': 1}], 'lineupLength': 4, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:04:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.2776
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525072544000~1525079744000?lang=eng&serviceList=505&count=255&region=101&catalogueId=1
Content id details of event in sorted manner:  [(u'programid://1567655282~programid://612435847', [1525072740000, 1525072980000, 240000])]
Contentid list :  [u'programid://1567655282~programid://612435847'] 



### STEP2: Book and verify the event state as BOOKED ##########################################################################################################


PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings 
PPS Booking completed successfully for the contentId programid://1567655282~programid://612435847
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://1567655282~programid://612435847'] is in BOOKED state


### Step3: wait till the time, 1 minute before program starts #########################################################################################

Script will wait for  134.0  seconds
Now, its 1 minutes left for the program to start, will cancel the booking


### STEP4: Cancel the booking ###########################################################################################################


Delete PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae6c2a096094c205988ec21
PPS Booking Deleted successfully


### STEP5: Verify that the event is not present in Booking catalog #######################################################################################

get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
Booking Catalog is empty
Booking catalog is empty after deletion of event

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: Event deleted succesfully before 1 minutes and verified from booking catalog

2018/04/30 07:18:20 UTC ############################## ENDED :  corner_0041_US31724_TC1402_Cancel_Booking_Before1Minute ##############################

2018/04/30 07:18:20 UTC ############################## STARTED :  corner_0042_US31739_TC1371_record_two_households ##############################

 US31739: UseCase: Schedule Event based Recording on Control Plane

 TC1371: Record future program from EPG Grid, on two different households
Starting test corner_0042_US31739_TC1371_record_two_households
### STEP1: Ingest 1 Event of 3 Minutes duration to the CI Host with the post time######### 
 

{'services': { 505: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'rec2futu409_1', 'rating': 1}], 'lineupLength': 3, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:03:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Wait time for the catalog ingest to get synced with the CI Host in seconds: 120.2082
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

### STEP2: Fetch the Grid Request and do the booking for the future program on 2 households########### 
 

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525072861000~1525080061000?lang=eng&serviceList=505&count=255&region=101&catalogueId=1
Current Time: 2018-04-30 07:21:01.128128
Content StartTime: 1525072860000
Content EndTime: 1525073040000

#################### DEBUG STARTED ####################

Grid Response
{
    "services": [
        {
            "locator": "{505,java.lang.Integer,NORMAL}-|-{NDJkNjI0ZjQxZDg0ZDY5MmFmZjg=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "505", 
            "contents": [
                {
                    "instanceId": "programid://2147482798", 
                    "broadcastDateTime": 1525072680000, 
                    "seasonPremiere": false, 
                    "locator": "{1525072680000,java.lang.Long,NORMAL}-|-{4pKX5KmQ5qGn44+x5YKg4aSI4rCC4LyB3oAAAA==,java.lang.String,NORMAL}-|-{bHR2Q29udGVudA==,java.lang.String,NORMAL}-|-{NTE3Y2Y1OTlhNmQwNmM3NDg0MjE=,java.lang.String,NORMAL}[+]{broadcastDateTime,NORMAL}-|-{sort.title.eng,NORMAL}-|-{aggregationType,NORMAL}-|-{hashKey,NORMAL}", 
                    "erotic": false, 
                    "audioType": "stereo", 
                    "duration": 240000, 
                    "offerIdList": [
                        2
                    ], 
                    "catchupAvailable": false, 
                    "macrovision": false, 
                    "id": "programid://1632934398", 
                    "mixSource": false, 
                    "externalKey": "rebookm41_2_505_tk04300722", 
                    "audioDescription": false, 
                    "restartAvailable": false, 
                    "title": "rebookm41_2", 
                    "allOfferIdList": [
                        2
                    ], 
                    "mixContentId": false, 
                    "contentNdsDrmAttributes": {
                        "isBto": false, 
                        "lastOfferEndDateTime": 1765963847000, 
                        "isDrmFree": false, 
                        "price": 20, 
                        "isIsu": false, 
                        "rentalDuration": 2147483647, 
                        "isSubscription": true, 
                        "currencySymbol": "$", 
                        "isExtendedRental": false, 
                        "isIppv": false, 
                        "isPar": false, 
                        "isOppv": false
                    }, 
                    "source": "ltv", 
                    "live": false, 
                    "subtitlesHardOfHearing": false, 
                    "type": "instance", 
                    "channel": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "videoFormat": "sd", 
                    "wideScreen": false, 
                    "isPurchasable": true, 
                    "hdcp": false, 
                    "serviceId": "505", 
                    "adult": false, 
                    "sortTitle": "rebookm41_2", 
                    "endAvailability": 1525072920000, 
                    "hasChapters": false, 
                    "cdvrAvailable": true, 
                    "seasonFinale": false, 
                    "shortSynopsis": "rebookm41_2 - synopsis", 
                    "synopsis": "rebookm41_2 - synopsis", 
                    "broadcaster": "VGE", 
                    "serviceEquivalenceKey": "505", 
                    "ict": false
                }, 
                {
                    "instanceId": "programid://612435847", 
                    "broadcastDateTime": 1525072740000, 
                    "seasonPremiere": false, 
                    "locator": "{1525072740000,java.lang.Long,NORMAL}-|-{4ZaT5YGK5pen5Y+04KOg56CZ0KjEkMKIAAE=,java.lang.String,NORMAL}-|-{bHR2Q29udGVudA==,java.lang.String,NORMAL}-|-{YTY3YTYwNjY0ZDJkYmUzYzM1Y2I=,java.lang.String,NORMAL}[+]{broadcastDateTime,NORMAL}-|-{sort.title.eng,NORMAL}-|-{aggregationType,NORMAL}-|-{hashKey,NORMAL}", 
                    "erotic": false, 
                    "audioType": "stereo", 
                    "duration": 240000, 
                    "offerIdList": [
                        2
                    ], 
                    "catchupAvailable": false, 
                    "macrovision": false, 
                    "id": "programid://1567655282", 
                    "mixSource": false, 
                    "externalKey": "cancelmn56_1_505_tk04300723", 
                    "audioDescription": false, 
                    "restartAvailable": false, 
                    "title": "cancelmn56_1", 
                    "allOfferIdList": [
                        2
                    ], 
                    "mixContentId": false, 
                    "contentNdsDrmAttributes": {
                        "isBto": false, 
                        "lastOfferEndDateTime": 1765963847000, 
                        "isDrmFree": false, 
                        "price": 20, 
                        "isIsu": false, 
                        "rentalDuration": 2147483647, 
                        "isSubscription": true, 
                        "currencySymbol": "$", 
                        "isExtendedRental": false, 
                        "isIppv": false, 
                        "isPar": false, 
                        "isOppv": false
                    }, 
                    "source": "ltv", 
                    "live": false, 
                    "subtitlesHardOfHearing": false, 
                    "type": "instance", 
                    "channel": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "videoFormat": "sd", 
                    "wideScreen": false, 
                    "isPurchasable": true, 
                    "hdcp": false, 
                    "serviceId": "505", 
                    "adult": false, 
                    "sortTitle": "cancelmn56_1", 
                    "endAvailability": 1525072980000, 
                    "hasChapters": false, 
                    "cdvrAvailable": true, 
                    "seasonFinale": false, 
                    "shortSynopsis": "cancelmn56_1 - synopsis", 
                    "synopsis": "cancelmn56_1 - synopsis", 
                    "broadcaster": "VGE", 
                    "serviceEquivalenceKey": "505", 
                    "ict": false
                }, 
                {
                    "instanceId": "programid://1689067751", 
                    "broadcastDateTime": 1525072740000, 
                    "seasonPremiere": false, 
                    "locator": "{1525072740000,java.lang.Long,NORMAL}-|-{4ZqX5L2K4qen44yR5oOw4aSI44CC4LyB3oAAAA==,java.lang.String,NORMAL}-|-{bHR2Q29udGVudA==,java.lang.String,NORMAL}-|-{NjQwNjZhNGU4ODJjYWNhYmNmZmY=,java.lang.String,NORMAL}[+]{broadcastDateTime,NORMAL}-|-{sort.title.eng,NORMAL}-|-{aggregationType,NORMAL}-|-{hashKey,NORMAL}", 
                    "erotic": false, 
                    "audioType": "stereo", 
                    "duration": 240000, 
                    "offerIdList": [
                        2
                    ], 
                    "catchupAvailable": false, 
                    "macrovision": false, 
                    "id": "programid://1458898045", 
                    "mixSource": false, 
                    "externalKey": "delbukf56_3_505_tk04300723", 
                    "audioDescription": false, 
                    "restartAvailable": false, 
                    "title": "delbukf56_3", 
                    "allOfferIdList": [
                        2
                    ], 
                    "mixContentId": false, 
                    "contentNdsDrmAttributes": {
                        "isBto": false, 
                        "lastOfferEndDateTime": 1765963847000, 
                        "isDrmFree": false, 
                        "price": 20, 
                        "isIsu": false, 
                        "rentalDuration": 2147483647, 
                        "isSubscription": true, 
                        "currencySymbol": "$", 
                        "isExtendedRental": false, 
                        "isIppv": false, 
                        "isPar": false, 
                        "isOppv": false
                    }, 
                    "source": "ltv", 
                    "live": false, 
                    "subtitlesHardOfHearing": false, 
                    "type": "instance", 
                    "channel": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "videoFormat": "sd", 
                    "wideScreen": false, 
                    "isPurchasable": true, 
                    "hdcp": false, 
                    "serviceId": "505", 
                    "adult": false, 
                    "sortTitle": "delbukf56_3", 
                    "endAvailability": 1525072980000, 
                    "hasChapters": false, 
                    "cdvrAvailable": true, 
                    "seasonFinale": false, 
                    "shortSynopsis": "delbukf56_3 - synopsis", 
                    "synopsis": "delbukf56_3 - synopsis", 
                    "broadcaster": "VGE", 
                    "serviceEquivalenceKey": "505", 
                    "ict": false
                }, 
                {
                    "instanceId": "programid://1351774610", 
                    "broadcastDateTime": 1525072860000, 
                    "seasonPremiere": false, 
                    "locator": "{1525072860000,java.lang.Long,NORMAL}-|-{4pKX5KuF5Jip55OU56OQ5KKQ4LKE4ZCB4KKA5JGAAAA=,java.lang.String,NORMAL}-|-{bHR2Q29udGVudA==,java.lang.String,NORMAL}-|-{ZjJkY2I2MjU2NDMyNmYwZWU0YzM=,java.lang.String,NORMAL}[+]{broadcastDateTime,NORMAL}-|-{sort.title.eng,NORMAL}-|-{aggregationType,NORMAL}-|-{hashKey,NORMAL}", 
                    "erotic": false, 
                    "audioType": "stereo", 
                    "duration": 180000, 
                    "offerIdList": [
                        2
                    ], 
                    "catchupAvailable": false, 
                    "macrovision": false, 
                    "id": "programid://1589097242", 
                    "mixSource": false, 
                    "externalKey": "rec2futu409_1_505_tk04300724", 
                    "audioDescription": false, 
                    "restartAvailable": false, 
                    "title": "rec2futu409_1", 
                    "allOfferIdList": [
                        2
                    ], 
                    "mixContentId": false, 
                    "contentNdsDrmAttributes": {
                        "isBto": false, 
                        "lastOfferEndDateTime": 1765963847000, 
                        "isDrmFree": false, 
                        "price": 20, 
                        "isIsu": false, 
                        "rentalDuration": 2147483647, 
                        "isSubscription": true, 
                        "currencySymbol": "$", 
                        "isExtendedRental": false, 
                        "isIppv": false, 
                        "isPar": false, 
                        "isOppv": false
                    }, 
                    "source": "ltv", 
                    "live": false, 
                    "subtitlesHardOfHearing": false, 
                    "type": "instance", 
                    "channel": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "videoFormat": "sd", 
                    "wideScreen": false, 
                    "isPurchasable": true, 
                    "hdcp": false, 
                    "serviceId": "505", 
                    "adult": false, 
                    "sortTitle": "rec2futu409_1", 
                    "endAvailability": 1525073040000, 
                    "hasChapters": false, 
                    "cdvrAvailable": true, 
                    "seasonFinale": false, 
                    "shortSynopsis": "rec2futu409_1 - synopsis", 
                    "synopsis": "rec2futu409_1 - synopsis", 
                    "broadcaster": "VGE", 
                    "serviceEquivalenceKey": "505", 
                    "ict": false
                }
            ], 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 505, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 505", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 505", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "505", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "505", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }
    ], 
    "header": {
        "total": 1
    }, 
    "error": null
}

#################### DEBUG ENDED   ####################

Content ID Dictionary is empty
Programs from the grid response which is in future None

#################### DEBUG STARTED ####################

Script Fetching the Household Booked/Recorded Catalog at 2018-04-30 07:21:01.131023
get all Catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_0/catalog
 
Household Catalog is empty
Script Fetching Household Failed Recording Catalog at 2018-04-30 07:21:01.138573
get all failed recording catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_0/catalog?filter:state=FAILED
 
Failed Recording Catalog is empty

#################### DEBUG ENDED   ####################


#################### DEBUG STARTED ####################

Script Fetching the Household Booked/Recorded Catalog at 2018-04-30 07:21:01.144227
get all Catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_1/catalog
 
Household Catalog is empty
Script Fetching Household Failed Recording Catalog at 2018-04-30 07:21:01.151335
get all failed recording catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_1/catalog?filter:state=FAILED
 
Failed Recording Catalog is empty

#################### DEBUG ENDED   ####################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Failed: Error in retrieving content ID dictionary from the Grid Response
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX   ^ ^ ^ ^ ^   XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX   E R R O R   XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

2018/04/30 07:21:41 UTC ############################## ENDED :  corner_0042_US31739_TC1371_record_two_households ##############################

2018/04/30 07:21:41 UTC ############################## STARTED :  corner_0043_US31739_TC1374_book_cancel_rebook ##############################
{'TC1374': ['US31739', '', 3], 'TC1206': ['US31742', '', 3], 'TC1531': ['US31721', '', 3]}

 US31739: UseCase: Schedule Event based Recording on Control Plane

TC1374: From the EPG grid, schedule a future program for recording.  Once the program has been booked, delete the booking.  Once the program has been confirmed removed from the Bookings list, re-book the event.  Confirm that the event can be successfully booked 

 US31721: Delete cDVR Bookings by Subscriber

 TC1531: Delete schedule single recording, schedule single recording again. Verify that the scheduled single event will be shown in the Schedule Recordings list and recorded in the Schedule Recordings list

 US31742: UseCase: Delete single recording

 TC1206: Delete single event BOOKING, confirm household can REBOOK the same single event
Starting test corner_0043_US31739_TC1374_book_cancel_rebook


###STEP1: Ingest 2 events of n minute with post time #######################################################################################

{'services': { 505: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'bkdlrbk46_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'bkdlrbk46_2', 'rating': 1}],
         'lineupLength': 8,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Wait time for the catalog ingest to get synced with the CI Host in seconds: 120.5552
Doing cleanup before script execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################



###STEP2: Book the event, verify Booked state #######################################################################################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525073042000~1525080242000?lang=eng&serviceList=505&count=255&region=101&catalogueId=1
Content id details of event in sorted manner:  [(u'programid://2112171915~programid://2147482801', [1525073100000, 1525073340000, 240000]), (u'programid://2112171914~programid://2147482802', [1525073340000, 1525073580000, 240000])]
List of all content ids for booking:  [u'programid://2112171915~programid://2147482801', u'programid://2112171914~programid://2147482802']

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings 
PPS Booking completed successfully for:  programid://2112171915~programid://2147482801
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://2112171915~programid://2147482801'] is in BOOKED state


###STEP3: Delete the booking ###########################################################################################


Delete PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae6c492e9c28320e2419980
PPS Booking Deleted successfully
Booked event was succesfully deleted
Verifying booking catalog for succesfull deletion of events
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
Booking Catalog is empty
Booking catalog is empty after deletion of events
All the events were succesfully deleted and verified from booked catalog


###STEP4: Rebook the event and verify Booked state #################################################################################################

List of all content ids for booking:  [u'programid://2112171915~programid://2147482801', u'programid://2112171914~programid://2147482802']

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings 
PPS Booking completed successfully for:  programid://2112171915~programid://2147482801
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://2112171915~programid://2147482801'] is in BOOKED state
Event was succesfully rebooked


###STEP5: Record the rebooked event ####################################################################################################

get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
All Program with the contentid [u'programid://2112171915~programid://2147482801'] is in RECORDING state
script will wait for  180.0  seconds for recording to complete
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
All Programs with the contentids [u'programid://2112171915~programid://2147482801'] is in RECORDED state

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: Rebooked event was recorded succesfully

2018/04/30 07:30:50 UTC ############################## ENDED :  corner_0043_US31739_TC1374_book_cancel_rebook ##############################

2018/04/30 07:30:50 UTC ############################## STARTED :  corner_0044_US31724_TC1408_Right_after_booking_recording_check_the_booking_program_in_the_booking_list ##############################

 US31724: UseCase: Enable Subscriber Browse for Scheduled Content via Control Plane

 TC1408:Book a content. Right after booking recording, the booking prorram will be shown in the booking list
Starting test corner_0044_US31724_TC1408_Right_after_booking_recording_check_the_booking_program_in_the_booking_list
### STEP1:ingest the catalog with 2event of 3min each ############################################################


{'services': { 505: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'chkbook307_1', 'rating': 1}], 'lineupLength': 4, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:04:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.2776
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

### STEP2:do the pps booking of the event and verify that it is booked successfully ############################################################


cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525073591000~1525080791000?lang=eng&serviceList=505&count=255&region=101&catalogueId=1
ContentId dictionary from the grid response
{u'programid://1117662935~programid://763100858': [1525073640000, 1525073880000, 240000, u'chkbook307_1']}
ContentId list after sorting
[(u'programid://1117662935~programid://763100858', [1525073640000, 1525073880000, 240000, u'chkbook307_1'])]

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings 
PPS Booking is successfull for the event contentId programid://1117662935~programid://763100858
### STEP3:verify that the booked event is present in the catalog and state is booked ############################################################


get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://1117662935~programid://763100858'] is in BOOKED state

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: Booked catalog is verified successfully, event are present in the catalog  

2018/04/30 07:33:33 UTC ############################## ENDED :  corner_0044_US31724_TC1408_Right_after_booking_recording_check_the_booking_program_in_the_booking_list ##############################

2018/04/30 07:33:33 UTC ############################## STARTED :  corner_US31229_TC1703 ##############################

US31229: Review existing Basic/Feature Test scripts and identify modifications that need to be made

TC1703: Multiple households Book the same single event at different times, only one copy in storage
Starting test corner_US31229_TC1703


# STEP1: Make sure 3 Households present in the CDVR System ###################


# STEP2: Ingest an event of n-2 minutes with the posttime of 3n Minutes to the CI Host ###################
{'services': { 505: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 2, 'programID': 'recinc140_1', 'rating': 1}], 'lineupLength': 2, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:02:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.1388
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################



# STEP3: Do the PPS Booking for the same event on Household1 and Household2 after n minutes of wait time and Verify the Booked catalog###################
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525073794000~1525080994000?lang=eng&serviceList=505&count=255&region=101&catalogueId=1
{"services":[{"id":"505","name":"Service 505","description":"Service Description 505","provider":"VGE","logicalChannelNumber":505,"runningStatus":true,"drmProtected":false,"scheduleAvailable":true,"hidden":false,"recordControl":"noRecording","type":"1","genres":[{"id":1,"type":"Action/Adventure","_links":{"genres":{"href":"/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"}}}],"serviceDeliveries":[{"type":"abr","uri":"http://linear.cdvr.primetime.com/coid/coid.m3u8","mode":"hlsabr","externalServiceId":"505","bandwidth":15}],"contents":[{"id":"programid://1117662935","externalKey":"chkbook307_1_505_tk04300738","type":"instance","adult":false,"erotic":false,"source":"ltv","instanceId":"programid://763100858","title":"chkbook307_1","locator":"{1525073640000,java.lang.Long,NORMAL}-|-{4Zaa5LuK4qGo446x5IKRGdCoxJDCiAAB,java.lang.String,NORMAL}-|-{bHR2Q29udGVudA==,java.lang.String,NORMAL}-|-{ODRhMWJjNDJjOTgyODJiODUwMDU=,java.lang.String,NORMAL}[+]{broadcastDateTime,NORMAL}-|-{sort.title.eng,NORMAL}-|-{aggregationType,NORMAL}-|-{hashKey,NORMAL}","channel":"http://linear.cdvr.primetime.com/coid/coid.m3u8","serviceId":"505","serviceEquivalenceKey":"505","duration":240000,"mixSource":false,"mixContentId":false,"broadcastDateTime":1525073640000,"contentNdsDrmAttributes":{"isIppv":false,"isOppv":false,"isSubscription":true,"isDrmFree":false,"price":20,"currencySymbol":"$","isIsu":false,"isBto":false,"lastOfferEndDateTime":1765963847000,"rentalDuration":2147483647,"isPar":false,"isExtendedRental":false},"sortTitle":"chkbook307_1","hdcp":false,"synopsis":"chkbook307_1 - synopsis","shortSynopsis":"chkbook307_1 - synopsis","audioType":"stereo","macrovision":false,"wideScreen":false,"broadcaster":"VGE","videoFormat":"sd","endAvailability":1525073880000,"audioDescription":false,"subtitlesHardOfHearing":false,"ict":false,"live":false,"restartAvailable":false,"catchupAvailable":false,"offerIdList":[2],"isPurchasable":true,"seasonPremiere":false,"seasonFinale":false,"hasChapters":false,"cdvrAvailable":true,"allOfferIdList":[2]},{"id":"programid://2147475644","externalKey":"recinc140_1_505_tk04300748","type":"instance","adult":false,"erotic":false,"source":"ltv","instanceId":"programid://2147482805","title":"recinc140_1","locator":"{1525074360000,java.lang.Long,NORMAL}-|-{4pKX5KuN5qCl44WB5YKQ4aSI4qCC4LyB3oAAAA==,java.lang.String,NORMAL}-|-{bHR2Q29udGVudA==,java.lang.String,NORMAL}-|-{YjA1NjE5Yzk3YjVmYmQ5YmRmMDE=,java.lang.String,NORMAL}[+]{broadcastDateTime,NORMAL}-|-{sort.title.eng,NORMAL}-|-{aggregationType,NORMAL}-|-{hashKey,NORMAL}","channel":"http://linear.cdvr.primetime.com/coid/coid.m3u8","serviceId":"505","serviceEquivalenceKey":"505","duration":120000,"mixSource":false,"mixContentId":false,"broadcastDateTime":1525074360000,"contentNdsDrmAttributes":{"isIppv":false,"isOppv":false,"isSubscription":true,"isDrmFree":false,"price":20,"currencySymbol":"$","isIsu":false,"isBto":false,"lastOfferEndDateTime":1765963847000,"rentalDuration":2147483647,"isPar":false,"isExtendedRental":false},"sortTitle":"recinc140_1","hdcp":false,"synopsis":"recinc140_1 - synopsis","shortSynopsis":"recinc140_1 - synopsis","audioType":"stereo","macrovision":false,"wideScreen":false,"broadcaster":"VGE","videoFormat":"sd","endAvailability":1525074480000,"audioDescription":false,"subtitlesHardOfHearing":false,"ict":false,"live":false,"restartAvailable":false,"catchupAvailable":false,"offerIdList":[2],"isPurchasable":true,"seasonPremiere":false,"seasonFinale":false,"hasChapters":false,"cdvrAvailable":true,"allOfferIdList":[2]}],"locator":"{505,java.lang.Integer,NORMAL}-|-{NDJkNjI0ZjQxZDg0ZDY5MmFmZjg=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}","operatorSpecificData":[{"namespace":"urn:nnds:mercury:service:PPV","data":"false"}],"serviceNdsDrmAttributes":{"isIppv":false,"isOppv":false,"isSubscription":true,"isDrmFree":false,"hasFecm":false,"price":20,"currencySymbol":"$","isIsu":false,"isBundle":false},"parentalRating":{"scheme":"custom","rating":2},"_links":{"parentalRatings":[{"href":"/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"}]},"restartAvailable":true,"catchupAvailable":true,"adult":false,"storeAvailable":false,"relatedRecommendationsAvailable":true,"offerIdList":[2],"isPurchasable":true,"serviceEquivalenceKey":"505","cdvrAvailable":true,"protectionType":"VGS"}],"error":null,"header":{"total":1}}
ContentId dictionary from the grid response
{u'programid://2147475644~programid://2147482805': [1525074360000, 1525074480000, 120000, u'recinc140_1']}
ContentId list after sorting
[(u'programid://2147475644~programid://2147482805', [1525074360000, 1525074480000, 120000, u'recinc140_1'])]
{
                                    "checkConflicts": true,
                                    "pvr": "nPVR",
                                    "scheduleInstanceId": "programid://2147475644~programid://2147482805"
                                }
waiting for n minutes before doing booking

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_1/bookings 
PPS booking is successful for the event contentId programid://2147475644~programid://2147482805
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_1/bookings
 
All programs with the contentids [u'programid://2147475644~programid://2147482805'] is in BOOKED state
PPS Booking is successful and verified

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings 
PPS booking is successful for the event contentId programid://2147475644~programid://2147482805
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://2147475644~programid://2147482805'] is in BOOKED state
PPS Booking is successful and verified


# STEP4. Wait for another n minutes and do the PPS Booking of same event on Household3 ###################
waiting for n minutes before doing bookiing on third household

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_3/bookings 
PPS booking is successful for the event contentId programid://2147475644~programid://2147482805
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_3/bookings
 
All programs with the contentids [u'programid://2147475644~programid://2147482805'] is in BOOKED state
PPS Booking is successful and verified
booking is successfull for all the household


# STEP5: Wait till the Event Recording completes and verify the recorded catalog has the event present on all 3 Households ###################
Recording will end in 676.0seconds
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_1/recordings
 
All Programs with the contentids [u'programid://2147475644~programid://2147482805'] is in RECORDED state
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
All Programs with the contentids [u'programid://2147475644~programid://2147482805'] is in RECORDED state
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_3/recordings
 
All Programs with the contentids [u'programid://2147475644~programid://2147482805'] is in RECORDED state
event is successfully recorded for all the three household


# STEP6: Get the contentplayuri from the Recorded Catalog on 3 Households ###################


# STEP7: Get the recordingid using the contentplayuri and RM playback API for all 3 Household recordings ###################


# STEP8: Get the actualstarttime and actualendtime for all recordingids from STEP8 using the VMR API Request ###################


# STEP9: Verify actualstarttime and actualendtime from STEP9 matching for all household recordingids successfully ###################


# STEP10: Get all the segments using the actualstarttime and actualendtime from the VMR API Request and store it in a temp file ###################


# STEP11:Verify 200 OK Response in the COS Active Storage with 'X-Fanout-Copy-Index': '0' using isid/segmentid/batchid on all the segments from a temp file and 416 Requested Range Not Satisfiable Responsewith 'X-Fanout-Copy-Index':1 ###################
### Started Common copy verification ###
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_1/recordings
 
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_3/recordings
 
Playback URI list : [u'?recId=87553d99-1315-4201-81bb-a703a6c86a9a', u'?recId=2e36d0d7-e78d-4340-8861-083f54415942', u'?recId=d679d325-06c8-49e1-a854-ec127ef19e70']
URL to get contentid from recoring id : http://rr.cdvr.dcpt01.ciscocdvr.net:80/recordingInfo/87553d99-1315-4201-81bb-a703a6c86a9a?contentType=MPEG4&mode=playback&responseFormat=json
URL to get contentid from recoring id : http://rr.cdvr.dcpt01.ciscocdvr.net:80/recordingInfo/2e36d0d7-e78d-4340-8861-083f54415942?contentType=MPEG4&mode=playback&responseFormat=json
URL to get contentid from recoring id : http://rr.cdvr.dcpt01.ciscocdvr.net:80/recordingInfo/d679d325-06c8-49e1-a854-ec127ef19e70?contentType=MPEG4&mode=playback&responseFormat=json
ContentId list : [u'b28e9a04-de5d-4b5b-8f7a-ba6fc9fe9676', u'bc65db43-addd-41e4-aab8-6b2bb3f76396', u'708aeef2-95f4-465e-a741-9d5902d75d0a']

URL to get the stream id, start time and end time: http://192.168.21.66:9999/api/findxrid/b28e9a04-de5d-4b5b-8f7a-ba6fc9fe9676
JSON response : [{"XRID":"b28e9a04-de5d-4b5b-8f7a-ba6fc9fe9676","IRID":"38280596832678161","CopyType":"UNIQUE","ISID":"505","AccountID":"AUTO_3006_cornercase_set2_scripts_1","BatchID":1,"StartTime":"2018-04-30T07:46:00Z","EndTime":"2018-04-30T07:48:00Z","ScheduledTime":"2018-04-30T07:36:59.982Z","ActualStartTime":"2018-04-30T07:45:58.761198Z","ActualEndTime":"2018-04-30T07:48:04.887198Z","StreamID":"505","AdZone":"0","StationID":"505","A8UpdateURL":"http://rr.cdvr.dcpt01.ciscocdvr.net:80/a8/update/PRIMETIME_RECORDER","ErasedTime":"0001-01-01T00:00:00Z","ErrorCode":0,"Status":"COMPLETE"}]

URL to get the stream id, start time and end time: http://192.168.21.66:9999/api/findxrid/bc65db43-addd-41e4-aab8-6b2bb3f76396
JSON response : [{"XRID":"bc65db43-addd-41e4-aab8-6b2bb3f76396","IRID":"38280596832678160","CopyType":"UNIQUE","ISID":"505","AccountID":"AUTO_3006_cornercase_set2_scripts_2","BatchID":1,"StartTime":"2018-04-30T07:46:00Z","EndTime":"2018-04-30T07:48:00Z","ScheduledTime":"2018-04-30T07:36:59.981Z","ActualStartTime":"2018-04-30T07:45:58.761198Z","ActualEndTime":"2018-04-30T07:48:04.887198Z","StreamID":"505","AdZone":"0","StationID":"505","A8UpdateURL":"http://rr.cdvr.dcpt01.ciscocdvr.net:80/a8/update/PRIMETIME_RECORDER","ErasedTime":"0001-01-01T00:00:00Z","ErrorCode":0,"Status":"COMPLETE"}]

URL to get the stream id, start time and end time: http://192.168.21.66:9999/api/findxrid/708aeef2-95f4-465e-a741-9d5902d75d0a
JSON response : [{"XRID":"708aeef2-95f4-465e-a741-9d5902d75d0a","IRID":"36028797018997143","CopyType":"UNIQUE","ISID":"505","AccountID":"AUTO_3006_cornercase_set2_scripts_3","BatchID":1,"StartTime":"2018-04-30T07:46:00Z","EndTime":"2018-04-30T07:48:00Z","ScheduledTime":"2018-04-30T07:36:59.993Z","ActualStartTime":"2018-04-30T07:45:58.761198Z","ActualEndTime":"2018-04-30T07:48:04.887198Z","StreamID":"505","AdZone":"0","StationID":"505","A8UpdateURL":"http://rr.cdvr.dcpt01.ciscocdvr.net:80/a8/update/PRIMETIME_RECORDER","ErasedTime":"0001-01-01T00:00:00Z","ErrorCode":0,"Status":"COMPLETE"}]
Stream id , Starttime and Endtime List: [[u'505', u'20180430074558.761198', u'20180430074804.887198', u'505', 1], [u'505', u'20180430074558.761198', u'20180430074804.887198', u'505', 1], [u'505', u'20180430074558.761198', u'20180430074804.887198', u'505', 1]]
MainList: [u'20180430074558.761198', u'20180430074804.887198']
StreamId : 505 ISIS : 505 BatchID : 1
URL to get segment response : http://192.168.21.66:9999/api/streams/505/segments?start=20180430074558&end=20180430074804
HTTPConnectionPool(host='192.168.22.6', port=80): Read timed out.
Problem accessing ...... http://192.168.22.6/rio/active/isid/505/segmentid/37154696931863415/batchid/1
Response to verify fanout value is none

#################### DEBUG STARTED ####################

Script Fetching the Household Booked/Recorded Catalog at 2018-04-30 07:49:34.444425
get all Catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_1/catalog
 
Household Booked/Recorded Catalog Response:
[
    {
        "pvr": "nPVR", 
        "partialContent": false, 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set2_scripts_1", 
        "channelId": "505", 
        "isSynchronized": true, 
        "duration": "00:02:06", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T07:46:00Z", 
        "content": {
            "shortSynopsis": "recinc140_1 - synopsis", 
            "title": "recinc140_1", 
            "instanceId": "PPS_INSTANCE_37769", 
            "recordingId": "37769", 
            "broadcastDateTime": 1525074360000, 
            "synopsis": "recinc140_1 - synopsis", 
            "endAvailability": 1525074480000, 
            "source": "pvr", 
            "erotic": false, 
            "serviceId": "505", 
            "adult": false, 
            "sortTitle": "recinc140_1", 
            "duration": 120000, 
            "serviceEquivalenceKey": "505", 
            "type": "instance", 
            "id": "PPS_CONTENT_11389"
        }, 
        "title": "recinc140_1", 
        "recurrence": "NONE", 
        "state": "RECORDED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "37769", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{505,java.lang.Integer,NORMAL}-|-{NDJkNjI0ZjQxZDg0ZDY5MmFmZjg=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "505", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 505, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 505", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 505", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "505", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "505", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_11389~PPS_INSTANCE_37769", 
        "startTime": "2018-04-30T07:45:58Z", 
        "bookingDuration": "00:02:00", 
        "notificationHandles": [
            "5ae6c78429368720c773d0e3"
        ], 
        "created": "2018-04-30T07:36:36Z", 
        "lastModified": "2018-04-30T07:48:19Z", 
        "contentPlayUri": "?recId=87553d99-1315-4201-81bb-a703a6c86a9a", 
        "uri": "/pps/households/AUTO_3006_cornercase_set2_scripts_1/catalog/5ae6c78429368720c773d0e3", 
        "scheduleInstance": "programid://2147475644~programid://2147482805", 
        "keep": false, 
        "contentId": "PPS_CONTENT_11389~PPS_INSTANCE_37769"
    }
]
Script Fetching Household Failed Recording Catalog at 2018-04-30 07:49:34.490380
get all failed recording catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_1/catalog?filter:state=FAILED
 
Failed Recording Catalog is empty

#################### DEBUG ENDED   ####################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################


#################### DEBUG STARTED ####################

Script Fetching the Household Booked/Recorded Catalog at 2018-04-30 07:49:54.640691
get all Catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog
 
Household Booked/Recorded Catalog Response:
[
    {
        "pvr": "nPVR", 
        "partialContent": false, 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set2_scripts_2", 
        "channelId": "505", 
        "isSynchronized": true, 
        "duration": "00:02:06", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T07:46:00Z", 
        "content": {
            "shortSynopsis": "recinc140_1 - synopsis", 
            "title": "recinc140_1", 
            "instanceId": "PPS_INSTANCE_37769", 
            "recordingId": "37769", 
            "broadcastDateTime": 1525074360000, 
            "synopsis": "recinc140_1 - synopsis", 
            "endAvailability": 1525074480000, 
            "source": "pvr", 
            "erotic": false, 
            "serviceId": "505", 
            "adult": false, 
            "sortTitle": "recinc140_1", 
            "duration": 120000, 
            "serviceEquivalenceKey": "505", 
            "type": "instance", 
            "id": "PPS_CONTENT_11389"
        }, 
        "title": "recinc140_1", 
        "recurrence": "NONE", 
        "state": "RECORDED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "37769", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{505,java.lang.Integer,NORMAL}-|-{NDJkNjI0ZjQxZDg0ZDY5MmFmZjg=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "505", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 505, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 505", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 505", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "505", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "505", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_11389~PPS_INSTANCE_37769", 
        "startTime": "2018-04-30T07:45:58Z", 
        "bookingDuration": "00:02:00", 
        "notificationHandles": [
            "5ae6c786e9c28320e2419982"
        ], 
        "created": "2018-04-30T07:36:38Z", 
        "lastModified": "2018-04-30T07:48:20Z", 
        "contentPlayUri": "?recId=2e36d0d7-e78d-4340-8861-083f54415942", 
        "uri": "/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae6c786e9c28320e2419982", 
        "scheduleInstance": "programid://2147475644~programid://2147482805", 
        "keep": false, 
        "contentId": "PPS_CONTENT_11389~PPS_INSTANCE_37769"
    }
]
Script Fetching Household Failed Recording Catalog at 2018-04-30 07:49:54.665952
get all failed recording catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog?filter:state=FAILED
 
Failed Recording Catalog is empty

#################### DEBUG ENDED   ####################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################


#################### DEBUG STARTED ####################

Script Fetching the Household Booked/Recorded Catalog at 2018-04-30 07:50:14.774958
get all Catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_3/catalog
 
Household Booked/Recorded Catalog Response:
[
    {
        "pvr": "nPVR", 
        "partialContent": false, 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set2_scripts_3", 
        "channelId": "505", 
        "isSynchronized": true, 
        "duration": "00:02:06", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T07:46:00Z", 
        "content": {
            "shortSynopsis": "recinc140_1 - synopsis", 
            "title": "recinc140_1", 
            "instanceId": "PPS_INSTANCE_37769", 
            "recordingId": "37769", 
            "broadcastDateTime": 1525074360000, 
            "synopsis": "recinc140_1 - synopsis", 
            "endAvailability": 1525074480000, 
            "source": "pvr", 
            "erotic": false, 
            "serviceId": "505", 
            "adult": false, 
            "sortTitle": "recinc140_1", 
            "duration": 120000, 
            "serviceEquivalenceKey": "505", 
            "type": "instance", 
            "id": "PPS_CONTENT_11389"
        }, 
        "title": "recinc140_1", 
        "recurrence": "NONE", 
        "state": "RECORDED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "37769", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{505,java.lang.Integer,NORMAL}-|-{NDJkNjI0ZjQxZDg0ZDY5MmFmZjg=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "505", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 505, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 505", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 505", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "505", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "505", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_11389~PPS_INSTANCE_37769", 
        "startTime": "2018-04-30T07:45:58Z", 
        "bookingDuration": "00:02:00", 
        "notificationHandles": [
            "5ae6c78a2660f71ffec4eaf8"
        ], 
        "created": "2018-04-30T07:36:42Z", 
        "lastModified": "2018-04-30T07:48:19Z", 
        "contentPlayUri": "?recId=d679d325-06c8-49e1-a854-ec127ef19e70", 
        "uri": "/pps/households/AUTO_3006_cornercase_set2_scripts_3/catalog/5ae6c78a2660f71ffec4eaf8", 
        "scheduleInstance": "programid://2147475644~programid://2147482805", 
        "keep": false, 
        "contentId": "PPS_CONTENT_11389~PPS_INSTANCE_37769"
    }
]
Script Fetching Household Failed Recording Catalog at 2018-04-30 07:50:14.800984
get all failed recording catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_3/catalog?filter:state=FAILED
 
Failed Recording Catalog is empty

#################### DEBUG ENDED   ####################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Failed: Fanout value is not as expected
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX   ^ ^ ^ ^ ^   XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX   E R R O R   XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

2018/04/30 07:50:34 UTC ############################## ENDED :  corner_US31229_TC1703 ##############################

2018/04/30 07:50:34 UTC ############################## STARTED :  corner_US31229_TC1704 ##############################

 US31229: Review existing Basic/Feature Test scripts and identify modifications that need to be made

TC1704:Multiple households Book Back2Back2Back events, only one copy of each event in storage
Starting test corner_US31229_TC1704
### STEP2 : Ingest Series1 Episode1, Series2 Episode1, Series1 Episode2 of n-2 minutes with the posttime of n minutes ###################################### 
 
 
{'services': { 505: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'recincqq140_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'recincqq140'},
                     { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'recinc245_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'recinc245'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 1, 'programID': 'recincqq140_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'recincqq140'}],
         'lineupLength': 7,
         'message': ''}},
'shows': set(['recinc245', 'recincqq140']),
'seasons': { 'recinc245': { 1: set([1])}, 'recincqq140': { 1: set([1, 2])}},
'totalLength': "00:07:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.4858
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525074816000~1525082016000?lang=eng&serviceList=505&count=255&region=101&catalogueId=1
### STEP3 : Do the PPS Booking for all 3 events on 3 Households###################################### 
 
 
ContentId Dictionary from the Grid REsponse {u'programid://2103878578~programid://36315011': [1525075200000, 1525075260000, 60000, u'recincqq140_1_2'], u'programid://2103878580~programid://36315012': [1525074840000, 1525075020000, 180000, u'recincqq140_1_1']} {u'programid://2147479790~programid://36315010': [1525075020000, 1525075200000, 180000, u'recinc245_1_1']}
ContentId dictionary from the grid response
{u'programid://2103878580~programid://36315012': [1525074840000, 1525075020000, 180000, u'recincqq140_1_1'], u'programid://2103878578~programid://36315011': [1525075200000, 1525075260000, 60000, u'recincqq140_1_2'], u'programid://2147479790~programid://36315010': [1525075020000, 1525075200000, 180000, u'recinc245_1_1']}
ContentId list after sorting
[(u'programid://2103878580~programid://36315012', [1525074840000, 1525075020000, 180000, u'recincqq140_1_1']), (u'programid://2147479790~programid://36315010', [1525075020000, 1525075200000, 180000, u'recinc245_1_1']), (u'programid://2103878578~programid://36315011', [1525075200000, 1525075260000, 60000, u'recincqq140_1_2'])]
{
                            "checkConflicts": true,
                            "pvr": "nPVR",
                            "scheduleInstanceId": "programid://2103878580~programid://36315012"
                            }

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_1/bookings 
PPS booking is successful for the event contentId programid://2103878580~programid://36315012
### STEP4 : Verify the Booked catalog of all 3 households which has all 3 events present##################################### 
 
 
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_1/bookings
 
All programs with the contentids [u'programid://2103878580~programid://36315012'] is in BOOKED state
PPS Booking is successful and verified

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings 
PPS booking is successful for the event contentId programid://2103878580~programid://36315012
### STEP4 : Verify the Booked catalog of all 3 households which has all 3 events present##################################### 
 
 
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://2103878580~programid://36315012'] is in BOOKED state
PPS Booking is successful and verified

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_3/bookings 
PPS booking is successful for the event contentId programid://2103878580~programid://36315012
### STEP4 : Verify the Booked catalog of all 3 households which has all 3 events present##################################### 
 
 
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_3/bookings
 
All programs with the contentids [u'programid://2103878580~programid://36315012'] is in BOOKED state
PPS Booking is successful and verified
{
                            "checkConflicts": true,
                            "pvr": "nPVR",
                            "scheduleInstanceId": "programid://2147479790~programid://36315010"
                            }

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_1/bookings 
PPS booking is successful for the event contentId programid://2147479790~programid://36315010
### STEP4 : Verify the Booked catalog of all 3 households which has all 3 events present##################################### 
 
 
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_1/bookings
 
All programs with the contentids [u'programid://2147479790~programid://36315010'] is in BOOKED state
PPS Booking is successful and verified

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings 
PPS booking is successful for the event contentId programid://2147479790~programid://36315010
### STEP4 : Verify the Booked catalog of all 3 households which has all 3 events present##################################### 
 
 
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://2147479790~programid://36315010'] is in BOOKED state
PPS Booking is successful and verified

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_3/bookings 
PPS booking is successful for the event contentId programid://2147479790~programid://36315010
### STEP4 : Verify the Booked catalog of all 3 households which has all 3 events present##################################### 
 
 
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_3/bookings
 
All programs with the contentids [u'programid://2147479790~programid://36315010'] is in BOOKED state
PPS Booking is successful and verified
{
                            "checkConflicts": true,
                            "pvr": "nPVR",
                            "scheduleInstanceId": "programid://2103878578~programid://36315011"
                            }

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_1/bookings 
PPS booking is successful for the event contentId programid://2103878578~programid://36315011
### STEP4 : Verify the Booked catalog of all 3 households which has all 3 events present##################################### 
 
 
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_1/bookings
 
All programs with the contentids [u'programid://2103878578~programid://36315011'] is in BOOKED state
PPS Booking is successful and verified

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings 
PPS booking is successful for the event contentId programid://2103878578~programid://36315011
### STEP4 : Verify the Booked catalog of all 3 households which has all 3 events present##################################### 
 
 
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://2103878578~programid://36315011'] is in BOOKED state
PPS Booking is successful and verified

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_3/bookings 
PPS booking is successful for the event contentId programid://2103878578~programid://36315011
### STEP4 : Verify the Booked catalog of all 3 households which has all 3 events present##################################### 
 
 
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_3/bookings
 
All programs with the contentids [u'programid://2103878578~programid://36315011'] is in BOOKED state
PPS Booking is successful and verified
booking is successfull for all the household
Recording will end in 426.0seconds
### STEP5 : Wait till the Event Recording completes and verify the recorded catalog has all 3 events present on all 3 Households############### 
 
 
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_1/recordings
 
All Programs with the contentids [u'programid://2103878580~programid://36315012'] is in RECORDED state
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
All Programs with the contentids [u'programid://2103878580~programid://36315012'] is in RECORDED state
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_3/recordings
 
All Programs with the contentids [u'programid://2103878580~programid://36315012'] is in RECORDED state
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_1/recordings
 
All Programs with the contentids [u'programid://2147479790~programid://36315010'] is in RECORDED state
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
All Programs with the contentids [u'programid://2147479790~programid://36315010'] is in RECORDED state
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_3/recordings
 
All Programs with the contentids [u'programid://2147479790~programid://36315010'] is in RECORDED state
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_1/recordings
 
All Programs with the contentids [u'programid://2103878578~programid://36315011'] is in RECORDED state
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
All Programs with the contentids [u'programid://2103878578~programid://36315011'] is in RECORDED state
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_3/recordings
 
All Programs with the contentids [u'programid://2103878578~programid://36315011'] is in RECORDED state
event is successfully recorded for all the three household
### STEP6 : Get the contentplayuri from the Recorded Catalog on all 3 Households for all 3 events############## 
 
 
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_1/recordings
 
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_3/recordings
 
[u'?recId=8872eabc-dd1a-4d0a-8305-c896a71a8afb', u'?recId=12134171-95af-4640-a2de-7788bb764098', u'?recId=32bda76a-04f9-4e9a-bb16-643ed9cc64fc', u'?recId=458398d8-4daa-44d3-84f9-22d266038ef7', u'?recId=8e89e0d3-b3b3-48e0-b863-e9cfc6d72351', u'?recId=88ebc924-4fb2-4d42-b36b-a9b6e00d3cdd', u'?recId=54839646-5e71-47e6-b285-37f3ccd074ae', u'?recId=ceee8e95-f237-4d17-870d-0eb87873f3e0', u'?recId=3eda9103-d909-47d4-8566-33e951b9b9f4']
### STEP7 : Get the recordingid using the contentplayuri and RM playback API for all 3 event recording on all 3 Households############## 
 
 
### STEP8 : Get the actualstarttime and actualendtime for all recordingids from STEP7 using the VMR API Request############## 
 
 
URL to get contentid from recoring id : http://rr.cdvr.dcpt01.ciscocdvr.net:80/recordingInfo/8872eabc-dd1a-4d0a-8305-c896a71a8afb?contentType=MPEG4&mode=playback&responseFormat=json
URL to get contentid from recoring id : http://rr.cdvr.dcpt01.ciscocdvr.net:80/recordingInfo/12134171-95af-4640-a2de-7788bb764098?contentType=MPEG4&mode=playback&responseFormat=json
URL to get contentid from recoring id : http://rr.cdvr.dcpt01.ciscocdvr.net:80/recordingInfo/32bda76a-04f9-4e9a-bb16-643ed9cc64fc?contentType=MPEG4&mode=playback&responseFormat=json
URL to get contentid from recoring id : http://rr.cdvr.dcpt01.ciscocdvr.net:80/recordingInfo/458398d8-4daa-44d3-84f9-22d266038ef7?contentType=MPEG4&mode=playback&responseFormat=json
URL to get contentid from recoring id : http://rr.cdvr.dcpt01.ciscocdvr.net:80/recordingInfo/8e89e0d3-b3b3-48e0-b863-e9cfc6d72351?contentType=MPEG4&mode=playback&responseFormat=json
URL to get contentid from recoring id : http://rr.cdvr.dcpt01.ciscocdvr.net:80/recordingInfo/88ebc924-4fb2-4d42-b36b-a9b6e00d3cdd?contentType=MPEG4&mode=playback&responseFormat=json
URL to get contentid from recoring id : http://rr.cdvr.dcpt01.ciscocdvr.net:80/recordingInfo/54839646-5e71-47e6-b285-37f3ccd074ae?contentType=MPEG4&mode=playback&responseFormat=json
URL to get contentid from recoring id : http://rr.cdvr.dcpt01.ciscocdvr.net:80/recordingInfo/ceee8e95-f237-4d17-870d-0eb87873f3e0?contentType=MPEG4&mode=playback&responseFormat=json
URL to get contentid from recoring id : http://rr.cdvr.dcpt01.ciscocdvr.net:80/recordingInfo/3eda9103-d909-47d4-8566-33e951b9b9f4?contentType=MPEG4&mode=playback&responseFormat=json
### STEP9 : Verify actualstarttime and actualendtime from STEP8 matching for all household recordingids successfully and store the actualstarttime and actualendtime in a list############## 
 
 

URL to get the stream id, start time and end time: http://192.168.21.66:9999/api/findxrid/35fe14f6-382f-47ff-b839-1cfc94b49305
JSON response : [{"XRID":"35fe14f6-382f-47ff-b839-1cfc94b49305","IRID":"38280596832678165","CopyType":"UNIQUE","ISID":"505","AccountID":"AUTO_3006_cornercase_set2_scripts_1","BatchID":1,"StartTime":"2018-04-30T07:54:00Z","EndTime":"2018-04-30T07:57:00Z","ScheduledTime":"2018-04-30T07:53:36.088Z","ActualStartTime":"2018-04-30T07:53:59.241198Z","ActualEndTime":"2018-04-30T07:57:05.427198Z","StreamID":"505","AdZone":"0","StationID":"505","A8UpdateURL":"http://rr.cdvr.dcpt01.ciscocdvr.net:80/a8/update/PRIMETIME_RECORDER","ErasedTime":"0001-01-01T00:00:00Z","ErrorCode":0,"Status":"COMPLETE"}]

URL to get the stream id, start time and end time: http://192.168.21.66:9999/api/findxrid/9458de79-0ef0-40d0-9ca5-483a2fd47d2f
JSON response : [{"XRID":"9458de79-0ef0-40d0-9ca5-483a2fd47d2f","IRID":"40532396646359417","CopyType":"UNIQUE","ISID":"505","AccountID":"AUTO_3006_cornercase_set2_scripts_1","BatchID":1,"StartTime":"2018-04-30T07:57:00Z","EndTime":"2018-04-30T08:00:00Z","ScheduledTime":"2018-04-30T07:53:59.981Z","ActualStartTime":"2018-04-30T07:56:59.421198Z","ActualEndTime":"2018-04-30T08:00:05.607198Z","StreamID":"505","AdZone":"0","StationID":"505","A8UpdateURL":"http://rr.cdvr.dcpt01.ciscocdvr.net:80/a8/update/PRIMETIME_RECORDER","ErasedTime":"0001-01-01T00:00:00Z","ErrorCode":0,"Status":"COMPLETE"}]

URL to get the stream id, start time and end time: http://192.168.21.66:9999/api/findxrid/22d8c258-85f2-4409-9fdc-443c592eca63
JSON response : [{"XRID":"22d8c258-85f2-4409-9fdc-443c592eca63","IRID":"40532396646359418","CopyType":"UNIQUE","ISID":"505","AccountID":"AUTO_3006_cornercase_set2_scripts_1","BatchID":1,"StartTime":"2018-04-30T08:00:00Z","EndTime":"2018-04-30T08:01:00Z","ScheduledTime":"2018-04-30T07:53:59.984Z","ActualStartTime":"2018-04-30T07:59:59.601198Z","ActualEndTime":"2018-04-30T08:01:05.667198Z","StreamID":"505","AdZone":"0","StationID":"505","A8UpdateURL":"http://rr.cdvr.dcpt01.ciscocdvr.net:80/a8/update/PRIMETIME_RECORDER","ErasedTime":"0001-01-01T00:00:00Z","ErrorCode":0,"Status":"COMPLETE"}]

URL to get the stream id, start time and end time: http://192.168.21.66:9999/api/findxrid/b1a7f94f-8807-4e22-ad1d-0281540b5bab
JSON response : [{"XRID":"b1a7f94f-8807-4e22-ad1d-0281540b5bab","IRID":"38280596832678166","CopyType":"UNIQUE","ISID":"505","AccountID":"AUTO_3006_cornercase_set2_scripts_2","BatchID":1,"StartTime":"2018-04-30T07:54:00Z","EndTime":"2018-04-30T07:57:00Z","ScheduledTime":"2018-04-30T07:53:38.198Z","ActualStartTime":"2018-04-30T07:53:59.241198Z","ActualEndTime":"2018-04-30T07:57:05.427198Z","StreamID":"505","AdZone":"0","StationID":"505","A8UpdateURL":"http://rr.cdvr.dcpt01.ciscocdvr.net:80/a8/update/PRIMETIME_RECORDER","ErasedTime":"0001-01-01T00:00:00Z","ErrorCode":0,"Status":"COMPLETE"}]

URL to get the stream id, start time and end time: http://192.168.21.66:9999/api/findxrid/72708ada-c131-4952-b93d-bb677822941d
JSON response : [{"XRID":"72708ada-c131-4952-b93d-bb677822941d","IRID":"40532396646359419","CopyType":"UNIQUE","ISID":"505","AccountID":"AUTO_3006_cornercase_set2_scripts_2","BatchID":1,"StartTime":"2018-04-30T07:57:00Z","EndTime":"2018-04-30T08:00:00Z","ScheduledTime":"2018-04-30T07:54:00.006Z","ActualStartTime":"2018-04-30T07:56:59.421198Z","ActualEndTime":"2018-04-30T08:00:05.607198Z","StreamID":"505","AdZone":"0","StationID":"505","A8UpdateURL":"http://rr.cdvr.dcpt01.ciscocdvr.net:80/a8/update/PRIMETIME_RECORDER","ErasedTime":"0001-01-01T00:00:00Z","ErrorCode":0,"Status":"COMPLETE"}]

URL to get the stream id, start time and end time: http://192.168.21.66:9999/api/findxrid/a7b69128-0729-4cb1-9094-41045c4689cb
JSON response : [{"XRID":"a7b69128-0729-4cb1-9094-41045c4689cb","IRID":"40532396646359420","CopyType":"UNIQUE","ISID":"505","AccountID":"AUTO_3006_cornercase_set2_scripts_2","BatchID":1,"StartTime":"2018-04-30T08:00:00Z","EndTime":"2018-04-30T08:01:00Z","ScheduledTime":"2018-04-30T07:54:00.01Z","ActualStartTime":"2018-04-30T07:59:59.601198Z","ActualEndTime":"2018-04-30T08:01:05.667198Z","StreamID":"505","AdZone":"0","StationID":"505","A8UpdateURL":"http://rr.cdvr.dcpt01.ciscocdvr.net:80/a8/update/PRIMETIME_RECORDER","ErasedTime":"0001-01-01T00:00:00Z","ErrorCode":0,"Status":"COMPLETE"}]

URL to get the stream id, start time and end time: http://192.168.21.66:9999/api/findxrid/4401f452-6142-4810-a04b-b31c0a051d32
JSON response : [{"XRID":"4401f452-6142-4810-a04b-b31c0a051d32","IRID":"38280596832678167","CopyType":"UNIQUE","ISID":"505","AccountID":"AUTO_3006_cornercase_set2_scripts_3","BatchID":1,"StartTime":"2018-04-30T07:54:00Z","EndTime":"2018-04-30T07:57:00Z","ScheduledTime":"2018-04-30T07:53:40.232Z","ActualStartTime":"2018-04-30T07:53:59.241198Z","ActualEndTime":"2018-04-30T07:57:05.427198Z","StreamID":"505","AdZone":"0","StationID":"505","A8UpdateURL":"http://rr.cdvr.dcpt01.ciscocdvr.net:80/a8/update/PRIMETIME_RECORDER","ErasedTime":"0001-01-01T00:00:00Z","ErrorCode":0,"Status":"COMPLETE"}]

URL to get the stream id, start time and end time: http://192.168.21.66:9999/api/findxrid/67e1dd92-a070-4173-af50-a6be67263c84
JSON response : [{"XRID":"67e1dd92-a070-4173-af50-a6be67263c84","IRID":"37154696925833209","CopyType":"UNIQUE","ISID":"505","AccountID":"AUTO_3006_cornercase_set2_scripts_3","BatchID":1,"StartTime":"2018-04-30T07:57:00Z","EndTime":"2018-04-30T08:00:00Z","ScheduledTime":"2018-04-30T07:54:00.04Z","ActualStartTime":"2018-04-30T07:56:59.421198Z","ActualEndTime":"2018-04-30T08:00:05.607198Z","StreamID":"505","AdZone":"0","StationID":"505","A8UpdateURL":"http://rr.cdvr.dcpt01.ciscocdvr.net:80/a8/update/PRIMETIME_RECORDER","ErasedTime":"0001-01-01T00:00:00Z","ErrorCode":0,"Status":"COMPLETE"}]

URL to get the stream id, start time and end time: http://192.168.21.66:9999/api/findxrid/b8768564-7e2f-4435-8a4c-b4cff4403013
JSON response : [{"XRID":"b8768564-7e2f-4435-8a4c-b4cff4403013","IRID":"37154696925833210","CopyType":"UNIQUE","ISID":"505","AccountID":"AUTO_3006_cornercase_set2_scripts_3","BatchID":1,"StartTime":"2018-04-30T08:00:00Z","EndTime":"2018-04-30T08:01:00Z","ScheduledTime":"2018-04-30T07:54:00.042Z","ActualStartTime":"2018-04-30T07:59:59.601198Z","ActualEndTime":"2018-04-30T08:01:05.667198Z","StreamID":"505","AdZone":"0","StationID":"505","A8UpdateURL":"http://rr.cdvr.dcpt01.ciscocdvr.net:80/a8/update/PRIMETIME_RECORDER","ErasedTime":"0001-01-01T00:00:00Z","ErrorCode":0,"Status":"COMPLETE"}]
[[u'505', u'20180430075359.241198', u'20180430075705.427198', u'505', 1], [u'505', u'20180430075659.421198', u'20180430080005.607198', u'505', 1], [u'505', u'20180430075959.601198', u'20180430080105.667198', u'505', 1], [u'505', u'20180430075359.241198', u'20180430075705.427198', u'505', 1], [u'505', u'20180430075659.421198', u'20180430080005.607198', u'505', 1], [u'505', u'20180430075959.601198', u'20180430080105.667198', u'505', 1], [u'505', u'20180430075359.241198', u'20180430075705.427198', u'505', 1], [u'505', u'20180430075659.421198', u'20180430080005.607198', u'505', 1], [u'505', u'20180430075959.601198', u'20180430080105.667198', u'505', 1]]
### STEP10 : Get all the segments using the actualstarttime and actualendtime from the VMR API Request and store it in a temp file###### 
 
 
URL to get segment response : http://192.168.21.66:9999/api/streams/505/segments?start=20180430075659&end=20180430075705
### STEP11 : Verify 200 OK Response in the COS Active Storage with 'X-Fanout-Copy-Index': '0' using isid/segmentid/batchid on all the segments from a temp file and 416 Requested Range Not Satisfiable Responsewith 'X-Fanout-Copy-Index':1########## 
 
 
HTTPConnectionPool(host='192.168.22.6', port=80): Read timed out.
Problem accessing ...... http://192.168.22.6/rio/active/isid/505/segmentid/37154696931868983/batchid/1
Response to verify fanout value is none

#################### DEBUG STARTED ####################

Script Fetching the Household Booked/Recorded Catalog at 2018-04-30 08:03:06.485667
get all Catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_1/catalog
 
Household Booked/Recorded Catalog Response:
[
    {
        "seriesId": "groupid://1323654383", 
        "pvr": "nPVR", 
        "partialContent": false, 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set2_scripts_1", 
        "channelId": "505", 
        "isSynchronized": true, 
        "duration": "00:03:06", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T07:54:00Z", 
        "recurrence": "NONE", 
        "title": "recincqq140_1_1", 
        "content": {
            "seriesId": "groupid://1323654383", 
            "shortSynopsis": "recincqq140_1_1 - synopsis", 
            "title": "recincqq140_1_1", 
            "instanceId": "PPS_INSTANCE_37795", 
            "recordingId": "37795", 
            "broadcastDateTime": 1525074840000, 
            "synopsis": "recincqq140_1_1 - synopsis", 
            "endAvailability": 1525075020000, 
            "source": "pvr", 
            "erotic": false, 
            "serviceId": "505", 
            "adult": false, 
            "sortTitle": "recincqq140_1_1", 
            "duration": 180000, 
            "serviceEquivalenceKey": "505", 
            "type": "instance", 
            "id": "PPS_CONTENT_11424"
        }, 
        "state": "RECORDED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "37795", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{505,java.lang.Integer,NORMAL}-|-{NDJkNjI0ZjQxZDg0ZDY5MmFmZjg=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "505", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 505, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 505", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 505", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "505", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "505", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_11424~PPS_INSTANCE_37795", 
        "startTime": "2018-04-30T07:53:59Z", 
        "bookingDuration": "00:03:00", 
        "notificationHandles": [
            "5ae6cb80f365362240f145b4"
        ], 
        "created": "2018-04-30T07:53:36Z", 
        "lastModified": "2018-04-30T07:57:19Z", 
        "contentPlayUri": "?recId=8872eabc-dd1a-4d0a-8305-c896a71a8afb", 
        "uri": "/pps/households/AUTO_3006_cornercase_set2_scripts_1/catalog/5ae6cb80f365362240f145b4", 
        "scheduleInstance": "programid://2103878580~programid://36315012", 
        "keep": false, 
        "contentId": "PPS_CONTENT_11424~PPS_INSTANCE_37795"
    }, 
    {
        "seriesId": "groupid://1646118683", 
        "pvr": "nPVR", 
        "partialContent": false, 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set2_scripts_1", 
        "channelId": "505", 
        "isSynchronized": true, 
        "duration": "00:03:06", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T07:57:00Z", 
        "recurrence": "NONE", 
        "title": "recinc245_1_1", 
        "content": {
            "seriesId": "groupid://1646118683", 
            "shortSynopsis": "recinc245_1_1 - synopsis", 
            "title": "recinc245_1_1", 
            "instanceId": "PPS_INSTANCE_37796", 
            "recordingId": "37796", 
            "broadcastDateTime": 1525075020000, 
            "synopsis": "recinc245_1_1 - synopsis", 
            "endAvailability": 1525075200000, 
            "source": "pvr", 
            "erotic": false, 
            "serviceId": "505", 
            "adult": false, 
            "sortTitle": "recinc245_1_1", 
            "duration": 180000, 
            "serviceEquivalenceKey": "505", 
            "type": "instance", 
            "id": "PPS_CONTENT_11425"
        }, 
        "state": "RECORDED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "37796", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{505,java.lang.Integer,NORMAL}-|-{NDJkNjI0ZjQxZDg0ZDY5MmFmZjg=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "505", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 505, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 505", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 505", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "505", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "505", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_11425~PPS_INSTANCE_37796", 
        "startTime": "2018-04-30T07:56:59Z", 
        "bookingDuration": "00:03:00", 
        "notificationHandles": [
            "5ae6cb8647551d206618c742"
        ], 
        "created": "2018-04-30T07:53:42Z", 
        "lastModified": "2018-04-30T08:00:20Z", 
        "contentPlayUri": "?recId=12134171-95af-4640-a2de-7788bb764098", 
        "uri": "/pps/households/AUTO_3006_cornercase_set2_scripts_1/catalog/5ae6cb8647551d206618c742", 
        "scheduleInstance": "programid://2147479790~programid://36315010", 
        "keep": false, 
        "contentId": "PPS_CONTENT_11425~PPS_INSTANCE_37796"
    }, 
    {
        "seriesId": "groupid://1323654383", 
        "pvr": "nPVR", 
        "partialContent": false, 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set2_scripts_1", 
        "channelId": "505", 
        "isSynchronized": true, 
        "duration": "00:01:06", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T08:00:00Z", 
        "recurrence": "NONE", 
        "title": "recincqq140_1_2", 
        "content": {
            "seriesId": "groupid://1323654383", 
            "shortSynopsis": "recincqq140_1_2 - synopsis", 
            "title": "recincqq140_1_2", 
            "instanceId": "PPS_INSTANCE_37797", 
            "recordingId": "37797", 
            "broadcastDateTime": 1525075200000, 
            "synopsis": "recincqq140_1_2 - synopsis", 
            "endAvailability": 1525075260000, 
            "source": "pvr", 
            "erotic": false, 
            "serviceId": "505", 
            "adult": false, 
            "sortTitle": "recincqq140_1_2", 
            "duration": 60000, 
            "serviceEquivalenceKey": "505", 
            "type": "instance", 
            "id": "PPS_CONTENT_11426"
        }, 
        "state": "RECORDED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "37797", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{505,java.lang.Integer,NORMAL}-|-{NDJkNjI0ZjQxZDg0ZDY5MmFmZjg=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "505", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 505, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 505", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 505", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "505", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "505", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_11426~PPS_INSTANCE_37797", 
        "startTime": "2018-04-30T07:59:59Z", 
        "bookingDuration": "00:01:00", 
        "notificationHandles": [
            "5ae6cb8c2660f71ffec4eaf9"
        ], 
        "created": "2018-04-30T07:53:48Z", 
        "lastModified": "2018-04-30T08:01:20Z", 
        "contentPlayUri": "?recId=32bda76a-04f9-4e9a-bb16-643ed9cc64fc", 
        "uri": "/pps/households/AUTO_3006_cornercase_set2_scripts_1/catalog/5ae6cb8c2660f71ffec4eaf9", 
        "scheduleInstance": "programid://2103878578~programid://36315011", 
        "keep": false, 
        "contentId": "PPS_CONTENT_11426~PPS_INSTANCE_37797"
    }
]
Script Fetching Household Failed Recording Catalog at 2018-04-30 08:03:06.499991
get all failed recording catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_1/catalog?filter:state=FAILED
 
Failed Recording Catalog is empty

#################### DEBUG ENDED   ####################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################


#################### DEBUG STARTED ####################

Script Fetching the Household Booked/Recorded Catalog at 2018-04-30 08:03:26.662236
get all Catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog
 
Household Booked/Recorded Catalog Response:
[
    {
        "seriesId": "groupid://1323654383", 
        "pvr": "nPVR", 
        "partialContent": false, 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set2_scripts_2", 
        "channelId": "505", 
        "isSynchronized": true, 
        "duration": "00:03:06", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T07:54:00Z", 
        "recurrence": "NONE", 
        "title": "recincqq140_1_1", 
        "content": {
            "seriesId": "groupid://1323654383", 
            "shortSynopsis": "recincqq140_1_1 - synopsis", 
            "title": "recincqq140_1_1", 
            "instanceId": "PPS_INSTANCE_37795", 
            "recordingId": "37795", 
            "broadcastDateTime": 1525074840000, 
            "synopsis": "recincqq140_1_1 - synopsis", 
            "endAvailability": 1525075020000, 
            "source": "pvr", 
            "erotic": false, 
            "serviceId": "505", 
            "adult": false, 
            "sortTitle": "recincqq140_1_1", 
            "duration": 180000, 
            "serviceEquivalenceKey": "505", 
            "type": "instance", 
            "id": "PPS_CONTENT_11424"
        }, 
        "state": "RECORDED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "37795", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{505,java.lang.Integer,NORMAL}-|-{NDJkNjI0ZjQxZDg0ZDY5MmFmZjg=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "505", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 505, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 505", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 505", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "505", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "505", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_11424~PPS_INSTANCE_37795", 
        "startTime": "2018-04-30T07:53:59Z", 
        "bookingDuration": "00:03:00", 
        "notificationHandles": [
            "5ae6cb8296094c205988ec23"
        ], 
        "created": "2018-04-30T07:53:38Z", 
        "lastModified": "2018-04-30T07:57:20Z", 
        "contentPlayUri": "?recId=458398d8-4daa-44d3-84f9-22d266038ef7", 
        "uri": "/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae6cb8296094c205988ec23", 
        "scheduleInstance": "programid://2103878580~programid://36315012", 
        "keep": false, 
        "contentId": "PPS_CONTENT_11424~PPS_INSTANCE_37795"
    }, 
    {
        "seriesId": "groupid://1646118683", 
        "pvr": "nPVR", 
        "partialContent": false, 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set2_scripts_2", 
        "channelId": "505", 
        "isSynchronized": true, 
        "duration": "00:03:06", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T07:57:00Z", 
        "recurrence": "NONE", 
        "title": "recinc245_1_1", 
        "content": {
            "seriesId": "groupid://1646118683", 
            "shortSynopsis": "recinc245_1_1 - synopsis", 
            "title": "recinc245_1_1", 
            "instanceId": "PPS_INSTANCE_37796", 
            "recordingId": "37796", 
            "broadcastDateTime": 1525075020000, 
            "synopsis": "recinc245_1_1 - synopsis", 
            "endAvailability": 1525075200000, 
            "source": "pvr", 
            "erotic": false, 
            "serviceId": "505", 
            "adult": false, 
            "sortTitle": "recinc245_1_1", 
            "duration": 180000, 
            "serviceEquivalenceKey": "505", 
            "type": "instance", 
            "id": "PPS_CONTENT_11425"
        }, 
        "state": "RECORDED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "37796", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{505,java.lang.Integer,NORMAL}-|-{NDJkNjI0ZjQxZDg0ZDY5MmFmZjg=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "505", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 505, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 505", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 505", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "505", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "505", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_11425~PPS_INSTANCE_37796", 
        "startTime": "2018-04-30T07:56:59Z", 
        "bookingDuration": "00:03:00", 
        "notificationHandles": [
            "5ae6cb88d8ba2820719bdbe1"
        ], 
        "created": "2018-04-30T07:53:44Z", 
        "lastModified": "2018-04-30T08:00:20Z", 
        "contentPlayUri": "?recId=8e89e0d3-b3b3-48e0-b863-e9cfc6d72351", 
        "uri": "/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae6cb88d8ba2820719bdbe1", 
        "scheduleInstance": "programid://2147479790~programid://36315010", 
        "keep": false, 
        "contentId": "PPS_CONTENT_11425~PPS_INSTANCE_37796"
    }, 
    {
        "seriesId": "groupid://1323654383", 
        "pvr": "nPVR", 
        "partialContent": false, 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set2_scripts_2", 
        "channelId": "505", 
        "isSynchronized": true, 
        "duration": "00:01:06", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T08:00:00Z", 
        "recurrence": "NONE", 
        "title": "recincqq140_1_2", 
        "content": {
            "seriesId": "groupid://1323654383", 
            "shortSynopsis": "recincqq140_1_2 - synopsis", 
            "title": "recincqq140_1_2", 
            "instanceId": "PPS_INSTANCE_37797", 
            "recordingId": "37797", 
            "broadcastDateTime": 1525075200000, 
            "synopsis": "recincqq140_1_2 - synopsis", 
            "endAvailability": 1525075260000, 
            "source": "pvr", 
            "erotic": false, 
            "serviceId": "505", 
            "adult": false, 
            "sortTitle": "recincqq140_1_2", 
            "duration": 60000, 
            "serviceEquivalenceKey": "505", 
            "type": "instance", 
            "id": "PPS_CONTENT_11426"
        }, 
        "state": "RECORDED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "37797", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{505,java.lang.Integer,NORMAL}-|-{NDJkNjI0ZjQxZDg0ZDY5MmFmZjg=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "505", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 505, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 505", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 505", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "505", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "505", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_11426~PPS_INSTANCE_37797", 
        "startTime": "2018-04-30T07:59:59Z", 
        "bookingDuration": "00:01:00", 
        "notificationHandles": [
            "5ae6cb8eb1f9e9206752a80a"
        ], 
        "created": "2018-04-30T07:53:50Z", 
        "lastModified": "2018-04-30T08:01:20Z", 
        "contentPlayUri": "?recId=88ebc924-4fb2-4d42-b36b-a9b6e00d3cdd", 
        "uri": "/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae6cb8eb1f9e9206752a80a", 
        "scheduleInstance": "programid://2103878578~programid://36315011", 
        "keep": false, 
        "contentId": "PPS_CONTENT_11426~PPS_INSTANCE_37797"
    }
]
Script Fetching Household Failed Recording Catalog at 2018-04-30 08:03:26.674874
get all failed recording catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog?filter:state=FAILED
 
Failed Recording Catalog is empty

#################### DEBUG ENDED   ####################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################


#################### DEBUG STARTED ####################

Script Fetching the Household Booked/Recorded Catalog at 2018-04-30 08:03:46.843848
get all Catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_3/catalog
 
Household Booked/Recorded Catalog Response:
[
    {
        "seriesId": "groupid://1323654383", 
        "pvr": "nPVR", 
        "partialContent": false, 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set2_scripts_3", 
        "channelId": "505", 
        "isSynchronized": true, 
        "duration": "00:03:06", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T07:54:00Z", 
        "recurrence": "NONE", 
        "title": "recincqq140_1_1", 
        "content": {
            "seriesId": "groupid://1323654383", 
            "shortSynopsis": "recincqq140_1_1 - synopsis", 
            "title": "recincqq140_1_1", 
            "instanceId": "PPS_INSTANCE_37795", 
            "recordingId": "37795", 
            "broadcastDateTime": 1525074840000, 
            "synopsis": "recincqq140_1_1 - synopsis", 
            "endAvailability": 1525075020000, 
            "source": "pvr", 
            "erotic": false, 
            "serviceId": "505", 
            "adult": false, 
            "sortTitle": "recincqq140_1_1", 
            "duration": 180000, 
            "serviceEquivalenceKey": "505", 
            "type": "instance", 
            "id": "PPS_CONTENT_11424"
        }, 
        "state": "RECORDED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "37795", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{505,java.lang.Integer,NORMAL}-|-{NDJkNjI0ZjQxZDg0ZDY5MmFmZjg=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "505", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 505, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 505", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 505", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "505", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "505", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_11424~PPS_INSTANCE_37795", 
        "startTime": "2018-04-30T07:53:59Z", 
        "bookingDuration": "00:03:00", 
        "notificationHandles": [
            "5ae6cb844935241fe4c13bfd"
        ], 
        "created": "2018-04-30T07:53:40Z", 
        "lastModified": "2018-04-30T07:57:20Z", 
        "contentPlayUri": "?recId=54839646-5e71-47e6-b285-37f3ccd074ae", 
        "uri": "/pps/households/AUTO_3006_cornercase_set2_scripts_3/catalog/5ae6cb844935241fe4c13bfd", 
        "scheduleInstance": "programid://2103878580~programid://36315012", 
        "keep": false, 
        "contentId": "PPS_CONTENT_11424~PPS_INSTANCE_37795"
    }, 
    {
        "seriesId": "groupid://1646118683", 
        "pvr": "nPVR", 
        "partialContent": false, 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set2_scripts_3", 
        "channelId": "505", 
        "isSynchronized": true, 
        "duration": "00:03:06", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T07:57:00Z", 
        "recurrence": "NONE", 
        "title": "recinc245_1_1", 
        "content": {
            "seriesId": "groupid://1646118683", 
            "shortSynopsis": "recinc245_1_1 - synopsis", 
            "title": "recinc245_1_1", 
            "instanceId": "PPS_INSTANCE_37796", 
            "recordingId": "37796", 
            "broadcastDateTime": 1525075020000, 
            "synopsis": "recinc245_1_1 - synopsis", 
            "endAvailability": 1525075200000, 
            "source": "pvr", 
            "erotic": false, 
            "serviceId": "505", 
            "adult": false, 
            "sortTitle": "recinc245_1_1", 
            "duration": 180000, 
            "serviceEquivalenceKey": "505", 
            "type": "instance", 
            "id": "PPS_CONTENT_11425"
        }, 
        "state": "RECORDED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "37796", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{505,java.lang.Integer,NORMAL}-|-{NDJkNjI0ZjQxZDg0ZDY5MmFmZjg=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "505", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 505, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 505", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 505", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "505", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "505", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_11425~PPS_INSTANCE_37796", 
        "startTime": "2018-04-30T07:56:59Z", 
        "bookingDuration": "00:03:00", 
        "notificationHandles": [
            "5ae6cb8a1ab94a20f760ba19"
        ], 
        "created": "2018-04-30T07:53:46Z", 
        "lastModified": "2018-04-30T08:00:20Z", 
        "contentPlayUri": "?recId=ceee8e95-f237-4d17-870d-0eb87873f3e0", 
        "uri": "/pps/households/AUTO_3006_cornercase_set2_scripts_3/catalog/5ae6cb8a1ab94a20f760ba19", 
        "scheduleInstance": "programid://2147479790~programid://36315010", 
        "keep": false, 
        "contentId": "PPS_CONTENT_11425~PPS_INSTANCE_37796"
    }, 
    {
        "seriesId": "groupid://1323654383", 
        "pvr": "nPVR", 
        "partialContent": false, 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set2_scripts_3", 
        "channelId": "505", 
        "isSynchronized": true, 
        "duration": "00:01:06", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T08:00:00Z", 
        "recurrence": "NONE", 
        "title": "recincqq140_1_2", 
        "content": {
            "seriesId": "groupid://1323654383", 
            "shortSynopsis": "recincqq140_1_2 - synopsis", 
            "title": "recincqq140_1_2", 
            "instanceId": "PPS_INSTANCE_37797", 
            "recordingId": "37797", 
            "broadcastDateTime": 1525075200000, 
            "synopsis": "recincqq140_1_2 - synopsis", 
            "endAvailability": 1525075260000, 
            "source": "pvr", 
            "erotic": false, 
            "serviceId": "505", 
            "adult": false, 
            "sortTitle": "recincqq140_1_2", 
            "duration": 60000, 
            "serviceEquivalenceKey": "505", 
            "type": "instance", 
            "id": "PPS_CONTENT_11426"
        }, 
        "state": "RECORDED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "37797", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{505,java.lang.Integer,NORMAL}-|-{NDJkNjI0ZjQxZDg0ZDY5MmFmZjg=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "505", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 505, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 505", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 505", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "505", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "505", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_11426~PPS_INSTANCE_37797", 
        "startTime": "2018-04-30T07:59:59Z", 
        "bookingDuration": "00:01:00", 
        "notificationHandles": [
            "5ae6cb9096094c205988ec24"
        ], 
        "created": "2018-04-30T07:53:52Z", 
        "lastModified": "2018-04-30T08:01:19Z", 
        "contentPlayUri": "?recId=3eda9103-d909-47d4-8566-33e951b9b9f4", 
        "uri": "/pps/households/AUTO_3006_cornercase_set2_scripts_3/catalog/5ae6cb9096094c205988ec24", 
        "scheduleInstance": "programid://2103878578~programid://36315011", 
        "keep": false, 
        "contentId": "PPS_CONTENT_11426~PPS_INSTANCE_37797"
    }
]
Script Fetching Household Failed Recording Catalog at 2018-04-30 08:03:46.856535
get all failed recording catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_3/catalog?filter:state=FAILED
 
Failed Recording Catalog is empty

#################### DEBUG ENDED   ####################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Failed : fanout value is not verified for all value 
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX   ^ ^ ^ ^ ^   XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX   E R R O R   XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

2018/04/30 08:04:07 UTC ############################## ENDED :  corner_US31229_TC1704 ##############################

2018/04/30 08:04:07 UTC ############################## STARTED :  corner_US31681_TC1178_series_booking_same_episode_on_two_different_channels_at_different_time ##############################
US31681: As a Viewer, I want to prevent duplicate copies of an episode within a series from being recorded
TC1178: Book series recording,same episode on two different channels at different time,record only one copy of episode 
TC1182: Book series recording ,turn on option Record one copy, same episodes on multiple channels at the different times
Starting test corner_US31681_TC1178_series_booking_same_episode_on_two_different_channels_at_different_time
### STEP1:Ingest a series of two episodes with five minutes duration.#################################



{'services': { 505: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'boodiffep255_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'boodiffep255'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'boodiffep255_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'boodiffep255'}],
         'lineupLength': 8,
         'message': ''}},
'shows': set(['boodiffep255']),
'seasons': { 'boodiffep255': { 1: set([1, 2])}},
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 506: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'boodiffep255_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'boodiffep255'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'boodiffep255_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'boodiffep255'}],
         'lineupLength': 8,
         'message': ''}},
'shows': set(['boodiffep255']),
'seasons': { 'boodiffep255': { 1: set([1, 2])}},
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.5552
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525075588000~1525082788000?lang=eng&serviceList=505,506&count=255&region=101&catalogueId=1
### STEP2:Perform the Series booking. #########################




PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
Series Booking Successfull seriesId 1779013488 
### STEP3:Verify that the all episodes of the series booked successfully###########



get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://1188073779~programid://254849085', u'programid://1188073780~programid://254849086'] is in BOOKED state
###STEP4:Verify that the duplicate episodes of the seriesare not  booked. ########



get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://1188073780~programid://1526372115', u'programid://1188073779~programid://1526372116'] is not in BOOKED state
### STEP5:Verify that the first episode of the series is booked and wait to start recording #############



get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
Program starts broadcasting from 1525075680000 (in epoch)
Script will wait for 1.45 minutes to start the recording
series booked successfully 
### STEP6:Verify that the  first episode is in recording state.###################



get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
All Program with the contentid [u'programid://1188073779~programid://254849085'] is in RECORDING state
###STEP7:Verify that all epispdes of the series are in the recorded catalog..#########



System wait for 8 minutes to check that all episodes of the series are recorded
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
All Programs with the contentids [u'programid://1188073779~programid://254849085', u'programid://1188073780~programid://254849086'] is in RECORDED state
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
Programs not in recorded state : [u'programid://1188073780~programid://1526372115', u'programid://1188073779~programid://1526372116'] 

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: Recorded one copy of all the episodes of the series 

2018/04/30 08:18:50 UTC ############################## ENDED :  corner_US31681_TC1178_series_booking_same_episode_on_two_different_channels_at_different_time ##############################

2018/04/30 08:18:50 UTC ############################## STARTED :  corner_US31681_TC1190_rebroadcast_episode_verify ##############################
US31681: As a Viewer, I want to prevent duplicate copies of an episode within a series from being recorded
TC1190: Book series recording with repeated episode, turn on 'Record one copy' option. Verify that record only one copy of repeated episode will be booked in the booking list and will be recorded in the recorded library
US32026: As a viewer, I want to use Broadcast Order to ensure that I don't book repeat episodes of a show
TC948: Book series recording with only first run episodes. Verify the record icon before and during recording in the Booking list and during recording and after recording in the Recorded Library
TC949: Book series recording with only first run episodes. Verify the record icon before, during recording and after recording in Guide
TC950: Book series recording with only first run episodes. Verify the record icon before, during recording and after recording in Search
TC951: Book series recording with only first run episodes. Verify the record icon before, during recording and after recording in Program Information
TC945: Book series recording with only first run episodes from Guide. Verify only first run episodes are Scheduled recording in the Book recording list and only first run episodes are recorded in the Recorded Library
TC946: Book series recording with only first run episodes from Search. Verify only first run episodes are Scheduled recording in the booking list and only first run episodes are recorded in the Recorded Library
TC947: Book series recording with only first run episodes from Program Information. Verify only first run episodes are Scheduled recording in the booking list and only first run episodes are recorded in the Recorded Library
Starting test corner_US31681_TC1190_rebroadcast_episode_verify
### STEP1:Ingest a series of three episodes with four two minutes duration,in that one episode is rebroadcast of first episode 


{'services': { 506: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'TC1190460_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'TC1190460'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'TC1190460_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'TC1190460'}],
         'lineupLength': 8,
         'message': ''}},
'shows': set(['TC1190460']),
'seasons': { 'TC1190460': { 1: set([1, 2])}},
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Rebroadcast episode start time : 2018-04-30T08:30:50Z
Current time :  2018-04-30 08:18:51.040801

Episode to rebroadcast : ['TC1190460_1_1']

Rebroadcasting the episode :  TC1190460_1_1_506_04300826
New Id : TC1190460_1_1_506_4300926
Original Episode Timing : 2018-04-30T08:22:00Z  To : 2018-04-30T08:26:00Z
Duration : 240
Post Time : 2018-04-30T08:30:50Z
End Availability : 2018-04-30T08:34:50Z
New content id : 506~30042018082200~30042018083450
Prepared for Rebroadcast : TC1190460_1_1

Rebroadcast XML file generated : rebroadcast_TC1190460.xml
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.5552
Cleaning up the household before the testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525076471000~1525083671000?lang=eng&serviceList=506&count=255&region=101&catalogueId=1
Series ContentId dictionary from the Grid Response
{u'programid://2135261660~programid://1691537762': [1525077050000, 1525077290000, u'TC1190460_1_1', 2147480062, 1, u'506'], u'programid://2135261660~programid://1591606092': [1525076520000, 1525076760000, u'TC1190460_1_1', 2147480062, 1, u'506'], u'programid://2135261659~programid://1591606093': [1525076760000, 1525077000000, u'TC1190460_1_2', 2147480062, 2, u'506']}
Series contentId list after sorting
[(u'programid://2135261660~programid://1591606092', [1525076520000, 1525076760000, u'TC1190460_1_1', 2147480062, 1, u'506']), (u'programid://2135261659~programid://1591606093', [1525076760000, 1525077000000, u'TC1190460_1_2', 2147480062, 2, u'506']), (u'programid://2135261660~programid://1691537762', [1525077050000, 1525077290000, u'TC1190460_1_1', 2147480062, 1, u'506'])]

### STEP2:Perform the Series booking. ######


PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings 

### STEP3:Verify that the all episodes of the series booked successfully ######

get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://2135261660~programid://1591606092', u'programid://2135261659~programid://1591606093'] is in BOOKED state

### STEP4:Verify that the duplicate episodes of the seriesare not  booked. #######

get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://2135261660~programid://1691537762'] is not in BOOKED state

### STEP5:Verify that the first episode of the series is booked and wait to start recording ####

Scirpt will wait for  103.0  to start recording of episode 1

###STEP6:Verify first episode is in recording state in booked catalog . ####

get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
All Program with the contentid [u'programid://2135261660~programid://1591606092'] is in RECORDING state
System waits 800.0 Seconds to Ends the Rebroadcasted episode 
### STEP7: Verify that All  Booked episodes are  recorded 
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
All Programs with the contentids [u'programid://2135261660~programid://1591606092', u'programid://2135261659~programid://1591606093'] is in RECORDED state
### STEP8:Verify that rebroadcasted episode is not in the recorded library ###
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
Programs not in recorded state : [u'programid://2135261660~programid://1691537762'] 
### Started VMR verification ###
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
Length of ContentPlaybackURI list is not equal to the content id list : []

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed : Two episodes are recorded and the Rebroadcast episode is not recorded

2018/04/30 08:36:40 UTC ############################## ENDED :  corner_US31681_TC1190_rebroadcast_episode_verify ##############################

2018/04/30 08:36:40 UTC ############################## STARTED :  corner_US31721_TC1524_Canceling_the_Scheduled_recordingWithGuardtime ##############################
{'TC1524': ['US31735', '', 3]}

US31721: UseCase: Delete cDVR Bookings by Subscriber

TC1524: Delete scheduled single recording from search. Verify the scheduled single recording with extended start and/or end time is removed from the Schedule Recordings List
Starting test corner_US31721_TC1524_Canceling_the_Scheduled_recordingWithGuardtime


### STEP1: Ingest 2 events, n minutes each (with post time of 6 minutes) #################################################################

{'services': { 505: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'guardev41_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'guardev41_2', 'rating': 1}],
         'lineupLength': 8,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.5552
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525077541000~1525084741000?lang=eng&serviceList=505&count=255&region=101&catalogueId=1
ContentId dictionary from the grid response{u'programid://1319186265~programid://2147482829': [1525077960000, 1525078200000, 240000], u'programid://1319186264~programid://2147482828': [1525077720000, 1525077960000, 240000]}
Content id details of event in sorted manner:  [(u'programid://1319186264~programid://2147482828', [1525077720000, 1525077960000, 240000]), (u'programid://1319186265~programid://2147482829', [1525077960000, 1525078200000, 240000])]


### STEP2: set the end guard time and start guard time to 5 ####################################################

List of all content ids for booking:  [u'programid://1319186264~programid://2147482828', u'programid://1319186265~programid://2147482829']


### STEP3: Book the series and verify the BOOKED state and endguard time and start guard time value in catalog ####################################


PPS booking is Doing for 
 householdId AUTO_3006_cornercase_set2_scripts_2  and its program id is programid://1319186264~programid://2147482828

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings 
PPS Booking completed successfully
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://1319186264~programid://2147482828'] is in BOOKED state
Start guard time for  programid://1319186264~programid://2147482828  :  00:03:00 , End guard time :  00:03:00 from booking catalog
Booking is done with given end and start guard time


###STEP3: Delete the booking ###########################################################################################


Delete PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae6d625fddcf120e1a0806a
PPS Booking Deleted successfully
Booked event was succesfully deleted


###STEP4: Verification of deletion of the booking ###########################################################################################

Verifying booking catalog for succesfull deletion of events
Booked library fetched  via URL :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
Booked Library is empty
Booking catalog is empty after deletion of events

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: All the events were succesfully deleted and verified from booked catalog

2018/04/30 08:39:23 UTC ############################## ENDED :  corner_US31721_TC1524_Canceling_the_Scheduled_recordingWithGuardtime ##############################

2018/04/30 08:39:23 UTC ############################## STARTED :  corner_US31735_TC1297_back2back_series_sameChannel ##############################
{'TC1297': ['US31735', '', 3]}
TC1297:Book a new series and schedule another series with start time where previous series end (same channel), Schedule series is successful
US31735: UseCase: Schedule Series Recording
###STEP1:Ingest two series with two episodes of three minutes duration, Second series ingest will be the end time of the first Series in same channel. ################



{'services': { 505: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'serich228_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'serich228'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'serich228_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'serich228'},
                     { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'sericha760_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'sericha760'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'sericha760_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'sericha760'}],
         'lineupLength': 16,
         'message': ''}},
'shows': set(['serich228', 'sericha760']),
'seasons': { 'serich228': { 1: set([1, 2])}, 'sericha760': { 1: set([1, 2])}},
'totalLength': "00:16:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the catalog ingest to sync with the CI host in seconds 121.1104
Starting test corner_US31735_TC1297_back2back_series_sameChannel

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525077705000~1525084905000?lang=eng&serviceList=505&count=255&region=101&catalogueId=1
ContentId Dictionary from the grid response
{u'programid://2147480288~programid://496472795': [1525077780000, 1525078020000, u'serich228_1_1', 1991545895, 1], u'programid://2147480290~programid://496472793': [1525078020000, 1525078260000, u'serich228_1_2', 1991545895, 2]}
series contentid after Sorting
[(u'programid://2147480288~programid://496472795', [1525077780000, 1525078020000, u'serich228_1_1', 1991545895, 1]), (u'programid://2147480290~programid://496472793', [1525078020000, 1525078260000, u'serich228_1_2', 1991545895, 2])]
### STEP2:Perform series series booking. ############




PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings 
PPS Booking completed successfully for the series:  1991545895
### STEP3:Verify that the series booked successfully and  all episodes are in the booked catalog.#######



get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525077710000~1525084910000?lang=eng&serviceList=505&count=255&region=101&catalogueId=1
ContentId Dictionary from the grid response
{u'programid://2147480291~programid://496472794': [1525078500000, 1525078740000, u'sericha760_1_2', 1866467029, 2], u'programid://2147480289~programid://496472796': [1525078260000, 1525078500000, u'sericha760_1_1', 1866467029, 1]}
series contentid after Sorting
[(u'programid://2147480289~programid://496472796', [1525078260000, 1525078500000, u'sericha760_1_1', 1866467029, 1]), (u'programid://2147480291~programid://496472794', [1525078500000, 1525078740000, u'sericha760_1_2', 1866467029, 2])]
### STEP2:Perform series series booking. ############




PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings 
PPS Booking completed successfully for the series:  1866467029
### STEP3:Verify that the series booked successfully and  all episodes are in the booked catalog.#######



get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
[1525078260000, 1525078740000]
Series Id: 1991545895
Episode number : 2
Episode number : 1
List of Booked Episodes for seriesID:  1991545895  ->  {1: [1525077780000, 1525078020000, 240000, u'37896', u'/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae6d6c95a35bf20e5a98860', u'serich228_1_1', u'programid://2147480288~programid://496472795', u'groupid://1991545895', u'505'], 2: [1525078020000, 1525078260000, 240000, u'37897', u'/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae6d6c95a35bf20e5a9885e', u'serich228_1_2', u'programid://2147480290~programid://496472793', u'groupid://1991545895', u'505']}
Series Id: 1866467029
Episode number : 2
Episode number : 1
List of Booked Episodes for seriesID:  1866467029  ->  {1: [1525078260000, 1525078500000, 240000, u'37898', u'/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae6d6cea7f2b7218ae8e150', u'sericha760_1_1', u'programid://2147480289~programid://496472796', u'groupid://1866467029', u'505'], 2: [1525078500000, 1525078740000, 240000, u'37899', u'/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae6d6cea7f2b7218ae8e14e', u'sericha760_1_2', u'programid://2147480291~programid://496472794', u'groupid://1866467029', u'505']}

List of Episodes booked:  [u'programid://2147480288~programid://496472795', u'programid://2147480290~programid://496472793', u'programid://2147480289~programid://496472796', u'programid://2147480291~programid://496472794']
All the episodes are present in Booking catalog 
Waiting for First series to start for  65.0 seconds..
### STEP4:Verify that the first episode of the first series is in recording state. ######



get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
Recording Content Response for first series
[
    {
        "seriesId": "groupid://1991545895", 
        "pvr": "nPVR", 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set2_scripts_2", 
        "channelId": "505", 
        "isSynchronized": true, 
        "duration": "00:04:00", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T08:43:00Z", 
        "recurrence": "SERIES", 
        "title": "serich228_1_1", 
        "content": {
            "seriesId": 1991545895, 
            "instanceId": "programid://496472795", 
            "broadcastDateTime": 1525077780000, 
            "seasonPremiere": false, 
            "locator": "{YWM3NWI3MzdlYjM5NjdlMmQ2OGY=,java.lang.String,NORMAL}[+]{hashKey,NORMAL}", 
            "erotic": false, 
            "audioType": "stereo", 
            "duration": 240000, 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": false, 
            "macrovision": false, 
            "id": "programid://2147480288", 
            "mixSource": false, 
            "externalKey": "serich228_1_1_505_tk04300847", 
            "audioDescription": false, 
            "restartAvailable": false, 
            "title": "serich228_1_1", 
            "allOfferIdList": [
                2
            ], 
            "synopsis": "serich228_1_1 - synopsis", 
            "contentNdsDrmAttributes": {
                "isBto": false, 
                "lastOfferEndDateTime": 1765963847000, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "rentalDuration": 2147483647, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isExtendedRental": false, 
                "isIppv": false, 
                "isPar": false, 
                "isOppv": false
            }, 
            "source": "ltv", 
            "live": false, 
            "parentGroupId": "groupid://1991545895", 
            "type": "instance", 
            "channel": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
            "videoFormat": "sd", 
            "wideScreen": false, 
            "episodeNumber": 1, 
            "isPurchasable": true, 
            "subtitlesHardOfHearing": false, 
            "hdcp": false, 
            "serviceId": "505", 
            "adult": false, 
            "sortTitle": "serich228_1_1", 
            "endAvailability": 1525078020000, 
            "hasChapters": false, 
            "cdvrAvailable": true, 
            "seasonFinale": false, 
            "shortSynopsis": "serich228_1_1 - synopsis", 
            "mixContentId": false, 
            "broadcaster": "VGE", 
            "serviceEquivalenceKey": "505", 
            "ict": false, 
            "parentGroups": [
                {
                    "groupType": "Series", 
                    "groupId": "groupid://1991545895"
                }
            ]
        }, 
        "state": "RECORDING", 
        "startGuardTime": "00:00:00", 
        "recordingId": "37896", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{505,java.lang.Integer,NORMAL}-|-{NDJkNjI0ZjQxZDg0ZDY5MmFmZjg=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "505", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 505, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 505", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 505", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "505", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "505", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_11643~PPS_INSTANCE_37896", 
        "startTime": "2018-04-30T08:42:56Z", 
        "recurrenceActive": true, 
        "bookingDuration": "00:04:00", 
        "notificationHandles": [
            "5ae6d6c95a35bf20e5a98860"
        ], 
        "created": "2018-04-30T08:41:45Z", 
        "lastModified": "2018-04-30T08:43:19Z", 
        "contentPlayUri": "?recId=679abaaa-8434-4216-9576-f5ceca77d15a", 
        "uri": "/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae6d6c95a35bf20e5a98860", 
        "scheduleInstance": "programid://2147480288~programid://496472795", 
        "keep": false, 
        "contentId": "PPS_CONTENT_11643~PPS_INSTANCE_37896"
    }
]
First Series :  1991545895  is in recording state
### STEP5:Verify that the first episode of the second series is in recording state. ######



Waiting for series recording to complete
recording completed for first series, waiting for state change
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
second Series :  1866467029  is in recording state
### STEP6:Verify that the all the episodes of both the series are recorded and present in the recorded library.###########



Waiting for series recording to complete
series last episode end time 1525078740000
recording completed for second series, waiting for state change
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
Booked events:  [u'programid://2147480288~programid://496472795', u'programid://2147480290~programid://496472793', u'programid://2147480289~programid://496472796', u'programid://2147480291~programid://496472794']
Recorded event:  programid://2147480290~programid://496472793
Recorded event:  programid://2147480288~programid://496472795
Recorded event:  programid://2147480291~programid://496472794
Recorded event:  programid://2147480289~programid://496472796

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed,Series is in RECORDED state, all the episodes belonging to both the series recorded

2018/04/30 09:00:51 UTC ############################## ENDED :  corner_US31735_TC1297_back2back_series_sameChannel ##############################

2018/04/30 09:00:51 UTC ############################## STARTED :  corner_US31735_TC1298_back2back_series_differentChannel ##############################
{'TC1298': ['US31735', '', 3]}
TC1298: Book a new series and schedule another series with start time where previous series end (different channels), Schedule series is successful
US31735: UseCase: Schedule Series Recording
### STEP1:Ingest two series with two episodes of three minutes duration, Second series ingest will be the end time of the first Series ########



{'services': { 505: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'diffchparo256_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'diffchparo256'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'diffchparo256_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'diffchparo256'}],
         'lineupLength': 8,
         'message': ''}},
'shows': set(['diffchparo256']),
'seasons': { 'diffchparo256': { 1: set([1, 2])}},
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 506: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'diffchpart801_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'diffchpart801'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'diffchpart801_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'diffchpart801'}],
         'lineupLength': 8,
         'message': ''}},
'shows': set(['diffchpart801']),
'seasons': { 'diffchpart801': { 1: set([1, 2])}},
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Script will wait for 2.01850666667 minutes for the ingest to sync with the CI Host
Starting test corner_US31735_TC1298_back2back_series_differentChannel

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525078993000~1525086193000?lang=eng&serviceList=505,506&count=255&region=101&catalogueId=1
series contentid :  [(u'programid://2147480298~programid://1588447739', [1525079040000, 1525079280000, u'diffchparo256_1_1', 1893727460, 1]), (u'programid://2147480299~programid://1588447740', [1525079280000, 1525079520000, u'diffchparo256_1_2', 1893727460, 2])]
### STEP2:Perform series series booking. ############




PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings 
PPS Booking completed successfully for the series:  1893727460
### STEP3:Verify that the series booked successfully and  all episodes are in the booked catalog.#######



get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525078998000~1525086198000?lang=eng&serviceList=505,506&count=255&region=101&catalogueId=1
series contentid :  [(u'programid://1919172442~programid://932433515', [1525079520000, 1525079760000, u'diffchpart801_1_1', 1195096089, 1]), (u'programid://1919172441~programid://932433516', [1525079760000, 1525080000000, u'diffchpart801_1_2', 1195096089, 2])]
### STEP2:Perform series series booking. ############




PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings 
PPS Booking completed successfully for the series:  1195096089
### STEP3:Verify that the series booked successfully and  all episodes are in the booked catalog.#######



get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
Series Id: 1893727460
Episode number : 2
Episode number : 1
List of Booked Episodes for seriesID:  1893727460  ->  {1: [1525079040000, 1525079280000, 240000, u'37950', u'/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae6dbd147551d206618c74b', u'diffchparo256_1_1', u'programid://2147480298~programid://1588447739', u'groupid://1893727460', u'505'], 2: [1525079280000, 1525079520000, 240000, u'37951', u'/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae6dbd147551d206618c749', u'diffchparo256_1_2', u'programid://2147480299~programid://1588447740', u'groupid://1893727460', u'505']}
Series Id: 1195096089
Episode number : 2
Episode number : 1
List of Booked Episodes for seriesID:  1195096089  ->  {1: [1525079520000, 1525079760000, 240000, u'37952', u'/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae6dbd6d8ba2820719bdbed', u'diffchpart801_1_1', u'programid://1919172442~programid://932433515', u'groupid://1195096089', u'506'], 2: [1525079760000, 1525080000000, 240000, u'37953', u'/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae6dbd6d8ba2820719bdbeb', u'diffchpart801_1_2', u'programid://1919172441~programid://932433516', u'groupid://1195096089', u'506']}
All the episodes are present in Booking catalog 
Waiting for First series to start for  37.0 seconds..
fetching recording library for First series
### STEP4:Verify that the first episode of the first series is in recording state. ######



get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
All Program with the contentid [u'programid://2147480298~programid://1588447739'] is in RECORDING state
First Episode of the series is in recording state
### STEP5:Verify that the first episode of the second series is in recording state. ######



Waiting for series recording to complete
recording completed for first series, waiting for state change
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
All Program with the contentid [u'programid://1919172442~programid://932433515'] is in RECORDING state
First Episode of the second series is being recorded
### STEP6:Verify that the all the episodes of both the series are recorded and present in the recorded library.###########



Waiting for series recording to complete
recording completed for second series, waiting for state change
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
Recording Content Response after recording completed

Recorded event:  programid://2147480299~programid://1588447740
Recorded event:  programid://2147480298~programid://1588447739
Recorded event:  programid://1919172441~programid://932433516
Recorded event:  programid://1919172442~programid://932433515

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: Series is in RECORDED state, all the episodes belonging to both the series recorded

2018/04/30 09:21:51 UTC ############################## ENDED :  corner_US31735_TC1298_back2back_series_differentChannel ##############################

2018/04/30 09:21:51 UTC ############################## STARTED :  corner_US31735_TC1300_backtoback_seriesbooking ##############################
{'TC1300': ['US31735', '', 3]}
TC1300:Book a new series starts at the same time with other series recording,Tuner Quota =max,schedule recordings fail,display error on Client
 US31735: UseCase: Schedule Series Recording
### STEP1: Ingest two series of two episodes of two minutes duration and both series broadcasts at the same time ########## 
 
 

{'services': { 505: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'bac2bak230_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'bac2bak230'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'bac2bak230_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'bac2bak230'}],
         'lineupLength': 8,
         'message': ''},
  506: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'bac2bac776_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'bac2bac776'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'bac2bac776_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'bac2bac776'}],
         'lineupLength': 8,
         'message': ''}},
'shows': set(['bac2bac776', 'bac2bak230']),
'seasons': { 'bac2bac776': { 1: set([1, 2])}, 'bac2bak230': { 1: set([1, 2])}},
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Starting test corner_US31735_TC1300_backtoback_seriesbooking
Household cleanup

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

### STEP2:Fetch the tuner quota of the household ######## 
 
 
 
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/numOfTuners
Number of Tuners is 4
### STEP3:Fetch the tuner quota of the household ######## 
 
 

Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/numOfTuners
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525080252000~1525087452000?lang=eng&serviceList=505,506&count=255&region=101&catalogueId=1
### STEP4 : Perform  first Series booking######## 
 
 


PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
Series Booking Successfull seriesId 1745780641 
### STEP5:Check all the episodes of the series are booked suvvessfully and its present in the booked library #### 
 
 

get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
Content Ids from the booked library [u'programid://2145036725~programid://1286316329', u'programid://2145036724~programid://1286316330']
Content Ids from the grid response [u'programid://2145036724~programid://1286316330', u'programid://2145036725~programid://1286316329']
all booked programes are present in the booked library

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
PPS Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
403
{'date': 'Mon, 30 Apr 2018 09:24:17 GMT', 'flow_context': '5AE6E0C1E4B0CBA15170C3D0', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6E0C1E4B0CBA15170C3D0"}
### STEP4 : Perform  Second Series booking######## 
 
 

PPS Booking failed for the series contentId programid://1437877549~programid://1367399430 due to , Tuner Conflict Detected
### STEP7:Verify that second series booking failed ##### 
 
 

get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
Series is not present in the booked catalog

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed :Series is not present in the booked catalog

2018/04/30 09:24:42 UTC ############################## ENDED :  corner_US31735_TC1300_backtoback_seriesbooking ##############################

2018/04/30 09:24:42 UTC ############################## STARTED :  corner_US31735_TC1301_backtoback_seriesbooking_halfway ##############################
{'TC1301': ['US31735', '', 3]}
TC1301:Book new series with start time half-way before other records' end, Tuner Quota-max, Schedule recordings failed, message displays on client
 US31735: UseCase: Schedule Series Recording
### STEP1: Ingest two series of two episodes of three minutes duration and one series starts half-way  of the first series ######### 
 
 

Catalog ingest delay of first Series 120.5552
{'services': { 505: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'halfwaser230_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'halfwaser230'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'halfwaser230_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'halfwaser230'}],
         'lineupLength': 8,
         'message': ''}},
'shows': set(['halfwaser230']),
'seasons': { 'halfwaser230': { 1: set([1, 2])}},
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
second series broadcast satrts at  1525080642.59
Catalog ingest delay of second Series 120.5552
{'services': { 506: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'halfwase776_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'halfwase776'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'halfwase776_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'halfwase776'}],
         'lineupLength': 8,
         'message': ''}},
'shows': set(['halfwase776']),
'seasons': { 'halfwase776': { 1: set([1, 2])}},
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Starting test corner_US31735_TC1301_backtoback_seriesbooking_halfway
Household cleanup

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

### STEP2:Fetch the tuner quota of the household ###### 
 
 

Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/numOfTuners
Number of Tuners is 4
### STEP3:Set the Tunerquota of the household to 1 #### 
 
 

Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/numOfTuners
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525080544000~1525087744000?lang=eng&serviceList=505,506&count=255&region=101&catalogueId=1
### STEP4:Perform the first Series booking ###### 
 
 


PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
Series Booking Successfull seriesId 1279433367 
### STEP5:Check all the episodes of the series are booked suvvessfully and its present in the booked library ###### 
 
 

get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
Content Ids from the booked library [u'programid://1874704481~programid://1377679873']
Content Ids from the grid response [u'programid://1874704481~programid://1377679873']
all booked programes are present in the booked library
### STEP6:Perform the second Series booking #########
 
 


PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
PPS Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
403
{'date': 'Mon, 30 Apr 2018 09:29:09 GMT', 'flow_context': '5AE6E1E5E4B0D0D969BAE6DB', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6E1E5E4B0D0D969BAE6DB"}
PPS Booking failed for the series contentId programid://2147480307~programid://1765521354 due to , Tuner Conflict Detected 
### STEP7:Verify that second series booking failed ####### 
 
 

get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
Series is not present in the booked catalog

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase passed:Series is not present in the booked catalog

2018/04/30 09:29:34 UTC ############################## ENDED :  corner_US31735_TC1301_backtoback_seriesbooking_halfway ##############################

2018/04/30 09:29:34 UTC ############################## STARTED :  corner_US31735_TC1302_backtoback_seriesbooking_1min_before ##############################
{'TC1302': ['US31735', '', 3]}
TC1302:Book a new series with start time 1 minute before other records' end, Tuner Quota =max, Schedule recordings fails, message displays on client. 
 US31735: UseCase: Schedule Series Recording
### STEP1: Ingest two series of two episodes of three minutes duration and one series starts 1 minute before of the first series ###### 
 
 

Catalog ingest delay of first Series 120.5552
{'services': { 505: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'back1mn729_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'back1mn729'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'back1mn729_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'back1mn729'}],
         'lineupLength': 8,
         'message': ''}},
'shows': set(['back1mn729']),
'seasons': { 'back1mn729': { 1: set([1, 2])}},
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Start time of second series 1525081234.63
Catalog ingest delay of second Series 120.5552
{'services': { 506: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'back1mi277_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'back1mi277'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'back1mi277_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'back1mi277'}],
         'lineupLength': 8,
         'message': ''}},
'shows': set(['back1mi277']),
'seasons': { 'back1mi277': { 1: set([1, 2])}},
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Starting test corner_US31735_TC1302_backtoback_seriesbooking_1min_before
Household cleanup

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

### STEP2:Fetch the tuner quota of the household ###### 
 
 

Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/numOfTuners
Number of Tuners is 4
### STEP3:Set the Tunerquota of the household to 1 #### 
 
 

Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/numOfTuners
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525080836000~1525088036000?lang=eng&serviceList=505,506&count=255&region=101&catalogueId=1
### STEP4:Perform the first Series booking ###### 
 
 

[(u'programid://1431286499~programid://973295468', [1525081020000, 1525081260000, u'back1mn729_1_2', 1694027437, 2])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
Series Booking Successfull seriesId 1694027437 
### STEP5:Check all the episodes of the series are booked suvvessfully and its present in the booked library ###### 
 
 

get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
Content Ids from the booked library [u'programid://1431286499~programid://973295468']
Content Ids from the grid response [u'programid://1431286499~programid://973295468']
all booked programes are present in the booked library
### STEP6:Perform the second Series booking #########
 
 

[(u'programid://2147480308~programid://1875326652', [1525081200000, 1525081440000, u'back1mi277_1_1', 1226162797, 1]), (u'programid://2147480309~programid://1875326653', [1525081440000, 1525081680000, u'back1mi277_1_2', 1226162797, 2])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
PPS Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
403
{'date': 'Mon, 30 Apr 2018 09:34:01 GMT', 'flow_context': '5AE6E309E4B056714510DAE7', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6E309E4B056714510DAE7"}
PPS Booking failed for the series contentId %s %(series_contentId) due to , Tuner Conflict Detected
### STEP7:Verify that second series booking failed ####### 
 
 

get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
Series is not present in the booked catalog

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/numOfTuners
Test case passed :Series is not present in the booked catalog

2018/04/30 09:34:26 UTC ############################## ENDED :  corner_US31735_TC1302_backtoback_seriesbooking_1min_before ##############################

2018/04/30 09:34:26 UTC ############################## STARTED :  corner_US31735_TC1307_SingletoSeries ##############################
{'TC1307': ['US31735', '', 3]}
US31735 : UseCase: Schedule Series Recording
TC1307 : Convert Single recordings to Series recording
Starting test corner_US31735_TC1307_SingletoSeries


###STEP1:Ingest a series with three episodes of n minutes duration. #########

{'services': { 505: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'sing2ser277_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'sing2ser277'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'sing2ser277_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'sing2ser277'},
                     { 'episodeNum': 3, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'sing2ser277_1_3', 'rating': 1, 'seasonNum': 1, 'showID': 'sing2ser277'}],
         'lineupLength': 12,
         'message': ''}},
'shows': set(['sing2ser277']),
'seasons': { 'sing2ser277': { 1: set([1, 2, 3])}},
'totalLength': "00:12:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.8328
Cleaning up the catalog for the specific household before executing the testscript

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525081008000~1525088208000?lang=eng&serviceList=505,506&count=255&region=101&catalogueId=1


###STEP2:Perform an event booking of the first episode of the series. ##########

contentId list[(u'programid://1244027143~programid://1767671404', [1525081080000, 1525081320000, 240000, u'sing2ser277_1_1']), (u'programid://1244027141~programid://1767671405', [1525081320000, 1525081560000, 240000, u'sing2ser277_1_2']), (u'programid://1244027142~programid://1767671403', [1525081560000, 1525081800000, 240000, u'sing2ser277_1_3'])]

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings 
Event Booking Successfull for the event contentId programid://1244027143~programid://1767671404


###STEP3:Verify that the vent booked successfully and  event is in the booked catalog. ###########

get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
Booked Catalog
[
    {
        "seriesId": "groupid://1503321133", 
        "pvr": "nPVR", 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set2_scripts_2", 
        "channelId": "505", 
        "isSynchronized": true, 
        "duration": "00:04:00", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T09:38:00Z", 
        "recurrence": "NONE", 
        "title": "sing2ser277_1_1", 
        "content": {
            "seriesId": 1503321133, 
            "instanceId": "programid://1767671404", 
            "broadcastDateTime": 1525081080000, 
            "seasonPremiere": false, 
            "locator": "{NDYzZjMwZDg4ODgzNzI1Y2UzMWE=,java.lang.String,NORMAL}[+]{hashKey,NORMAL}", 
            "erotic": false, 
            "audioType": "stereo", 
            "duration": 240000, 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": false, 
            "macrovision": false, 
            "id": "programid://1244027143", 
            "mixSource": false, 
            "externalKey": "sing2ser277_1_1_505_tk04300942", 
            "audioDescription": false, 
            "restartAvailable": false, 
            "title": "sing2ser277_1_1", 
            "allOfferIdList": [
                2
            ], 
            "synopsis": "sing2ser277_1_1 - synopsis", 
            "contentNdsDrmAttributes": {
                "isBto": false, 
                "lastOfferEndDateTime": 1765963847000, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "rentalDuration": 2147483647, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isExtendedRental": false, 
                "isIppv": false, 
                "isPar": false, 
                "isOppv": false
            }, 
            "source": "ltv", 
            "live": false, 
            "parentGroupId": "groupid://1503321133", 
            "type": "instance", 
            "channel": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
            "videoFormat": "sd", 
            "wideScreen": false, 
            "episodeNumber": 1, 
            "isPurchasable": true, 
            "subtitlesHardOfHearing": false, 
            "hdcp": false, 
            "serviceId": "505", 
            "adult": false, 
            "sortTitle": "sing2ser277_1_1", 
            "endAvailability": 1525081320000, 
            "hasChapters": false, 
            "cdvrAvailable": true, 
            "seasonFinale": false, 
            "shortSynopsis": "sing2ser277_1_1 - synopsis", 
            "mixContentId": false, 
            "broadcaster": "VGE", 
            "serviceEquivalenceKey": "505", 
            "ict": false, 
            "parentGroups": [
                {
                    "groupType": "Series", 
                    "groupId": "groupid://1503321133"
                }
            ]
        }, 
        "state": "BOOKED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "37997", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{505,java.lang.Integer,NORMAL}-|-{NDJkNjI0ZjQxZDg0ZDY5MmFmZjg=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "505", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 505, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 505", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 505", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "505", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "505", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_11858~PPS_INSTANCE_37997", 
        "startTime": "2018-04-30T09:38:00Z", 
        "bookingDuration": "00:04:00", 
        "notificationHandles": [
            "5ae6e3b0a3078b20f29fe846"
        ], 
        "created": "2018-04-30T09:36:48Z", 
        "lastModified": "2018-04-30T09:36:48Z", 
        "contentPlayUri": "?recId=e1df50c5-f337-4fe5-ae66-6826eb16a4bb", 
        "uri": "/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae6e3b0a3078b20f29fe846", 
        "scheduleInstance": "programid://1244027143~programid://1767671404", 
        "keep": false, 
        "contentId": "programid://1244027143~programid://1767671404"
    }
]
/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae6e3b0a3078b20f29fe846


###STEP4:Convert the event booking into Series booking. ##################

Converting Event to Series via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae6e3b0a3078b20f29fe846/recurrence
 
Converting Event to Series successfully 


### STEP5:Verify that the all episodes of the  series is in booked catalog. ########

get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
Content Ids from the booked library [u'programid://1244027143~programid://1767671404', u'programid://1244027141~programid://1767671405', u'programid://1244027142~programid://1767671403']
Content Ids from the grid response [u'programid://1244027143~programid://1767671404', u'programid://1244027142~programid://1767671403', u'programid://1244027141~programid://1767671405']
System will wait for 785.0 seconds to complete the recording


###STEP6:Verify that the all the episodes of the series are recorded and present in the recorded library. ##################

get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
[u'programid://1244027143~programid://1767671404', u'programid://1244027141~programid://1767671405', u'programid://1244027142~programid://1767671403']

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: all programs are present in the recorded library

2018/04/30 09:51:50 UTC ############################## ENDED :  corner_US31735_TC1307_SingletoSeries ##############################

2018/04/30 09:51:50 UTC ############################## STARTED :  corner_US31742_TC1198_Delete_recording_during_playback ##############################
US31742: Delete single recording
TC1198: Delete single recording during playback . Verify the recorded content will not be removed from the recorded library
Starting test corner_US31742_TC1198_Delete_recording_during_playback


### STEP1: Verify the PRMSupportedflag and proceed further if it is True ######################### 

Testcase Unsupported: Cannot delete the recording during playback in Non-PRM Automation Method
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX   ^ ^ ^ ^ ^ ^ ^   XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX   W A R N I N G   XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

2018/04/30 09:51:50 UTC ############################## ENDED :  corner_US31742_TC1198_Delete_recording_during_playback ##############################

2018/04/30 09:51:50 UTC ############################## STARTED :  corner_US31743_TC1208_Delete_series_recording_from_Recorded_Library ##############################

 US31743: Delete series recording

 TC1208: Delete series recording from Recorded Library

 TC1209: Delete series recording from Search

 US31773: As a viewer, I want the ability to delete all the recording of a series via a single action

 TC995: Delete series recordings from Recorded Library


### STEP1: Ingest a series with three episodes of 2 minutes duration ########## 

{'services': { 505: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'DelSrsRec205_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'DelSrsRec205'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'DelSrsRec205_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'DelSrsRec205'},
                     { 'episodeNum': 3, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'DelSrsRec205_1_3', 'rating': 1, 'seasonNum': 1, 'showID': 'DelSrsRec205'}],
         'lineupLength': 9,
         'message': ''}},
'shows': set(['DelSrsRec205']),
'seasons': { 'DelSrsRec205': { 1: set([1, 2, 3])}},
'totalLength': "00:09:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.6246
Starting test corner_US31743_TC1208_Delete_series_recording_from_Recorded_Library

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525082051000~1525089251000?lang=eng&serviceList=505&count=255&region=101&catalogueId=1


### STEP2: Perform the series booking ######## 


PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
Series Booking Successfull for series contentId programid://1759940546~programid://2147482850 


### STEP3: Check whether all the episodes of the series are present in the booked library ######## 

get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
Content Ids from the booked library [u'programid://1759940546~programid://2147482850', u'programid://1759940545~programid://2147482851', u'programid://1759940544~programid://2147482849']
Content Ids from the grid response [u'programid://1759940545~programid://2147482851', u'programid://1759940544~programid://2147482849', u'programid://1759940546~programid://2147482850']
all booked programes are present in the booked library


###  STEP4: Wait to complete all the episodes recorded and verify that all the episodes of the series are present in the recorded library in recorded state.## 

System will wait for 582.0 seconds to compleete the recording 
Recorded library fetched  via URL :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
all programs are present in the recorded library


### STEP5: Delete the series recordings from the recorded library #####

Delete PPS recording via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae6e7c3f365362240f145c2/recurrence/recordings
 

Series Recording deleted successfully


### STEP6: verify that the series is not present in the recorded library 
Recorded library fetched  via URL :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
Recorded Library is empty

#################### DEBUG STARTED ####################

Script Fetching the Household Booked/Recorded Catalog at 2018-04-30 10:05:31.256502
get all Catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog
 
Household Catalog is empty
Script Fetching Household Failed Recording Catalog at 2018-04-30 10:05:31.264058
get all failed recording catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog?filter:state=FAILED
 
Failed Recording Catalog is empty

#################### DEBUG ENDED   ####################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: Recorded Library is empty which means Recorded Episodes are deleted successfully

2018/04/30 10:05:51 UTC ############################## ENDED :  corner_US31743_TC1208_Delete_series_recording_from_Recorded_Library ##############################

2018/04/30 10:05:51 UTC ############################## STARTED :  corner_US31745_TC1375_Browse_RecordedContents ##############################
US31745: UseCase: Enable Subscriber Browse for Recorded Content via control plane
TC1375: More than one recorded content in the recorded library. Navigation to recorded content: page up/page down (more than one screen), arrow up/arrow down, arrow right/arrow left, select
TC1380: Browse recorded contents options in the recorded library (Client implementation)
Starting test corner_US31745_TC1375_Browse_RecordedContents
###  STEP1: Ingest 2 Events of 2 Minutes with the Post Time to the CI Host########## 
 

{'services': { 505: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'brorec553_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'brorec553_2', 'rating': 1}],
         'lineupLength': 8,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.5552
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

### STEP2: Fetch the Grid Request and do the PPS Booking for both the Events ################# 
 

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525082892000~1525090092000?lang=eng&serviceList=505&count=255&region=101&catalogueId=1
ContentId dictionary from the Grid Response
{u'programid://1579107360~programid://366633473': [1525083180000, 1525083420000, 240000], u'programid://1579107359~programid://366633472': [1525082940000, 1525083180000, 240000]}
contentId list after Sorting
[(u'programid://1579107359~programid://366633472', 1525082940000, 1525083180000, 240000), (u'programid://1579107360~programid://366633473', 1525083180000, 1525083420000, 240000)]

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings 
PPS Booking is successful for the Event contentId programid://1579107359~programid://366633472
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://1579107359~programid://366633472', u'programid://1579107360~programid://366633473'] is not in BOOKED state

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings 
PPS Booking is successful for the Event contentId programid://1579107360~programid://366633473
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://1579107359~programid://366633472', u'programid://1579107360~programid://366633473'] is in BOOKED state
### STEP3: Wait till the Event starts recording and Proceed further till it completes recording ##################### 
 

Program starts broadcasting from 1525082940000 (in epoch)
Script will wait for 0.733333333333 minutes to start the recording by adding few minutes for the state change
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
All Program with the contentid [u'programid://1579107359~programid://366633472'] is in RECORDING state
First Program Recording Started and Second Program broadcasting completes at 1525083420000 (in epoch)
Second Program Recording completes in 7.0 minutes
Script will wait for7.0 minutes to complete the recording by adding few minutes for the state change
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
All Programs with the contentids [u'programid://1579107359~programid://366633472', u'programid://1579107360~programid://366633473'] is in RECORDED state
### STEP4: Verify both the Event completes recording and update the results ##################### 
 


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: More than One Event recorded successfully and in the recorded library

2018/04/30 10:18:50 UTC ############################## ENDED :  corner_US31745_TC1375_Browse_RecordedContents ##############################

2018/04/30 10:18:50 UTC ############################## STARTED :  corner_US31745_TC1383_series_all_episodes ##############################
{'TC1383': ['US31745', '', 3]}
US31745:Enable Subscriber Browse for Recorded Content via control plane
TC1383:Browse recorded library with only series recorded contents.  Navigation to recorded content:  page up/page down, arrow up/arrow down, arrow right/ arrow left, select key
Starting test corner_US31745_TC1383_series_all_episodes
### STEP1: Ingest a series with three episodes of n minutes duration ######### 
 
 

{'services': { 507: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'Allepiosde460_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'Allepiosde460'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'Allepiosde460_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'Allepiosde460'},
                     { 'episodeNum': 3, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'Allepiosde460_1_3', 'rating': 1, 'seasonNum': 1, 'showID': 'Allepiosde460'}],
         'lineupLength': 9,
         'message': ''}},
'shows': set(['Allepiosde460']),
'seasons': { 'Allepiosde460': { 1: set([1, 2, 3])}},
'totalLength': "00:09:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Script will wait for 2.01041 minutes to sync the catalog to the CI Host
Cleaning up the household catalog before the testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525083672000~1525090872000?lang=eng&serviceList=507&count=255&region=101&catalogueId=1
### STEP2: Fetch the Series and its episodes from the the grid response ############## 
 
 

[u'programid://2147480315~programid://829130138', u'programid://2147480316~programid://829130136', u'programid://2147480314~programid://829130137']
### STEP3: Perform the series booking ####### 
 
 


PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings 
PPS Booking completed successfully for the series contentId programid://2147480315~programid://829130138
### STEP4: Check whether all the episodes of the series are present in the booked library ######### 
 
 

get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
[1, 2, 3, u'programid://2147480314~programid://829130137', u'programid://2147480315~programid://829130138', u'programid://2147480316~programid://829130136']
[1, 2, 3, u'programid://2147480314~programid://829130137', u'programid://2147480315~programid://829130138', u'programid://2147480316~programid://829130136']
All episodes are successfully booked
### STEP5: Wait to complete all the episodes recorded and verify that all the episodes of the series are present in the recorded library in recorded state.####### 
 
 

System wait time to record all the episode is 633.969547119 seconds
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
All Programs with the contentids [u'programid://2147480315~programid://829130138', u'programid://2147480316~programid://829130136', u'programid://2147480314~programid://829130137'] is in RECORDED state
concecutive Episodes of a series are successfully recorded

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: All the episodes of the series are present in the recorded library in recorded state

2018/04/30 10:33:41 UTC ############################## ENDED :  corner_US31745_TC1383_series_all_episodes ##############################

2018/04/30 10:33:41 UTC ############################## STARTED :  corner_US31785_TC1583_tunerconflct_StopCurrent_event_rec ##############################

 US31785: As a SP, I want to provide Conflict Resolution support to the household to resolve Recorder Tuner Quota issues at Booking

TC1583 : Conflict Resolution, 1 tuner, single current recording program overlaps to single future recording program 
Starting test corner_US31785_TC1583_tunerconflct_StopCurrent_event_rec

### STEP1:Ingest two event of n minutes duration, on both channels at the same time. #########################################

Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.4164
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Fetching Number of tuners in the Household
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/numOfTuners
Number of Tuners is 4

### STEP2:Set the tuner quota to 1#############################################################################

Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/numOfTuners
Number of Tuners is 1
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525080962000~1525088162000?lang=eng&serviceList=505,506&count=255&region=101&catalogueId=1

### STEP3:Perform the current booking of the first program.  ###################

ContentId dictionary from the grid response {u'programid://2147480317~programid://308052047': [1525084500000, 1525084860000, 360000, u'stoevecur255_1']}
ContentId list from the ContentId dictionary [(u'programid://2147480317~programid://308052047', [1525084500000, 1525084860000, 360000, u'stoevecur255_1'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
Event Booking Successfull  for first Program

### STEP4:Verify that the event booked successfully and first event is in recording state. #######

get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
All Program with the contentid [u'programid://2147480317~programid://308052047'] is in RECORDING state

### STEP5:Perform the booking of the second event.  ##########################

ContentId dictionary from the grid response {u'programid://1630073589~programid://1338384842': [1525084500000, 1525084860000, 360000, u'ecurstop801_1']}
ContentId list from the ContentId dictionary [(u'programid://1630073589~programid://1338384842', [1525084500000, 1525084860000, 360000, u'ecurstop801_1'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
PPS Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
403
{'date': 'Mon, 30 Apr 2018 10:37:02 GMT', 'flow_context': '5AE6F1CEE4B0CA76F1C6FAFE', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6F1CEE4B0CA76F1C6FAFE"}
 Testcase Failed : PPS Booking failed due to Tuner Conflict

### STEP7:Stop the in-progress recording of the first program #####################

Stop the recording via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae6f192a3078b20f29fe848/management
Stop Recording is successful
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
All Programs with the contentids [u'programid://2147480317~programid://308052047'] is in RECORDED state
Stop recording Successfull and event is in recorded state in recorded library

### STEP8:Perform the booking of the second event again #######

ContentId dictionary from the grid response {u'programid://1630073589~programid://1338384842': [1525084500000, 1525084860000, 360000, u'ecurstop801_1']}
ContentId list from the ContentId dictionary [(u'programid://1630073589~programid://1338384842', [1525084500000, 1525084860000, 360000, u'ecurstop801_1'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings

### STEP9:Verify that the second event booked successfully. #################

get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://1630073589~programid://1338384842'] is in BOOKED state
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://2147480317~programid://308052047'] is not in BOOKED state

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase passed: First event is not in the booking list and the second event is present

2018/04/30 10:38:53 UTC ############################## ENDED :  corner_US31785_TC1583_tunerconflct_StopCurrent_event_rec ##############################

2018/04/30 10:38:53 UTC ############################## STARTED :  corner_US31785_TC1584_event_tunerConflict_cancelExisting ##############################

US31785: As a SP, I want to provide Conflict Resolution support to the household to resolve Recorder Tuner Quota issues at Booking

TC1584: With 1 tuner, a conflict message displays when user schedules a single future recording Prog-C. Prog-C overlaps to a single future recording Prog-A. To resolve conflict, this test checks user is able cancel Prog-A in order to schedule Prog-C
Starting test corner_US31785_TC1584_event_tunerConflict_cancelExisting


### STEP1: Ingest the Event of n minutes(with post time) on one channel and another Event of n minutes (with post time of 6 minutes) on another channel ##############################################

{'services': { 505: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'cevetunf255_1', 'rating': 1}], 'lineupLength': 6, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 506: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'cnetunf801_1', 'rating': 1}], 'lineupLength': 6, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.8328
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Fetching Number of tuners in the Household
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/numOfTuners
Number of Tuners is 4


### STEP2: Change the tuner quota to 1 ######################################################################################################

Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/numOfTuners
Number of Tuners is 1


### STEP3: Do the Future Event Booking for both events and see second one fails ########################################################################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525084874000~1525092074000?lang=eng&serviceList=505,506&count=255&region=101&catalogueId=1
{
                                               "checkConflicts": true,
                                               "pvr": "nPVR",
                                               "scheduleInstanceId": "programid://1661208077~programid://738070747"
                                               }

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
PPS booking is successful
{
                                               "checkConflicts": true,
                                               "pvr": "nPVR",
                                               "scheduleInstanceId": "programid://2147480318~programid://670021802"
                                               }

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
PPS Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
403
{'date': 'Mon, 30 Apr 2018 10:41:14 GMT', 'flow_context': '5AE6F2CAE4B0E127EFAE43D4', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6F2CAE4B0E127EFAE43D4"}
PPS Booking failed due to Tuner Conflict
first pps booking passed and second pps booking failed due to tuner conflict


### STEP4: Delete the first booking and book the second one, second event booking should be successful ###################################################################

get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://1661208077~programid://738070747'] is in BOOKED state

Delete PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae6f2cae9c28320e2419997
PPS Booking Deleted successfully
Booking was deleted successfully before recording start

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
PPS booking is successful


### STEP5: Verify second event is in the booked catalog and not the first one ############################################################

get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://1661208077~programid://738070747'] is not in BOOKED state
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://2147480318~programid://670021802'] is in BOOKED state


### STEP6: Revert back to the original value which is stored initially from UPM ########################################################################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: pps booking is successful and present in booking catalog after deleting the first pps booking 

2018/04/30 10:41:34 UTC ############################## ENDED :  corner_US31785_TC1584_event_tunerConflict_cancelExisting ##############################

2018/04/30 10:41:34 UTC ############################## STARTED :  corner_US31785_TC1586_manualSingle_tunerconflict_cancelExistingManual ##############################

US31785: As a SP, I want to provide Conflict Resolution support to the household to resolve Recorder Tuner Quota issues at Booking

TC1586: With 1 tuner, a conflict message displays when user schedules a future single recording Prog-C overlaps to a future manual recording Prog-A. To resolve conflict, this test checks user is able cancel Prog-A in order to schedule Prog-C
Starting test corner_US31785_TC1586_manualSingle_tunerconflict_cancelExistingManual
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']


### STEP1: Ingest the Event of n minutes (with post time) on one channel and another Event of n minutes (with post time of 6 minutes) on another channel ####################################################################

{'services': { 505: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'mansgtun759_1', 'rating': 1}], 'lineupLength': 6, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 506: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'mansigtun307_1', 'rating': 1}], 'lineupLength': 6, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.8328
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Fetching Number of tuners in the Household
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/numOfTuners
Number of Tuners is 4


### STEP2: Change the tuner quota to 1 ##############################################################################################################

Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/numOfTuners
Number of Tuners is 1


### STEP3: Do the Manual Booking for 1st event and single event booking, second one fails ################################################################


PPS booking is Doing for householdId AUTO_3006_cornercase_set2_scripts_2 : 

PPS time based booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings 
PPS booking for manual recording is successful
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
start wait time from func 124.0
Event is present in the Booked catalog
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525085036000~1525092236000?lang=eng&serviceList=505,506&count=255&region=101&catalogueId=1
Doing booking for individual event

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
PPS Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
403
{'date': 'Mon, 30 Apr 2018 10:43:56 GMT', 'flow_context': '5AE6F36CE4B0E127EFAE43D7', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6F36CE4B0E127EFAE43D7"}
PPS Booking for individual event failed due to Tuner Conflict


### STEP4: Delete the first Manual Booking and reschedule the 2nd event booking, booking will be successful ##################################################################################################


Delete PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae6f36c4d156f20e0f5e987
PPS Booking Deleted successfully
Booking was deleted successfully before recording start

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
PPS booking is successful for individual event for the contentId programid://2147480319~programid://375157434


### STEP5: Verify 2nd event is in booked catalog and not the first one ################################################################################################

get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://2147480319~programid://375157434'] is in BOOKED state
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 


### STEP6: Revert back to the original value which is stored initally from UPM ##################################################################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: verified that pps booking is successful and present in booking catalog after deleting the first pps booking, first booking was not present 

2018/04/30 10:44:16 UTC ############################## ENDED :  corner_US31785_TC1586_manualSingle_tunerconflict_cancelExistingManual ##############################

2018/04/30 10:44:16 UTC ############################## STARTED :  corner_US31785_TC1587_currentSingle_manual_conflict_stopExisting ##############################

US31785: As a SP, I want to provide Conflict Resolution support to the household to resolve Recorder Tuner Quota issues at Booking

TC1587: With 1 tuner, a conflict message displays when user schedules a manual current recording Prog-C overlaps to a current single recording Prog-A. To resolve conflict, this test checks user is able cancel Prog-A in order to schedule Prog-C
Starting test corner_US31785_TC1587_currentSingle_manual_conflict_stopExisting
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
### STEP1: Ingest 1 Event of n minutes(with no post time) on each channel #########################################################################################

{'services': { 505: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'stopexism255_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'stopexism255_2', 'rating': 1}],
         'lineupLength': 8,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 506: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'stopexise801_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'stopexise801_2', 'rating': 1}],
         'lineupLength': 8,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 121.1104
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Fetching Number of tuners in the Household
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/numOfTuners
Number of Tuners is 4
### STEP2: Change the tuner quota to 1 ######################################################################################################

Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/numOfTuners
Number of Tuners is 1
### STEP3: Do the event Booking for ongoing event ########################################################################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525081598000~1525088798000?lang=eng&serviceList=505,506&count=255&region=101&catalogueId=1
content id details for event []
Program from Grid Request which is currently broadcasting:  programid://1568593579~programid://2147482860

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings 
Booking for event was succesful
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
All Program with the contentid [u'programid://1568593579~programid://2147482860'] is in RECORDING state
### STEP4: Book the ongoing manual event, which should fail due to tuner conflict ######################################################################


PPS booking is Doing for householdId AUTO_3006_cornercase_set2_scripts_2 : 
Pps booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
Pps Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
403
{'date': 'Mon, 30 Apr 2018 10:47:38 GMT', 'flow_context': '5AE6F44AE4B0E127EFAE43D9', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6F44AE4B0E127EFAE43D9"}
PPS Booking failed due to Tuner Conflict
### STEP5: Stop the event recording and retry manual booking which should be successful ###################################################################

uri for deletion:  /pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae6f40e29368720c773d0fc
Stop the recording via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae6f40e29368720c773d0fc/management
Stop Recording is successful
Recording was stopped successfully
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
All Programs with the contentids [u'programid://1568593579~programid://2147482860'] is in RECORDED state
Pps booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
start wait time from func 1
Event is present in the Booked catalog
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://1568593579~programid://2147482860'] is not in BOOKED state
### STEP6: Revert back to the original value which is stored initially from UPM ##################################################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: PPS booking is successful for series after stoping the event recording

2018/04/30 10:49:28 UTC ############################## ENDED :  corner_US31785_TC1587_currentSingle_manual_conflict_stopExisting ##############################

2018/04/30 10:49:28 UTC ############################## STARTED :  corner_US31785_TC1590_eventsTuner_conflict_cancel2Existing ##############################
US31785: As a SP, I want to provide Conflict Resolution support to the household to resolve Recorder Tuner Quota issues at Booking
TC1590: With 1 tuner, user schedules future single Prog-A and future manual Prog-A1. Both programs are back to back and on same channel. A conflict message displays when user schedules a future manual recording Prog-C overlaps to Prog-A and Prog-A1. To resolve conflict, this test checks user is able cancel both Prog-A and Prog-A1 in order to schedule Prog-C
Starting test corner_US31785_TC1590_eventsTuner_conflict_cancel2Existing
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
### STEP1: Ingest Event1 and Event2 of n minutes back to back in Channel1(with post time) and Event 3 of m minutes Channel2(with post time) ############################################################

{'services': { 505: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'can2xist759_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'can2xist759_2', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'can2xist759_3', 'rating': 1}],
         'lineupLength': 12,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:12:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 506: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'cn2exist307_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'cn2exist307_2', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'cn2exist307_3', 'rating': 1}],
         'lineupLength': 18,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:18:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 122.082
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Fetching Number of tuners in the Household
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/numOfTuners
Number of Tuners is 4
### STEP2: Change the tuner quota to 1 ####################################################################################################

Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/numOfTuners
Number of Tuners is 1
### STEP3: Book Event1 and manual booking for Event2, do event booking of Event 3 and it fails ######################################################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525085511000~1525092711000?lang=eng&serviceList=505,506&count=255&region=101&catalogueId=1
ContentId Dictionary from the Grid Response
{u'programid://2147480323~programid://1784769847': [1525085820000, 1525086060000, 240000, u'can2xist759_2'], u'programid://2147480322~programid://1784769846': [1525086060000, 1525086300000, 240000, u'can2xist759_3'], u'programid://2147480324~programid://1784769845': [1525085580000, 1525085820000, 240000, u'can2xist759_1']}
ContentId list after Sorting
[(u'programid://2147480324~programid://1784769845', [1525085580000, 1525085820000, 240000, u'can2xist759_1']), (u'programid://2147480323~programid://1784769847', [1525085820000, 1525086060000, 240000, u'can2xist759_2']), (u'programid://2147480322~programid://1784769846', [1525086060000, 1525086300000, 240000, u'can2xist759_3'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
PPS booking is successful for the event contentId programid://2147480324~programid://1784769845
{
                "startTime": "2018-04-30T10:57:00Z",
                "endTime": "2018-04-30T11:00:00Z",
                "channel": "505",
                "checkConflicts" : true,
                "pvr":"nPVR"
                }
                

PPS time based booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings 
PPS booking is successful for the channel 505
ContentId Dictionary from the Grid Response
{u'programid://1345286489~programid://851705104': [1525085580000, 1525085940000, 360000, u'cn2exist307_1'], u'programid://1345286488~programid://851705103': [1525086300000, 1525086660000, 360000, u'cn2exist307_3'], u'programid://1345286490~programid://851705102': [1525085940000, 1525086300000, 360000, u'cn2exist307_2']}
ContentId list after Sorting
[(u'programid://1345286489~programid://851705104', [1525085580000, 1525085940000, 360000, u'cn2exist307_1']), (u'programid://1345286490~programid://851705102', [1525085940000, 1525086300000, 360000, u'cn2exist307_2']), (u'programid://1345286488~programid://851705103', [1525086300000, 1525086660000, 360000, u'cn2exist307_3'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
PPS Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
403
{'date': 'Mon, 30 Apr 2018 10:51:51 GMT', 'flow_context': '5AE6F547E4B0D1FE7D344CE9', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6F547E4B0D1FE7D344CE9"}
PPS Booking failed due to Tuner Conflict
### STEP4: Delete the Event1 and Manual Event2 booking and reschedule Event booking of Event3 and it passes ##########################################################

get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
start wait time from func 309.0
Event is present in the Booked catalog
### STEP3: Delete the booking, before recording starts ############################################################################


Delete PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae6f5474d156f20e0f5e988
PPS Booking Deleted successfully
Booking was deleted successfully before recording start
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://2147480324~programid://1784769845'] is in BOOKED state

Delete PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae6f54774f21e20e06d23f9
PPS Booking Deleted successfully
pps delete is successfull

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
PPS booking is successful
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://2147480324~programid://1784769845'] is not in BOOKED state
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://1345286489~programid://851705104'] is in BOOKED state
### STEP5: Revert back the original value which is stored initially from UPM ############################################################################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: pps booking is successful and present in booking catalog after deleting the first pps booking 

2018/04/30 10:52:11 UTC ############################## ENDED :  corner_US31785_TC1590_eventsTuner_conflict_cancel2Existing ##############################

2018/04/30 10:52:11 UTC ############################## STARTED :  corner_US31785_TC1591_currentandfurture_event_conflict ##############################
US31785: As a SP, I want to provide Conflict Resolution support to the household to resolve Recorder Tuner Quota issues at Booking
TC1591: With 1 tuner, user schedules current single Prog-A and future manual Prog-A1. Both programs are back to back and on same channel. A conflict message displays when user schedules a future manual recording Prog-C overlaps to both Prog-A and Prog-A1. To resolve conflict, this test checks user is able cancel both Prog-A and Prog-A1 in order to schedule Prog-C
Starting test corner_US31785_TC1591_currentandfurture_event_conflict
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']


### STEP1: Ingest the 2 Event of n minutes(without post time) on one channel and another Event of m minutes (with post time) on another channel###########

{'services': { 505: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 7, 'programID': 'eveoverla759_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 7, 'programID': 'eveoverla759_2', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 7, 'programID': 'eveoverla759_3', 'rating': 1}],
         'lineupLength': 21,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:21:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 506: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 7, 'programID': 'evoverla246_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 7, 'programID': 'evoverla246_2', 'rating': 1}],
         'lineupLength': 14,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:14:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 122.429
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Fetching Number of tuners in the Household
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/numOfTuners
Number of Tuners is 4
### STEP2: Change the tuner quota to 1 ######################################################################################################

Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/numOfTuners
Number of Tuners is 1
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525082074000~1525089274000?lang=eng&serviceList=505,506&count=255&region=101&catalogueId=1
### STEP3: Do the current Event Booking of first event and future manual booking for the secon event  on channel one and see that it passes#################

content id details for event [(u'programid://1339382175~programid://475843613', 1525085640000, 1525086060000, 420000), (u'programid://1339382176~programid://475843614', 1525086060000, 1525086480000, 420000)]
Program from Grid Request which is currently broadcasting:  programid://1339382175~programid://475843613

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
PPS booking is successful for the event contentId programid://1339382175~programid://475843613
Script will wait for 1 minutes to check the recording state
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
All Program with the contentid [u'programid://1339382175~programid://475843613'] is in RECORDING state
Pps booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
PPS booking is successful for the channel 506
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
start wait time from func 806.0
Event is present in the Booked catalog
Verified the Manual Booking and it is successful
### STEP4: Do the future manual booking for the third event  on channel two and verify  #################


PPS booking is Doing for householdId AUTO_3006_cornercase_set2_scripts_2 : 
Pps booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
Pps Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
403
{'date': 'Mon, 30 Apr 2018 10:56:34 GMT', 'flow_context': '5AE6F662E4B0C8958DD67A54', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6F662E4B0C8958DD67A54"}
PPS Booking failed due to Tuner Conflict which is as expected
### STEP5: stop the first and cancel the second booking and book the third one againg, third manual booking should be successful ##########################################

Stop the recording via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae6f5eaa7f2b7218ae8e160/management
Stop Recording is successful
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
All Programs with the contentids [u'programid://1339382175~programid://475843613'] is in RECORDED state
Event is in recorded state in recorded catalog after stopping the recording

Delete PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae6f626e9c28320e241999e
PPS Booking Deleted successfully
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
All Programs with the contentids [u'programid://1339382175~programid://475843613'] is in RECORDED state
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
Booked event is not in RECORDED state
Pps booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
### STEP5: Verify second event is in the booked catalog and not the first one #####################################################################

### STEP6: Verify third event is in the booked catalog ##########################################

get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
start wait time from func 1
Event is present in the Booked catalog
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://1339382175~programid://475843613'] is not in BOOKED state
PPS booking is successful for series after stoping the event recording
### STEP7: Revert back to the original value which is stored initially from UPM ###############################################################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: third event is present  present in booking catalog after stoping the earlier  pps booking 

2018/04/30 10:59:55 UTC ############################## ENDED :  corner_US31785_TC1591_currentandfurture_event_conflict ##############################

2018/04/30 10:59:55 UTC ############################## STARTED :  corner_US31798_TC1073_book_current_series ##############################

 US31798: As a viewer, I want to be able to press the RECORD button on my remote while watching live content and have the event recorded from that point to the end of the event

TC1073 : Create series recording for episodes currently watching by pressing Record button 
Starting test corner_US31798_TC1073_book_current_series
###STEP1:Ingest Series of 2 Episodes of 3 minutes each on one channel without post time.#################################



Final list :[('cmdc', 'pps.cdvr.dcpt01.ciscocdvr.net', 'upm.cdvr.dcpt01.ciscocdvr.net')]
{'services': { 505: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'bookcur255_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'bookcur255'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'bookcur255_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'bookcur255'}],
         'lineupLength': 8,
         'message': ''}},
'shows': set(['bookcur255']),
'seasons': { 'bookcur255': { 1: set([1, 2])}},
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.5552
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

###STEP2:Fetch grid request for the currently broadcasting series ################



cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525082536000~1525089736000?lang=eng&serviceList=505,506&count=255&region=101&catalogueId=1
###STEP3:Perform the current booking of the series. ###################



bookcur255
ContentId Dictionary from Grid Response
{u'programid://1425884514~programid://1926255983': [1525086060000, 1525086300000, 240000, 1345411371, 1], u'programid://1425884515~programid://1926255984': [1525086300000, 1525086540000, 240000, 1345411371, 2]}
ContentId list after Sorting
[(u'programid://1425884514~programid://1926255983', [1525086060000, 1525086300000, 240000, 1345411371, 1]), (u'programid://1425884515~programid://1926255984', [1525086300000, 1525086540000, 240000, 1345411371, 2])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
Series Booking Successfull seriesId 1345411371 
### STEP4:Verify that the series booked successfully and all episodes are in the booked catalog.###################



get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://1425884514~programid://1926255983', u'programid://1425884515~programid://1926255984'] is in BOOKED state

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed : All episodes are present in the booked catalog

2018/04/30 11:02:41 UTC ############################## ENDED :  corner_US31798_TC1073_book_current_series ##############################

2018/04/30 11:02:41 UTC ############################## STARTED :  corner_US31810_TC1140_series_tunerconflict_current ##############################

US31810: As a SP, when a series recording is created I want the cDVR System to perform Recording Tuner Quota checking on the first episode in the series

TC1140:With 1 tuner, this test checks 'Conflict Message' displays when user schedules two overlap current serie
Starting test corner_US31810_TC1140_series_tunerconflict_current
 ### STEP1:  Ingest Series1 with 1 episodes of 3 minutes and Series 2 with 1 episode of 6 minutes without post time on 2 channels ######################### 


{'services': { 505: { 'lineup': [{ 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'sertuncur255_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'sertuncur255'}],
         'lineupLength': 3,
         'message': ''},
  506: { 'lineup': [{ 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'sentuncur801_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'sentuncur801'}],
         'lineupLength': 6,
         'message': ''}},
'shows': set(['sentuncur801', 'sertuncur255']),
'seasons': { 'sentuncur801': { 1: set([1])}, 'sertuncur255': { 1: set([1])}},
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.4164
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

 ### STEP2: Change the tuner quota to 1 ######################### 


Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/numOfTuners
Number of Tuners is 4
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/numOfTuners
Number of Tuners is 1
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525086302000~1525093502000?lang=eng&serviceList=505,506&count=255&region=101&catalogueId=1
 ### STEP3: Do the Booking of Series1 and Series2, Series2 booking will fail ######################### 



PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
PPS booking is successful

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
PPS Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
403
{'date': 'Mon, 30 Apr 2018 11:05:02 GMT', 'flow_context': '5AE6F85EE4B0A57495AA77C0', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6F85EE4B0A57495AA77C0"}
 PPS Booking failed due to Tuner Conflict
 ### STEP4: Revert back to the original value which is stored initially from UPM ######################### 



#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

 Testcase passed : first pps booking passed and second pps booking failed due to tuner conflict

2018/04/30 11:05:22 UTC ############################## ENDED :  corner_US31810_TC1140_series_tunerconflict_current ##############################

2018/04/30 11:05:22 UTC ############################## STARTED :  corner_US31810_TC1141_series_tunerconflict ##############################

US31810: As a SP, when a series recording is created I want the cDVR System to perform Recording Tuner Quota checking on the first episode in the series

TC1141: With 1 tuner, this test checks 'Conflict Message' displays when user schedules two overlap future series
Starting test corner_US31810_TC1141_series_tunerconflict


### STEP1: Ingest Series1 with 1 episodes of five minutes(with post time of 4minutes) and Series 2 with 1 episode of ten minutes(with post time of 2 minutes) on 2 channels #############################################

{'services': { 505: { 'lineup': [{ 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'sertuncon255_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'sertuncon255'}],
         'lineupLength': 6,
         'message': ''}},
'shows': set(['sertuncon255']),
'seasons': { 'sertuncon255': { 1: set([1])}},
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 506: { 'lineup': [{ 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 12, 'programID': 'tunconf801_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'tunconf801'}],
         'lineupLength': 12,
         'message': ''}},
'shows': set(['tunconf801']),
'seasons': { 'tunconf801': { 1: set([1])}},
'totalLength': "00:12:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 121.2492
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################



### STEP2: Change the tuner quota to 1 ##########################################################################################################

Fetching Number of tuners in the Household
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/numOfTuners
Number of Tuners is 4
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/numOfTuners
Number of Tuners is 1


### STEP3: Do the Booking of Series1 and Series2, Series2 booking will fail #########################################################################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525086464000~1525093664000?lang=eng&serviceList=505,506&count=255&region=101&catalogueId=1
ContentId dictionary from the grid response {u'programid://1269948240~programid://620059138': [1525086780000, 1525087140000, u'sertuncon255_1_1', 1569320272, 1]}
ContentId list after sorting from the contentId dictionary [(u'programid://1269948240~programid://620059138', [1525086780000, 1525087140000, u'sertuncon255_1_1', 1569320272, 1])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
PPS booking is successful
ContentId dictionary from the grid response {u'programid://1626268476~programid://862008720': [1525086660000, 1525087380000, u'tunconf801_1_1', 2147480068, 1]}
ContentId list after sorting from the contentId dictionary [(u'programid://1626268476~programid://862008720', [1525086660000, 1525087380000, u'tunconf801_1_1', 2147480068, 1])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
PPS Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
403
{'date': 'Mon, 30 Apr 2018 11:07:44 GMT', 'flow_context': '5AE6F900E4B0C93770ED91D8', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6F900E4B0C93770ED91D8"}
PPS Booking failed due to Tuner Conflict


### STEP4: Revert back to the original value which is stored initially from UPM ####################################################################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: first pps booking passed and second pps booking failed due to tuner conflict

2018/04/30 11:08:04 UTC ############################## ENDED :  corner_US31810_TC1141_series_tunerconflict ##############################

2018/04/30 11:08:04 UTC ############################## STARTED :  corner_US31810_TC1142_series_episode_tunerconflict ##############################

US31810: As a SP, when a series recording is created I want the cDVR System to perform Recording Tuner Quota checking on the first episode in the series

TC1142: With 1 tuner, this test checks 'Conflict Message' displays when user schedules the first episode of Series-B overlaps to one episode of Series-A
Starting test corner_US31810_TC1142_series_episode_tunerconflict


### STEP1: Ingest Series1 with 2 episodes of 3 minutes(time gap between episode1 and episode2 is 3 minutes without post time) and Series 2 with 1 episode of 6 minutes(with post time of 3 minutes) on 2channels ##########################################

{'services': { 505: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'sertun255_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'sertun255'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'sertun255_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'sertun255'}],
         'lineupLength': 6,
         'message': ''}},
'shows': set(['sertun255']),
'seasons': { 'sertun255': { 1: set([1, 2])}},
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "3",
'is_1050': "True"
'is_24': "False"
}
{'services': { 506: { 'lineup': [{ 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'serepun801_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'serepun801'}],
         'lineupLength': 6,
         'message': ''}},
'shows': set(['serepun801']),
'seasons': { 'serepun801': { 1: set([1])}},
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.8328
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################



### STEP2: Change the tuner quota to 1 ##########################################################################################

Fetching Number of tuners in the Household
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/numOfTuners
Number of Tuners is 4
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/numOfTuners
Number of Tuners is 1


### STEP3: Do the Booking of Series1 and Series2, Series2 booking will fail ##################################################################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525086625000~1525093825000?lang=eng&serviceList=505,506&count=255&region=101&catalogueId=1

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
PPS booking is successful

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
PPS Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
403
{'date': 'Mon, 30 Apr 2018 11:10:25 GMT', 'flow_context': '5AE6F9A1E4B0D1FE7D344CF2', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6F9A1E4B0D1FE7D344CF2"}
PPS Booking failed due to Tuner Conflict


### STEP4: Revert back to the original value which is stored initially from UPM #########################################################################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: first pps booking passed and second pps booking failed due to tuner conflict

2018/04/30 11:10:45 UTC ############################## ENDED :  corner_US31810_TC1142_series_episode_tunerconflict ##############################

2018/04/30 11:10:45 UTC ############################## STARTED :  corner_US31810_TC1143_series_tunerconflict ##############################

US31810: As a SP, when a series recording is created I want the cDVR System to perform Recording Tuner Quota checking on the first episode in the series

TC1143:No Conflict, 1 tuner, future episodes of Series-A and Series-B overlap
Starting test corner_US31810_TC1143_series_tunerconflict
Final list :[('cmdc', 'pps.cdvr.dcpt01.ciscocdvr.net', 'upm.cdvr.dcpt01.ciscocdvr.net')]
 ### STEP1: Ingest Series1 with 2 Episodes of 3 minutes(difference between Episode1 and Episode2 is 3 minutes) and Series2 with 2 Episodes of 3 minutes back to back with posttime of 3 minutes)##################### 


{'services': { 505: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 2, 'programID': 'seritnco255_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'seritnco255'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 2, 'programID': 'seritnco255_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'seritnco255'}],
         'lineupLength': 4,
         'message': ''}},
'shows': set(['seritnco255']),
'seasons': { 'seritnco255': { 1: set([1, 2])}},
'totalLength': "00:04:00",
'BoundaryInMinutes': "1",
'gap': "2",
'is_1050': "True"
'is_24': "False"
}
{'services': { 506: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 2, 'programID': 'sertunco801_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'sertunco801'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 2, 'programID': 'sertunco801_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'sertunco801'}],
         'lineupLength': 4,
         'message': ''}},
'shows': set(['sertunco801']),
'seasons': { 'sertunco801': { 1: set([1, 2])}},
'totalLength': "00:04:00",
'BoundaryInMinutes': "1",
'gap': "2",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.5552
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Fetching Number of tuners in the Household
 ### STEP2: Change the tuner quota to 1 ######################### 


Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/numOfTuners
Number of Tuners is 4
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/numOfTuners
Number of Tuners is 1
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525086787000~1525093987000?lang=eng&serviceList=505,506&count=255&region=101&catalogueId=1
 ### STEP3: Book both the series and verify that all the episodes are in booked library ######################### 


[(u'programid://1399475291~programid://1074531144', [1525086840000, 1525086960000, u'seritnco255_1_1', 1837539235, 1]), (u'programid://1399475292~programid://1074531143', [1525087080000, 1525087200000, u'seritnco255_1_2', 1837539235, 2])]

                                                      {
                                                       "scheduleInstanceId" : "programid://1399475291~programid://1074531144",
                                                       "checkConflicts" : true,
                                                       "pvr":"nPVR",
                                                       "recurrence":"SERIES"
                                                      }
                                                       

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
PPS booking is successful for the contentid programid://1399475291~programid://1074531144
[(u'programid://1312861190~programid://1552641444', [1525086960000, 1525087080000, u'sertunco801_1_1', 2147480073, 1]), (u'programid://1312861191~programid://1552641445', [1525087200000, 1525087320000, u'sertunco801_1_2', 2147480073, 2])]

                                                      {
                                                       "scheduleInstanceId" : "programid://1312861190~programid://1552641444",
                                                       "checkConflicts" : true,
                                                       "pvr":"nPVR",
                                                       "recurrence":"SERIES"
                                                      }
                                                       

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
PPS booking is successful for the contentid programid://1312861190~programid://1552641444
 ### STEP4: Revert back to the original value which is stored initially from UPM ######################### 


 pps booking passed for both the series
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://1399475291~programid://1074531144', u'programid://1399475292~programid://1074531143', u'programid://1312861190~programid://1552641444', u'programid://1312861191~programid://1552641445'] is in BOOKED state
all the episode are in the booking catalog
 ### STEP4: Wait till the second episode of both the series completes recording, verify that it is recorded successfully ######################### 


script will wait for  413.0  seconds for recording to complete
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
All Programs with the contentids [u'programid://1399475291~programid://1074531144', u'programid://1399475292~programid://1074531143', u'programid://1312861190~programid://1552641444', u'programid://1312861191~programid://1552641445'] is in RECORDED state

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase passed : recording in successful

2018/04/30 11:23:50 UTC ############################## ENDED :  corner_US31810_TC1143_series_tunerconflict ##############################

2018/04/30 11:23:50 UTC ############################## STARTED :  corner_US31810_TC1144_seriesCurrent_episode_tunerconflict ##############################

US31810: As a SP, when a series recording is created I want the cDVR System to perform Recording Tuner Quota checking on the first episode in the series

TC1144: With 1 tuner, this test checks 'Conflict Message' displays when user schedules a Series-B on future slot, and one current episode of Series-B overlaps to an existing current episode of Series-A
Starting test corner_US31810_TC1144_seriesCurrent_episode_tunerconflict


### STEP1: Ingest Series1 with 2 episodes of 3 minutes(time gap between episode1 and episode2 is 6 minutes) and Series 2 with 2 episodes of 3 minutes(without post time) on 2channels ###################################

{'services': { 505: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'sersingcur255_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'sersingcur255'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'sersingcur255_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'sersingcur255'}],
         'lineupLength': 6,
         'message': ''}},
'shows': set(['sersingcur255']),
'seasons': { 'sersingcur255': { 1: set([1, 2])}},
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "6",
'is_1050': "True"
'is_24': "False"
}
{'services': { 506: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'sersingc801_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'sersingc801'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'sersingc801_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'sersingc801'}],
         'lineupLength': 6,
         'message': ''}},
'shows': set(['sersingc801']),
'seasons': { 'sersingc801': { 1: set([1, 2])}},
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.8328
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################



### STEP2: Change the tuner quota to 1 ################################################################################################

Fetching Number of tuners in the Household
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/numOfTuners
Number of Tuners is 4
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/numOfTuners
Number of Tuners is 1


### STEP3: Do the Booking of Series1 and Series2, Series2 booking will fail ###########################################################################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525087572000~1525094772000?lang=eng&serviceList=505,506&count=255&region=101&catalogueId=1

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
PPS Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
403
{'date': 'Mon, 30 Apr 2018 11:26:12 GMT', 'flow_context': '5AE6FD54E4B0CA76F1C6FB15', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6FD54E4B0CA76F1C6FB15"}
PPS Booking failed due to Tuner Conflict


### STEP4: Revert back to the original value which is stored initially from UPM #########################################################################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: first pps booking passed and second pps booking failed due to tuner conflict

2018/04/30 11:26:32 UTC ############################## ENDED :  corner_US31810_TC1144_seriesCurrent_episode_tunerconflict ##############################

2018/04/30 11:26:32 UTC ############################## STARTED :  corner_US31810_TC1145_series_single_tunerconflict ##############################

US31810: As a SP, when a series recording is created I want the cDVR System to perform Recording Tuner Quota checking on the first episode in the series

TC1145: With 1 tuner, this test checks a 'Conflict Message' displays when user schedules a current series ovelaps to current single recording
Starting test corner_US31810_TC1145_series_single_tunerconflict


### STEP1: Ingest Event of 6 minutes and Series2 with 1 episode of 3 minutes(without post time) on 2 channels #########################################################

{'services': { 505: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'sergtun801_1', 'rating': 1}], 'lineupLength': 6, 'message': ''},
  506: { 'lineup': [{ 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'sengtun255_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'sengtun255'}],
         'lineupLength': 3,
         'message': ''}},
'shows': set(['sengtun255']),
'seasons': { 'sengtun255': { 1: set([1])}},
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.4164
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################



### STEP2: Change the tuner quota to 1 ############################################################################

Fetching Number of tuners in the Household
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/numOfTuners
Number of Tuners is 4
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/numOfTuners
Number of Tuners is 1


### STEP3: Do the Booking of Event and Series2, Series2 booking will fail #######################################################################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525087733000~1525094933000?lang=eng&serviceList=505,506&count=255&region=101&catalogueId=1

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
PPS booking is successful

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
PPS Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
403
{'date': 'Mon, 30 Apr 2018 11:28:53 GMT', 'flow_context': '5AE6FDF5E4B0520F9FFB58BD', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6FDF5E4B0520F9FFB58BD"}


### STEP4: Revert back to the original value which is stored initially from UPM ##############################################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: PPS Booking failed due to Tuner Conflict

2018/04/30 11:29:13 UTC ############################## ENDED :  corner_US31810_TC1145_series_single_tunerconflict ##############################

2018/04/30 11:29:13 UTC ############################## STARTED :  corner_US31810_TC1146_series_manual_tunerconflict ##############################

US31810: As a SP, when a series recording is created I want the cDVR System to perform Recording Tuner Quota checking on the first episode in the series

TC1146: With 1 tuner, this test checks a 'Conflict Message' displays when user schedules a future series ovelaps to current manual recording
Starting test corner_US31810_TC1146_series_manual_tunerconflict
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']


### STEP1: Ingest Event of 6 minutes and Series2 with 1 episode of 3 minutes(with post time of 3 minutes) on 2 channels #######################################################

{'services': { 505: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'sermantun801_1', 'rating': 1}], 'lineupLength': 6, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 506: { 'lineup': [{ 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'evemantun255_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'evemantun255'}],
         'lineupLength': 3,
         'message': ''}},
'shows': set(['evemantun255']),
'seasons': { 'evemantun255': { 1: set([1])}},
'totalLength': "00:03:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.6246
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################



### STEP2: Change the tuner quota to 1 ###########################################################################################################

Fetching Number of tuners in the Household
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/numOfTuners
Number of Tuners is 4
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/numOfTuners
Number of Tuners is 1
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525087894000~1525095094000?lang=eng&serviceList=505,506&count=255&region=101&catalogueId=1


### STEP3: Do the Manual Booking of the Event from first channel #################################################################################


PPS booking is Doing for householdId AUTO_3006_cornercase_set2_scripts_2 : 

PPS time based booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings 
PPS booking is successful


### STEP3: Do the Booking of Series2, Series2 booking will fail ##############################################################


PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
PPS Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
403
{'date': 'Mon, 30 Apr 2018 11:31:34 GMT', 'flow_context': '5AE6FE96E4B0CBA15170C40F', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6FE96E4B0CBA15170C40F"}


### STEP4: Revert back to the original value which is stored initially from UPM #################################################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: PPS Booking failed due to Tuner Conflict

2018/04/30 11:31:54 UTC ############################## ENDED :  corner_US31810_TC1146_series_manual_tunerconflict ##############################

2018/04/30 11:31:54 UTC ############################## STARTED :  corner_US31839_TC1473_successfull_series_booking ##############################
US31839: As a SP, I want to fail a booking request if there is not enough available space in the Household's storage quota
TC1473: Allow Booking for new Series Recording when first episode will not exceed Storage Quota
Starting test corner_US31839_TC1473_successfull_series_booking
### STEP1:Ingest a series of two episodes with five minutes duration.#################################



{'services': { 505: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'succeser255_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'succeser255'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'succeser255_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'succeser255'}],
         'lineupLength': 12,
         'message': ''}},
'shows': set(['succeser255']),
'seasons': { 'succeser255': { 1: set([1, 2])}},
'totalLength': "00:12:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.8328

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

###  STEP2:Fetch total diskquota of the Household #### 



Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Retrieve Total diskQuota fetched  via URL :  http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/diskQuota
Diskquota for the household is 108000
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525088056000~1525095256000?lang=eng&serviceList=505&count=255&region=101&catalogueId=1
### STEP3:Set the first episode duration as the diskquota
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
DiskQuota is modified  via URL :  http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2/diskQuota
Remaining diskspace left is fetched  via URL :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/pvrs/nPVR
### STEP5:Perform the Series booking #########################




PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
Series Booking Successfull seriesId 2147480081 
### STEP6:Verify that all episode of the Series booked successfully. ###



get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://2078419409~programid://2063565613', u'programid://2078419408~programid://2063565612'] is in BOOKED state

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

 Testcase passed: All episodes of the series booked successfully

2018/04/30 11:34:46 UTC ############################## ENDED :  corner_US31839_TC1473_successfull_series_booking ##############################

2018/04/30 11:34:46 UTC ############################## STARTED :  corner_US31863_TC1160_Series_Recording_more_than_one_recorded_episode_of_the_series_in_the_recorded_library ##############################
US31863: As a viewer, when I browse my cDVR series recordings I want to be able to expand and collapse the list of episodes within each series
TC1160: Series Recording, more than one recorded episode of the series in the recorded library
### STEP1: Ingest two series with same broadcasttime (3 Episodes of 2 minutes duration) ########
 
 

{'services': { 505: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'excollseri205_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'excollseri205'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'excollseri205_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'excollseri205'}],
         'lineupLength': 6,
         'message': ''},
  506: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'excollser729_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'excollser729'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'excollser729_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'excollser729'}],
         'lineupLength': 6,
         'message': ''}},
'shows': set(['excollser729', 'excollseri205']),
'seasons': { 'excollser729': { 1: set([1, 2])}, 'excollseri205': { 1: set([1, 2])}},
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Starting test corner_US31863_TC1160_Series_Recording_more_than_one_recorded_episode_of_the_series_in_the_recorded_library

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525088227000~1525095427000?lang=eng&serviceList=505,506&count=255&region=101&catalogueId=1
### STEP2: Do the Series booking for the first Seriesi(Place holder series ) ######### 
 
 


PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings 
Series Booking Successfull for series contentId programid://1209259825~programid://1212291127 
### STEP3: Do Series booking for the Second Series ######### 
 
 


PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings 
Series Booking Successfull for series contentId programid://2038418980~programid://1564430894 
###  STEP4: Verify all the episodes of the series is present in the booked library ##### 
 
 

get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
all booked programes are present in the booked library
### STEP5: Wait till  all the episodes get recorded and verify that all episodes are in the recorded library############ 
 
 

System will wait for  408.0 seconds to complete the recording
Recorded library fetched  via URL :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
all programs are present in the recorded library
###  STEP6: Perform the Series collapse and update the results############ 
 
 

group id list [u'groupid://2147480085']
series collapse via url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog?collapse=true
 
series collapse is successful
series collapsed successfully

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed : Recorded Episodes of a series are collapsed into the single line item

2018/04/30 11:45:51 UTC ############################## ENDED :  corner_US31863_TC1160_Series_Recording_more_than_one_recorded_episode_of_the_series_in_the_recorded_library ##############################

2018/04/30 11:45:51 UTC ############################## STARTED :  corner_US31863_TC1161_series_record_booked_lib ##############################
US31863: As a viewer, when I browse my cDVR series recordings I want to be able to expand and collapse the list of episodes within each series
TC1161: Series Recording, one currently recording episode of the series and one recorded episode in the recorded library
Starting test corner_US31863_TC1161_series_record_booked_lib
### STEP1:Ingest a series of two episodes with five minutes duration.#################################



{'services': { 505: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'serrecbook307_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'serrecbook307'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'serrecbook307_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'serrecbook307'}],
         'lineupLength': 12,
         'message': ''}},
'shows': set(['serrecbook307']),
'seasons': { 'serrecbook307': { 1: set([1, 2])}},
'totalLength': "00:12:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.8328

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525088892000~1525096092000?lang=eng&serviceList=505,506&count=255&region=101&catalogueId=1
### STEP2:Perform the Series booking. #########################



ContentId Dictionary from the Grid Response
{u'programid://1307089558~programid://1423037078': [1525088940000, 1525089300000, u'serrecbook307_1_1', 1233921697, u'505'], u'programid://1307089557~programid://1423037079': [1525089300000, 1525089660000, u'serrecbook307_1_2', 1233921697, u'505']}
ContentId list after Sorting
[(u'programid://1307089558~programid://1423037078', [1525088940000, 1525089300000, u'serrecbook307_1_1', 1233921697, u'505']), (u'programid://1307089557~programid://1423037079', [1525089300000, 1525089660000, u'serrecbook307_1_2', 1233921697, u'505'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
PPS Booking is Successfull for the series contentId programid://1307089558~programid://1423037078 
### STEP3:Verify that the all episodes of the series booked successfully###########



get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://1307089557~programid://1423037079', u'programid://1307089558~programid://1423037078'] is in BOOKED state
### STEP4:Verify that the first episode of the series is booked and wait to start recording #############



get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
Program starts broadcasting from 1525088940000 (in epoch)
Script will wait for 0.716666666667 minutes to start the recording
series booked successfully 
### STEP5:Verify that the  first episode is in recording state.###################



get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
Eveent is present in the recorded library and in recording state
Script will wait for 5.0 minutes to finish the recording
###STEP6:Verify that first epispde of the series is recorded and in the recorded catalog.#########



get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
All Programs with the contentids [u'programid://1307089558~programid://1423037078'] is in RECORDED state
### STEP7:Verify that second epispde of the series is in the recorded catalog an is in recording state. ##### 



get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
All Program with the contentid [u'programid://1307089557~programid://1423037079'] is in RECORDING state

#################### DEBUG STARTED ####################

Script Fetching the Household Booked/Recorded Catalog at 2018-04-30 11:56:31.084483
get all Catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog
 
Household Booked/Recorded Catalog Response:
[
    {
        "seriesId": "groupid://1233921697", 
        "pvr": "nPVR", 
        "partialContent": false, 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set2_scripts_2", 
        "channelId": "505", 
        "isSynchronized": true, 
        "duration": "00:06:06", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T11:49:00Z", 
        "recurrence": "SERIES", 
        "title": "serrecbook307_1_1", 
        "content": {
            "seriesId": "groupid://1233921697", 
            "shortSynopsis": "serrecbook307_1_1 - synopsis", 
            "title": "serrecbook307_1_1", 
            "instanceId": "PPS_INSTANCE_38121", 
            "recordingId": "38121", 
            "broadcastDateTime": 1525088940000, 
            "synopsis": "serrecbook307_1_1 - synopsis", 
            "endAvailability": 1525089300000, 
            "source": "pvr", 
            "erotic": false, 
            "serviceId": "505", 
            "adult": false, 
            "sortTitle": "serrecbook307_1_1", 
            "duration": 360000, 
            "serviceEquivalenceKey": "505", 
            "type": "instance", 
            "id": "PPS_CONTENT_12139"
        }, 
        "state": "RECORDED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "38121", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{505,java.lang.Integer,NORMAL}-|-{NDJkNjI0ZjQxZDg0ZDY5MmFmZjg=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "505", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 505, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 505", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 505", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "505", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "505", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_12139~PPS_INSTANCE_38121", 
        "startTime": "2018-04-30T11:48:55Z", 
        "recurrenceActive": true, 
        "bookingDuration": "00:06:00", 
        "notificationHandles": [
            "5ae7027ce9c28320e24199a1"
        ], 
        "created": "2018-04-30T11:48:12Z", 
        "lastModified": "2018-04-30T11:55:20Z", 
        "contentPlayUri": "?recId=f801db5f-db06-4f88-a4b6-8a83bf1c9d92", 
        "uri": "/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae7027ce9c28320e24199a1", 
        "scheduleInstance": "programid://1307089558~programid://1423037078", 
        "keep": false, 
        "contentId": "PPS_CONTENT_12139~PPS_INSTANCE_38121"
    }, 
    {
        "seriesId": "groupid://1233921697", 
        "pvr": "nPVR", 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set2_scripts_2", 
        "channelId": "505", 
        "isSynchronized": true, 
        "duration": "00:06:00", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T11:55:00Z", 
        "recurrence": "SERIES", 
        "title": "serrecbook307_1_2", 
        "content": {
            "seriesId": 1233921697, 
            "instanceId": "programid://1423037079", 
            "broadcastDateTime": 1525089300000, 
            "seasonPremiere": false, 
            "locator": "{ZThjZjkwZjI3NDQ4YTI3ZDRlZmY=,java.lang.String,NORMAL}[+]{hashKey,NORMAL}", 
            "erotic": false, 
            "audioType": "stereo", 
            "duration": 360000, 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": false, 
            "macrovision": false, 
            "id": "programid://1307089557", 
            "mixSource": false, 
            "externalKey": "serrecbook307_1_2_505_tk04301201", 
            "audioDescription": false, 
            "restartAvailable": false, 
            "title": "serrecbook307_1_2", 
            "allOfferIdList": [
                2
            ], 
            "synopsis": "serrecbook307_1_2 - synopsis", 
            "contentNdsDrmAttributes": {
                "isBto": false, 
                "lastOfferEndDateTime": 1765963847000, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "rentalDuration": 2147483647, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isExtendedRental": false, 
                "isIppv": false, 
                "isPar": false, 
                "isOppv": false
            }, 
            "source": "ltv", 
            "live": false, 
            "parentGroupId": "groupid://1233921697", 
            "type": "instance", 
            "channel": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
            "videoFormat": "sd", 
            "wideScreen": false, 
            "episodeNumber": 2, 
            "isPurchasable": true, 
            "subtitlesHardOfHearing": false, 
            "hdcp": false, 
            "serviceId": "505", 
            "adult": false, 
            "sortTitle": "serrecbook307_1_2", 
            "endAvailability": 1525089660000, 
            "hasChapters": false, 
            "cdvrAvailable": true, 
            "seasonFinale": false, 
            "shortSynopsis": "serrecbook307_1_2 - synopsis", 
            "mixContentId": false, 
            "broadcaster": "VGE", 
            "serviceEquivalenceKey": "505", 
            "ict": false, 
            "parentGroups": [
                {
                    "groupType": "Series", 
                    "groupId": "groupid://1233921697"
                }
            ]
        }, 
        "state": "RECORDING", 
        "startGuardTime": "00:00:00", 
        "recordingId": "38122", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{505,java.lang.Integer,NORMAL}-|-{NDJkNjI0ZjQxZDg0ZDY5MmFmZjg=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "505", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 505, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 505", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 505", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "505", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "505", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_12140~PPS_INSTANCE_38122", 
        "startTime": "2018-04-30T11:54:55Z", 
        "recurrenceActive": true, 
        "bookingDuration": "00:06:00", 
        "notificationHandles": [
            "5ae7027ce9c28320e24199a3"
        ], 
        "created": "2018-04-30T11:48:12Z", 
        "lastModified": "2018-04-30T11:55:10Z", 
        "contentPlayUri": "?recId=99de5114-1341-4160-adc0-35d0dafbb8fd", 
        "uri": "/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae7027ce9c28320e24199a3", 
        "scheduleInstance": "programid://1307089557~programid://1423037079", 
        "keep": false, 
        "contentId": "PPS_CONTENT_12140~PPS_INSTANCE_38122"
    }
]
Script Fetching Household Failed Recording Catalog at 2018-04-30 11:56:31.138617
get all failed recording catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog?filter:state=FAILED
 
Failed Recording Catalog is empty

#################### DEBUG ENDED   ####################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed : one currently recording episode of the series and one recorded episodes in the recorded library 

2018/04/30 11:56:51 UTC ############################## ENDED :  corner_US31863_TC1161_series_record_booked_lib ##############################

2018/04/30 11:56:51 UTC ############################## STARTED :  corner_US31863_TC1162_Series_Collapse_Expand_Bookedcatalog ##############################
US31863: As a viewer, when I browse my cDVR series recordings I want to be able to expand and collapse the list of episodes within each series
TC1162: Currently Recording episode of Series appears in Booked but not Recorded library
Starting test corner_US31863_TC1162_Series_Collapse_Expand_Bookedcatalog
### STEP1: Ingest two series with same broadcasttime (3 Episodes of 2 minutes duration) ########

{'services': { 500: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 2, 'programID': 'TC1162a230_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'TC1162a230'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 2, 'programID': 'TC1162a230_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'TC1162a230'},
                     { 'episodeNum': 3, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 2, 'programID': 'TC1162a230_1_3', 'rating': 1, 'seasonNum': 1, 'showID': 'TC1162a230'}],
         'lineupLength': 6,
         'message': ''},
  501: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 2, 'programID': 'TC1162b776_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'TC1162b776'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 2, 'programID': 'TC1162b776_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'TC1162b776'},
                     { 'episodeNum': 3, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 2, 'programID': 'TC1162b776_1_3', 'rating': 1, 'seasonNum': 1, 'showID': 'TC1162b776'}],
         'lineupLength': 6,
         'message': ''}},
'shows': set(['TC1162a230', 'TC1162b776']),
'seasons': { 'TC1162a230': { 1: set([1, 2, 3])}, 'TC1162b776': { 1: set([1, 2, 3])}},
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525089552000~1525096752000?lang=eng&serviceList=500,501&count=255&region=101&catalogueId=1
### STEP2: Do the Series booking for the first Seriesi(Place holder series ) ######### 

Series ContentId list from the Grid Response [(u'programid://1884384058~programid://1017222425', [1525089600000, 1525089720000, u'TC1162a230_1_1', 1647028059, 1]), (u'programid://1884384059~programid://1017222426', [1525089720000, 1525089840000, u'TC1162a230_1_2', 1647028059, 2]), (u'programid://1884384060~programid://1017222424', [1525089840000, 1525089960000, u'TC1162a230_1_3', 1647028059, 3])]

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings 
Series Booking Successfull for series contentId programid://1884384058~programid://1017222425 
### STEP3: Do Series booking for the Second Series ######### 
 
 

Series ContentId list from the Grid Response [(u'programid://2128795664~programid://2098089174', [1525089600000, 1525089720000, u'TC1162b776_1_1', 2147480087, 1]), (u'programid://2128795662~programid://2098089175', [1525089720000, 1525089840000, u'TC1162b776_1_2', 2147480087, 2]), (u'programid://2128795663~programid://2098089176', [1525089840000, 1525089960000, u'TC1162b776_1_3', 2147480087, 3])]

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings 
Series Booking Successfull for series contentId programid://2128795664~programid://2098089174 
###  STEP4: Verify all the episodes of the series is present in the booked library ##### 

get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
all booked programes are present in the booked library
### STEP5: Wait till first episode gets recorded, second episode is in recording state and third episode is in booked state##### 

[1525089720000, 1525089840000, 1525089960000]
1525089720000
System will wait for  163.0 seconds to complete the recording of the first episode
programid://2128795664~programid://2098089174
[u'programid://2128795662~programid://2098089175', u'programid://2128795663~programid://2098089176']
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://2128795663~programid://2098089176'] is in BOOKED state
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
All Program with the contentid [u'programid://2128795662~programid://2098089175'] is in RECORDING state
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
All Programs with the contentids [u'programid://2128795664~programid://2098089174'] is in RECORDED state
### STEP6: Perform the Series collapse/expand for the Booked catalog and verify the First episode is not present in the Expand Response 

group id list [u'groupid://2147480087']
series collapse for booked and recording response via url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog?collapse=true&filter:state=BOOKED&filter:state=RECORDING
 
[{"uri":"/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog?filter%3Aseries=groupid%3A%2F%2F1647028059&collapse=true&filter%3Astate=BOOKED&filter%3Astate=RECORDING","type":"COLLAPSED-INSTANCE","title":"TC1162a230_1:Title ","contentId":"groupid://1647028059","household":"AUTO_3006_cornercase_set2_scripts_2","recurrence":"SERIES","bookingType":"EVENT"},{"uri":"/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog?filter%3Aseries=groupid%3A%2F%2F2147480087&collapse=true&filter%3Astate=BOOKED&filter%3Astate=RECORDING","type":"COLLAPSED-INSTANCE","title":"TC1162b776_1:Title ","contentId":"groupid://2147480087","household":"AUTO_3006_cornercase_set2_scripts_2","recurrence":"SERIES","bookingType":"EVENT"}]
series collapse is successful
series collapsed successfully
<Response [200]>
group id list [u'groupid://2147480087']
series expand for booked and recording via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog?filter:series=groupid://2147480087&filter:state=BOOKED&filter:state=RECORDING
 
series expansion is successful
series expanded successfully
Verify the contentid in the Expand Response
Expand Response [
    {
        "seriesId": "groupid://2147480087", 
        "pvr": "nPVR", 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set2_scripts_2", 
        "channelId": "501", 
        "isSynchronized": true, 
        "duration": "00:02:00", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T12:02:00Z", 
        "recurrence": "SERIES", 
        "title": "TC1162b776_1_2", 
        "content": {
            "seriesId": 2147480087, 
            "instanceId": "programid://2098089175", 
            "broadcastDateTime": 1525089720000, 
            "seasonPremiere": false, 
            "locator": "{ZjJmMmI1MGUzOGI2ODQ0NDNlMDE=,java.lang.String,NORMAL}[+]{hashKey,NORMAL}", 
            "erotic": false, 
            "audioType": "stereo", 
            "duration": 120000, 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": false, 
            "macrovision": false, 
            "id": "programid://2128795662", 
            "mixSource": false, 
            "externalKey": "TC1162b776_1_2_501_tk04301204", 
            "audioDescription": false, 
            "restartAvailable": false, 
            "title": "TC1162b776_1_2", 
            "allOfferIdList": [
                2
            ], 
            "synopsis": "TC1162b776_1_2 - synopsis", 
            "contentNdsDrmAttributes": {
                "isBto": false, 
                "lastOfferEndDateTime": 1765963847000, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "rentalDuration": 2147483647, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isExtendedRental": false, 
                "isIppv": false, 
                "isPar": false, 
                "isOppv": false
            }, 
            "source": "ltv", 
            "live": false, 
            "parentGroupId": "groupid://2147480087", 
            "type": "instance", 
            "channel": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
            "videoFormat": "sd", 
            "wideScreen": false, 
            "episodeNumber": 2, 
            "isPurchasable": true, 
            "subtitlesHardOfHearing": false, 
            "hdcp": false, 
            "serviceId": "501", 
            "adult": false, 
            "sortTitle": "TC1162b776_1_2", 
            "endAvailability": 1525089840000, 
            "hasChapters": false, 
            "cdvrAvailable": true, 
            "seasonFinale": false, 
            "shortSynopsis": "TC1162b776_1_2 - synopsis", 
            "mixContentId": false, 
            "broadcaster": "VGE", 
            "serviceEquivalenceKey": "501", 
            "ict": false, 
            "parentGroups": [
                {
                    "groupType": "Series", 
                    "groupId": "groupid://2147480087"
                }
            ]
        }, 
        "state": "RECORDING", 
        "startGuardTime": "00:00:00", 
        "recordingId": "38128", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{501,java.lang.Integer,NORMAL}-|-{ZjA2N2ZiM2NjZDFkYjk3MWMyYTg=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "501", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 501, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 501", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 501", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "501", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "501", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_12161~PPS_INSTANCE_38128", 
        "startTime": "2018-04-30T12:01:58Z", 
        "recurrenceActive": true, 
        "bookingDuration": "00:02:00", 
        "notificationHandles": [
            "5ae7051047551d206618c763"
        ], 
        "created": "2018-04-30T11:59:12Z", 
        "lastModified": "2018-04-30T12:02:20Z", 
        "contentPlayUri": "?recId=96d469bf-7e22-418c-a4b0-f42478d321fd", 
        "uri": "/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae7051047551d206618c763", 
        "scheduleInstance": "programid://2128795662~programid://2098089175", 
        "keep": false, 
        "contentId": "PPS_CONTENT_12161~PPS_INSTANCE_38128"
    }, 
    {
        "seriesId": "groupid://2147480087", 
        "pvr": "nPVR", 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set2_scripts_2", 
        "channelId": "501", 
        "isSynchronized": true, 
        "duration": "00:02:00", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T12:04:00Z", 
        "recurrence": "SERIES", 
        "title": "TC1162b776_1_3", 
        "content": {
            "seriesId": 2147480087, 
            "instanceId": "programid://2098089176", 
            "broadcastDateTime": 1525089840000, 
            "seasonPremiere": false, 
            "locator": "{YTVkOWJiYTAwYjUzYmM2YzJmYzc=,java.lang.String,NORMAL}[+]{hashKey,NORMAL}", 
            "erotic": false, 
            "audioType": "stereo", 
            "duration": 120000, 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": false, 
            "macrovision": false, 
            "id": "programid://2128795663", 
            "mixSource": false, 
            "externalKey": "TC1162b776_1_3_501_tk04301206", 
            "audioDescription": false, 
            "restartAvailable": false, 
            "title": "TC1162b776_1_3", 
            "allOfferIdList": [
                2
            ], 
            "synopsis": "TC1162b776_1_3 - synopsis", 
            "contentNdsDrmAttributes": {
                "isBto": false, 
                "lastOfferEndDateTime": 1765963847000, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "rentalDuration": 2147483647, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isExtendedRental": false, 
                "isIppv": false, 
                "isPar": false, 
                "isOppv": false
            }, 
            "source": "ltv", 
            "live": false, 
            "parentGroupId": "groupid://2147480087", 
            "type": "instance", 
            "channel": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
            "videoFormat": "sd", 
            "wideScreen": false, 
            "episodeNumber": 3, 
            "isPurchasable": true, 
            "subtitlesHardOfHearing": false, 
            "hdcp": false, 
            "serviceId": "501", 
            "adult": false, 
            "sortTitle": "TC1162b776_1_3", 
            "endAvailability": 1525089960000, 
            "hasChapters": false, 
            "cdvrAvailable": true, 
            "seasonFinale": false, 
            "shortSynopsis": "TC1162b776_1_3 - synopsis", 
            "mixContentId": false, 
            "broadcaster": "VGE", 
            "serviceEquivalenceKey": "501", 
            "ict": false, 
            "parentGroups": [
                {
                    "groupType": "Series", 
                    "groupId": "groupid://2147480087"
                }
            ]
        }, 
        "state": "BOOKED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "38130", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{501,java.lang.Integer,NORMAL}-|-{ZjA2N2ZiM2NjZDFkYjk3MWMyYTg=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "501", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 501, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 501", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 501", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "501", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "501", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_12163~PPS_INSTANCE_38130", 
        "startTime": "2018-04-30T12:04:00Z", 
        "recurrenceActive": true, 
        "bookingDuration": "00:02:00", 
        "notificationHandles": [
            "5ae7051047551d206618c764"
        ], 
        "created": "2018-04-30T11:59:12Z", 
        "lastModified": "2018-04-30T12:00:00Z", 
        "contentPlayUri": "?recId=147f8b11-4941-4106-89bd-2a5d0d1542c1", 
        "uri": "/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae7051047551d206618c764", 
        "scheduleInstance": "programid://2128795663~programid://2098089176", 
        "keep": false, 
        "contentId": "programid://2128795663~programid://2098089176"
    }
]
Testcase Passed: Verified the Booked/Recording Episode only present in Single Line item and not the Recorded Episode

2018/04/30 12:03:31 UTC ############################## ENDED :  corner_US31863_TC1162_Series_Collapse_Expand_Bookedcatalog ##############################

2018/04/30 12:03:31 UTC ############################## STARTED :  corner_US31863_TC1169_singleline_with_eventandseries ##############################
{'TC1169': ['US31863', '', 3]}
TC1169: Individual recording, series recording same title with single recording, recorded episodes of series and recorded individual program in the Recorded Library
US31863: As a viewer, when I browse my cDVR series recordings I want to be able to expand and collapse the list of episodes within each series.
{'services': { 505: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 2, 'programID': 'everectit205_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'everectit205'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 2, 'programID': 'everectit205_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'everectit205'},
                     { 'episodeNum': 3, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 2, 'programID': 'everectit205_1_3', 'rating': 1, 'seasonNum': 1, 'showID': 'everectit205'}],
         'lineupLength': 6,
         'message': ''},
  506: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 2, 'programID': 'serrectit729__1', 'rating': 1},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 2, 'programID': 'serrectit729_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'serrectit729'},
                     { 'episodeNum': 3, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 2, 'programID': 'serrectit729_1_3', 'rating': 1, 'seasonNum': 1, 'showID': 'serrectit729'}],
         'lineupLength': 6,
         'message': 'programIDPrefix serrectit729_1 is too long (max = 13 char)\n'}},
'shows': set(['everectit205', 'serrectit729']),
'seasons': { 'everectit205': { 1: set([1, 2, 3])}, 'serrectit729': { 1: set([2, 3])}},
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Starting test corner_US31863_TC1169_singleline_with_eventandseries
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae70510a3078b20f29fe851

Delete PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae70510a3078b20f29fe851
PPS Booking Deleted successfully
/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae7051047551d206618c764

Delete PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae7051047551d206618c764
PPS Booking Deleted successfully
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae70510a3078b20f29fe84e

Delete PPS recording via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae70510a3078b20f29fe84e 
PPS recording Deleted successfully
/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae70510a3078b20f29fe850

Delete PPS recording via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae70510a3078b20f29fe850 
PPS recording Deleted successfully
/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae7051047551d206618c761

Delete PPS recording via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae7051047551d206618c761 
PPS recording Deleted successfully
/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae7051047551d206618c763

Delete PPS recording via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae7051047551d206618c763 
PPS recording Deleted successfully
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525089942000~1525097142000?lang=eng&serviceList=505,506&count=255&region=101&catalogueId=1
[(u'programid://1549931564~programid://2147482876', [1525089960000, 1525090080000, u'everectit205_1_1', 2022706672, 1]), (u'programid://1549931565~programid://2147482875', [1525090080000, 1525090200000, u'everectit205_1_2', 2022706672, 2]), (u'programid://1549931563~programid://2147482874', [1525090200000, 1525090320000, u'everectit205_1_3', 2022706672, 3])]

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings 
PPS Booking successful for : programid://1549931564~programid://2147482876

Status Code : 201

Series Booking Successfull for  first series 2022706672 
{u'programid://2147480332~programid://2147482877': [1525089960000, 1525090080000, 120000, u'serrectit729__1'], u'programid://2147480331~programid://2147482878': [1525090200000, 1525090320000, 120000, u'serrectit729_1_3'], u'programid://2147480333~programid://2147482879': [1525090080000, 1525090200000, 120000, u'serrectit729_1_2']}
programid://2147480332~programid://2147482877

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings 
PPS Booking successful for : programid://2147480332~programid://2147482877

Status Code : 201

Event Booking Successfull 

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings 
PPS Booking successful for : programid://2147480331~programid://2147482878

Status Code : 201

Series Booking Successfull for series 1935404784 
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
Content Ids from the booked library [u'programid://2147480332~programid://2147482877', u'programid://2147480331~programid://2147482878', u'programid://2147480333~programid://2147482879']
Content Ids from the grid response [u'programid://2147480332~programid://2147482877', u'programid://2147480331~programid://2147482878', u'programid://2147480333~programid://2147482879']
all booked programes are present in the booked library
Recorded library fetched  via URL :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
[u'programid://2147480332~programid://2147482877', u'programid://2147480331~programid://2147482878', u'programid://2147480333~programid://2147482879']
all programs are present in the recorded library
group id list [u'groupid://1935404784', u'groupid://1935404784']
series collapse via url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog?collapse=true
 
series collapse is successful
series collapse via url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog?collapse=true
 
series collapse is successful
series collapsed successfully
group id list [u'groupid://1935404784', u'groupid://1935404784']
series expand via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog?filter:series=groupid://1935404784&collapse=true
 
series expansion is successful
series expand via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog?filter:series=groupid://1935404784&collapse=true
 
series expansion is successful
series expanded successfully
Testcase Passed: Collapse, & Expand were sucessful

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################


2018/04/30 12:13:58 UTC ############################## ENDED :  corner_US31863_TC1169_singleline_with_eventandseries ##############################

2018/04/30 12:13:58 UTC ############################## STARTED :  corner_US32026_TC955_stopanddelete_complete_series ##############################
{'TC955': ['US32026', '', 3]}
US32026: As a viewer, I want to use Broadcast Order to ensure that I don't book repeat episodes of a show
Starting test corner_US32026_TC955_stopanddelete_complete_series
Current time : Mon Apr 30 12:13:58 2018
Post Time: 2018-04-30 12:17:58


### STEP1: Ingest Series of 4 Episodes (Episode3/Episode4 will be rebroadcast of Episode1/Episode2 respectively) with the post time of 2 minutes#####################

{'services': { 505: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 5, 'programID': 'delfirec460_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'delfirec460'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 5, 'programID': 'delfirec460_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'delfirec460'}],
         'lineupLength': 10,
         'message': ''}},
'shows': set(['delfirec460']),
'seasons': { 'delfirec460': { 1: set([1, 2])}},
'totalLength': "00:10:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Rebroadcast episode start time : 2018-04-30T12:27:58Z
Current time :  2018-04-30 12:13:58.432720

Episode to rebroadcast : ['delfirec460_1_1', 'delfirec460_1_2']

Rebroadcasting the episode :  delfirec460_1_1_505_04301222
New Id : delfirec460_1_1_505_4301322
Original Episode Timing : 2018-04-30T12:17:00Z  To : 2018-04-30T12:22:00Z
Duration : 300
Post Time : 2018-04-30T12:27:58Z
End Availability : 2018-04-30T12:32:58Z
New content id : 505~30042018121700~30042018123258
Prepared for Rebroadcast : delfirec460_1_1

Rebroadcasting the episode :  delfirec460_1_2_505_04301227
New Id : delfirec460_1_2_505_4301327
Original Episode Timing : 2018-04-30T12:22:00Z  To : 2018-04-30T12:27:00Z
Duration : 300
Post Time : 2018-04-30T12:32:58Z
End Availability : 2018-04-30T12:37:58Z
New content id : 505~30042018121700~30042018123758
Prepared for Rebroadcast : delfirec460_1_2

Rebroadcast XML file generated : rebroadcast_delfirec460.xml
System will wait for 120.694 seconds for catalog to ingest succesfully

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################



### STEP2: Do the Booking and Verify only first run episodes Episode1/Episode2 is booked successfully #######################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525090579000~1525097779000?lang=eng&serviceList=505&count=255&region=101&catalogueId=1
ContentId dictionary from the grid response{u'programid://1533323291~programid://2041768936': [1525090620000, 1525090920000, 300000], u'programid://1533323291~programid://937831460': [1525091278000, 1525091578000, 300000], u'programid://1533323292~programid://937831461': [1525091578000, 1525091878000, 300000], u'programid://1533323292~programid://2041768935': [1525090920000, 1525091220000, 300000]}
Content id details of event in sorted manner:  [(u'programid://1533323291~programid://2041768936', [1525090620000, 1525090920000, 300000]), (u'programid://1533323292~programid://2041768935', [1525090920000, 1525091220000, 300000]), (u'programid://1533323291~programid://937831460', [1525091278000, 1525091578000, 300000]), (u'programid://1533323292~programid://937831461', [1525091578000, 1525091878000, 300000])]
List of all content ids for booking:  [u'programid://1533323291~programid://2041768936', u'programid://1533323292~programid://2041768935']
Content id of rebroadcasting episode:  [u'programid://1533323292~programid://937831461', u'programid://1533323291~programid://937831460']

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings 
PPS Booking completed successfully
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://1533323291~programid://2041768936', u'programid://1533323292~programid://2041768935'] is in BOOKED state
Verifying that rebroadcasting episode was not booked
Series was booked sucesfully without rebroadcasting episode

PPS booking is Done for householdId AUTO_3006_cornercase_set2_scripts_2  and its program id is programid://1533323291~programid://2041768936
System will wait for  39.0  seconds for recording to start
### STEP3: Wait till Episode1 goes to recording and stop the recording, than delete the whole series ####################


get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
All Program with the contentid [u'programid://1533323291~programid://2041768936'] is in RECORDING state
Stop the recording via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae7091347551d206618c768/management
Stop Recording is successful
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
All Programs with the contentids [u'programid://1533323291~programid://2041768936'] is in RECORDED state
Event is present in the recorded catalog
Stop the series recurrence via : http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae7091347551d206618c768/recurrence/management
 
Series recurrence stopped successfully

get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
Booking Catalog is empty
Series is successfully deleted 
Series Recurrence deleted successfully
###STEP4: Rebook the same series and verify again the Episode1 and Episode2 gets booked successfully and recorded successfully, there is no rebroadcast episode both in the booked/recorded library####################################



PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings 
PPS Booking completed successfully
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://1533323291~programid://2041768936', u'programid://1533323292~programid://2041768935'] is in BOOKED state
Verifying that rebroadcasting episode was not booked
Series was booked sucesfully without rebroadcasting episode
system will wait for  39.0  seconds for recording to start
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
All Programs with the contentids [u'programid://1533323291~programid://2041768936'] is in RECORDED state
Testcase passed : first run episode are present in the recorded catalog

2018/04/30 12:28:01 UTC ############################## ENDED :  corner_US32026_TC955_stopanddelete_complete_series ##############################

2018/04/30 12:28:01 UTC ############################## STARTED :  corner_US32026_TC957_delete_booked_firstRun_episode ##############################
{'TC957': ['US32026', '', 3]}

US32026: As a viewer, I want to use Broadcast Order to ensure that I don't book repeat episodes of a show

TC957: Cancel only one episode First run recording. Verify the Scheduled First Run episode is not in the Booking List


### STEP1: Ingest 2 episode of one series(Episode1/Episode2) and Episode1 is repeated again on the same channel with the post time(Difference Episode1 and Episode2 as 5 Minutes) ################

{'services': { 505: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'delfirecb460_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'delfirecb460'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'delfirecb460_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'delfirecb460'}],
         'lineupLength': 6,
         'message': ''}},
'shows': set(['delfirecb460']),
'seasons': { 'delfirecb460': { 1: set([1, 2])}},
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "5",
'is_1050': "True"
'is_24': "False"
}
Rebroadcast episode start time : 2018-04-30T12:38:01Z
Current time :  2018-04-30 12:28:01.365082

Episode to rebroadcast : ['delfirecb460_1_1']

Rebroadcasting the episode :  delfirecb460_1_1_505_04301240
New Id : delfirecb460_1_1_505_4301340
Original Episode Timing : 2018-04-30T12:32:00Z  To : 2018-04-30T12:35:00Z
Duration : 180
Post Time : 2018-04-30T12:38:01Z
End Availability : 2018-04-30T12:41:01Z
New content id : 505~30042018123200~30042018124101
Prepared for Rebroadcast : delfirecb460_1_1

Rebroadcast XML file generated : rebroadcast_delfirecb460.xml
System will wait for 120.4164 seconds for catalog to ingest succesfully
Starting test corner_US32026_TC957_delete_booked_firstRun_episode

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################



### STEP2: Book the series and verify that the repeated Episode1 is not in the booked list ###############################################################################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525091422000~1525098622000?lang=eng&serviceList=505&count=255&region=101&catalogueId=1
ContentId dictionary from the grid response{u'programid://1634312775~programid://124967518': [1525092000000, 1525092180000, u'delfirecb460_1_2'], u'programid://1634312776~programid://2147482885': [1525091881000, 1525092061000, u'delfirecb460_1_1'], u'programid://1634312776~programid://124967519': [1525091520000, 1525091700000, u'delfirecb460_1_1']}
Content id details of event in sorted manner:  [(u'programid://1634312776~programid://124967519', [1525091520000, 1525091700000, u'delfirecb460_1_1']), (u'programid://1634312776~programid://2147482885', [1525091881000, 1525092061000, u'delfirecb460_1_1']), (u'programid://1634312775~programid://124967518', [1525092000000, 1525092180000, u'delfirecb460_1_2'])]
Content Id List :  [u'programid://1634312776~programid://124967519', u'programid://1634312776~programid://2147482885', u'programid://1634312775~programid://124967518']
Content id of rebroadcasting episode:  programid://1634312776~programid://2147482885
List of all content ids for booking:  [u'programid://1634312776~programid://124967519', u'programid://1634312775~programid://124967518']

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings 
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://1634312776~programid://124967519', u'programid://1634312775~programid://124967518'] is in BOOKED state
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://1634312776~programid://2147482885'] is not in BOOKED state

### STEP3: Delete only Episode1 and verify that Episode1 is removed from the booked library and Episode2 is still present in the booked library #######


Delete PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae70c5ee9c28320e24199a4
PPS Booking Deleted successfully
get all Catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog
 
Current system time while fetching the catalog 2018-04-30 12:30:24.320508
get all failed recording catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog?filter:state=FAILED
 
Failed Recording Catalog is empty
Content Id state :  {u'programid://1634312775~programid://124967518': [u'BOOKED']}
get all Catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog
 
Current system time while fetching the catalog 2018-04-30 12:30:24.351989
Episode 2 state : BOOKED

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed : The Episode 1 is Deleted Episode 2 is in Booked State

2018/04/30 12:30:44 UTC ############################## ENDED :  corner_US32026_TC957_delete_booked_firstRun_episode ##############################

2018/04/30 12:30:44 UTC ############################## STARTED :  corner_US32026_TC958_delete_firstRun_episode ##############################
US32026: As a viewer, I want to use Broadcast Order to ensure that I don't book repeat episodes of a show
TC958: Delete only one episode First run recording. Verify the recorded First Run episode is not in the Recorded Tab


### STEP1: Ingest 2 episode of one series(Episode1/Episode2) and Episode1 is repeated again on the same channel with the post time(Difference Episode1 and Episode2 as 5 Minutes) #####

{'services': { 506: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'delfrec460_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'delfrec460'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'delfrec460_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'delfrec460'}],
         'lineupLength': 6,
         'message': ''}},
'shows': set(['delfrec460']),
'seasons': { 'delfrec460': { 1: set([1, 2])}},
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "5",
'is_1050': "True"
'is_24': "False"
}
Rebroadcast episode start time : 2018-04-30T12:45:44Z
Current time :  2018-04-30 12:30:44.679670

Episode to rebroadcast : ['delfrec460_1_1']

Rebroadcasting the episode :  delfrec460_1_1_506_04301242
New Id : delfrec460_1_1_506_4301342
Original Episode Timing : 2018-04-30T12:34:00Z  To : 2018-04-30T12:37:00Z
Duration : 180
Post Time : 2018-04-30T12:45:44Z
End Availability : 2018-04-30T12:48:44Z
New content id : 506~30042018123400~30042018124844
Prepared for Rebroadcast : delfrec460_1_1

Rebroadcast XML file generated : rebroadcast_delfrec460.xml
System will wait for  120.4164  seconds for catalog to ingest succesfully
Starting test corner_US32026_TC958_delete_firstRun_episode

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################



### STEP2: Book the series and verify that the repeated Episode1 is not in the booked list ###############################################################################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525091585000~1525098785000?lang=eng&serviceList=505,506&count=255&region=101&catalogueId=1
ContentId dictionary from the grid response{u'programid://1232053480~programid://1394106375': [1525091640000, 1525091820000, 180000], u'programid://1232053481~programid://1394106376': [1525092120000, 1525092300000, 180000], u'programid://1232053480~programid://1862278545': [1525092344000, 1525092524000, 180000]}
Content id details of event in sorted manner:  [(u'programid://1232053480~programid://1394106375', [1525091640000, 1525091820000, 180000]), (u'programid://1232053481~programid://1394106376', [1525092120000, 1525092300000, 180000]), (u'programid://1232053480~programid://1862278545', [1525092344000, 1525092524000, 180000])]
List of all content ids for booking:  [u'programid://1232053480~programid://1394106375', u'programid://1232053481~programid://1394106376', u'programid://1232053480~programid://1862278545']
Content id of rebroadcasting episode:  programid://1232053480~programid://1394106375

PPS booking is Doing for 
 householdId AUTO_3006_cornercase_set2_scripts_2  and its program id is programid://1232053480~programid://1394106375

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings 
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://1232053480~programid://1394106375', u'programid://1232053481~programid://1394106376'] is in BOOKED state


### STEP3: Wait till the Episode1 completes recording and verify that it is in recorded library ##################

system will wait for  53.0 seconds for recording to start
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
All Program with the contentid [u'programid://1232053480~programid://1394106375'] is in RECORDING state
script will wait for  120.0  seconds for recording to complete
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
All Programs with the contentids [u'programid://1232053480~programid://1394106375'] is in RECORDED state


### STEP4: Delete only Episode1 and verify that Episode1 is removed from the booked library and Episode2 is still present in the booked library ############


Delete PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae70d014d156f20e0f5e98f
PPS Booking Deleted successfully
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
Episode 2 is present in booking catalog
Episode 1 is succesfully deleted from booking catalog

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: Episode 1 is succesfully deleted, Episode 2 is still present in booking catalog

2018/04/30 12:38:50 UTC ############################## ENDED :  corner_US32026_TC958_delete_firstRun_episode ##############################

2018/04/30 12:38:50 UTC ############################## STARTED :  corner_US32026_TC959_multiple_series ##############################
{'TC959': ['US32026', '', 3]}
US32026: As a viewer, I want to use Broadcast Order to ensure that I don't book repeat episodes of a show


### STEP1: Ingest Series1 of 4 Episodes (Episode3/Episode4 will be rebroadcast of Episode1/Episode2 respectively) with the post time of 2 minutes and Ingest another Series2 of 2 Episodes with no rebroadcast on another channel #########################################################################################

{'services': { 506: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'mulseriess230_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'mulseriess230'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'mulseriess230_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'mulseriess230'}],
         'lineupLength': 6,
         'message': ''}},
'shows': set(['mulseriess230']),
'seasons': { 'mulseriess230': { 1: set([1, 2])}},
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Rebroadcast episode start time : 2018-04-30T12:48:50Z
Current time :  2018-04-30 12:38:51.172258

Episode to rebroadcast : ['mulseriess230_1_1', 'mulseriess230_1_2']

Rebroadcasting the episode :  mulseriess230_1_1_506_04301245
New Id : mulseriess230_1_1_506_4301345
Original Episode Timing : 2018-04-30T12:42:00Z  To : 2018-04-30T12:45:00Z
Duration : 180
Post Time : 2018-04-30T12:48:50Z
End Availability : 2018-04-30T12:51:50Z
New content id : 506~30042018124200~30042018125150
Prepared for Rebroadcast : mulseriess230_1_1

Rebroadcasting the episode :  mulseriess230_1_2_506_04301248
New Id : mulseriess230_1_2_506_4301348
Original Episode Timing : 2018-04-30T12:45:00Z  To : 2018-04-30T12:48:00Z
Duration : 180
Post Time : 2018-04-30T12:51:50Z
End Availability : 2018-04-30T12:54:50Z
New content id : 506~30042018124200~30042018125450
Prepared for Rebroadcast : mulseriess230_1_2

Rebroadcast XML file generated : rebroadcast_mulseriess230.xml
{'services': { 505: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'mulseries801_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'mulseries801'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'mulseries801_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'mulseries801'}],
         'lineupLength': 6,
         'message': ''}},
'shows': set(['mulseries801']),
'seasons': { 'mulseries801': { 1: set([1, 2])}},
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
System will wait for 120.8328 seconds for catalog to ingest succesfully
Starting test corner_US32026_TC959_multiple_series

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################



### STEP2: Do the Booking for both the series and Verify only first run episodes of Series1 Episode1/Episode2 is booked successfully and other Series2 booked as well ###############################################################################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525092072000~1525099272000?lang=eng&serviceList=505,506&count=255&region=101&catalogueId=1
ContentId dictionary from the grid response{u'programid://2147480339~programid://2147482887': [1525092710000, 1525092890000, 180000], u'programid://2147480338~programid://2147482886': [1525092530000, 1525092710000, 180000], u'programid://2147480338~programid://1408692556': [1525092120000, 1525092300000, 180000], u'programid://2147480339~programid://1408692557': [1525092300000, 1525092480000, 180000]}
Content id details of event in sorted manner:  [(u'programid://2147480338~programid://1408692556', [1525092120000, 1525092300000, 180000]), (u'programid://2147480339~programid://1408692557', [1525092300000, 1525092480000, 180000]), (u'programid://2147480338~programid://2147482886', [1525092530000, 1525092710000, 180000]), (u'programid://2147480339~programid://2147482887', [1525092710000, 1525092890000, 180000])]


### STEP3: set the end guard time and start guard time to 5 ####################################################

List of all content ids for booking:  [u'programid://2147480338~programid://1408692556', u'programid://2147480339~programid://1408692557']
Content id of rebroadcasting episode:  [u'programid://2147480339~programid://2147482887', u'programid://2147480338~programid://2147482886']


### STEP4: Book the series and verify the BOOKED state and endguard time and start guard time value in catalog ####################################


PPS booking is Doing for 
 householdId AUTO_3006_cornercase_set2_scripts_2  and its program id is programid://2147480338~programid://1408692556

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings 
PPS Booking completed successfully
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://2147480338~programid://1408692556', u'programid://2147480339~programid://1408692557'] is in BOOKED state
Verifying that rebroadcasting episode was not booked
Series was booked sucesfully without rebroadcasting episode
Content id details of event in sorted manner:  [(u'programid://2147480340~programid://838473517', [1525092120000, 1525092300000, 180000]), (u'programid://2147480341~programid://838473518', [1525092300000, 1525092480000, 180000])]


### STEP5: set the end guard time and start guard time to 5 ####################################################


PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings 
PPS Booking completed successfully
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://2147480340~programid://838473517', u'programid://2147480341~programid://838473518'] is in BOOKED state
 second series is booked and verified successfully
first run episode are present in the booked catalog
###STEP6: Delete the whole series1 and Verify the Episode1 and Episode2 is not in the booked library but Series2 is still in the booked list #######


Delete series booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae70ee829368720c773d107/recurrence/episodes
 

Series Booking and Recording Deleted successfully

Status Code : 200
first series is successfully deleted
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://2147480338~programid://1408692556', u'programid://2147480339~programid://1408692557'] is not in BOOKED state
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://2147480340~programid://838473517', u'programid://2147480341~programid://838473518'] is in BOOKED state
 Testcase passed :  Episode1 and Episode2 is not in the booked library but Series2 is still in the booked list

2018/04/30 12:41:16 UTC ############################## ENDED :  corner_US32026_TC959_multiple_series ##############################

2018/04/30 12:41:16 UTC ############################## STARTED :  corner_US32026_TC960_series_rebroadcast_delete ##############################
{'TC960': ['US32026', '', 3]}
US32026: As a viewer, I want to use Broadcast Order to ensure that I don't book repeat episodes of a show


### STEP1: Ingest Series1 of 4 Episodes (Episode3/Episode4 will be rebroadcast of Episode1/Episode2 respectively) with the post time of 2 minutes and Ingest another Series2 of 2 Episodes with no rebroadcast on another channel#################

{'services': { 506: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'serrebdele230_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'serrebdele230'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'serrebdele230_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'serrebdele230'}],
         'lineupLength': 6,
         'message': ''}},
'shows': set(['serrebdele230']),
'seasons': { 'serrebdele230': { 1: set([1, 2])}},
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Rebroadcast episode start time : 2018-04-30T12:52:16Z
Current time :  2018-04-30 12:41:16.898263

Episode to rebroadcast : ['serrebdele230_1_1', 'serrebdele230_1_2']

Rebroadcasting the episode :  serrebdele230_1_1_506_04301249
New Id : serrebdele230_1_1_506_4301349
Original Episode Timing : 2018-04-30T12:46:00Z  To : 2018-04-30T12:49:00Z
Duration : 180
Post Time : 2018-04-30T12:52:16Z
End Availability : 2018-04-30T12:55:16Z
New content id : 506~30042018124600~30042018125516
Prepared for Rebroadcast : serrebdele230_1_1

Rebroadcasting the episode :  serrebdele230_1_2_506_04301252
New Id : serrebdele230_1_2_506_4301352
Original Episode Timing : 2018-04-30T12:49:00Z  To : 2018-04-30T12:52:00Z
Duration : 180
Post Time : 2018-04-30T12:55:16Z
End Availability : 2018-04-30T12:58:16Z
New content id : 506~30042018124600~30042018125816
Prepared for Rebroadcast : serrebdele230_1_2

Rebroadcast XML file generated : rebroadcast_serrebdele230.xml
{'services': { 505: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'serrebdel801_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'serrebdel801'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'serrebdel801_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'serrebdel801'}],
         'lineupLength': 6,
         'message': ''}},
'shows': set(['serrebdel801']),
'seasons': { 'serrebdel801': { 1: set([1, 2])}},
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
System will wait for 120.8328 seconds for catalog to ingest succesfully
Starting test corner_US32026_TC960_series_rebroadcast_delete

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

### STEP2: Do the Booking for both the series and Verify only first run episodes of Series1 Episode1/Episode2 is booked successfully and other Series2 booked as well.##############################


cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525092218000~1525099418000?lang=eng&serviceList=505,506&count=255&region=101&catalogueId=1
ContentId dictionary from the grid response {u'programid://1469805669~programid://141530154': [1525092540000, 1525092720000, 180000], u'programid://1469805668~programid://141530153': [1525092360000, 1525092540000, 180000], u'programid://1469805669~programid://1031681226': [1525092916000, 1525093096000, 180000], u'programid://1469805668~programid://1031681225': [1525092736000, 1525092916000, 180000]}
ContentId list from the ContentId dictionary [(u'programid://1469805668~programid://141530153', [1525092360000, 1525092540000, 180000]), (u'programid://1469805669~programid://141530154', [1525092540000, 1525092720000, 180000]), (u'programid://1469805668~programid://1031681225', [1525092736000, 1525092916000, 180000]), (u'programid://1469805669~programid://1031681226', [1525092916000, 1525093096000, 180000])]
Content id details of event in sorted manner:  [(u'programid://1469805668~programid://141530153', [1525092360000, 1525092540000, 180000]), (u'programid://1469805669~programid://141530154', [1525092540000, 1525092720000, 180000]), (u'programid://1469805668~programid://1031681225', [1525092736000, 1525092916000, 180000]), (u'programid://1469805669~programid://1031681226', [1525092916000, 1525093096000, 180000])]

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings 
PPS Booking completed successfully
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://1469805668~programid://141530153', u'programid://1469805669~programid://141530154'] is in BOOKED state
Verifying that rebroadcasting episode was not booked
Series was booked sucesfully without rebroadcasting episode
Content id details of event in sorted manner:  [(u'programid://1292729648~programid://425327588', [1525092360000, 1525092540000, 180000]), (u'programid://1292729649~programid://425327589', [1525092540000, 1525092720000, 180000])]


### STEP3: set the end guard time and start guard time to 5 ####################################################


PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings 
PPS Booking completed successfully
[u'programid://1292729648~programid://425327588', u'programid://1292729649~programid://425327589']
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://1292729648~programid://425327588', u'programid://1292729649~programid://425327589'] is in BOOKED state
 second series is booked and verified successfully
### STEP4: Wait till the Episode1 and Episode2 completes recording and present in the recorded library and other series as well recorded ###########


get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
All Programs with the contentids [u'programid://1469805668~programid://141530153', u'programid://1469805669~programid://141530154'] is in RECORDED state
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
All Programs with the contentids [u'programid://1292729648~programid://425327588', u'programid://1292729649~programid://425327589'] is in RECORDED state
Both the series are present in the recorded catalog
first run episode are present in the recorded catalog and content URI is successfully obtained
###STEP5: Delete the whole series1 and Verify the Episode1 and Episode2 is not in the recorded library but Series2 is still in the recorded library. ##########


Delete series booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/catalog/5ae70f7a4d156f20e0f5e992/recurrence/episodes
 

Series Booking and Recording Deleted successfully

Status Code : 200
series is successfully deleted 
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
Programs not in recorded state : [u'programid://1469805669~programid://141530154', u'programid://1469805668~programid://141530153'] 
### Started VMR verification ###
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
Length of ContentPlaybackURI list is not equal to the content id list : []
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
All Programs with the contentids [u'programid://1292729648~programid://425327588', u'programid://1292729649~programid://425327589'] is in RECORDED state

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed : Episode1 and Episode2 is not in the booked library but Series2 is still in the booked list

2018/04/30 12:53:51 UTC ############################## ENDED :  corner_US32026_TC960_series_rebroadcast_delete ##############################

2018/04/30 12:53:51 UTC ############################## STARTED :  corner_US32026_TC971_delete_firstRun_episode_startguard ##############################
US32026: As a viewer, I want to use Broadcast Order to ensure that I don't book repeat episodes of a show
TC971: Book series recording with only first run episodes with the start time extention (start x minutes early ).


###STEP1: Ingest 2 episode of one series(Episode1/Episode2) on one channel and repeated Episode1 on same channel after the end time of episode 2 ################

{'services': { 505: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'firecsgt460_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'firecsgt460'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'firecsgt460_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'firecsgt460'}],
         'lineupLength': 8,
         'message': ''}},
'shows': set(['firecsgt460']),
'seasons': { 'firecsgt460': { 1: set([1, 2])}},
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Rebroadcast episode start time : 2018-04-30T13:10:51Z
Current time :  2018-04-30 12:53:51.235538

Episode to rebroadcast : ['firecsgt460_1_1']

Rebroadcasting the episode :  firecsgt460_1_1_505_04301306
New Id : firecsgt460_1_1_505_4301406
Original Episode Timing : 2018-04-30T13:02:00Z  To : 2018-04-30T13:06:00Z
Duration : 240
Post Time : 2018-04-30T13:10:51Z
End Availability : 2018-04-30T13:14:51Z
New content id : 505~30042018130200~30042018131451
Prepared for Rebroadcast : firecsgt460_1_1

Rebroadcast XML file generated : rebroadcast_firecsgt460.xml
System will wait for 120.5552 seconds for catalog to ingest succesfully
Starting test corner_US32026_TC971_delete_firstRun_episode_startguard

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################



###STEP2: Book the series with the startguardtime and verify that the repeated Episode1 is not in the booked list with the start guard time ##############

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525092972000~1525100172000?lang=eng&serviceList=505&count=255&region=101&catalogueId=1
ContentId Dictionary from Grid Response {u'programid://2147480342~programid://2147482888': [1525093560000, 1525093800000, 240000], u'programid://2147480343~programid://1958606435': [1525093851000, 1525094091000, 240000], u'programid://2147480343~programid://2147482889': [1525093320000, 1525093560000, 240000]}
Content id details of event in sorted manner:  [(u'programid://2147480343~programid://2147482889', [1525093320000, 1525093560000, 240000]), (u'programid://2147480342~programid://2147482888', [1525093560000, 1525093800000, 240000]), (u'programid://2147480343~programid://1958606435', [1525093851000, 1525094091000, 240000])]
List of all content ids for booking:  [u'programid://2147480343~programid://2147482889', u'programid://2147480342~programid://2147482888', u'programid://2147480343~programid://1958606435']

PPS booking is Doing for 
 householdId AUTO_3006_cornercase_set2_scripts_2  and its program id is programid://2147480343~programid://2147482889

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings 
PPS Booking completed successfully
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://2147480343~programid://2147482889', u'programid://2147480342~programid://2147482888'] is in BOOKED state
Verifying that rebroadcasting episode was not booked
Series was booked successfully without rebroadcasting episode

Details for:  programid://2147480343~programid://2147482889
Start guard time:  00:02:00 , End guard time :  00:00:00 End time :  1525093560000 from booking catalog

Details for:  programid://2147480342~programid://2147482888
Start guard time:  00:02:00 , End guard time :  00:00:00 End time :  1525093800000 from booking catalog
Booking is done with given start guard time and end time is also correct


###STEP3: Verify the first run episode Episode1 records early because of startguardtime and end on time #########################################################

Script will wait for  223.0 Seconds for program to start and  60 seconds for state change from Booked to recording
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
All Program with the contentid [u'programid://2147480343~programid://2147482889'] is in RECORDING state
script will wait for  300.0  seconds for recording to complete
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
All Programs with the contentids [u'programid://2147480343~programid://2147482889'] is in RECORDED state
366
Programlengthinseconds and programlengthwithguardtime 240 360
### Started VMR verification ###
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
Playback URI list : [u'?recId=2142ef06-5fe3-44d5-bf31-8e962e89d2a2']
URL to get contentid from recoring id : http://rr.cdvr.dcpt01.ciscocdvr.net:80/recordingInfo/2142ef06-5fe3-44d5-bf31-8e962e89d2a2?contentType=MPEG4&mode=playback&responseFormat=json
ContentId list : [u'27eaa429-9b97-45db-a125-aef3e2a95cae']

URL to get the vmr response: http://192.168.21.66:9999/api/findxrid/27eaa429-9b97-45db-a125-aef3e2a95cae
JSON response : [{"XRID":"27eaa429-9b97-45db-a125-aef3e2a95cae","IRID":"40532396646359877","CopyType":"UNIQUE","ISID":"505","AccountID":"AUTO_3006_cornercase_set2_scripts_2","BatchID":1,"StartTime":"2018-04-30T13:00:00Z","EndTime":"2018-04-30T13:06:00Z","ScheduledTime":"2018-04-30T12:57:00.043Z","ActualStartTime":"2018-04-30T12:59:59.583198Z","ActualEndTime":"2018-04-30T13:06:05.949198Z","StreamID":"505","AdZone":"0","StationID":"505","A8UpdateURL":"http://rr.cdvr.dcpt01.ciscocdvr.net:80/a8/update/PRIMETIME_RECORDER","ErasedTime":"0001-01-01T00:00:00Z","ErrorCode":0,"Status":"COMPLETE"}]
Verified the status is complete in VMR Response
[{"XRID":"27eaa429-9b97-45db-a125-aef3e2a95cae","IRID":"40532396646359877","CopyType":"UNIQUE","ISID":"505","AccountID":"AUTO_3006_cornercase_set2_scripts_2","BatchID":1,"StartTime":"2018-04-30T13:00:00Z","EndTime":"2018-04-30T13:06:00Z","ScheduledTime":"2018-04-30T12:57:00.043Z","ActualStartTime":"2018-04-30T12:59:59.583198Z","ActualEndTime":"2018-04-30T13:06:05.949198Z","StreamID":"505","AdZone":"0","StationID":"505","A8UpdateURL":"http://rr.cdvr.dcpt01.ciscocdvr.net:80/a8/update/PRIMETIME_RECORDER","ErasedTime":"0001-01-01T00:00:00Z","ErrorCode":0,"Status":"COMPLETE"}]
2018-04-30T12:59:59.583198Z 2018-04-30T13:06:05.949198Z
1525093199 1525093565
1525093320 1525093560
Verified the Actual Starttime started earlier than the bookingstarttime in vmr response
Recording counter 1
Verified the recording started early than the broadcast time

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: First Run episode was recorded succesfully with given start time

2018/04/30 13:07:51 UTC ############################## ENDED :  corner_US32026_TC971_delete_firstRun_episode_startguard ##############################

2018/04/30 13:07:51 UTC ############################## STARTED :  corner_US32026_TC972_delete_firstRun_episode_endguard ##############################
{'TC972': ['US32026', '', 3]}
US32026: As a viewer, I want to use Broadcast Order to ensure that I don't book repeat episodes of a show
TC972: Book series recording with only first run episodes with the stop time extention (stop x minutes early or late). Verify only first run episodes at stop extention time are Scheduled recording in the booking list and only first run episodes at stop extention time are recorded in the Recorded Library



###STEP1: Ingest 2 episode of one series(Episode1/Episode2) on one channel and repeated Episode1 on same channel after episode 2 ########################################################################################

{'services': { 505: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'TC972460_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'TC972460'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'TC972460_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'TC972460'}],
         'lineupLength': 8,
         'message': ''}},
'shows': set(['TC972460']),
'seasons': { 'TC972460': { 1: set([1, 2])}},
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Rebroadcast episode start time : 2018-04-30T13:20:51Z
Current time :  2018-04-30 13:07:51.216941

Episode to rebroadcast : ['TC972460_1_1']

Rebroadcasting the episode :  TC972460_1_1_505_04301316
New Id : TC972460_1_1_505_4301416
Original Episode Timing : 2018-04-30T13:12:00Z  To : 2018-04-30T13:16:00Z
Duration : 240
Post Time : 2018-04-30T13:20:51Z
End Availability : 2018-04-30T13:24:51Z
New content id : 505~30042018131200~30042018132451
Prepared for Rebroadcast : TC972460_1_1

Rebroadcast XML file generated : rebroadcast_TC972460.xml
System will wait for 120.5552 seconds for catalog to ingest succesfully
Starting test corner_US32026_TC972_delete_firstRun_episode_endguard

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################



### STEP2: Book the series with the endguardtime and verify that the repeated Episode1 is not in the booked list with the end guard time #######################################################################################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525093812000~1525101012000?lang=eng&serviceList=505&count=255&region=101&catalogueId=1
{u'programid://1568097132~programid://228119823': [1525094451000, 1525094691000, 240000], u'programid://1568097133~programid://1119312955': [1525094160000, 1525094400000, 240000], u'programid://1568097132~programid://1119312954': [1525093920000, 1525094160000, 240000]}
[(u'programid://1568097132~programid://1119312954', [1525093920000, 1525094160000, 240000]), (u'programid://1568097133~programid://1119312955', [1525094160000, 1525094400000, 240000]), (u'programid://1568097132~programid://228119823', [1525094451000, 1525094691000, 240000])]
[1525093920000, 1525094160000, 1525094451000] [1525094160000, 1525094400000, 1525094691000]
List of all content ids for booking:  [u'programid://1568097132~programid://1119312954', u'programid://1568097133~programid://1119312955', u'programid://1568097132~programid://228119823']

PPS booking is Doing for 
 householdId AUTO_3006_cornercase_set2_scripts_2  and its program id is programid://1568097132~programid://1119312954

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings 
PPS Booking completed successfully
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/bookings
 
All programs with the contentids [u'programid://1568097132~programid://1119312954', u'programid://1568097133~programid://1119312955'] is in BOOKED state
Verifying that rebroadcasting episode was not booked
Series was booked sucesfully without rebroadcasting episode

Details for:  programid://1568097132~programid://1119312954
Start guard time:  00:00:00 , End guard time :  00:02:00

Start time :  1525094160000 from booking catalog

Details for:  programid://1568097133~programid://1119312955
Start guard time:  00:00:00 , End guard time :  00:02:00

Start time :  1525094400000 from booking catalog
Booking is done with given end guard time and start time is also correct


### STEP3: Verify the first run episode Episode1 records ontime and end late because of endguardtime #######################################################

Script will wait for  103.0 Seconds for program to start and  60 seconds for state change from Booked to recording
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
All Program with the contentid [u'programid://1568097132~programid://1119312954'] is in RECORDING state
script will wait for  180.0  seconds for recording to complete
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
All Program with the contentid [u'programid://1568097132~programid://1119312954'] is in RECORDING state
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
All Programs with the contentids [u'programid://1568097132~programid://1119312954'] is in RECORDED state
Programlengthinseconds and programlengthwithguardtime 366 360
### Started VMR verification ###
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set2_scripts_2/recordings
 
Playback URI list : [u'?recId=2c1a105b-941d-46e6-a9a8-74a82b231abd']
URL to get contentid from recoring id : http://rr.cdvr.dcpt01.ciscocdvr.net:80/recordingInfo/2c1a105b-941d-46e6-a9a8-74a82b231abd?contentType=MPEG4&mode=playback&responseFormat=json
ContentId list : [u'c821f06d-d348-40ff-ab4a-8b902137d9cb']

URL to get the vmr response: http://192.168.21.66:9999/api/findxrid/c821f06d-d348-40ff-ab4a-8b902137d9cb
JSON response : [{"XRID":"c821f06d-d348-40ff-ab4a-8b902137d9cb","IRID":"40532396646359879","CopyType":"UNIQUE","ISID":"505","AccountID":"AUTO_3006_cornercase_set2_scripts_2","BatchID":1,"StartTime":"2018-04-30T13:12:00Z","EndTime":"2018-04-30T13:18:00Z","ScheduledTime":"2018-04-30T13:10:59.999Z","ActualStartTime":"2018-04-30T13:11:54.297198Z","ActualEndTime":"2018-04-30T13:18:00.663198Z","StreamID":"505","AdZone":"0","StationID":"505","A8UpdateURL":"http://rr.cdvr.dcpt01.ciscocdvr.net:80/a8/update/PRIMETIME_RECORDER","ErasedTime":"0001-01-01T00:00:00Z","ErrorCode":0,"Status":"COMPLETE"}]
Verified the status is complete in VMR Response
Actualstarttime, Actualendtime 1525093914 1525094280
Bookingstarttime, Bookingendtime 1525093920 1525094160
Verified the Actual Endtime completed later than the BookingEndTime in vmr response
Recording counter 1
Verified the recording completed later than the broadcast time

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: First Run episode along with full series recorded succesfully with proper end time

2018/04/30 13:19:46 UTC ############################## ENDED :  corner_US32026_TC972_delete_firstRun_episode_endguard ##############################

2018/04/30 13:19:46 UTC ############################## STARTED :  corner_delete_household ##############################
Starting test corner_delete_household
delete via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_0
delete via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_1
delete via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_2
delete via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_3
waiting a few seconds in an effort for PVR deletion to catch up
delete via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set2_scripts_4
waiting a few seconds in an effort for PVR deletion to catch up

2018/04/30 13:19:53 UTC ############################## ENDED :  corner_delete_household ##############################

2018/04/30 13:19:53 UTC done

##############################   Summary   ##############################

The following scripts returned non-zero exit codes:

Test Name                                          Return Code
-------------------------------------------------- -----------
corner_0039_US31833_TC1325_Stop_Playback                2     
corner_0012_US31839_TC1469_Booking_request_fails_for_single_event_booking_for_future      1     
corner_US31229_TC1703                                   1     
corner_US31229_TC1704                                   1     
corner_US31742_TC1198_Delete_recording_during_playback      2     
corner_0042_US31739_TC1371_record_two_households        1     
