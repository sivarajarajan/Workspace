
2018/04/30 06:03:50 UTC ############################## C O N F I G U R A T I O N ##############################

The following configuration is being used (aws_dcpt01):

{'EXTRACONF': None,
 'GITLASTCOMMIT': '4adcc3a5390',
 'GITREPO': 'origin\tlocalhost/cdvr-sanity-e3e0058 (fetch)',
 'LABNAME': 'aws_dcpt01',
 'activemq': {'service': 'nds_activemq'},
 'adZone': 'mkt1',
 'authz': {'consul_search_string': '-authz-',
           'host': 'authz.cdvr.dcpt01.ciscocdvr.net',
           'service': 'nds_authz'},
 'basic-feature-channels': ['GenericCh1', 'GenericCh2'],
 'basic_feature': {'allinstances': True,
                   'delete_household': False,
                   'household_prefix': 'AWS_AUTO',
                   'households_needed': 5,
                   'max_failures_allowed': 10,
                   'print_cfg': False,
                   'stop_on_first_failure': False,
                   'throttle_milliseconds': 250},
 'bsm': {'host': 'datamasters', 'service': 'nds_bsm'},
 'bsm-rest': {'host': 'datamasters', 'service': 'nds_bsm-rest'},
 'caSystemId': 2558,
 'carm': {'host': 'datamasters', 'service': 'nds_carm'},
 'catalogueId': 1,
 'catchup-restart-channels': ['GenericCh16', 'GenericCh17'],
 'ccm': {'host': 'datamasters', 'service': 'nds_ccm'},
 'cdvrServices': ['CDVR-ENABLED', 'ALLOW-CDVR-TIME-BASED-RECORDING'],
 'ci': {'earliestSecondsFromNowToSchedule': 120,
        'host': 'ci',
        'ingest_delay_factor_per_minute': 0.069400000000000003,
        'ingest_minimum_delay': 120,
        'port': 5155,
        'service': 'nds_ci'},
 'cmdc': {'host': 'cmdc', 'port': 5600, 'service': 'nds_cmdc'},
 'cmdcRegion': 101,
 'cmsrules': {'service': 'nds_cmsrules'},
 'cmsstatus': {'service': 'nds_cmsstatus'},
 'consul': {'host': 'consul.service.cdvr',
            'port': 8500,
            'running_instances_collection_api': '/v1/catalog/nodes'},
 'contentplayback': {'host': 'cdvr.pe1.ciscocdvr.net',
                     'port': 80,
                     'url': '/cdvr/'},
 'corner': {'allinstances': True,
            'delete_household': False,
            'household_prefix': 'AUTO_3006_cornercase_set1_scripts_',
            'households_needed': 5,
            'print_cfg': False,
            'stop_on_first_failure': False,
            'throttle_milliseconds': 250},
 'cornercase-channelsets': {'set1': ['GenericCh3',
                                     'GenericCh4',
                                     'GenericCh5'],
                            'set2': ['GenericCh6',
                                     'GenericCh7',
                                     'GenericCh8'],
                            'set3': ['GenericCh9',
                                     'GenericCh10',
                                     'GenericCh11',
                                     'GenericCh12',
                                     'GenericCh13']},
 'cos': {'active_storage_path': 'rio/active',
         'api': 'v2p',
         'urls': ['http://192.168.22.6',
                  'http://192.168.22.7',
                  'http://192.168.22.8',
                  'http://192.168.22.9',
                  'http://192.168.22.10',
                  'http://192.168.22.11',
                  'http://192.168.22.12',
                  'http://192.168.22.13',
                  'http://192.168.22.14',
                  'http://192.168.22.15',
                  'http://192.168.22.16',
                  'http://192.168.22.17',
                  'http://192.168.22.18',
                  'http://192.168.22.19',
                  'http://192.168.22.20',
                  'http://192.168.22.21',
                  'http://192.168.22.22',
                  'http://192.168.22.23',
                  'http://192.168.22.24',
                  'http://192.168.22.25',
                  'http://192.168.22.29',
                  'http://192.168.22.30',
                  'http://192.168.22.31',
                  'http://192.168.22.32',
                  'http://192.168.22.33',
                  'http://192.168.22.34',
                  'http://192.168.22.35',
                  'http://192.168.22.36',
                  'http://192.168.22.37',
                  'http://192.168.22.38',
                  'http://192.168.22.39',
                  'http://192.168.22.40'],
         'x-auth-key': 'rootroot',
         'x-auth-user': 'mostest:mostest'},
 'dashboardCheck': {'enabled': False, 'nodes': ['kibana', 'uchima']},
 'enabledServices': ['CATCHUP_ENABLER',
                     'RESTART_ENABLER',
                     'CDVR-ENABLED',
                     'ALLOW-CDVR-TIME-BASED-RECORDING'],
 'externalAuthz': {'host': 'cmdc-0', 'isenabled': True, 'port': 9988},
 'hc': {'host': 'external-ma', 'port': 6410, 'service': 'nds_hc'},
 'health-check': {'enabled': False,
                  'nodes': ['pps', 'upm', 'sr', 'ma-batch', 'ma-api']},
 'hornetq': {'host': 'pps.cdvr.dcpt01.ciscocdvr.net', 'service': 'hornetq'},
 'idsync': {'host': 'datamasters', 'service': 'nds_idsync'},
 'ignore_dataplane_tests': False,
 'ipom': {'host': '211.208.160.45', 'port': 8081},
 'lab-description': 'AWS',
 'longterm': {'allinstances': True,
              'delete_household': False,
              'filename': 'keyvalues',
              'household_prefix': 'LONG',
              'households_needed': 5,
              'longterm_duration': 1,
              'print_cfg': False,
              'stop_on_first_failure': False,
              'throttle_milliseconds': 250},
 'longterm-channels': ['GenericCh14', 'GenericCh15'],
 'lsm': {'host': 'datamasters', 'service': 'nds_lsm'},
 'ma': {'config_keys': ['ma-api', 'ma-batch']},
 'ma-api': {'corelocation': '/var/log/nds/core*',
            'host': 'external-ma',
            'port': 6410,
            'service': 'nds_ma-api'},
 'ma-batch': {'corelocation': '/var/log/nds/core*',
              'host': 'external-ma',
              'port': 6419,
              'service': 'nds_ma-batch'},
 'marketingTarget': 'mkt1',
 'mongo': {'consul_search_string': 'mongo-0',
           'host': 'pps.cdvr.dcpt01.ciscocdvr.net',
           'service': 'mongod'},
 'mos': {'active_name': 'recmgmt',
         'v1url': 'http://vdc3-mos-v1api.mos-dns-cache.vdc3.vcte.com',
         'v2url': 'https://vdc3-mos-v2api.mos-dns-cache.vdc3.vcte.com'},
 'msr': {'active_name': 'source1',
         'functional_port': 9998,
         'host': '192.168.21.66',
         'sanity_port': 8080,
         'v1url': 'https://ui.rio-mos-dns.vdc7.vcte.com:7001',
         'v2url': 'https://ui.rio-mos-dns.vdc7.vcte.com:8043'},
 'ndsconsole': {'host': 'ci', 'service': 'nds_ndsconsole'},
 'nm': {'host': 'datamasters', 'service': 'nds_nm'},
 'oasm': {'host': 'datamasters', 'service': 'nds_oasm'},
 'performance': {'allinstances': True,
                 'delete_household': False,
                 'household_prefix': 'PERF',
                 'households_needed': 50000,
                 'print_cfg': False,
                 'stop_on_first_failure': False,
                 'throttle_milliseconds': 250},
 'pps': {'api': 'v2',
         'booked_to_recording_delay': 60,
         'consul_search_string': '-pps-',
         'corelocation': '/var/log/nds/core*',
         'fetch_bookingCatalog_delay': 2,
         'host': 'pps.cdvr.dcpt01.ciscocdvr.net',
         'port': 6060,
         'protocol': 'http',
         'recording_to_recorded_delay': 90,
         'series_bookingstatecheck_waittime': 5,
         'service': 'nds_pps'},
 'prm_supported': False,
 'protocol': 'http',
 'proxyHostNeeded': False,
 'proxyhost': {'host': '192.168.0.30', 'port': 8080},
 'quotas': {'diskQuota': 108000, 'numOfTuners': 4},
 'rally_initiatives_to_run': ['Core DVR Functionality'],
 'recorderRegion': 'PRIMETIME_RECORDER',
 'recording_api': 'v2p',
 'recording_mode': 'unique_copy',
 'region': 101,
 'rm': {'host': 'rr.cdvr.dcpt01.ciscocdvr.net',
        'port': 80,
        'protocol': 'http'},
 'sanity': {'allinstances': True,
            'delete_household': True,
            'household_prefix': 'AWS_SANITY',
            'households_needed': 10,
            'print_cfg': False,
            'stop_on_first_failure': False,
            'throttle_milliseconds': 250},
 'service_restart': False,
 'sgw': {'host': 'authz.cdvr.dcpt01.ciscocdvr.net', 'service': 'nds_sgw'},
 'sm': {'host': '211.208.132.19', 'port': 8080},
 'sr': {'corelocation': '/opt/cisco/seriesresolution/core*',
        'service': 'cisco_seriesresolution'},
 'ssh_userid': 'ecuser',
 'test-flags': ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy'],
 'test_channels': {'GenericCh1': {'Description': 'Service programming is determined by a test script',
                                  'ServiceId': 500,
                                  'cmdcRegion': 101,
                                  'region': 101},
                   'GenericCh10': {'Description': 'Service programming is determined by a test script',
                                   'ServiceId': 509,
                                   'cmdcRegion': 101,
                                   'region': 101},
                   'GenericCh11': {'Description': 'Service programming is determined by a test script',
                                   'ServiceId': 510,
                                   'cmdcRegion': 101,
                                   'region': 101},
                   'GenericCh12': {'Description': 'Service programming is determined by a test script',
                                   'ServiceId': 511,
                                   'cmdcRegion': 101,
                                   'region': 101},
                   'GenericCh13': {'Description': 'Service programming is determined by a test script',
                                   'ServiceId': 512,
                                   'cmdcRegion': 101,
                                   'region': 101},
                   'GenericCh14': {'Description': 'Service programming is determined by a test script',
                                   'ServiceId': 513,
                                   'cmdcRegion': 101,
                                   'region': 101},
                   'GenericCh15': {'Description': 'Service programming is determined by a test script',
                                   'ServiceId': 514,
                                   'cmdcRegion': 101,
                                   'region': 101},
                   'GenericCh16': {'Description': 'Service programming is determined by a test script',
                                   'ServiceId': 515,
                                   'cmdcRegion': 101,
                                   'region': 101},
                   'GenericCh17': {'Description': 'Service programming is determined by a test script',
                                   'ServiceId': 516,
                                   'cmdcRegion': 101,
                                   'region': 101},
                   'GenericCh2': {'Description': 'Service programming is determined by a test script',
                                  'ServiceId': 501,
                                  'cmdcRegion': 101,
                                  'region': 101},
                   'GenericCh3': {'Description': 'Service programming is determined by a test script',
                                  'ServiceId': 502,
                                  'cmdcRegion': 101,
                                  'region': 101},
                   'GenericCh4': {'Description': 'Service programming is determined by a test script',
                                  'ServiceId': 503,
                                  'cmdcRegion': 101,
                                  'region': 101},
                   'GenericCh5': {'Description': 'Service programming is determined by a test script',
                                  'ServiceId': 504,
                                  'cmdcRegion': 101,
                                  'region': 101},
                   'GenericCh6': {'Description': 'Service programming is determined by a test script',
                                  'ServiceId': 505,
                                  'cmdcRegion': 101,
                                  'region': 101},
                   'GenericCh7': {'Description': 'Service programming is determined by a test script',
                                  'ServiceId': 506,
                                  'cmdcRegion': 101,
                                  'region': 101},
                   'GenericCh8': {'Description': 'Service programming is determined by a test script',
                                  'ServiceId': 507,
                                  'cmdcRegion': 101,
                                  'region': 101},
                   'GenericCh9': {'Description': 'Service programming is determined by a test script',
                                  'ServiceId': 508,
                                  'cmdcRegion': 101,
                                  'region': 101},
                   'longProgramLength': 5,
                   'mediumProgramLength': 3,
                   'shortProgramLength': 2,
                   'xlongProgramLength': 10},
 'test_results': {'filename': 'ec_results.json', 'format': 'json'},
 'tests-to-run': ['sanity', 'basic-feature'],
 'tgs': {'host': 'cmdc', 'service': 'nds_tgs'},
 'tpi': {'host': 'cmdc', 'service': 'nds_tpi'},
 'tstvm': {'host': 'cmdc', 'service': 'nds_tstvm'},
 'tui': {'host': 'cmdc', 'service': 'nds_tui'},
 'ubs': {'service': 'nds_ubs'},
 'upm': {'consul_search_string': '-upm-',
         'corelocation': '/var/log/nds/core*',
         'host': 'upm.cdvr.dcpt01.ciscocdvr.net',
         'port': 6040,
         'protocol': 'http',
         'service': 'nds_upm'},
 'username': 'centos',
 'v2p': {'api_port': 8043,
         'api_token': '52d6ce4e-b9ca-4343-bbd2-192f92e01b07',
         'assets_url': 'am1.ciscocdvr.net',
         'interface_port': 7001,
         'masters': ['v2pc-ui.ciscocdvr.net'],
         'mgmt_port': 8443,
         'pam_node': '0.0.0.0',
         'protocol': 'https',
         'sm_api_token': 'eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6ImFkbWluIiwicm9sZXMiOlHAiOjE1MjQ1NzUwNzd9.H08XWgINkpQGzLRB_CJOvScnXJpmqnVgJZomOuqEqoeQbt-uBNK2sau_62qmLOcOULKR66zf8547LVXCfTHE4bweqmRkgPFy4fEhj74S5upJGBgs2F3vPKTLtSmBVBGXdGRNGxBnjayd9g5bhTotr94Y9jlST4fRuUSXfrNUElbYxv-uaWt6Z8AAeaJCfOHhuof7pB5D65cHBZBm6C1eWQ5nYgaqWiY7Ha7hsSgRK4MGFw0vK40df5OOG0LQmbn0C-Eapm5zTRqRDZjS8MSTJ30GEue3AqyVdKz32t7KcMkFd7fAm16H4x1whWyzJ5edY9C6Misg5o5ek3FSGFeJ6g',
         'use_proxy': False},
 'vcmgateway': {'service': 'nds_vcmgateway'},
 'vcmingest': {'service': 'nds_vcmingest'},
 'vcmpublish': {'service': 'nds_vcmpublish'},
 'vcmsupport': {'service': 'nds_vcmsupport'},
 'vcmworkflow': {'service': 'nds_vcmworkflow'},
 'vmr': {'host': '192.168.21.66', 'port': 9999},
 'vsrm': {'host': 'rr.cdvr.dcpt01.ciscocdvr.net',
          'port': 80,
          'protocol': 'http'}}


2018/04/30 06:03:50 UTC ############################## STARTED :  corner_delete_household ##############################
Starting test corner_delete_household
waiting a few seconds in an effort for PVR deletion to catch up
waiting a few seconds in an effort for PVR deletion to catch up

2018/04/30 06:03:57 UTC ############################## ENDED :  corner_delete_household ##############################

2018/04/30 06:03:57 UTC ############################## STARTED :  corner_create_household ##############################
Starting test corner_create_household
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Create household via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_0
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Create household via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_1
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Create household via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_2
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Create household via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_3
waiting a few seconds in an effort for PVR creation to catch up before 1st use
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Create household via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_4
waiting a few seconds in an effort for PVR creation to catch up before 1st use

2018/04/30 06:04:03 UTC ############################## ENDED :  corner_create_household ##############################

2018/04/30 06:04:03 UTC ############################## STARTED :  corner_0001_getCatalogServices ##############################
Starting test corner_0001_getCatalogServices

2018/04/30 06:04:03 UTC ############################## ENDED :  corner_0001_getCatalogServices ##############################

2018/04/30 06:04:03 UTC ############################## STARTED :  corner_0002_getOffers ##############################
Starting test corner_0002_getOffers

2018/04/30 06:04:03 UTC ############################## ENDED :  corner_0002_getOffers ##############################

2018/04/30 06:04:03 UTC ############################## STARTED :  corner_0003_setOffers ##############################
Starting test corner_0003_setOffers
Skipping Enabler services as there is no UPM

2018/04/30 06:04:03 UTC ############################## ENDED :  corner_0003_setOffers ##############################

2018/04/30 06:04:03 UTC ############################## STARTED :  corner_0010_US31724_TC1391_No_booking_program_in_the_booking_list ##############################
{'TC1391': ['US31724', '', 3]}

 US31724:Enable Subscriber Browse for Scheduled Content via Control Plane

 TC1391:No booking program in the booking list
Starting test corner_0010_US31724_TC1391_No_booking_program_in_the_booking_list
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################



### STEP1: Fetch booking library and verify that it is empty ###############################################

Booked library fetched  via URL :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_3/bookings
Booked Library is empty
Testcase Passed: No Event is present in the Booked Catalog

2018/04/30 06:04:24 UTC ############################## ENDED :  corner_0010_US31724_TC1391_No_booking_program_in_the_booking_list ##############################

2018/04/30 06:04:24 UTC ############################## STARTED :  corner_0010_US31745_TC1377_empty_recordlib ##############################
US31745: UseCase: Enable Subscriber Browse for Recorded Content via control plane
TC1377: No recorded content in the recorded library. (negative test)
Starting test corner_0010_US31745_TC1377_empty_recordlib


### STEP1: fetch the recording library for the household & verify that there is no content in library #######################################################

Recorded library fetched  via URL :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/recordings
Recorded Library is empty
Testcase Passed: Recorded library is empty

2018/04/30 06:04:24 UTC ############################## ENDED :  corner_0010_US31745_TC1377_empty_recordlib ##############################

2018/04/30 06:04:24 UTC ############################## STARTED :  corner_0010_US31812_TC1239_storageQuota_newHH ##############################
US31812: As a viewer, I want to be able to see my current storage quota status
TC1239: Verify storage quota after creating new household account
Starting test corner_0010_US31812_TC1239_storageQuota_newHH
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################



### STEP1: Fetch Storage value of existing household (Global Value) ########################################################################################
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Retrieve Total diskQuota fetched  via URL :  http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_0/diskQuota
Diskquota for the household is 108000
Global storage value:  108000


### STEP2: Create new household ############################################################################################################################
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Create household via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/GLOBAL
Household created:  GLOBAL


### STEP3: Check the storage value for household created #################################################################################################
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Retrieve Total diskQuota fetched  via URL :  http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/GLOBAL/diskQuota
Diskquota for the household is 108000
Storage value for new household:  108000


### STEP4: Verify the two values (Global storage value & new household storage value) are same ###########################################################
Remaining diskspace left is fetched  via URL :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/pvrs/nPVR

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: New household was created with available space that is  100% of quota

2018/04/30 06:05:04 UTC ############################## ENDED :  corner_0010_US31812_TC1239_storageQuota_newHH ##############################

2018/04/30 06:05:04 UTC ############################## STARTED :  corner_0011_US31724_TC1390_Only_one_booking_program_in_the_booking_list ##############################
{'TC1390': ['US31724', '', 3], 'TC1403': ['US31724', '', 3]}

US31724:Enable Subscriber Browse for Scheduled Content via Control Plane


TC1390: Only one booking program in the booking list. Verify that user can navigate in the booking list by page up/page down, arrow up/arrow downarrow left
TC1403: Browse booking list with only Individual booking programs. Verify that user can navigate to booking programs by pressing page up/page down, arrow up/arrow down, arrow right/ arrow left, select key
Starting test corner_0011_US31724_TC1390_Only_one_booking_program_in_the_booking_list
Final list :[('cmdc', 'pps.cdvr.dcpt01.ciscocdvr.net', 'upm.cdvr.dcpt01.ciscocdvr.net')]


### STEP1: Ingest an event of n minutes with post time ###########################################

{'services': { 502: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'onlyone113_1', 'rating': 1}], 'lineupLength': 4, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:04:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.2776
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525068445000~1525075645000?lang=eng&serviceList=502&count=255&region=101&catalogueId=1
Content id details of event:  [(u'programid://1377150185~programid://1150657308', [1525068540000, 1525068780000, 240000])]


### STEP2: Book the individual event , verify it ############################################


PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_2/bookings 
PPS Booking completed successfully
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_2/bookings
 
All programs with the contentids [u'programid://1377150185~programid://1150657308'] is in BOOKED state

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: Verified that the only booked event is present in booking catalog 

2018/04/30 06:07:47 UTC ############################## ENDED :  corner_0011_US31724_TC1390_Only_one_booking_program_in_the_booking_list ##############################

2018/04/30 06:07:47 UTC ############################## STARTED :  corner_0011_US31724_TC1401_Cancel_Booking_Before15Minutes ##############################
{'TC1401': ['US31724', '', 3]}

US31724: UseCase: Enable Subscriber Browse for Scheduled Content via Control Plane
TC1401: Cancel the scheduled recordings from the booking list 15 minutes before the recording starts, display in the booking list. Verify that the user can cancel the scheduled recordings from the booking list 15 minutes before the recording starts. The scheduled program will be removed from the booking list, the scheduled icon will be removed from Guide, Search, Program information
Starting test corner_0011_US31724_TC1401_Cancel_Booking_Before15Minutes


### STEP1: Ingest 1 event of 2 minutes (Post time 20 minutes later than present time) ##############################

{'services': { 502: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'can15ms40_1', 'rating': 1}], 'lineupLength': 4, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:04:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.2776
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525068608000~1525075808000?lang=eng&serviceList=502&count=255&region=101&catalogueId=1
Content id details of event in sorted manner:  [(u'programid://2095648033~programid://2147482787', [1525069380000, 1525069620000, 240000])]
Contentid list :  [u'programid://2095648033~programid://2147482787'] 



### STEP2: Book and verify the event state as BOOKED #######################################################


PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings 
PPS Booking completed successfully
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
All programs with the contentids [u'programid://2095648033~programid://2147482787'] is in BOOKED state


### Step3: wait till the time, 15 minutes before program starts ###########################################

Script will wait for  1  seconds
Now, its 15 minutes left for the program to start, will cancel the booking


### STEP4: Cancel the booking #####################################################################


Delete PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae6b340a3078b20f29fe836
PPS Booking Deleted successfully


### STEP5: Verify that the event is not present in Booking catalog ###################################

Booked library fetched  via URL :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
Booked Library is empty

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: Event deleted succesfully before 15 minutes and verified from booking catalog

2018/04/30 06:10:31 UTC ############################## ENDED :  corner_0011_US31724_TC1401_Cancel_Booking_Before15Minutes ##############################

2018/04/30 06:10:31 UTC ############################## STARTED :  corner_0011_US31739_TC1363_Cancel_Booking_Before5Minutes ##############################
{'TC1363': ['US31739', '', 3]}

US31739: UseCase: Schedule Event based Recording on Control Plane
TC1363: Record future program from EPG grid, cancel recording 5 minutes before the recording starts. Verify that the user can cancel the future recording 5 minutes before the recording starts. The program will be removed from the booking list
Starting test corner_0011_US31739_TC1363_Cancel_Booking_Before5Minutes


### STEP1: Ingest 1 event of 2 minutes (Post time 10 minutes later than present time) ################################

{'services': { 502: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'cancel5mns40_1', 'rating': 1}], 'lineupLength': 4, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:04:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.2776
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525068771000~1525075971000?lang=eng&serviceList=502&count=255&region=101&catalogueId=1
Content id details of event in sorted manner:  [(u'programid://1683386763~programid://1290167038', [1525069200000, 1525069440000, 240000])]
Contentid list :  [u'programid://1683386763~programid://1290167038'] 



### STEP2: Book and verify the event state as BOOKED ########################################################


PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings 
PPS Booking completed successfully
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
All programs with the contentids [u'programid://1683386763~programid://1290167038'] is in BOOKED state


### Step3: wait till the time, 5 minutes before program starts ###########################################

Script will wait for  127.0  seconds
Now, its 5 minutes left for the program to start, will cancel the booking


### STEP4: Cancel the booking ##################################################################


Delete PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae6b3e3a7f2b7218ae8e140
PPS Booking Deleted successfully


### STEP5: Verify that the event is not present in Booking catalog ##################################

Booked library fetched  via URL :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
Booked Library is empty

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: Event deleted succesfully before 5 minutes and verified from booking catalog

2018/04/30 06:15:21 UTC ############################## ENDED :  corner_0011_US31739_TC1363_Cancel_Booking_Before5Minutes ##############################

2018/04/30 06:15:21 UTC ############################## STARTED :  corner_0012_US31739_TC1362_Cancel_Booking_Before30Minutes ##############################
{'TC1362': ['US31739', '', 3], 'TC1400': ['US31724', '', 3]}

US31739: UseCase: Schedule Event based Recording on Control Plane
TC1362: Record future program from EPG grid, cancel recording 30 minutes before the recording starts. Verify that the user can cancel the future recording 30 minutes before the recording starts. The program will be removed from the booking list

US31724: UseCase: Enable Subscriber Browse for Scheduled Content via Control Plane
TC1400: Cancel the scheduled recordings from the booking list 30 minutes before the recording starts, display in the booking list. Verify that the user can cancel the scheduled recordings from the booking list 30 minutes before the recording starts. The scheduled program will be removed from the booking list, the scheduled icon will be removed from Guide, Search, Program information 
Starting test corner_0012_US31739_TC1362_Cancel_Booking_Before30Minutes
### STEP1: Ingest 1 event of n minutes (Post time 35 minutes later than present time) ##################################

{'services': { 502: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'can30ms240_1', 'rating': 1}], 'lineupLength': 4, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:04:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.2776
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525069061000~1525076261000?lang=eng&serviceList=502&count=255&region=101&catalogueId=1
Content id details of event in sorted manner:  [(u'programid://2147480261~programid://2147482788', [1525070460000, 1525070700000, 240000])]
Contentid list :  [u'programid://2147480261~programid://2147482788'] 



### STEP2: Book and verify the event state as BOOKED ######################################################


PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings 
PPS Booking completed successfully
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
All programs with the contentids [u'programid://2147480261~programid://2147482788'] is in BOOKED state


### Step3: wait till the time, 30 minutes before program starts ##########################################

Script will wait for  1  seconds
Now, its 30 minutes left for the program to start, will cancel the booking


### STEP4: Cancel the booking #####################################################################


Delete PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae6b5051ab94a20f760ba12
PPS Booking Deleted successfully


### STEP5: Verify that the event is not present in Booking catalog ################################

Booked library fetched  via URL :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
Booked Library is empty

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: Event deleted succesfully before 30 minutes and verified from booking catalog

2018/04/30 06:18:04 UTC ############################## ENDED :  corner_0012_US31739_TC1362_Cancel_Booking_Before30Minutes ##############################

2018/04/30 06:18:04 UTC ############################## STARTED :  corner_0030_US31798_TC1068_RecordNow_StopandDelete_Verify ##############################
US31798: As a viewer, I want to be able to press the RECORD button on my remote while watching live content and have the event recorded from that point to the end of the event
TC1068: Record currently watching program by pressing Record button, user stop recording and delete recording from the user library
Starting test corner_0030_US31798_TC1068_RecordNow_StopandDelete_Verify
### STEP1: Verify the recording mode and proceed further only if it is not Common Copy Environment######### 
 

Testscript Proceeds further since it is not Common Copy Environment
### STEP2: Ingest an event of n minutes on one channel without any post time so that it will show as currently broadcasting event######## 
 

{'services': { 503: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'stopdelver199_1', 'rating': 1}], 'lineupLength': 6, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.4164
### STEP3: Fetch the Grid Request and get the currently broadcasting event, than book the event and verify######## 
 

Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525065625000~1525072825000?lang=eng&serviceList=503&count=255&region=101&catalogueId=1
Programs from Grid Request which is currently broadcasting
{u'programid://1083152245~programid://593195008': [1525069200000, 1525069560000, 360000, u'stopdelver199_1']}

Least Content Start Time near to content time: 1525069200000
Content Id corresponding to that index:
programid://1083152245~programid://593195008
Content Id with the required parameters
[(u'programid://1083152245~programid://593195008', 1525069200000, 1525069560000, 360000)]
ContentId list after sorting 
[(u'programid://1083152245~programid://593195008', 1525069200000, 1525069560000, 360000)]

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings 
PPS Booking successful for : [u'programid://1083152245~programid://593195008']

Status Code : 201

PPS booking is successful for the event contentId programid://1083152245~programid://593195008
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
All programs with the contentids [u'programid://1083152245~programid://593195008'] is in BOOKED state
Script will wait for 0minutes to check the Recording State
### STEP4: Verify the Event is in Recording State and proceed further################# 
 

get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/recordings
 
All Program with the contentid [u'programid://1083152245~programid://593195008'] is in RECORDING state
### STEP5: Stop the Recording and delete the Recording than Verify the Event is not in the Booked and Recorded Library and update the results######### 
 

Stop the recording via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae6b5a9fddcf120e1a08054/management
Stop Recording is successful
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/recordings
 
All Programs with the contentids [u'programid://1083152245~programid://593195008'] is in RECORDED state
Event is in recorded state in recorded catalog after stopping the recording

Delete PPS recording via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae6b5a9fddcf120e1a08054 
PPS recording Deleted successfully
Status Code : 200

get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/recordings
 
Recording Catalog is empty
Recording catalog is empty
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/recordings
 
Recording Catalog is empty
Recorded catalog is empty

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: Event is not present in the recorded library after stop and delete recording

2018/04/30 06:23:19 UTC ############################## ENDED :  corner_0030_US31798_TC1068_RecordNow_StopandDelete_Verify ##############################

2018/04/30 06:23:19 UTC ############################## STARTED :  corner_0031_US31798_TC1060_Activate_RecordNOW_broadcast_event_playback ##############################
US31798: As a viewer, I want to be able to press the RECORD button on my remote while watching live content and have the event recorded from that point to the end of the event
TC1060: Record currently watching program by pressing Record button on the program from Guide
TC1061: Record currently watching program by pressing Record button on the program from Search
TC1062: Record currently watching program by pressing Record button from Program information
US31797: As a viewer, I want to select individual live shows from an EPG for immediate recording
TC1333: Record currently broadcasting program from Search and playback the content after the recording completes
Starting test corner_0031_US31798_TC1060_Activate_RecordNOW_broadcast_event_playback
### STEP1: Ingest 1 Event of n Minutes duration each to the CI Host ########### 
 

{'services': { 502: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'Recordnwev397_1', 'rating': 1}], 'lineupLength': 6, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.4164
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

### STEP2: Fetch the Grid Request and do the booking for the currently broadcasting program ############## 
 

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525069539000~1525076739000?lang=eng&serviceList=502&count=255&region=101&catalogueId=1
Programs from Grid Request which is currently broadcasting
{u'programid://2147480262~programid://1077570896': [1525069500000, 1525069860000, 360000, u'Recordnwev397_1']}
ContentId list after Sorting 
[(u'programid://2147480262~programid://1077570896', 1525069500000, 1525069860000, 360000)]

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings 
PPS booking is successful for the event contentId programid://2147480262~programid://1077570896
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
All programs with the contentids [u'programid://2147480262~programid://1077570896'] is in BOOKED state
### STEP3: Wait till the Event changes from Booked to Recording and Verify ######### 
 

System will wait for 1 minutes for the state change from Booked to Recording
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/recordings
 
All Program with the contentid [u'programid://2147480262~programid://1077570896'] is in RECORDING state
Script wait till till 2.3 minutes to complete the recording by adding few minutes for the state change
### STEP4: Verify the Event is successfully Recorded and get the contetplayuri ########### 
 

get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/recordings
 
All Programs with the contentids [u'programid://2147480262~programid://1077570896'] is in RECORDED state
### STEP5: Use the contentplayuri and Verify the Playback of Recorded Event and update the results ########## 
 

URL to get the RM response : http://rr.cdvr.dcpt01.ciscocdvr.net:80/recordingInfo/595eec6e-d7bc-446b-a7bc-7d8f33f14e49?contentType=MPEG4&mode=playback&responseFormat=json
Download the manifest file viahttp://cdvr.pe1.ciscocdvr.net:80/cdvr/d8ee2811-f4bf-4075-9bec-87ce4b24ed60/d8ee2811-f4bf-4075-9bec-87ce4b24ed60.m3u8
Manifest for the Recorded Content
#EXTM3U
#EXT-X-MEDIA:TYPE=SUBTITLES,GROUP-ID="subs",FORCED=NO,AUTOSELECT=YES,LANGUAGE="en",NAME="cc1",URI="subtitles_cc1_5000_smptett_frag_cc1_CEA-608_.m3u8"
#EXT-X-STREAM-INF:BANDWIDTH=203600,CODECS="avc1.4D400D",RESOLUTION=320x240,FRAME-RATE=29.970,SUBTITLES="subs"
5004_video_seg_auto.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=510000,CODECS="avc1.4D400D",RESOLUTION=320x240,FRAME-RATE=29.970,SUBTITLES="subs"
5003_video_seg_auto.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=664400,CODECS="avc1.4D4016",RESOLUTION=480x360,FRAME-RATE=29.970,SUBTITLES="subs"
5002_video_seg_auto.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=1073200,CODECS="avc1.4D4016",RESOLUTION=480x360,FRAME-RATE=29.970,SUBTITLES="subs"
5001_video_seg_auto.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=1481600,CODECS="avc1.4D4016",RESOLUTION=480x360,FRAME-RATE=29.970,SUBTITLES="subs"
5000_video_seg_auto.m3u8
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=203600,CODECS="avc1.4D400D",RESOLUTION=320x240,URI="iframe_5004_i-frame.m3u8"
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=510000,CODECS="avc1.4D400D",RESOLUTION=320x240,URI="iframe_5003_i-frame.m3u8"
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=664400,CODECS="avc1.4D4016",RESOLUTION=480x360,URI="iframe_5002_i-frame.m3u8"
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=1073200,CODECS="avc1.4D4016",RESOLUTION=480x360,URI="iframe_5001_i-frame.m3u8"
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=1481600,CODECS="avc1.4D4016",RESOLUTION=480x360,URI="iframe_5000_i-frame.m3u8"

Manifest file for the recorded video saved to /home/centos/cdvr_crnrset1/corner_0031_US31798_TC1060_Activate_RecordNOW_broadcast_event_playback0_Recordnwev397_1_manifest_20180430-063400.txt
Download the Video Sample viahttp://cdvr.pe1.ciscocdvr.net:80/cdvr/d8ee2811-f4bf-4075-9bec-87ce4b24ed60/5004_video_seg_auto_dLMfBOz4QyK_SN5aBAn1jw/52208076921.ts
Video Sample File Downloaded at /home/centos/cdvr_crnrset1/cdvr_sanity_tests/scripts/cornercase_scripts/cornercase_set1_scripts/corner_0031_US31798_TC1060_Activate_RecordNOW_broadcast_event_playback0_Recordnwev397_1_file__20180430-063402.ts
Video Sample saved in the same folder with the name corner_0031_US31798_TC1060_Activate_RecordNOW_broadcast_event_playback0_Recordnwev397_1_file__20180430-063402.ts with the size of 148708 bytes
URL to get the RM response : http://rr.cdvr.dcpt01.ciscocdvr.net:80/recordingInfo/595eec6e-d7bc-446b-a7bc-7d8f33f14e49?contentType=MPEG4&mode=playback&responseFormat=json
ContentPlayback startTime : 2018-04-30T06:25:02.069Z  ContentPlayback EndTime : 2018-04-30T06:31:02.429Z
recording start time : 1525069502
recording duration : 360
recording endtime in epoch : 1525069862
recording end time : 2018-04-30T06:31:02Z
Playback started and ended properly from where it started recording and ended

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: Event recorded and Played back successfully

2018/04/30 06:34:22 UTC ############################## ENDED :  corner_0031_US31798_TC1060_Activate_RecordNOW_broadcast_event_playback ##############################

2018/04/30 06:34:22 UTC ############################## STARTED :  corner_0032_US31798_TC1071_RecordNow_StorageQuotaexceeds ##############################
{'TC1471': ['US31839', '', 3], 'TC1340': ['US31797', '', 3], 'TC1071': ['US31798', '', 3]}

 US31798: As a viewer,I want to be able to press the RECORD button on my remote while watching live content and have the event recorded from that point to the end of the event

 TC1071: Record currently watching program by pressing Record button, storage quota exceeds,  error displays

 US31839: As a SP, I want to fail a booking request if there is not enough available space in the Household's storage quota

 TC1471: Fail booking request for RecordNOW that will exceed household storage quota

 US31797: As a viewer, I want to select individual live shows from an EPG for immediate recording

 TC1340: Record currently broadcasting program from EPG Grid, storage quota exceeds,  error displays
Starting test corner_0032_US31798_TC1071_RecordNow_StorageQuotaexceeds
### STEP1:Ingest two events of n minutes duration.################################################


{'services': { 502: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'recnwsto739_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'recnwsto739_2', 'rating': 1}],
         'lineupLength': 12,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:12:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.8328
### STEP2: modify the diskquta to the value less than that is required by the event to book(insufficient diskquota).################################


Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Retrieve Total diskQuota fetched  via URL :  http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_0/diskQuota
Diskquota for the household is 108000
original diskquota is 108000
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525066603000~1525073803000?lang=eng&serviceList=502&count=255&region=101&catalogueId=1
Programs from Grid Request which is currently broadcasting
{u'programid://2033341208~programid://105937256': [1525070160000, 1525070520000, 360000, u'recnwsto739_1'], u'programid://2033341209~programid://105937255': [1525070520000, 1525070880000, 360000, u'recnwsto739_2']}
Program has least start time from current system time
[(u'programid://2033341208~programid://105937256', 1525070160000, 1525070520000, 360000), (u'programid://2033341209~programid://105937255', 1525070520000, 1525070880000, 360000)]
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
DiskQuota is modified  via URL :  http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_0/diskQuota
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Retrieve Total diskQuota fetched  via URL :  http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_0/diskQuota
Diskquota for the household is 288
### STEP3:Fetch currently broadcasting event from the grid response and perform booking#############################



PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings

### STEP4: verify that the booking passed successfully.#######
 
PPS booking is successful for the event contentId programid://2033341208~programid://105937256
Recording will start in 317.0 seconds

### STEP5: verify that recording failed due to disk quota conflict.#######
 
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/recordings
 
Recording Catalog is empty
Recording catalog is empty

#################### DEBUG STARTED ####################

Script Fetching the Household Booked/Recorded Catalog at 2018-04-30 06:43:00.919337
get all Catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog
 
Household Catalog is empty
Script Fetching Household Failed Recording Catalog at 2018-04-30 06:43:00.926930
get all failed recording catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog?filter:state=FAILED
 
Household Failed Recording Catalog Response:
[
    {
        "pvr": "nPVR", 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set1_scripts_0", 
        "channelId": "502", 
        "isSynchronized": true, 
        "bookingType": "EVENT", 
        "content": {
            "shortSynopsis": "recnwsto739_1 - synopsis", 
            "title": "recnwsto739_1", 
            "instanceId": "PPS_INSTANCE_37704", 
            "recordingId": "37704", 
            "broadcastDateTime": 1525070160000, 
            "synopsis": "recnwsto739_1 - synopsis", 
            "endAvailability": 1525070520000, 
            "source": "pvr", 
            "erotic": false, 
            "serviceId": "502", 
            "adult": false, 
            "sortTitle": "recnwsto739_1", 
            "duration": 360000, 
            "serviceEquivalenceKey": "502", 
            "type": "instance", 
            "id": "PPS_CONTENT_11256"
        }, 
        "title": "recnwsto739_1", 
        "recurrence": "NONE", 
        "state": "FAILED", 
        "startGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_11256~PPS_INSTANCE_37704", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{502,java.lang.Integer,NORMAL}-|-{MmFhMTlkZDMwOWM2ZTA4NWVkNDY=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "502", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 502, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 502", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 502", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "502", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "502", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "errorDescription": "Disk Space Conflict Detected", 
        "recordingId": "37704", 
        "error": "PPS.403.001.004", 
        "notificationHandles": [
            "5ae6b97b4935241fe4c13bf9"
        ], 
        "created": "2018-04-30T06:36:43Z", 
        "lastModified": "2018-04-30T06:36:43Z", 
        "contentPlayUri": "?recId=a279c78c-1b34-4fe9-8f70-321c66069429", 
        "uri": "/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae6b97b4935241fe4c13bf9", 
        "scheduleInstance": "programid://2033341208~programid://105937256", 
        "keep": false, 
        "contentId": "PPS_CONTENT_11256~PPS_INSTANCE_37704"
    }
]

#################### DEBUG ENDED   ####################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: Events are not recording, as diskquota conflict happened.

2018/04/30 06:43:21 UTC ############################## ENDED :  corner_0032_US31798_TC1071_RecordNow_StorageQuotaexceeds ##############################

2018/04/30 06:43:21 UTC ############################## STARTED :  corner_0033_US31798_TC1072_RecordNow_TunerQuotaexceeds ##############################
US31798: As a viewer, I want to be able to press the RECORD button on my remote while watching live content and have the event recorded from that point to the end of the event
TC1072: Record currently watching program by pressing Record button, tuner quota exceeds,  error displays
US31797: As a viewer, I want to select individual live shows from an EPG for immediate recording
TC1341: Record currently broadcasting program from EPG Grid, tuner quota exceeds,  error displays
Starting test corner_0033_US31798_TC1072_RecordNow_TunerQuotaexceeds
### STEP1: Ingest 1 Event of n Minutes on 2 channels without the Post Time to the CI Host ############## 
 

{'services': { 502: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'gmaxtuner93_1', 'rating': 1}], 'lineupLength': 6, 'message': ''},
  503: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'imaxtuner698_1', 'rating': 1}], 'lineupLength': 6, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.4164
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

### STEP2: Get the default Number of Tuners specific to household and change Tuner Quota to 1 for the same ############# 
 

Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_0/numOfTuners
Number of Tuners is 4
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_0/numOfTuners
Number of tuner value changed to 1 successfully
### STEP3: Fetch the Grid Request, book one event and verify if it is successful ########## 
 

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525067142000~1525074342000?lang=eng&serviceList=502,503&count=255&region=101&catalogueId=1
Programs from Grid Request which is currently broadcasting
{u'programid://1108864586~programid://676584860': [1525070700000, 1525071060000, 360000, u'gmaxtuner93_1']}{u'programid://1767242889~programid://978072043': [1525070700000, 1525071060000, 360000, u'imaxtuner698_1']}
ContentId lists after Sorting
 [(u'programid://1108864586~programid://676584860', 1525070700000, 1525071060000, 360000)][(u'programid://1767242889~programid://978072043', 1525070700000, 1525071060000, 360000)]

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings 
PPS booking is successful for the event contentId programid://1108864586~programid://676584860
Script wait for 1 minutes to check the state change to Recording
### STEP4: Verify the state changed for the Event to Recording and book another current broadcasting event ########## 
 

get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/recordings
 
All Program with the contentid [u'programid://1108864586~programid://676584860'] is in RECORDING state

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
PPS Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
403
{'date': 'Mon, 30 Apr 2018 06:46:42 GMT', 'flow_context': '5AE6BBD2E4B0CBA15170C2D0', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6BBD2E4B0CBA15170C2D0"}
### STEP5: Verify the second event booking fails due to tuner conflict and recording is not displayed in the booking list########### 
 

Record Now Booking is failed due to the Tuner Conflict
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
All programs with the contentids [u'programid://1767242889~programid://978072043'] is not in BOOKED state
### STEP6: Cleanup the Booked Events, revert back the tuner value to default and update the results ######## 
 


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: Record Now booking failed due to tuner quota exceeds, recording is not displayed in the booking list

2018/04/30 06:47:02 UTC ############################## ENDED :  corner_0033_US31798_TC1072_RecordNow_TunerQuotaexceeds ##############################

2018/04/30 06:47:02 UTC ############################## STARTED :  corner_0034_US31798_TC1074_Record_sameevent_RecordNow_two_households ##############################

 US31798: As a viewer, I want to be able to press the RECORD button on my remote while watching live content and have the event recorded from that point to the end of the event

 TC1074: Record same currently watching program by pressing Record button, on two different households

 US31797: As a viewer, I want to select individual live shows from an EPG for immediate recording

 TC1343: Record currently broadcasting program from EPG Grid, on two different households
Starting test corner_0034_US31798_TC1074_Record_sameevent_RecordNow_two_households
### STEP1: Ingest 1 Event of 6 Minutes duration to the CI Host######### 
 

{'services': { 502: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'recdtwo185_1', 'rating': 1}], 'lineupLength': 6, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Wait time for the catalog ingest to get synced with the CI Host in seconds: 120.4164
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

### STEP2: Fetch the Grid Request and do the booking for the currently broadcasting program on 2 households########### 
 

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525067383000~1525074583000?lang=eng&serviceList=502&count=255&region=101&catalogueId=1
Programs from the grid response which is currently broadcasting
{u'programid://1514575946~programid://2147482793': [1525070940000, 1525071300000, 360000, u'recdtwo185_1']}
ContentId list after Sorting
[(u'programid://1514575946~programid://2147482793', 1525070940000, 1525071300000, 360000)]

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings 

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookings 
PPS Booking successful for the contentId programid://1514575946~programid://2147482793 on both the households
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
All programs with the contentids [u'programid://1514575946~programid://2147482793'] is in BOOKED state
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookings
 
All programs with the contentids [u'programid://1514575946~programid://2147482793'] is in BOOKED state
### STEP3: Wait till the Event changes from Booked to Recording on both the households and Verify ######### 
 

Script wait for 1 minutes to check the Recording state
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/recordings
 
All Program with the contentid [u'programid://1514575946~programid://2147482793'] is in RECORDING state
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/recordings
 
All Program with the contentid [u'programid://1514575946~programid://2147482793'] is in RECORDING state
Program Recording completes in 4.25 minutes
### STEP4: Verify the Event is successfully Recorded and get the contetplayuri for both the households ####### 
 

get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/recordings
 
All Programs with the contentids [u'programid://1514575946~programid://2147482793'] is in RECORDED state
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/recordings
 
All Programs with the contentids [u'programid://1514575946~programid://2147482793'] is in RECORDED state
### STEP5: Use the contentplayuri and Playback the Recorded Event on both households ######## 
 

URL to get the RM response : http://rr.cdvr.dcpt01.ciscocdvr.net:80/recordingInfo/7be71140-fbeb-4421-99ad-282f51faf431?contentType=MPEG4&mode=playback&responseFormat=json
Download the manifest file viahttp://cdvr.pe1.ciscocdvr.net:80/cdvr/5ae0b717-8282-4276-9b00-32df11e23a8f/5ae0b717-8282-4276-9b00-32df11e23a8f.m3u8
Manifest for the Recorded Content
#EXTM3U
#EXT-X-MEDIA:TYPE=SUBTITLES,GROUP-ID="subs",FORCED=NO,AUTOSELECT=YES,LANGUAGE="en",NAME="cc1",URI="subtitles_cc1_5000_smptett_frag_cc1_CEA-608_.m3u8"
#EXT-X-STREAM-INF:BANDWIDTH=203600,CODECS="avc1.4D400D",RESOLUTION=320x240,FRAME-RATE=29.970,SUBTITLES="subs"
5004_video_seg_auto.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=510000,CODECS="avc1.4D400D",RESOLUTION=320x240,FRAME-RATE=29.970,SUBTITLES="subs"
5003_video_seg_auto.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=664400,CODECS="avc1.4D4016",RESOLUTION=480x360,FRAME-RATE=29.970,SUBTITLES="subs"
5002_video_seg_auto.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=1073200,CODECS="avc1.4D4016",RESOLUTION=480x360,FRAME-RATE=29.970,SUBTITLES="subs"
5001_video_seg_auto.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=1481600,CODECS="avc1.4D4016",RESOLUTION=480x360,FRAME-RATE=29.970,SUBTITLES="subs"
5000_video_seg_auto.m3u8
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=203600,CODECS="avc1.4D400D",RESOLUTION=320x240,URI="iframe_5004_i-frame.m3u8"
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=510000,CODECS="avc1.4D400D",RESOLUTION=320x240,URI="iframe_5003_i-frame.m3u8"
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=664400,CODECS="avc1.4D4016",RESOLUTION=480x360,URI="iframe_5002_i-frame.m3u8"
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=1073200,CODECS="avc1.4D4016",RESOLUTION=480x360,URI="iframe_5001_i-frame.m3u8"
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=1481600,CODECS="avc1.4D4016",RESOLUTION=480x360,URI="iframe_5000_i-frame.m3u8"

Manifest file for the recorded video saved to /home/centos/cdvr_crnrset1/corner_0034_US31798_TC1074_Record_sameevent_RecordNow_two_households0_recdtwo185_1_manifest_20180430-065631.txt
Download the Video Sample viahttp://cdvr.pe1.ciscocdvr.net:80/cdvr/5ae0b717-8282-4276-9b00-32df11e23a8f/5004_video_seg_auto_dLMfBOz4QyK_SN5aBAn1jw/52338347061.ts
Video Sample File Downloaded at /home/centos/cdvr_crnrset1/cdvr_sanity_tests/scripts/cornercase_scripts/cornercase_set1_scripts/corner_0034_US31798_TC1074_Record_sameevent_RecordNow_two_households0_recdtwo185_1_file__20180430-065632.ts
Video Sample saved in the same folder with the name corner_0034_US31798_TC1074_Record_sameevent_RecordNow_two_households0_recdtwo185_1_file__20180430-065632.ts with the size of 140812 bytes
URL to get the RM response : http://rr.cdvr.dcpt01.ciscocdvr.net:80/recordingInfo/7be71140-fbeb-4421-99ad-282f51faf431?contentType=MPEG4&mode=playback&responseFormat=json
ContentPlayback startTime : 2018-04-30T06:49:09.515Z  ContentPlayback EndTime : 2018-04-30T06:55:03.869Z
recording start time : 1525070949
recording duration : 354
recording endtime in epoch : 1525071303
recording end time : 2018-04-30T06:55:03Z
Playback started and ended properly from where it started recording and ended

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

URL to get the RM response : http://rr.cdvr.dcpt01.ciscocdvr.net:80/recordingInfo/f52ed007-3175-4479-aa2f-689557535ffa?contentType=MPEG4&mode=playback&responseFormat=json
Download the manifest file viahttp://cdvr.pe1.ciscocdvr.net:80/cdvr/580dc14f-01b1-4f8b-a184-77991375bef0/580dc14f-01b1-4f8b-a184-77991375bef0.m3u8
Manifest for the Recorded Content
#EXTM3U
#EXT-X-MEDIA:TYPE=SUBTITLES,GROUP-ID="subs",FORCED=NO,AUTOSELECT=YES,LANGUAGE="en",NAME="cc1",URI="subtitles_cc1_5000_smptett_frag_cc1_CEA-608_.m3u8"
#EXT-X-STREAM-INF:BANDWIDTH=203600,CODECS="avc1.4D400D",RESOLUTION=320x240,FRAME-RATE=29.970,SUBTITLES="subs"
5004_video_seg_auto.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=510000,CODECS="avc1.4D400D",RESOLUTION=320x240,FRAME-RATE=29.970,SUBTITLES="subs"
5003_video_seg_auto.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=664400,CODECS="avc1.4D4016",RESOLUTION=480x360,FRAME-RATE=29.970,SUBTITLES="subs"
5002_video_seg_auto.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=1073200,CODECS="avc1.4D4016",RESOLUTION=480x360,FRAME-RATE=29.970,SUBTITLES="subs"
5001_video_seg_auto.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=1481600,CODECS="avc1.4D4016",RESOLUTION=480x360,FRAME-RATE=29.970,SUBTITLES="subs"
5000_video_seg_auto.m3u8
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=203600,CODECS="avc1.4D400D",RESOLUTION=320x240,URI="iframe_5004_i-frame.m3u8"
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=510000,CODECS="avc1.4D400D",RESOLUTION=320x240,URI="iframe_5003_i-frame.m3u8"
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=664400,CODECS="avc1.4D4016",RESOLUTION=480x360,URI="iframe_5002_i-frame.m3u8"
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=1073200,CODECS="avc1.4D4016",RESOLUTION=480x360,URI="iframe_5001_i-frame.m3u8"
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=1481600,CODECS="avc1.4D4016",RESOLUTION=480x360,URI="iframe_5000_i-frame.m3u8"

Manifest file for the recorded video saved to /home/centos/cdvr_crnrset1/corner_0034_US31798_TC1074_Record_sameevent_RecordNow_two_households0_recdtwo185_1_manifest_20180430-065652.txt
Download the Video Sample viahttp://cdvr.pe1.ciscocdvr.net:80/cdvr/580dc14f-01b1-4f8b-a184-77991375bef0/5004_video_seg_auto_dLMfBOz4QyK_SN5aBAn1jw/52338347061.ts
Video Sample File Downloaded at /home/centos/cdvr_crnrset1/cdvr_sanity_tests/scripts/cornercase_scripts/cornercase_set1_scripts/corner_0034_US31798_TC1074_Record_sameevent_RecordNow_two_households0_recdtwo185_1_file__20180430-065653.ts
Video Sample saved in the same folder with the name corner_0034_US31798_TC1074_Record_sameevent_RecordNow_two_households0_recdtwo185_1_file__20180430-065653.ts with the size of 140812 bytes
URL to get the RM response : http://rr.cdvr.dcpt01.ciscocdvr.net:80/recordingInfo/f52ed007-3175-4479-aa2f-689557535ffa?contentType=MPEG4&mode=playback&responseFormat=json
ContentPlayback startTime : 2018-04-30T06:49:09.515Z  ContentPlayback EndTime : 2018-04-30T06:55:03.869Z
recording start time : 1525070949
recording duration : 354
recording endtime in epoch : 1525071303
recording end time : 2018-04-30T06:55:03Z
Playback started and ended properly from where it started recording and ended

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

### STEP6: Verify if both the households are successfully played back the recorded event and update the results##############
 

Testcase Passed: Event recorded and Played back successfully

2018/04/30 06:57:13 UTC ############################## ENDED :  corner_0034_US31798_TC1074_Record_sameevent_RecordNow_two_households ##############################

2018/04/30 06:57:13 UTC ############################## STARTED :  corner_0035_US31833_TC1310_playback_currentrecording ##############################
US31833: As a user I want to be able to setup playback session for recorded content
TC1310: Playback currently recording. Verify that the user can playback the currently recording from the recorded library
US31798: As a viewer, I want to be able to press the RECORD button on my remote while watching live content and have the event recorded from that point to the end of the event
TC1069: Record currently watching program by pressing Record button, user playback the currently recording
US31797: As a viewer, I want to select individual live shows from an EPG for immediate recording
TC1334: Record currently broadcasting program from EPG grid, playback during recording
Starting test corner_0035_US31833_TC1310_playback_currentrecording
### STEP1: Ingest an Event of n Minutes to the CI Host without any post time delay ########## 
 

{'services': { 502: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'playcurrec185_1', 'rating': 1}], 'lineupLength': 6, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Wait time for the catalog ingest to get synced with the CI Host in seconds: 120.4164
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

STEP2: Fetch the Grid Request and do the PPS Booking for the currently broadcasting program
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525067974000~1525075174000?lang=eng&serviceList=502&count=255&region=101&catalogueId=1
Currently broadcasting programs from the Grid Response
{u'programid://1740710139~programid://2132614017': [1525071540000, 1525071900000, 360000]}
ContentId list after Sorting
[(u'programid://1740710139~programid://2132614017', 1525071540000, 1525071900000, 360000)]

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookings 
PPS Booking is successful for the event contentId programid://1740710139~programid://2132614017
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookings
 
All programs with the contentids [u'programid://1740710139~programid://2132614017'] is in BOOKED state
### STEP3: Verify the Recording State of the program and proceed further ########### 
 

Script will wait for 1 minutes to check the Recording state
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/recordings
 
All Program with the contentid [u'programid://1740710139~programid://2132614017'] is in RECORDING state
### STEP4: Playback the currently recording program and update the results ######### 
 

URL to get the RM response : http://rr.cdvr.dcpt01.ciscocdvr.net:80/recordingInfo/04164754-eae7-45ad-af34-294112fae3be?contentType=MPEG4&mode=playback&responseFormat=json
Download the manifest file viahttp://cdvr.pe1.ciscocdvr.net:80/cdvr/85de4f39-b0b2-4b79-a8ed-3f6e109c79c5/85de4f39-b0b2-4b79-a8ed-3f6e109c79c5.m3u8
Manifest for the Recorded Content
#EXTM3U
#EXT-X-MEDIA:TYPE=SUBTITLES,GROUP-ID="subs",FORCED=NO,AUTOSELECT=YES,LANGUAGE="en",NAME="cc1",URI="subtitles_cc1_5000_smptett_frag_cc1_CEA-608_.m3u8"
#EXT-X-STREAM-INF:BANDWIDTH=203600,CODECS="avc1.4D400D",RESOLUTION=320x240,FRAME-RATE=29.970,SUBTITLES="subs"
5004_video_seg_auto.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=510000,CODECS="avc1.4D400D",RESOLUTION=320x240,FRAME-RATE=29.970,SUBTITLES="subs"
5003_video_seg_auto.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=664400,CODECS="avc1.4D4016",RESOLUTION=480x360,FRAME-RATE=29.970,SUBTITLES="subs"
5002_video_seg_auto.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=1073200,CODECS="avc1.4D4016",RESOLUTION=480x360,FRAME-RATE=29.970,SUBTITLES="subs"
5001_video_seg_auto.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=1481600,CODECS="avc1.4D4016",RESOLUTION=480x360,FRAME-RATE=29.970,SUBTITLES="subs"
5000_video_seg_auto.m3u8
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=203600,CODECS="avc1.4D400D",RESOLUTION=320x240,URI="iframe_5004_i-frame.m3u8"
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=510000,CODECS="avc1.4D400D",RESOLUTION=320x240,URI="iframe_5003_i-frame.m3u8"
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=664400,CODECS="avc1.4D4016",RESOLUTION=480x360,URI="iframe_5002_i-frame.m3u8"
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=1073200,CODECS="avc1.4D4016",RESOLUTION=480x360,URI="iframe_5001_i-frame.m3u8"
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=1481600,CODECS="avc1.4D4016",RESOLUTION=480x360,URI="iframe_5000_i-frame.m3u8"

Manifest file for the recorded video saved to /home/centos/cdvr_crnrset1/corner_0035_US31833_TC1310_playback_currentrecording0_playcurrec185_1_manifest_20180430-070037.txt
Download the Video Sample viahttp://cdvr.pe1.ciscocdvr.net:80/cdvr/85de4f39-b0b2-4b79-a8ed-3f6e109c79c5/5004_video_seg_auto_dLMfBOz4QyK_SN5aBAn1jw/52391319981.ts
Video Sample File Downloaded at /home/centos/cdvr_crnrset1/cdvr_sanity_tests/scripts/cornercase_scripts/cornercase_set1_scripts/corner_0035_US31833_TC1310_playback_currentrecording0_playcurrec185_1_file__20180430-070038.ts
Video Sample saved in the same folder with the name corner_0035_US31833_TC1310_playback_currentrecording0_playcurrec185_1_file__20180430-070038.ts with the size of 150400 bytes

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: Event recorded and Played back successfully

2018/04/30 07:00:58 UTC ############################## ENDED :  corner_0035_US31833_TC1310_playback_currentrecording ##############################

2018/04/30 07:00:58 UTC ############################## STARTED :  corner_0036_US31833_TC1326_Playback_Recordedcontent_Tunersbusyrecording ##############################
US31833: As a user I want to be able to setup playback session for recorded content
TC1326: Playback recorded content, all tuners are busy recording
Starting test corner_0036_US31833_TC1326_Playback_Recordedcontent_Tunersbusyrecording
### STEP1: Ingest 2 Events of n Minutes each on 1 channel and 1 Event of n+x minutes on another channel ######## 
 

{'services': { 503: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'playtun93_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'playtun93_2', 'rating': 1}],
         'lineupLength': 8,
         'message': ''},
  504: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'play2tun698_1', 'rating': 1}], 'lineupLength': 6, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Wait time for the catalog ingest to get synced with the CI Host in seconds: 120.5552
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

### STEP2: Fetch the grid request and book the first event, verify if it is successfully recorded ########### 
 

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525068199000~1525075399000?lang=eng&serviceList=503,504&count=255&region=101&catalogueId=1
ContentID dictionary from the Grid Response
{u'programid://2086384135~programid://2147482796': [1525071720000, 1525071960000, 240000], u'programid://2086384136~programid://2147482795': [1525071960000, 1525072200000, 240000]}{u'programid://1294712495~programid://2147482794': [1525071720000, 1525072080000, 360000]}
ContentId list after Sorting
[(u'programid://2086384135~programid://2147482796', 1525071720000, 1525071960000, 240000), (u'programid://2086384136~programid://2147482795', 1525071960000, 1525072200000, 240000)][(u'programid://1294712495~programid://2147482794', 1525071720000, 1525072080000, 360000)]

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookings 
PPS Booking is successful for the event contentid programid://2086384135~programid://2147482796
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookings
 
All programs with the contentids [u'programid://2086384135~programid://2147482796'] is in BOOKED state
### STEP3: Wait till first event changes to recording state and  verify it is successfully recorded ########## 
 

Script will wait for 1 minutes to check the event recording state
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/recordings
 
All Program with the contentid [u'programid://2086384135~programid://2147482796'] is in RECORDING state
Script will wait for 1.65 minutes to complete the recording
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/recordings
 
All Programs with the contentids [u'programid://2086384135~programid://2147482796'] is in RECORDED state
### STEP4: Set the household tuner to 1 #################### 
 

Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_1/numOfTuners
Number of Tuners is 4
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_1/numOfTuners
Number of tuner value changed to 1 successfully
### STEP5: Book the second event and Verify the second event is in Recording state ############## 
 


PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookings 
PPS Booking is successful for the event contentid programid://2086384136~programid://2147482795
Script wait for  minutes to check the Recording state
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/recordings
 
All Program with the contentid [u'programid://2086384136~programid://2147482795'] is in RECORDING state
### STEP6: Do the PPS Booking of overlapping event and verify if it fails due to tuner quota conflict ############ 
 


PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookings
PPS Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookings
403
{'date': 'Mon, 30 Apr 2018 07:08:31 GMT', 'flow_context': '5AE6C0EFE4B0C8958DD67943', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6C0EFE4B0C8958DD67943"}
###STEP7: Playback the recorded content when the Recording is in progress,revert back to actual tuners  and update the results########### 
 

URL to get the RM response : http://rr.cdvr.dcpt01.ciscocdvr.net:80/recordingInfo/58fd8987-7f3f-4ce7-baf6-2d4146663dc7?contentType=MPEG4&mode=playback&responseFormat=json
Download the manifest file viahttp://cdvr.pe1.ciscocdvr.net:80/cdvr/e0307eb4-4b11-48fc-952b-ff09cb72dc3b/e0307eb4-4b11-48fc-952b-ff09cb72dc3b.m3u8
Manifest for the Recorded Content
#EXTM3U
#EXT-X-MEDIA:TYPE=SUBTITLES,GROUP-ID="subs",FORCED=NO,AUTOSELECT=YES,LANGUAGE="en",NAME="svc1",URI="subtitles_svc1_5000_smptett_frag_svc1_CEA-708_.m3u8"
#EXT-X-MEDIA:TYPE=SUBTITLES,GROUP-ID="subs",FORCED=NO,LANGUAGE="en",NAME="cc1",URI="subtitles_cc1_5000_smptett_frag_cc1_CEA-608_.m3u8"
#EXT-X-MEDIA:TYPE=SUBTITLES,GROUP-ID="subs",FORCED=NO,LANGUAGE="en",NAME="svc2",URI="subtitles_svc2_5000_smptett_frag_svc2_CEA-708_.m3u8"
#EXT-X-STREAM-INF:BANDWIDTH=348400,CODECS="avc1.4D400D,mp4a.40.2",RESOLUTION=320x240,FRAME-RATE=29.970,SUBTITLES="subs"
5004_video_seg_auto.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=654800,CODECS="avc1.4D400D,mp4a.40.2",RESOLUTION=320x240,FRAME-RATE=29.970,SUBTITLES="subs"
5003_video_seg_auto.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=809200,CODECS="avc1.4D4016,mp4a.40.2",RESOLUTION=480x360,FRAME-RATE=29.970,SUBTITLES="subs"
5002_video_seg_auto.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=1218000,CODECS="avc1.4D4016,mp4a.40.2",RESOLUTION=480x360,FRAME-RATE=29.970,SUBTITLES="subs"
5001_video_seg_auto.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=1626400,CODECS="avc1.4D4016,mp4a.40.2",RESOLUTION=480x360,FRAME-RATE=29.970,SUBTITLES="subs"
5000_video_seg_auto.m3u8
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=203600,CODECS="avc1.4D400D",RESOLUTION=320x240,URI="iframe_5004_i-frame.m3u8"
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=510000,CODECS="avc1.4D400D",RESOLUTION=320x240,URI="iframe_5003_i-frame.m3u8"
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=664400,CODECS="avc1.4D4016",RESOLUTION=480x360,URI="iframe_5002_i-frame.m3u8"
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=1073200,CODECS="avc1.4D4016",RESOLUTION=480x360,URI="iframe_5001_i-frame.m3u8"
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=1481600,CODECS="avc1.4D4016",RESOLUTION=480x360,URI="iframe_5000_i-frame.m3u8"

Manifest file for the recorded video saved to /home/centos/cdvr_crnrset1/corner_0036_US31833_TC1326_Playback_Recordedcontent_Tunersbusyrecording0_playtun93_1_manifest_20180430-070831.txt
Download the Video Sample viahttp://cdvr.pe1.ciscocdvr.net:80/cdvr/e0307eb4-4b11-48fc-952b-ff09cb72dc3b/5004_video_seg_auto_7ou5FiVlRuSRS2Yy4jfcxQ/52412578218.ts
Video Sample File Downloaded at /home/centos/cdvr_crnrset1/cdvr_sanity_tests/scripts/cornercase_scripts/cornercase_set1_scripts/corner_0036_US31833_TC1326_Playback_Recordedcontent_Tunersbusyrecording0_playtun93_1_file__20180430-070833.ts
Video Sample saved in the same folder with the name corner_0036_US31833_TC1326_Playback_Recordedcontent_Tunersbusyrecording0_playtun93_1_file__20180430-070833.ts with the size of 250792 bytes

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: Event recorded and Played back successfully

2018/04/30 07:08:53 UTC ############################## ENDED :  corner_0036_US31833_TC1326_Playback_Recordedcontent_Tunersbusyrecording ##############################

2018/04/30 07:08:53 UTC ############################## STARTED :  corner_0037_US31724_TC1395_Cancel_the_current_recording ##############################
{'TC1395': ['US31724', '', 3]}

 US31724: Enable Subscriber Browse for Scheduled Content via Control Plane

 TC1395: Booking program displays from Search. Verify that the user can cancel the current recording from search
Starting test corner_0037_US31724_TC1395_Cancel_the_current_recording


### STEP1: Ingest 2 Events of n Minutes each on one channel with the delay ###################### 

{'services': { 502: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'cancelrec62_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'cancelrec62_2', 'rating': 1}],
         'lineupLength': 8,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Wait time for the catalog ingest to get synced with the CI Host in seconds: 120.5552
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################



### STEP2: Fetch the grid request and get the Events, book the event and verify ########### 

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525072274000~1525079474000?lang=eng&serviceList=502&count=255&region=101&catalogueId=1
ContentId dictionary from the grid response {u'programid://1654688866~programid://1457757057': [1525072320000, 1525072560000, 240000], u'programid://1654688865~programid://1457757058': [1525072560000, 1525072800000, 240000]}
Content id list:  [(u'programid://1654688866~programid://1457757057', 1525072320000, 1525072560000, 240000), (u'programid://1654688865~programid://1457757058', 1525072560000, 1525072800000, 240000)]

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_3/bookings 
PPS Booking completed successfully
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_3/bookings
 
All programs with the contentids [u'programid://1654688866~programid://1457757057'] is in BOOKED state
PPS Booking done and verified
Booked Library:
[
    {
        "pvr": "nPVR", 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set1_scripts_3", 
        "channelId": "502", 
        "isSynchronized": true, 
        "duration": "00:04:00", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T07:12:00Z", 
        "content": {
            "instanceId": "programid://1457757057", 
            "broadcastDateTime": 1525072320000, 
            "seasonPremiere": false, 
            "locator": "{ZWNiM2E2NTRlZTM3Mjg1NzRhYzQ=,java.lang.String,NORMAL}[+]{hashKey,NORMAL}", 
            "erotic": false, 
            "audioType": "stereo", 
            "duration": 240000, 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": false, 
            "macrovision": false, 
            "id": "programid://1654688866", 
            "mixSource": false, 
            "externalKey": "cancelrec62_1_502_tk04300716", 
            "audioDescription": false, 
            "restartAvailable": false, 
            "title": "cancelrec62_1", 
            "allOfferIdList": [
                2
            ], 
            "mixContentId": false, 
            "contentNdsDrmAttributes": {
                "isBto": false, 
                "lastOfferEndDateTime": 1765963847000, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "rentalDuration": 2147483647, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isExtendedRental": false, 
                "isIppv": false, 
                "isPar": false, 
                "isOppv": false
            }, 
            "source": "ltv", 
            "live": false, 
            "subtitlesHardOfHearing": false, 
            "type": "instance", 
            "channel": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
            "videoFormat": "sd", 
            "wideScreen": false, 
            "isPurchasable": true, 
            "hdcp": false, 
            "serviceId": "502", 
            "adult": false, 
            "sortTitle": "cancelrec62_1", 
            "endAvailability": 1525072560000, 
            "hasChapters": false, 
            "cdvrAvailable": true, 
            "seasonFinale": false, 
            "shortSynopsis": "cancelrec62_1 - synopsis", 
            "synopsis": "cancelrec62_1 - synopsis", 
            "broadcaster": "VGE", 
            "serviceEquivalenceKey": "502", 
            "ict": false
        }, 
        "title": "cancelrec62_1", 
        "recurrence": "NONE", 
        "state": "BOOKED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "37734", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{502,java.lang.Integer,NORMAL}-|-{MmFhMTlkZDMwOWM2ZTA4NWVkNDY=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "502", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 502, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 502", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 502", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "502", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "502", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_11322~PPS_INSTANCE_37734", 
        "startTime": "2018-04-30T07:12:00Z", 
        "bookingDuration": "00:04:00", 
        "notificationHandles": [
            "5ae6c19229368720c773d0de"
        ], 
        "created": "2018-04-30T07:11:14Z", 
        "lastModified": "2018-04-30T07:11:14Z", 
        "contentPlayUri": "?recId=0dbdfc0a-7e43-47a7-844d-5de0f439d2a4", 
        "uri": "/pps/households/AUTO_3006_cornercase_set1_scripts_3/catalog/5ae6c19229368720c773d0de", 
        "scheduleInstance": "programid://1654688866~programid://1457757057", 
        "keep": false, 
        "contentId": "programid://1654688866~programid://1457757057"
    }
]
system will wait for  44.0  seconds for program to start


### STEP3: Verify the Event state changes from Booked to Recording and proceed further ################ 

get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_3/recordings
 
All Program with the contentid [u'programid://1654688866~programid://1457757057'] is in RECORDING state


### STEP4: When the Event is in Recording State, delete the recording and verify than update the results ########### 


Delete PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_3/catalog/5ae6c19229368720c773d0de
PPS Booking Deleted successfully
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_3/recordings
 
Recording Catalog is empty
Recording catalog is empty
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_3/recordings
 
Recording Catalog is empty
Recorded catalog is empty

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: Event succesfully deleted while recording, verified from RECORDING and RECORDED catalog

2018/04/30 07:13:20 UTC ############################## ENDED :  corner_0037_US31724_TC1395_Cancel_the_current_recording ##############################

2018/04/30 07:13:20 UTC ############################## STARTED :  corner_0045_US31724_TC1409_After_cancel_the_scheduled_content_remove_from_the_bookinglist_immediately ##############################

US31724:Enable Subscriber Browse for Scheduled Content via Control Plane

TC1409: After you cancel the booking/ or scheduled content, it should be removed from the booking list immediately. 

US31721: UseCase: Delete cDVR Bookings by Subscriber

TC1521: Delete single recording from the Scheduled Recordings List. 

TC1522: Delete one time scheduled recording from the Guide

TC1523: Delete scheduled single recording from Search
Starting test corner_0045_US31724_TC1409_After_cancel_the_scheduled_content_remove_from_the_bookinglist_immediately
{'services': { 502: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'bookdel40_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'bookdel40_2', 'rating': 1}],
         'lineupLength': 8,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.5552
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525072541000~1525079741000?lang=eng&serviceList=502&count=255&region=101&catalogueId=1


###STEP2: Book the event, verify Booked state #######################################################################################

ContentId dictionary from the grid response{u'programid://1637094923~programid://2147482799': [1525072620000, 1525072860000, 240000], u'programid://1637094922~programid://2147482800': [1525072860000, 1525073100000, 240000]}
Content id details of event in sorted manner:  [(u'programid://1637094923~programid://2147482799', [1525072620000, 1525072860000, 240000]), (u'programid://1637094922~programid://2147482800', [1525072860000, 1525073100000, 240000])]
List of all content ids for booking:  [u'programid://1637094923~programid://2147482799', u'programid://1637094922~programid://2147482800']

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings 
PPS Booking completed successfully for:  programid://1637094923~programid://2147482799
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
All programs with the contentids [u'programid://1637094923~programid://2147482799'] is in BOOKED state


###STEP3: Delete the booking ###########################################################################################


Delete PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae6c29d1ab94a20f760ba14
PPS Booking Deleted successfully
Booked event was succesfully deleted


###STEP4: Verification of deletion of the booking ###########################################################################################

Verifying booking catalog for succesfull deletion of events
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
Booking Catalog is empty
Booking catalog is empty after deletion of events

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: All the events were succesfully deleted and verified from booked catalog

2018/04/30 07:16:03 UTC ############################## ENDED :  corner_0045_US31724_TC1409_After_cancel_the_scheduled_content_remove_from_the_bookinglist_immediately ##############################

2018/04/30 07:16:03 UTC ############################## STARTED :  corner_US31681_TC1176_series_booking_same_episode_on_two_different_channels_at_same_time ##############################
{'TC1176': ['US31681', '', 3], 'TC1180': ['US31681', '', 3], 'TC952': ['US32026', '', 3], 'TC953': ['US32026', '', 3]}
US31681: As a Viewer, I want to prevent duplicate copies of an episode within a series from being recorded
TC1176: Book series recording,same episode on two different channels at same time,record only one copy of episode 
US32026: As a viewer, I want to use Broadcast Order to ensure that I don't book repeat episodes of a show
TC1180: Book series recording ,turn on option Record one copy, same episodes on multiple channels at the same time
TC952: Book series recording with only first run episodes. User turns on the 'Record one copy' option. There are same first Run episodes on two different channels. Verify only one copy of first run episode is Scheduled recording in the booking list and only one copy first run episode is recorded in the Recorded Library
TC953: Book series recording with only first run episodes. User turns on the 'Record one copy' option. Same first Run episodes on multiple channels. Verify only one copy of first run episode is Scheduled recording in the booking list and only first run episode is recorded in the Recorded Library
Starting test corner_US31681_TC1176_series_booking_same_episode_on_two_different_channels_at_same_time
### STEP1:Ingest a series of two episodes with five minutes duration.#################################



Final list :[('cmdc', 'pps.cdvr.dcpt01.ciscocdvr.net', 'upm.cdvr.dcpt01.ciscocdvr.net')]
{'services': { 502: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'sameepdiff220_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'sameepdiff220'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'sameepdiff220_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'sameepdiff220'}],
         'lineupLength': 12,
         'message': ''}},
'shows': set(['sameepdiff220']),
'seasons': { 'sameepdiff220': { 1: set([1, 2])}},
'totalLength': "00:12:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 503: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'sameepdiff220_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'sameepdiff220'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'sameepdiff220_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'sameepdiff220'}],
         'lineupLength': 12,
         'message': ''}},
'shows': set(['sameepdiff220']),
'seasons': { 'sameepdiff220': { 1: set([1, 2])}},
'totalLength': "00:12:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.8328
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525072704000~1525079904000?lang=eng&serviceList=502,503&count=255&region=101&catalogueId=1
### STEP2:Perform the Series booking. #########################



ContentId dictionary from the grid response {u'programid://1898967172~programid://1919747683': [1525072800000, 1525073160000, u'sameepdiff220_1_1', 2147480057, u'502'], u'programid://1898967172~programid://1153657923': [1525072800000, 1525073160000, u'sameepdiff220_1_1', 2147480057, u'503'], u'programid://1898967171~programid://1919747684': [1525073160000, 1525073520000, u'sameepdiff220_1_2', 2147480057, u'502'], u'programid://1898967171~programid://1153657924': [1525073160000, 1525073520000, u'sameepdiff220_1_2', 2147480057, u'503']}
ContentId list from the ContentId dictionary [(u'programid://1898967172~programid://1919747683', [1525072800000, 1525073160000, u'sameepdiff220_1_1', 2147480057, u'502']), (u'programid://1898967172~programid://1153657923', [1525072800000, 1525073160000, u'sameepdiff220_1_1', 2147480057, u'503']), (u'programid://1898967171~programid://1919747684', [1525073160000, 1525073520000, u'sameepdiff220_1_2', 2147480057, u'502']), (u'programid://1898967171~programid://1153657924', [1525073160000, 1525073520000, u'sameepdiff220_1_2', 2147480057, u'503'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
Series Booking Successfull for the series contentId programid://1898967172~programid://1919747683 
### STEP3:Verify that the all episodes of the series booked successfully###########



get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
All programs with the contentids [u'programid://1898967172~programid://1919747683', u'programid://1898967171~programid://1919747684'] is in BOOKED state
### STEP4:Verify that the duplicate episodes of the seriesare not  booked. #######



get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
All programs with the contentids [u'programid://1898967172~programid://1153657923', u'programid://1898967171~programid://1153657924'] is not in BOOKED state
### STEP5:Verify that the first episode of the series is booked and wait to start recording #############



get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
Program starts broadcasting from 1525072800000 (in epoch)
Script will wait for 1.5 minutes to start the recording
series booked successfully 
### STEP6:Verify that the  first episode is in recording state.###################



get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/recordings
 
Recording Catalog is empty
Recording catalog is empty

#################### DEBUG STARTED ####################

Script Fetching the Household Booked/Recorded Catalog at 2018-04-30 07:21:00.298699
get all Catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog
 
Household Booked/Recorded Catalog Response:
[
    {
        "seriesId": "groupid://2147480057", 
        "pvr": "nPVR", 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set1_scripts_0", 
        "channelId": "502", 
        "isSynchronized": true, 
        "duration": "00:06:00", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T07:20:00Z", 
        "recurrence": "SERIES", 
        "title": "sameepdiff220_1_1", 
        "content": {
            "seriesId": 2147480057, 
            "instanceId": "programid://1919747683", 
            "broadcastDateTime": 1525072800000, 
            "seasonPremiere": false, 
            "locator": "{YmQyZDY0MjQxOWQ5YzA5YmFjZDM=,java.lang.String,NORMAL}[+]{hashKey,NORMAL}", 
            "erotic": false, 
            "audioType": "stereo", 
            "duration": 360000, 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": false, 
            "macrovision": false, 
            "id": "programid://1898967172", 
            "mixSource": false, 
            "externalKey": "sameepdiff220_1_1_502_tk04300726", 
            "audioDescription": false, 
            "restartAvailable": false, 
            "title": "sameepdiff220_1_1", 
            "allOfferIdList": [
                2
            ], 
            "synopsis": "sameepdiff220_1_1 - synopsis", 
            "contentNdsDrmAttributes": {
                "isBto": false, 
                "lastOfferEndDateTime": 1765963847000, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "rentalDuration": 2147483647, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isExtendedRental": false, 
                "isIppv": false, 
                "isPar": false, 
                "isOppv": false
            }, 
            "source": "ltv", 
            "live": false, 
            "parentGroupId": "groupid://2147480057", 
            "type": "instance", 
            "channel": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
            "videoFormat": "sd", 
            "wideScreen": false, 
            "episodeNumber": 1, 
            "isPurchasable": true, 
            "subtitlesHardOfHearing": false, 
            "hdcp": false, 
            "serviceId": "502", 
            "adult": false, 
            "sortTitle": "sameepdiff220_1_1", 
            "endAvailability": 1525073160000, 
            "hasChapters": false, 
            "cdvrAvailable": true, 
            "seasonFinale": false, 
            "shortSynopsis": "sameepdiff220_1_1 - synopsis", 
            "mixContentId": false, 
            "broadcaster": "VGE", 
            "serviceEquivalenceKey": "502", 
            "ict": false, 
            "parentGroups": [
                {
                    "groupType": "Series", 
                    "groupId": "groupid://2147480057"
                }
            ]
        }, 
        "state": "BOOKED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "37744", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{502,java.lang.Integer,NORMAL}-|-{MmFhMTlkZDMwOWM2ZTA4NWVkNDY=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "502", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 502, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 502", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 502", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "502", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "502", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_11343~PPS_INSTANCE_37744", 
        "startTime": "2018-04-30T07:20:00Z", 
        "recurrenceActive": true, 
        "bookingDuration": "00:06:00", 
        "notificationHandles": [
            "5ae6c341fddcf120e1a0805b"
        ], 
        "created": "2018-04-30T07:18:25Z", 
        "lastModified": "2018-04-30T07:19:00Z", 
        "contentPlayUri": "?recId=44d51988-5e9b-4e71-9446-942b1308c634", 
        "uri": "/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae6c341fddcf120e1a0805b", 
        "scheduleInstance": "programid://1898967172~programid://1919747683", 
        "keep": false, 
        "contentId": "PPS_CONTENT_11343~PPS_INSTANCE_37744"
    }, 
    {
        "seriesId": "groupid://2147480057", 
        "pvr": "nPVR", 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set1_scripts_0", 
        "channelId": "502", 
        "isSynchronized": true, 
        "duration": "00:06:00", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T07:26:00Z", 
        "recurrence": "SERIES", 
        "title": "sameepdiff220_1_2", 
        "content": {
            "seriesId": 2147480057, 
            "instanceId": "programid://1919747684", 
            "broadcastDateTime": 1525073160000, 
            "seasonPremiere": false, 
            "locator": "{YjgzNzI2MjBmYmQ5NmE2OTE4ZTA=,java.lang.String,NORMAL}[+]{hashKey,NORMAL}", 
            "erotic": false, 
            "audioType": "stereo", 
            "duration": 360000, 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": false, 
            "macrovision": false, 
            "id": "programid://1898967171", 
            "mixSource": false, 
            "externalKey": "sameepdiff220_1_2_502_tk04300732", 
            "audioDescription": false, 
            "restartAvailable": false, 
            "title": "sameepdiff220_1_2", 
            "allOfferIdList": [
                2
            ], 
            "synopsis": "sameepdiff220_1_2 - synopsis", 
            "contentNdsDrmAttributes": {
                "isBto": false, 
                "lastOfferEndDateTime": 1765963847000, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "rentalDuration": 2147483647, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isExtendedRental": false, 
                "isIppv": false, 
                "isPar": false, 
                "isOppv": false
            }, 
            "source": "ltv", 
            "live": false, 
            "parentGroupId": "groupid://2147480057", 
            "type": "instance", 
            "channel": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
            "videoFormat": "sd", 
            "wideScreen": false, 
            "episodeNumber": 2, 
            "isPurchasable": true, 
            "subtitlesHardOfHearing": false, 
            "hdcp": false, 
            "serviceId": "502", 
            "adult": false, 
            "sortTitle": "sameepdiff220_1_2", 
            "endAvailability": 1525073520000, 
            "hasChapters": false, 
            "cdvrAvailable": true, 
            "seasonFinale": false, 
            "shortSynopsis": "sameepdiff220_1_2 - synopsis", 
            "mixContentId": false, 
            "broadcaster": "VGE", 
            "serviceEquivalenceKey": "502", 
            "ict": false, 
            "parentGroups": [
                {
                    "groupType": "Series", 
                    "groupId": "groupid://2147480057"
                }
            ]
        }, 
        "state": "BOOKED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "37746", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{502,java.lang.Integer,NORMAL}-|-{MmFhMTlkZDMwOWM2ZTA4NWVkNDY=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "502", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 502, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 502", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 502", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "502", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "502", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_11344~PPS_INSTANCE_37746", 
        "startTime": "2018-04-30T07:26:00Z", 
        "recurrenceActive": true, 
        "bookingDuration": "00:06:00", 
        "notificationHandles": [
            "5ae6c341fddcf120e1a0805d"
        ], 
        "created": "2018-04-30T07:18:25Z", 
        "lastModified": "2018-04-30T07:19:00Z", 
        "contentPlayUri": "?recId=324d0073-fe7b-42e3-b6f8-c3eb854faa40", 
        "uri": "/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae6c341fddcf120e1a0805d", 
        "scheduleInstance": "programid://1898967171~programid://1919747684", 
        "keep": false, 
        "contentId": "programid://1898967171~programid://1919747684"
    }
]
Script Fetching Household Failed Recording Catalog at 2018-04-30 07:21:00.331932
get all failed recording catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog?filter:state=FAILED
 
Failed Recording Catalog is empty

#################### DEBUG ENDED   ####################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

 Testcase Failed :The booked episode of the series is not in the recording state
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX   ^ ^ ^ ^ ^   XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX   E R R O R   XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

2018/04/30 07:21:20 UTC ############################## ENDED :  corner_US31681_TC1176_series_booking_same_episode_on_two_different_channels_at_same_time ##############################

2018/04/30 07:21:20 UTC ############################## STARTED :  corner_US31720_TC1562_pause_resume_event_from_begining ##############################
US31720: UseCase: Pause/Resume of HLS Asset to iOS/Android Device(Basic Bookmarking)
TC1562: User pause a recorded content from the beginning of the playback and resume playback
Starting test corner_US31720_TC1562_pause_resume_event_from_begining


### STEP1: Ingest an Event of 5 Minutes on one channel without the post time#######################

{'services': { 502: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'pauresbeg19_1', 'rating': 1}], 'lineupLength': 6, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.4164
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################



### STEP2: Fetch the grid request and do the PPS Booking #############################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525069421000~1525076621000?lang=eng&serviceList=502&count=255&region=101&catalogueId=1
contentId list [(u'programid://1341786910~programid://1532997915', 1525072980000, 1525073340000, 360000)]

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings 
PPS Booking completed successfully for the event near to the current time programid://1341786910~programid://1532997915
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
All programs with the contentids [u'programid://1341786910~programid://1532997915'] is in BOOKED state
Program starts broadcasting from 1525072980000 (in epoch)


### STEP3: Verify the Event is in Recording state and wait till the Recording completes #####################

Script will wait for 0 minutes to start the recording
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/recordings
 
All Program with the contentid [u'programid://1341786910~programid://1532997915'] is in RECORDING state
Event is being recorded
Script will wait for 4.26666666667 minutes to complete the recording


### STEP4: Get the contentId and duration for the Recorded Event and proceed further ###################

get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/recordings
 
All Programs with the contentids [u'programid://1341786910~programid://1532997915'] is in RECORDED state
Recorded Content Response for the Content Id
[
    {
        "pvr": "nPVR", 
        "partialContent": true, 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set1_scripts_0", 
        "channelId": "502", 
        "isSynchronized": true, 
        "duration": "00:05:54", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T07:23:00Z", 
        "content": {
            "instanceId": "programid://1532997915", 
            "broadcastDateTime": 1525072980000, 
            "seasonPremiere": false, 
            "locator": "{NTVkNzVhZWY3Y2FkYjBmZjQ2NmM=,java.lang.String,NORMAL}[+]{hashKey,NORMAL}", 
            "erotic": false, 
            "audioType": "stereo", 
            "duration": 360000, 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": false, 
            "macrovision": false, 
            "id": "programid://1341786910", 
            "mixSource": false, 
            "externalKey": "pauresbeg19_1_502_tk04300729", 
            "audioDescription": false, 
            "restartAvailable": false, 
            "title": "pauresbeg19_1", 
            "allOfferIdList": [
                2
            ], 
            "mixContentId": false, 
            "contentNdsDrmAttributes": {
                "isBto": false, 
                "lastOfferEndDateTime": 1765963847000, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "rentalDuration": 2147483647, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isExtendedRental": false, 
                "isIppv": false, 
                "isPar": false, 
                "isOppv": false
            }, 
            "source": "ltv", 
            "live": false, 
            "subtitlesHardOfHearing": false, 
            "type": "instance", 
            "channel": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
            "videoFormat": "sd", 
            "wideScreen": false, 
            "isPurchasable": true, 
            "hdcp": false, 
            "serviceId": "502", 
            "adult": false, 
            "sortTitle": "pauresbeg19_1", 
            "endAvailability": 1525073340000, 
            "hasChapters": false, 
            "cdvrAvailable": true, 
            "seasonFinale": false, 
            "shortSynopsis": "pauresbeg19_1 - synopsis", 
            "synopsis": "pauresbeg19_1 - synopsis", 
            "broadcaster": "VGE", 
            "serviceEquivalenceKey": "502", 
            "ict": false
        }, 
        "title": "pauresbeg19_1", 
        "recurrence": "NONE", 
        "state": "RECORDED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "37751", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{502,java.lang.Integer,NORMAL}-|-{MmFhMTlkZDMwOWM2ZTA4NWVkNDY=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "502", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 502, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 502", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 502", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "502", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "502", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_11353~PPS_INSTANCE_37751", 
        "startTime": "2018-04-30T07:23:11Z", 
        "bookingDuration": "00:06:00", 
        "notificationHandles": [
            "5ae6c47db1f9e9206752a807"
        ], 
        "created": "2018-04-30T07:23:41Z", 
        "lastModified": "2018-04-30T07:30:19Z", 
        "contentPlayUri": "?recId=4bc4e896-4f19-4d34-9e9b-60c37e0dd080", 
        "uri": "/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae6c47db1f9e9206752a807", 
        "scheduleInstance": "programid://1341786910~programid://1532997915", 
        "keep": false, 
        "contentId": "PPS_CONTENT_11353~PPS_INSTANCE_37751"
    }
]
Event is recorded successfully


### STEP5: Do the Pause at the beginning of the playback and resume playback, verify and update the results ###################################

Total duration of the Recorded Event is 00:05:54
Create the bookmark and pause the playback via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookmarks/PPS_CONTENT_11353~PPS_INSTANCE_37751
Creating Bookmark and pausing the playback is successful
recording Paused successfully, now its time to resume the recording
Retreive the bookmark and resume the playback via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookmarks/PPS_CONTENT_11353~PPS_INSTANCE_37751/pauseit
Retrieving Bookmark is successful

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed:recording paused and resumed from where it is paused at 00:00:05

2018/04/30 07:30:50 UTC ############################## ENDED :  corner_US31720_TC1562_pause_resume_event_from_begining ##############################

2018/04/30 07:30:50 UTC ############################## STARTED :  corner_US31720_TC1563_User_pause_a_recorded_content_at_the_middle_of_the_playback_and_resume_playback ##############################
US31720: UseCase: Pause/Resume of HLS Asset to iOS/Android Device(Basic Bookmarking)
TC1563:User pause a recorded content at the middle of the playback and resume playback
Starting test corner_US31720_TC1563_User_pause_a_recorded_content_at_the_middle_of_the_playback_and_resume_playback
### STEP1: Ingest an Event of n Minutes on one channel without the post time####################### 
 

{'services': { 502: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'pauresmid19_1', 'rating': 1}], 'lineupLength': 6, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.4164
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

### STEP2: Fetch the grid request and do the PPS Booking ############################# 
 

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525069991000~1525077191000?lang=eng&serviceList=502&count=255&region=101&catalogueId=1
ContentId Dictionary from the Grid Response{u'programid://1953944165~programid://1852612644': [1525073520000, 1525073880000, 360000]}
contentId list after Sorting
[(u'programid://1953944165~programid://1852612644', 1525073520000, 1525073880000, 360000)]

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookings 
TestCase Passed: PPS Booking is successful for the event near to the current time programid://1953944165~programid://1852612644
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookings
 
All programs with the contentids [u'programid://1953944165~programid://1852612644'] is in BOOKED state
Program starts broadcasting from 1525073520000 (in epoch)
### STEP3: Verify the Event is in Recording state and wait till the Recording completes ##################### 
 

Script will wait for 0 minutes to start the recording
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/recordings
 
All Program with the contentid [u'programid://1953944165~programid://1852612644'] is in RECORDING state
Event is being recorded
Script will wait for 3.76666666667 minutes to complete the recording
### STEP4: Get the contentId and duration for the Recorded Event and proceed further ################### 
 

get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/recordings
 
All Programs with the contentids [u'programid://1953944165~programid://1852612644'] is in RECORDED state
Event is recorded successfully
### STEP5: Do the Pause at the middle of the playback and resume playback, verify and update the results ################################### 
 

Total duration of the Recorded Event is 00:05:18
Create the bookmark and pause the playback via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookmarks/PPS_CONTENT_11378~PPS_INSTANCE_37764
Creating Bookmark and pausing the playback is successful
recording Paused successfully, now its time to resume the recording
Retreive the bookmark and resume the playback via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookmarks/PPS_CONTENT_11378~PPS_INSTANCE_37764/pauseit
Retrieving Bookmark is successful

#################### DEBUG STARTED ####################

Script Fetching the Household Booked/Recorded Catalog at 2018-04-30 07:39:31.023142
get all Catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/catalog
 
Household Booked/Recorded Catalog Response:
[
    {
        "pvr": "nPVR", 
        "partialContent": true, 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set1_scripts_1", 
        "channelId": "502", 
        "isSynchronized": true, 
        "duration": "00:05:18", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T07:32:00Z", 
        "content": {
            "shortSynopsis": "pauresmid19_1 - synopsis", 
            "title": "pauresmid19_1", 
            "instanceId": "PPS_INSTANCE_37764", 
            "recordingId": "37764", 
            "broadcastDateTime": 1525073520000, 
            "synopsis": "pauresmid19_1 - synopsis", 
            "endAvailability": 1525073880000, 
            "source": "pvr", 
            "erotic": false, 
            "serviceId": "502", 
            "adult": false, 
            "sortTitle": "pauresmid19_1", 
            "duration": 360000, 
            "serviceEquivalenceKey": "502", 
            "type": "instance", 
            "id": "PPS_CONTENT_11378"
        }, 
        "title": "pauresmid19_1", 
        "recurrence": "NONE", 
        "state": "RECORDED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "37764", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{502,java.lang.Integer,NORMAL}-|-{MmFhMTlkZDMwOWM2ZTA4NWVkNDY=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "502", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 502, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 502", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 502", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "502", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "502", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_11378~PPS_INSTANCE_37764", 
        "startTime": "2018-04-30T07:32:42Z", 
        "bookingDuration": "00:06:00", 
        "notificationHandles": [
            "5ae6c6b7e9c28320e2419981"
        ], 
        "created": "2018-04-30T07:33:11Z", 
        "lastModified": "2018-04-30T07:38:40Z", 
        "contentPlayUri": "?recId=79883cc8-aff2-4f6e-8685-1ac648aeca1a", 
        "uri": "/pps/households/AUTO_3006_cornercase_set1_scripts_1/catalog/5ae6c6b7e9c28320e2419981", 
        "scheduleInstance": "programid://1953944165~programid://1852612644", 
        "keep": false, 
        "contentId": "PPS_CONTENT_11378~PPS_INSTANCE_37764"
    }
]
Script Fetching Household Failed Recording Catalog at 2018-04-30 07:39:31.042385
get all failed recording catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/catalog?filter:state=FAILED
 
Failed Recording Catalog is empty

#################### DEBUG ENDED   ####################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: Recording paused and resumed from where it is paused at 00:02:39

2018/04/30 07:39:51 UTC ############################## ENDED :  corner_US31720_TC1563_User_pause_a_recorded_content_at_the_middle_of_the_playback_and_resume_playback ##############################

2018/04/30 07:39:51 UTC ############################## STARTED :  corner_US31720_TC1564_User_pause_a_recorded_content_at_the_end_of_the_playback_and_resume_playback ##############################
US31720: UseCase: Pause/Resume of HLS Asset to iOS/Android Device(Basic Bookmarking)
TC1564: User pause a recorded content before reaching the end of the playback and resume playback
Starting test corner_US31720_TC1564_User_pause_a_recorded_content_at_the_end_of_the_playback_and_resume_playback
### STEP1: Ingest an Event of 5 Minutes on one channel without the post time ###################### 
 

Channel Ingest XML:  {'services': { 502: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'pauresend19_1', 'rating': 1}], 'lineupLength': 6, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.4164
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

### STEP2: Fetch the grid request and do the PPS Booking ############################# 
 

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525070531000~1525077731000?lang=eng&serviceList=502&count=255&region=101&catalogueId=1
contentId list [(u'programid://1758264311~programid://641478769', 1525074060000, 1525074420000, 360000)]

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookings 
PPS Booking completed successfully for the event near to the current time programid://1758264311~programid://641478769
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookings
 
All programs with the contentids [u'programid://1758264311~programid://641478769'] is in BOOKED state
Program starts broadcasting from 1525074060000 (in epoch)
### STEP3: Verify the Event is in Recording state and wait till the Recording completes ##################### 
 

Script will wait for 0 minutes to start the recording
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/recordings
 
All Program with the contentid [u'programid://1758264311~programid://641478769'] is in RECORDING state
Event is being recorded
Script will wait for 3.75 minutes to complete the recording
### STEP4: Get the contentId and duration for the Recorded Event and proceed further ################### 
 

get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/recordings
 
All Programs with the contentids [u'programid://1758264311~programid://641478769'] is in RECORDED state
Event is recorded successfully
### STEP5: Do the Pause at the end of the playback and resume playback, verify and update the results ################################### 
 

Total duration of the Recorded Event is 00:05:24
Create the bookmark and pause the playback via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookmarks/PPS_CONTENT_11398~PPS_INSTANCE_37778
Creating Bookmark and pausing the playback is successful
recording Paused successfully, now its time to resume the recording
Retreive the bookmark and resume the playback via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookmarks/PPS_CONTENT_11398~PPS_INSTANCE_37778/pauseit
Retrieving Bookmark is successful

#################### DEBUG STARTED ####################

Script Fetching the Household Booked/Recorded Catalog at 2018-04-30 07:48:30.340418
get all Catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/catalog
 
Household Booked/Recorded Catalog Response:
[
    {
        "pvr": "nPVR", 
        "partialContent": true, 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set1_scripts_1", 
        "channelId": "502", 
        "isSynchronized": true, 
        "duration": "00:05:24", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T07:41:00Z", 
        "content": {
            "shortSynopsis": "pauresend19_1 - synopsis", 
            "title": "pauresend19_1", 
            "instanceId": "PPS_INSTANCE_37778", 
            "recordingId": "37778", 
            "broadcastDateTime": 1525074060000, 
            "synopsis": "pauresend19_1 - synopsis", 
            "endAvailability": 1525074420000, 
            "source": "pvr", 
            "erotic": false, 
            "serviceId": "502", 
            "adult": false, 
            "sortTitle": "pauresend19_1", 
            "duration": 360000, 
            "serviceEquivalenceKey": "502", 
            "type": "instance", 
            "id": "PPS_CONTENT_11398"
        }, 
        "title": "pauresend19_1", 
        "recurrence": "NONE", 
        "state": "RECORDED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "37778", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{502,java.lang.Integer,NORMAL}-|-{MmFhMTlkZDMwOWM2ZTA4NWVkNDY=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "502", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 502, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 502", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 502", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "502", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "502", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_11398~PPS_INSTANCE_37778", 
        "startTime": "2018-04-30T07:41:36Z", 
        "bookingDuration": "00:06:00", 
        "notificationHandles": [
            "5ae6c8d34935241fe4c13bfb"
        ], 
        "created": "2018-04-30T07:42:11Z", 
        "lastModified": "2018-04-30T07:47:39Z", 
        "contentPlayUri": "?recId=0fa51ba8-ea11-4ee3-beb4-53b85da5de4d", 
        "uri": "/pps/households/AUTO_3006_cornercase_set1_scripts_1/catalog/5ae6c8d34935241fe4c13bfb", 
        "scheduleInstance": "programid://1758264311~programid://641478769", 
        "keep": false, 
        "contentId": "PPS_CONTENT_11398~PPS_INSTANCE_37778"
    }
]
Script Fetching Household Failed Recording Catalog at 2018-04-30 07:48:30.359441
get all failed recording catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/catalog?filter:state=FAILED
 
Failed Recording Catalog is empty

#################### DEBUG ENDED   ####################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: Recording paused and resumed from where it is paused at 00:05:19

2018/04/30 07:48:50 UTC ############################## ENDED :  corner_US31720_TC1564_User_pause_a_recorded_content_at_the_end_of_the_playback_and_resume_playback ##############################

2018/04/30 07:48:50 UTC ############################## STARTED :  corner_US31720_TC1566_Pause_Resume_Playback_Manytimes ##############################
US31720: UseCase: Pause/Resume of HLS Asset to iOS/Android Device(Basic Bookmarking)
TC1566: User pause a recorded content and resume playback and pause and resume playback many times (Edge case)
TC1565: User pause a recorded content and resume playback and pause
Starting test corner_US31720_TC1566_Pause_Resume_Playback_Manytimes
### STEP1: Ingest an Event of n Minutes on one channel without the post time ####################### 
 

{'services': { 502: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'pauresmany19_1', 'rating': 1}], 'lineupLength': 6, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.4164
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

### STEP2: Fetch the grid request and do the PPS Booking ############################# 
 

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525071071000~1525078271000?lang=eng&serviceList=502&count=255&region=101&catalogueId=1
ContentId Dictionary from the Grid Response
{u'programid://1923484000~programid://830655937': [1525074600000, 1525074960000, 360000]}
contentId list after Sorting
[(u'programid://1923484000~programid://830655937', 1525074600000, 1525074960000, 360000)]

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookings 
PPS Booking completed successfully for the event near to the current time programid://1923484000~programid://830655937
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookings
 
All programs with the contentids [u'programid://1923484000~programid://830655937'] is in BOOKED state
Program starts broadcasting from 1525074600000 (in epoch)
### STEP3: Verify the Event is in Recording state and wait till the Recording completes ##################### 
 

Script will wait for 0 minutes to start the recording
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/recordings
 
All Program with the contentid [u'programid://1923484000~programid://830655937'] is in RECORDING state
Script will wait for 3.76666666667 minutes to complete the recording
### STEP4: Get the contentId and duration for the Recorded Event and proceed further ################### 
 

get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/recordings
 
All Programs with the contentids [u'programid://1923484000~programid://830655937'] is in RECORDED state
### STEP5: Do the Pause at the end of the playback and resume playback, verify and update the results ################################### 
 

Total duration of the Recorded Event is 00:05:24
List of Values which is going to use for Pause/Resume  is['00:01:19', '00:01:46', '00:02:39', '00:05:19']
Create the bookmark and pause the playback via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookmarks/PPS_CONTENT_11417~PPS_INSTANCE_37794
Creating Bookmark and pausing the playback is successful
recording Paused successfully, now its time to resume the recording
Retreive the bookmark and resume the playback via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookmarks/PPS_CONTENT_11417~PPS_INSTANCE_37794/pauseit
Retrieving Bookmark is successful
recording paused and resumed from where it is paused at 00:01:19
Update the bookmark and pause the playback via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookmarks/PPS_CONTENT_11417~PPS_INSTANCE_37794/pauseit
Updating Bookmark and pausing the playback is successful
Retreive the bookmark and resume the playback via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookmarks/PPS_CONTENT_11417~PPS_INSTANCE_37794/pauseit
Retrieving Bookmark is successful
recording paused and resumed successfully at 00:01:46
Update the bookmark and pause the playback via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookmarks/PPS_CONTENT_11417~PPS_INSTANCE_37794/pauseit
Updating Bookmark and pausing the playback is successful
Retreive the bookmark and resume the playback via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookmarks/PPS_CONTENT_11417~PPS_INSTANCE_37794/pauseit
Retrieving Bookmark is successful
recording paused and resumed successfully at 00:02:39
Update the bookmark and pause the playback via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookmarks/PPS_CONTENT_11417~PPS_INSTANCE_37794/pauseit
Updating Bookmark and pausing the playback is successful
Retreive the bookmark and resume the playback via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookmarks/PPS_CONTENT_11417~PPS_INSTANCE_37794/pauseit
Retrieving Bookmark is successful
recording paused and resumed successfully at 00:05:19
3
Delete the bookmark via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookmarks/PPS_CONTENT_11417~PPS_INSTANCE_37794/pauseit
Deleting Bookmark is successful

#################### DEBUG STARTED ####################

Script Fetching the Household Booked/Recorded Catalog at 2018-04-30 07:57:30.859997
get all Catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/catalog
 
Household Booked/Recorded Catalog Response:
[
    {
        "pvr": "nPVR", 
        "partialContent": true, 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set1_scripts_1", 
        "channelId": "502", 
        "isSynchronized": true, 
        "duration": "00:05:24", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T07:50:00Z", 
        "content": {
            "instanceId": "programid://830655937", 
            "broadcastDateTime": 1525074600000, 
            "seasonPremiere": false, 
            "locator": "{MWZjY2M0OGZmMDc5ZGFkYmZiOWE=,java.lang.String,NORMAL}[+]{hashKey,NORMAL}", 
            "erotic": false, 
            "audioType": "stereo", 
            "duration": 360000, 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": false, 
            "macrovision": false, 
            "id": "programid://1923484000", 
            "mixSource": false, 
            "externalKey": "pauresmany19_1_502_tk04300756", 
            "audioDescription": false, 
            "restartAvailable": false, 
            "title": "pauresmany19_1", 
            "allOfferIdList": [
                2
            ], 
            "mixContentId": false, 
            "contentNdsDrmAttributes": {
                "isBto": false, 
                "lastOfferEndDateTime": 1765963847000, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "rentalDuration": 2147483647, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isExtendedRental": false, 
                "isIppv": false, 
                "isPar": false, 
                "isOppv": false
            }, 
            "source": "ltv", 
            "live": false, 
            "subtitlesHardOfHearing": false, 
            "type": "instance", 
            "channel": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
            "videoFormat": "sd", 
            "wideScreen": false, 
            "isPurchasable": true, 
            "hdcp": false, 
            "serviceId": "502", 
            "adult": false, 
            "sortTitle": "pauresmany19_1", 
            "endAvailability": 1525074960000, 
            "hasChapters": false, 
            "cdvrAvailable": true, 
            "seasonFinale": false, 
            "shortSynopsis": "pauresmany19_1 - synopsis", 
            "synopsis": "pauresmany19_1 - synopsis", 
            "broadcaster": "VGE", 
            "serviceEquivalenceKey": "502", 
            "ict": false
        }, 
        "title": "pauresmany19_1", 
        "recurrence": "NONE", 
        "state": "RECORDED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "37794", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{502,java.lang.Integer,NORMAL}-|-{MmFhMTlkZDMwOWM2ZTA4NWVkNDY=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "502", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 502, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 502", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 502", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "502", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "502", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_11417~PPS_INSTANCE_37794", 
        "startTime": "2018-04-30T07:50:37Z", 
        "bookingDuration": "00:06:00", 
        "notificationHandles": [
            "5ae6caef4935241fe4c13bfc"
        ], 
        "created": "2018-04-30T07:51:11Z", 
        "lastModified": "2018-04-30T07:56:40Z", 
        "contentPlayUri": "?recId=1ef51b75-c3ca-4016-8f12-acfd0cbcf00b", 
        "uri": "/pps/households/AUTO_3006_cornercase_set1_scripts_1/catalog/5ae6caef4935241fe4c13bfc", 
        "scheduleInstance": "programid://1923484000~programid://830655937", 
        "keep": false, 
        "contentId": "PPS_CONTENT_11417~PPS_INSTANCE_37794"
    }
]
Script Fetching Household Failed Recording Catalog at 2018-04-30 07:57:30.870281
get all failed recording catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/catalog?filter:state=FAILED
 
Failed Recording Catalog is empty

#################### DEBUG ENDED   ####################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: recording paused and resumed multiple times

2018/04/30 07:57:51 UTC ############################## ENDED :  corner_US31720_TC1566_Pause_Resume_Playback_Manytimes ##############################

2018/04/30 07:57:51 UTC ############################## STARTED :  corner_US31720_TC1570_pause_resume_series_recordedcontent ##############################
US31720: UseCase: Pause/Resume of HLS Asset to iOS/Android Device (Basic Bookmarking)
TC1570: User pause an episode os a series recorded content and resume playback.Verify that the user playback an episode of a series, pause the content. the user can resume playback from the point it paused.
Starting test corner_US31720_TC1570_pause_resume_series_recordedcontent


### STEP1:Ingest a series of three episodes of two minutes duration########
 
{'services': { 502: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'PlayPause221_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'PlayPause221'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'PlayPause221_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'PlayPause221'},
                     { 'episodeNum': 3, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'PlayPause221_1_3', 'rating': 1, 'seasonNum': 1, 'showID': 'PlayPause221'}],
         'lineupLength': 9,
         'message': ''}},
'shows': set(['PlayPause221']),
'seasons': { 'PlayPause221': { 1: set([1, 2, 3])}},
'totalLength': "00:09:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Script will wait for 120.6246 minutes for the Ingest to sync with the CI Host
Cleaning up the Booked/Recording Catalog for the household

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525075212000~1525082412000?lang=eng&serviceList=502&count=255&region=101&catalogueId=1
Series ContentId list: [(u'programid://2119340615~programid://1063712573', [1525075260000, 1525075440000, u'PlayPause221_1_1', 1078179711, 1]), (u'programid://2119340613~programid://1063712574', [1525075440000, 1525075620000, u'PlayPause221_1_2', 1078179711, 2]), (u'programid://2119340614~programid://1063712572', [1525075620000, 1525075800000, u'PlayPause221_1_3', 1078179711, 3])]


### STEP2:Perform the series booking #####


PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
Series Booking Successful with contentId programid://2119340615~programid://1063712573 


### STEP3:Check whether all episodes are present in the booked library ###

get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
All programs with the contentids [u'programid://2119340615~programid://1063712573', u'programid://2119340613~programid://1063712574', u'programid://2119340614~programid://1063712572'] is in BOOKED state
Script will wait for 0.716666666667 minutes to check the recording state after adding the delay


### STEP4:verify that the state changed from booked to recording in the record library #######

get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/recordings
 
All Program with the contentid [u'programid://2119340615~programid://1063712573'] is in RECORDING state


### STEP5: Wait for the first episode to be recorded ######

Script will wait for 2.0 minutes to finish the recording
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/recordings
 
Event is present in the record library and in recorded state


### STEP6:Perform Pause and  resume playback ######



### STEP7:Perform Pause the recorded event playback #######

Create the bookmark and pause the playback via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookmarks/PPS_CONTENT_11463~PPS_INSTANCE_37808
Creating Bookmark and pausing the playback is successful
recording Paused successfully, now its time to resume the recording


### STEP8:Perform resume the recorded event playback ######

Retreive the bookmark and resume the playback via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookmarks/PPS_CONTENT_11463~PPS_INSTANCE_37808/pauseit
Retrieving Bookmark is successful
00:01:00
recording paused and resumed from where it is paused at 00:01:00

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: recording paused and resumed from where it is paused at 00:01:00

2018/04/30 08:05:50 UTC ############################## ENDED :  corner_US31720_TC1570_pause_resume_series_recordedcontent ##############################

2018/04/30 08:05:50 UTC ############################## STARTED :  corner_US31720_TC1573_pause_resume_individual_recording ##############################
US31720: UseCase: Pause/Resume of HLS Asset to iOS/Android Device(Basic Bookmarking)
TC1573: User pause a current individual recording and resume playback
Starting test corner_US31720_TC1573_pause_resume_individual_recording


###STEP1: Ingest an Event of 5 Minutes on one channel without the post time#######################

{'services': { 502: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'pauresrec19_1', 'rating': 1}], 'lineupLength': 6, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.4164
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################



###STEP2: Fetch the grid request and do the PPS Booking #############################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525072091000~1525079291000?lang=eng&serviceList=502&count=255&region=101&catalogueId=1
contentId list [(u'programid://1117780171~programid://2147482814', 1525075620000, 1525075980000, 360000)]

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookings 
PPS Booking completed successfully for the event near to the current time programid://1117780171~programid://2147482814
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookings
 
All programs with the contentids [u'programid://1117780171~programid://2147482814'] is in BOOKED state
Program starts broadcasting from 1525075620000 (in epoch)


###STEP3: Verify the Event is in Recording state and get the contentId and duration for the Recorded Event #####################

Script will wait for 0 minutes to start the recording
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/recordings
 
All Program with the contentid [u'programid://1117780171~programid://2147482814'] is in RECORDING state
Event is being recorded successfully
Recorded Content Response for the Content Id
[
    {
        "pvr": "nPVR", 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set1_scripts_1", 
        "channelId": "502", 
        "isSynchronized": true, 
        "duration": "00:06:00", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T08:07:00Z", 
        "content": {
            "instanceId": "programid://2147482814", 
            "broadcastDateTime": 1525075620000, 
            "seasonPremiere": false, 
            "locator": "{ZTc2YjRlMGFiMjMwOWQ5ZWVkZDM=,java.lang.String,NORMAL}[+]{hashKey,NORMAL}", 
            "erotic": false, 
            "audioType": "stereo", 
            "duration": 360000, 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": false, 
            "macrovision": false, 
            "id": "programid://1117780171", 
            "mixSource": false, 
            "externalKey": "pauresrec19_1_502_tk04300813", 
            "audioDescription": false, 
            "restartAvailable": false, 
            "title": "pauresrec19_1", 
            "allOfferIdList": [
                2
            ], 
            "mixContentId": false, 
            "contentNdsDrmAttributes": {
                "isBto": false, 
                "lastOfferEndDateTime": 1765963847000, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "rentalDuration": 2147483647, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isExtendedRental": false, 
                "isIppv": false, 
                "isPar": false, 
                "isOppv": false
            }, 
            "source": "ltv", 
            "live": false, 
            "subtitlesHardOfHearing": false, 
            "type": "instance", 
            "channel": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
            "videoFormat": "sd", 
            "wideScreen": false, 
            "isPurchasable": true, 
            "hdcp": false, 
            "serviceId": "502", 
            "adult": false, 
            "sortTitle": "pauresrec19_1", 
            "endAvailability": 1525075980000, 
            "hasChapters": false, 
            "cdvrAvailable": true, 
            "seasonFinale": false, 
            "shortSynopsis": "pauresrec19_1 - synopsis", 
            "synopsis": "pauresrec19_1 - synopsis", 
            "broadcaster": "VGE", 
            "serviceEquivalenceKey": "502", 
            "ict": false
        }, 
        "title": "pauresrec19_1", 
        "recurrence": "NONE", 
        "state": "RECORDING", 
        "startGuardTime": "00:00:00", 
        "recordingId": "37824", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{502,java.lang.Integer,NORMAL}-|-{MmFhMTlkZDMwOWM2ZTA4NWVkNDY=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "502", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 502, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 502", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 502", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "502", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "502", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_11500~PPS_INSTANCE_37824", 
        "startTime": "2018-04-30T08:07:38Z", 
        "bookingDuration": "00:06:00", 
        "notificationHandles": [
            "5ae6ceeb29368720c773d0e9"
        ], 
        "created": "2018-04-30T08:08:11Z", 
        "lastModified": "2018-04-30T08:08:19Z", 
        "contentPlayUri": "?recId=5b8fb7ee-425a-449e-b1e4-c810a6d64f25", 
        "uri": "/pps/households/AUTO_3006_cornercase_set1_scripts_1/catalog/5ae6ceeb29368720c773d0e9", 
        "scheduleInstance": "programid://1117780171~programid://2147482814", 
        "keep": false, 
        "contentId": "PPS_CONTENT_11500~PPS_INSTANCE_37824"
    }
]


###STEP4: Do the Pause/resume playback, verify and update the results ###################################

Total duration of the Recorded Event is 00:06:00
Create the bookmark and pause the playback via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookmarks/PPS_CONTENT_11500~PPS_INSTANCE_37824
Creating Bookmark and pausing the playback is successful
recording Paused successfully, now its time to resume the recording
Retreive the bookmark and resume the playback via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookmarks/PPS_CONTENT_11500~PPS_INSTANCE_37824/pauseit
Retrieving Bookmark is successful

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: recording paused and resumed from where it is paused at 00:03:00

2018/04/30 08:09:34 UTC ############################## ENDED :  corner_US31720_TC1573_pause_resume_individual_recording ##############################

2018/04/30 08:09:34 UTC ############################## STARTED :  corner_US31721_TC1525_Deletescheduledrecording_duringrecording ##############################
{'TC1525': ['US31721', '', 3]}
US31721: UseCase: Delete cDVR Bookings by Subscriber
TC1525: Delete scheduled single recording from the Schedule Recordings list during recording
Starting test corner_US31721_TC1525_Deletescheduledrecording_duringrecording


### STEP1: Verify the recording mode and proceed further only if it is not Common Copy Environment#########

Testscript Proceeds further since it is not Common Copy Environment


### STEP2: Ingest an event of n minutes on one channel with the post time so that it will show as future event########

{'services': { 502: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'futureevt199_1', 'rating': 1}], 'lineupLength': 4, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:04:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.2776


### STEP3: Fetch the Grid Request and get the future event, than book the event and verify########

Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525075915000~1525083115000?lang=eng&serviceList=502&count=255&region=101&catalogueId=1
Programs from Grid Request which is currently broadcasting
{u'programid://2147480272~programid://1677663605': [1525075980000, 1525076220000, 240000, u'futureevt199_1']}

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings 
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
All programs with the contentids [u'programid://2147480272~programid://1677663605'] is in BOOKED state
Booked Library
[
    {
        "pvr": "nPVR", 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set1_scripts_0", 
        "channelId": "502", 
        "isSynchronized": true, 
        "duration": "00:04:00", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T08:13:00Z", 
        "content": {
            "instanceId": "programid://1677663605", 
            "broadcastDateTime": 1525075980000, 
            "seasonPremiere": false, 
            "locator": "{ZjUwZWUwZjc5NzYxNTZjNGY1M2Q=,java.lang.String,NORMAL}[+]{hashKey,NORMAL}", 
            "erotic": false, 
            "audioType": "stereo", 
            "duration": 240000, 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": false, 
            "macrovision": false, 
            "id": "programid://2147480272", 
            "mixSource": false, 
            "externalKey": "futureevt199_1_502_tk04300817", 
            "audioDescription": false, 
            "restartAvailable": false, 
            "title": "futureevt199_1", 
            "allOfferIdList": [
                2
            ], 
            "mixContentId": false, 
            "contentNdsDrmAttributes": {
                "isBto": false, 
                "lastOfferEndDateTime": 1765963847000, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "rentalDuration": 2147483647, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isExtendedRental": false, 
                "isIppv": false, 
                "isPar": false, 
                "isOppv": false
            }, 
            "source": "ltv", 
            "live": false, 
            "subtitlesHardOfHearing": false, 
            "type": "instance", 
            "channel": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
            "videoFormat": "sd", 
            "wideScreen": false, 
            "isPurchasable": true, 
            "hdcp": false, 
            "serviceId": "502", 
            "adult": false, 
            "sortTitle": "futureevt199_1", 
            "endAvailability": 1525076220000, 
            "hasChapters": false, 
            "cdvrAvailable": true, 
            "seasonFinale": false, 
            "shortSynopsis": "futureevt199_1 - synopsis", 
            "synopsis": "futureevt199_1 - synopsis", 
            "broadcaster": "VGE", 
            "serviceEquivalenceKey": "502", 
            "ict": false
        }, 
        "title": "futureevt199_1", 
        "recurrence": "NONE", 
        "state": "BOOKED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "37825", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{502,java.lang.Integer,NORMAL}-|-{MmFhMTlkZDMwOWM2ZTA4NWVkNDY=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "502", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 502, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 502", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 502", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "502", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "502", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_11501~PPS_INSTANCE_37825", 
        "startTime": "2018-04-30T08:13:00Z", 
        "bookingDuration": "00:04:00", 
        "notificationHandles": [
            "5ae6cfcbb1f9e9206752a80f"
        ], 
        "created": "2018-04-30T08:11:55Z", 
        "lastModified": "2018-04-30T08:11:55Z", 
        "contentPlayUri": "?recId=16c52f31-0684-477e-a39e-4f08baebac4f", 
        "uri": "/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae6cfcbb1f9e9206752a80f", 
        "scheduleInstance": "programid://2147480272~programid://1677663605", 
        "keep": false, 
        "contentId": "programid://2147480272~programid://1677663605"
    }
]
Script will wait for 1.03333333333minutes to check the Recording State


### STEP4: Verify the Event is in Recording State and proceed further#################

get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/recordings
 
Recording Catalog is empty
Recording catalog is empty

#################### DEBUG STARTED ####################

Script Fetching the Household Booked/Recorded Catalog at 2018-04-30 08:14:00.753229
get all Catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog
 
Household Booked/Recorded Catalog Response:
[
    {
        "pvr": "nPVR", 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set1_scripts_0", 
        "channelId": "502", 
        "isSynchronized": true, 
        "duration": "00:04:00", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T08:13:00Z", 
        "content": {
            "instanceId": "programid://1677663605", 
            "broadcastDateTime": 1525075980000, 
            "seasonPremiere": false, 
            "locator": "{ZjUwZWUwZjc5NzYxNTZjNGY1M2Q=,java.lang.String,NORMAL}[+]{hashKey,NORMAL}", 
            "erotic": false, 
            "audioType": "stereo", 
            "duration": 240000, 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": false, 
            "macrovision": false, 
            "id": "programid://2147480272", 
            "mixSource": false, 
            "externalKey": "futureevt199_1_502_tk04300817", 
            "audioDescription": false, 
            "restartAvailable": false, 
            "title": "futureevt199_1", 
            "allOfferIdList": [
                2
            ], 
            "mixContentId": false, 
            "contentNdsDrmAttributes": {
                "isBto": false, 
                "lastOfferEndDateTime": 1765963847000, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "rentalDuration": 2147483647, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isExtendedRental": false, 
                "isIppv": false, 
                "isPar": false, 
                "isOppv": false
            }, 
            "source": "ltv", 
            "live": false, 
            "subtitlesHardOfHearing": false, 
            "type": "instance", 
            "channel": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
            "videoFormat": "sd", 
            "wideScreen": false, 
            "isPurchasable": true, 
            "hdcp": false, 
            "serviceId": "502", 
            "adult": false, 
            "sortTitle": "futureevt199_1", 
            "endAvailability": 1525076220000, 
            "hasChapters": false, 
            "cdvrAvailable": true, 
            "seasonFinale": false, 
            "shortSynopsis": "futureevt199_1 - synopsis", 
            "synopsis": "futureevt199_1 - synopsis", 
            "broadcaster": "VGE", 
            "serviceEquivalenceKey": "502", 
            "ict": false
        }, 
        "title": "futureevt199_1", 
        "recurrence": "NONE", 
        "state": "BOOKED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "37825", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{502,java.lang.Integer,NORMAL}-|-{MmFhMTlkZDMwOWM2ZTA4NWVkNDY=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "502", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 502, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 502", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 502", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "502", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "502", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_11501~PPS_INSTANCE_37825", 
        "startTime": "2018-04-30T08:13:00Z", 
        "bookingDuration": "00:04:00", 
        "notificationHandles": [
            "5ae6cfcbb1f9e9206752a80f"
        ], 
        "created": "2018-04-30T08:11:55Z", 
        "lastModified": "2018-04-30T08:12:00Z", 
        "contentPlayUri": "?recId=16c52f31-0684-477e-a39e-4f08baebac4f", 
        "uri": "/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae6cfcbb1f9e9206752a80f", 
        "scheduleInstance": "programid://2147480272~programid://1677663605", 
        "keep": false, 
        "contentId": "PPS_CONTENT_11501~PPS_INSTANCE_37825"
    }
]
Script Fetching Household Failed Recording Catalog at 2018-04-30 08:14:00.785380
get all failed recording catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog?filter:state=FAILED
 
Failed Recording Catalog is empty

#################### DEBUG ENDED   ####################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Failed: Unable to Verify Recording Catalog
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX   ^ ^ ^ ^ ^   XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX   E R R O R   XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

2018/04/30 08:14:20 UTC ############################## ENDED :  corner_US31721_TC1525_Deletescheduledrecording_duringrecording ##############################

2018/04/30 08:14:20 UTC ############################## STARTED :  corner_US31721_TC1533_delete_TimeBasedBooking_beforeRecording ##############################
TC1533: Delete scheduled manual recording. Verify that the scheduled manual recording is removed from the Schedule Recordings list
US31721: UseCase: Delete cDVR Bookings by Subscriber


### STEP1: Ingest 2 individual event (n minutes) ######################################################################

Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
{'services': { 502: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'tbrdbr103_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'tbrdbr103'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'tbrdbr103_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'tbrdbr103'}],
         'lineupLength': 8,
         'message': ''}},
'shows': set(['tbrdbr103']),
'seasons': { 'tbrdbr103': { 1: set([1, 2])}},
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.5552
Starting test corner_US31721_TC1533_delete_TimeBasedBooking_beforeRecording
Doing cleanup before script execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################



### STEP2: book a time based booking of the individual event , verify it ###########################################################


Manual booking is Doing for householdId AUTO_3006_cornercase_set1_scripts_1 : 

PPS time based booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookings 
Time Based booking successful 

get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookings
 
start wait time from func 137.0
Event is present in the Booked catalog


### STEP3: Delete the booking, before recording starts ############################################################################


Delete PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/catalog/5ae6d0e91ab94a20f760ba1a
PPS Booking Deleted successfully
Booking was deleted successfully before recording start


### STEP4: Verify the booking catalog, that booking is deleted succesfully #################################################################

get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookings
 
Booking Catalog is empty

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: Booking was deleted successfully before recording start and VERIFIED in booking catalog

2018/04/30 08:17:04 UTC ############################## ENDED :  corner_US31721_TC1533_delete_TimeBasedBooking_beforeRecording ##############################

2018/04/30 08:17:04 UTC ############################## STARTED :  corner_US31724_TC1404_browse_bookedcatalog_manualbooking ##############################

 US31724: Enable Subscriber Browse for Scheduled Content via Control Plane

 TC1404: Browse booking list with only manual booking programs. Verify that the user can navigate to booking list by pressing page up/page down, arrow up/arrow down, arrow right/ arrow left, select key
Starting test corner_US31724_TC1404_browse_bookedcatalog_manualbooking
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']


### STEP1: Ingest 2 events of n minutes each with post time ################################################

{'services': { 502: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'tbrbrwz400_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'tbrbrwz400_2', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'tbrbrwz400_3', 'rating': 1}],
         'lineupLength': 12,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:12:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.8328
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

starttime for first event: 1525076520
starttime for second event: 1525076760
[('2018-04-30T08:22:00Z', '2018-04-30T08:26:00Z'), ('2018-04-30T08:26:00Z', '2018-04-30T08:30:00Z')]


### STEP2: Do the manual booking of both the events ###########################################################


PPS time based booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_3/bookings 
PPS booking is successful for the channel 502

PPS time based booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_3/bookings 
PPS booking is successful for the channel 502


### STEP3: Fetch the booking catalog and verify the BOOKED state for the booked events #############################################################

Verifying booking for First event
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_3/bookings
 
start wait time from func 155.0
Event is present in the Booked catalog
First event is present in booking catalog, verifying for second event
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_3/bookings
 
start wait time from func 395.0
Event is present in the Booked catalog
Second event is also present in booking catalog

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: All the events are present in Booking catalog

2018/04/30 08:19:45 UTC ############################## ENDED :  corner_US31724_TC1404_browse_bookedcatalog_manualbooking ##############################

2018/04/30 08:19:45 UTC ############################## STARTED :  corner_US31724_TC1405_seriesin_bookinglist ##############################
{'TC1405': ['US31724', '', 3]}

 US31724: UseCase: Enable Subscriber Browse for Scheduled Content via Control Plane

 TC1405: Browse booking list with only series booking programs. Navigation to booking program: page up/page down, arrow up/arrow down, arrow right/ arrow left, select key
### STEP1: Ingest a series of three episodes of two minutes duration and an event of two minutes duration . ############# 



{'services': { 502: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'serboolis93_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'serboolis93'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'serboolis93_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'serboolis93'},
                     { 'episodeNum': 3, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'serboolis93_1_3', 'rating': 1, 'seasonNum': 1, 'showID': 'serboolis93'},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'eveboolis698_1', 'rating': 1}],
         'lineupLength': 12,
         'message': ''}},
'shows': set(['serboolis93']),
'seasons': { 'serboolis93': { 1: set([1, 2, 3])}},
'totalLength': "00:12:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Starting test corner_US31724_TC1405_seriesin_bookinglist

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525076526000~1525083726000?lang=eng&serviceList=502&count=255&region=101&catalogueId=1
### STEP2: Perform Series booking #########




PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
Series Booking Successfull seriesId 1778012322 
### STEP3: Perform event  booking #########




PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings 
Event Booking Successfull  
### STEP4: Check the event is booked and present in the booked library #######



get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
Event booked successfully 
### STEP5: Check all the episodes of the series are booked successfully and its present in the booked library ###### 



get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
Content Ids from the booked library [u'programid://2147480276~programid://1016799703', u'programid://2147480277~programid://1016799704', u'programid://2147480279~programid://1016799705']
Content Ids from the grid response [u'programid://2147480279~programid://1016799705', u'programid://2147480277~programid://1016799704', u'programid://2147480276~programid://1016799703']
all booked programes are present in the booked library
### STEP6: Filter the booked library with series and check whether the event is not present their.##############



Content Ids of the episodes of series in  the booked library [u'programid://2147480276~programid://1016799703', u'programid://2147480277~programid://1016799704', u'programid://2147480279~programid://1016799705']
 Event is not in the filtered response

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase passed: Event is not in the filtered response

2018/04/30 08:22:41 UTC ############################## ENDED :  corner_US31724_TC1405_seriesin_bookinglist ##############################

2018/04/30 08:22:41 UTC ############################## STARTED :  corner_US31735_TC1288_seriesRecording_earlyStarTime ##############################
{'TC1288': ['US31735', '', 3]}

 US31721: UseCase: Schedule Series Recording

 TC1288: Book series recording with start time x minutes early and end on time. Verify that the episodes appear correctly in the booking list and in the recorded library when the episodes complete recording
Starting test corner_US31735_TC1288_seriesRecording_earlyStarTime
{'services': { 502: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 2, 'programID': 'generic_1', 'rating': 1},
                     { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 2, 'programID': 'guardsta40_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'guardsta40'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 2, 'programID': 'guardsta40_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'guardsta40'}],
         'lineupLength': 6,
         'message': ''}},
'shows': set(['guardsta40']),
'seasons': { 'guardsta40': { 1: set([1, 2])}},
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.4164
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################



### STEP1: Ingest a series of 2 episodes, 3 minutes each ##############################################################################################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525076701000~1525083901000?lang=eng&serviceList=502&count=255&region=101&catalogueId=1
ContentId dictionary from the grid response {u'programid://1299670869~programid://742039679': [1525076940000, 1525077060000, 120000], u'programid://1299670868~programid://742039680': [1525077060000, 1525077180000, 120000]}
ContentId list from the contentId dictionary [(u'programid://1299670869~programid://742039679', [1525076940000, 1525077060000, 120000]), (u'programid://1299670868~programid://742039680', [1525077060000, 1525077180000, 120000])]


### STEP2: set the start guard time to 2  ##########################################################################################################

List of all content ids for booking:  [u'programid://1299670869~programid://742039679', u'programid://1299670868~programid://742039680']

PPS booking is Doing for 
 householdId AUTO_3006_cornercase_set1_scripts_3  and its program id is programid://1299670869~programid://742039679


### STEP3: Book the series and verify the BOOKED state and startguard time value in catalog #########################################################################


PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_3/bookings 
PPS Booking completed successfully
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_3/bookings
 
All programs with the contentids [u'programid://1299670869~programid://742039679', u'programid://1299670868~programid://742039680'] is in BOOKED state

Details for:  programid://1299670869~programid://742039679
Start guard time:  00:02:00 , End guard time :  00:00:00
Startime, Duration 2018-04-30T08:29:00Z 00:02:00
Endtime from grid response 1525077060000
End time :  1525077060000 from booking catalog

Details for:  programid://1299670868~programid://742039680
Start guard time:  00:02:00 , End guard time :  00:00:00
Startime, Duration 2018-04-30T08:31:00Z 00:02:00
Endtime from grid response 1525077180000
End time :  1525077180000 from booking catalog
Booking is done with given start guard time and end time is also correct
Script wiill wait for  116.0 Seconds for program to start and  60 seconds for state change from Booked to recording


### STEP4: Record the series and verify the RECORDED state and startguard time value in catalog ##############################################################

get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_3/recordings
 
All Program with the contentid [u'programid://1299670869~programid://742039679'] is in RECORDING state
script will wait for  300.0  seconds for recording to complete
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_3/recordings
 
All Programs with the contentids [u'programid://1299670869~programid://742039679', u'programid://1299670868~programid://742039680'] is in RECORDED state
ActualProgramlengthinseconds, programlengthwithguardtime 246 240
ActualProgramlengthinseconds, programlengthwithguardtime 246 240
Earlyrecordingpasscounter 2
Verified the recording started early than the broadcast time
### Started VMR verification ###
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_3/recordings
 
Playback URI list : [u'?recId=b3eafcc7-9b99-4367-b332-2d44a92a6962', u'?recId=5ad3b155-1993-43b9-bc8f-db8b4382ca12']
URL to get contentid from recoring id : http://rr.cdvr.dcpt01.ciscocdvr.net:80/recordingInfo/b3eafcc7-9b99-4367-b332-2d44a92a6962?contentType=MPEG4&mode=playback&responseFormat=json
URL to get contentid from recoring id : http://rr.cdvr.dcpt01.ciscocdvr.net:80/recordingInfo/5ad3b155-1993-43b9-bc8f-db8b4382ca12?contentType=MPEG4&mode=playback&responseFormat=json
ContentId list : [u'54846f53-d5f0-490b-8061-8dec1865fbc5', u'd5ebda93-a053-401e-8f5e-f6093196b3cc']

URL to get the vmr response: http://192.168.21.66:9999/api/findxrid/54846f53-d5f0-490b-8061-8dec1865fbc5
JSON response : [{"XRID":"54846f53-d5f0-490b-8061-8dec1865fbc5","IRID":"38280596832678178","CopyType":"UNIQUE","ISID":"502","AccountID":"AUTO_3006_cornercase_set1_scripts_3","BatchID":1,"StartTime":"2018-04-30T08:27:00Z","EndTime":"2018-04-30T08:31:00Z","ScheduledTime":"2018-04-30T08:25:59.99Z","ActualStartTime":"2018-04-30T08:26:57.377565Z","ActualEndTime":"2018-04-30T08:31:03.623565Z","StreamID":"502","AdZone":"0","StationID":"502","A8UpdateURL":"http://rr.cdvr.dcpt01.ciscocdvr.net:80/a8/update/PRIMETIME_RECORDER","ErasedTime":"0001-01-01T00:00:00Z","ErrorCode":0,"Status":"COMPLETE"}]
Verified the status is complete in VMR Response
[{"XRID":"54846f53-d5f0-490b-8061-8dec1865fbc5","IRID":"38280596832678178","CopyType":"UNIQUE","ISID":"502","AccountID":"AUTO_3006_cornercase_set1_scripts_3","BatchID":1,"StartTime":"2018-04-30T08:27:00Z","EndTime":"2018-04-30T08:31:00Z","ScheduledTime":"2018-04-30T08:25:59.99Z","ActualStartTime":"2018-04-30T08:26:57.377565Z","ActualEndTime":"2018-04-30T08:31:03.623565Z","StreamID":"502","AdZone":"0","StationID":"502","A8UpdateURL":"http://rr.cdvr.dcpt01.ciscocdvr.net:80/a8/update/PRIMETIME_RECORDER","ErasedTime":"0001-01-01T00:00:00Z","ErrorCode":0,"Status":"COMPLETE"}]
2018-04-30T08:26:57.377565Z 2018-04-30T08:31:03.623565Z
Actual Start time : 1525076817  Actual End Time : 1525077063
Booking Start Time : 1525076940  Booking end time : 1525077060
Verified the Actual Starttime started earlier than the bookingstarttime in vmr response

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: Recording is done with given start guard time and verified that end time is correct

2018/04/30 08:34:50 UTC ############################## ENDED :  corner_US31735_TC1288_seriesRecording_earlyStarTime ##############################

2018/04/30 08:34:50 UTC ############################## STARTED :  corner_US31735_TC1290_seriesRecording_lateEndtime ##############################
US31721: UseCase: Schedule Series Recording
TC1290: Book series recording with start on time and end x minutes late. Verify that the episodes with start on time and end x minutes late in the booking list and the episodes with start on time and end x minutes late will be shown in the recorded library when the episodes complete recording
Starting test corner_US31735_TC1290_seriesRecording_lateEndtime


### STEP1: Ingest a series of 2 episodes, 3 minutes each #####################################################

{'services': { 502: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 2, 'programID': 'serlatrec19_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'serlatrec19'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 2, 'programID': 'serlatrec19_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'serlatrec19'},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 2, 'programID': 'generic_1', 'rating': 1}],
         'lineupLength': 6,
         'message': ''}},
'shows': set(['serlatrec19']),
'seasons': { 'serlatrec19': { 1: set([1, 2])}},
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.4164
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525077431000~1525084631000?lang=eng&serviceList=502&count=255&region=101&catalogueId=1
ContentId dictionary from the grid response {u'programid://1839601560~programid://464015253': [1525077600000, 1525077720000, 120000], u'programid://1839601559~programid://464015254': [1525077480000, 1525077600000, 120000]}
Content id details of event in sorted manner:  [(u'programid://1839601559~programid://464015254', [1525077480000, 1525077600000, 120000]), (u'programid://1839601560~programid://464015253', [1525077600000, 1525077720000, 120000])]
Starttimelist [1525077480000, 1525077600000]
Endtimelist [1525077600000, 1525077720000]
### STEP2: set the end guard time to 2 ########################################################################################

List of all content ids for booking:  [u'programid://1839601559~programid://464015254', u'programid://1839601560~programid://464015253']

PPS booking is Doing for 
 householdId AUTO_3006_cornercase_set1_scripts_1  and its program id is programid://1839601559~programid://464015254
### STEP3: Book the series and verify the BOOKED state and endguard time value in catalog ########################################


PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookings 
PPS Booking is successful for the series contentId programid://1839601559~programid://464015254
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookings
 
All programs with the contentids [u'programid://1839601559~programid://464015254', u'programid://1839601560~programid://464015253'] is in BOOKED state

Details for:  programid://1839601559~programid://464015254
Start Guard time:  00:00:00  End guard time :  00:02:00
Startime from Grid Response 1525077480000
start time :  1525077480000  from booking catalog

Details for:  programid://1839601560~programid://464015253
Start Guard time:  00:00:00  End guard time :  00:02:00
Startime from Grid Response 1525077600000
start time :  1525077600000  from booking catalog
Booking is done with given end guard time and start time is also correct
Script will wait for  44.0 Seconds for program to start and  60 seconds for state change from Booked to recording
### STEP4: Record the series and verify the RECORDED state and endguard time value in catalog ################################################

get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/recordings
 
All Program with the contentid [u'programid://1839601559~programid://464015254'] is in RECORDING state
script will wait for  300.0  seconds for recording to complete
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/recordings
 
All Programs with the contentids [u'programid://1839601559~programid://464015254', u'programid://1839601560~programid://464015253'] is in RECORDED state
Actualprogramlength, programlengthwithguardtime 246 240
### Started VMR verification ###
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/recordings
 
Playback URI list : [u'?recId=95e6632c-caa4-4449-a56e-83b8b47335dc', u'?recId=a8e67e52-f4de-4b09-a70b-0927aeeb1af0']
URL to get contentid from recoring id : http://rr.cdvr.dcpt01.ciscocdvr.net:80/recordingInfo/95e6632c-caa4-4449-a56e-83b8b47335dc?contentType=MPEG4&mode=playback&responseFormat=json
URL to get contentid from recoring id : http://rr.cdvr.dcpt01.ciscocdvr.net:80/recordingInfo/a8e67e52-f4de-4b09-a70b-0927aeeb1af0?contentType=MPEG4&mode=playback&responseFormat=json
ContentId list : [u'7d399c0c-f375-43e5-b991-c373b23b1b8a', u'54520016-f974-4155-807a-32f5763466a5']

URL to get the vmr response: http://192.168.21.66:9999/api/findxrid/7d399c0c-f375-43e5-b991-c373b23b1b8a
JSON response : [{"XRID":"7d399c0c-f375-43e5-b991-c373b23b1b8a","IRID":"37154696925833216","CopyType":"UNIQUE","ISID":"502","AccountID":"AUTO_3006_cornercase_set1_scripts_1","BatchID":1,"StartTime":"2018-04-30T08:38:00Z","EndTime":"2018-04-30T08:42:00Z","ScheduledTime":"2018-04-30T08:37:11.62Z","ActualStartTime":"2018-04-30T08:37:58.037565Z","ActualEndTime":"2018-04-30T08:42:04.283565Z","StreamID":"502","AdZone":"0","StationID":"502","A8UpdateURL":"http://rr.cdvr.dcpt01.ciscocdvr.net:80/a8/update/PRIMETIME_RECORDER","ErasedTime":"0001-01-01T00:00:00Z","ErrorCode":0,"Status":"COMPLETE"}]
Verified the status is complete in VMR Response
Actualstarttime, Actualendtime 2018-04-30T08:37:58.037565Z 2018-04-30T08:42:04.283565Z
Actualstarttimeinepoch, Actualendtimeinepoch 1525077478 1525077724
Bookingstarttimeinepoch, Bookingendtimeinepoch 1525077480 1525077600
Verified the Actual Starttime started on time and ended late than the bookingendtime in vmr response
Actualprogramlength, programlengthwithguardtime 246 240
### Started VMR verification ###
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/recordings
 
Playback URI list : [u'?recId=95e6632c-caa4-4449-a56e-83b8b47335dc', u'?recId=a8e67e52-f4de-4b09-a70b-0927aeeb1af0']
URL to get contentid from recoring id : http://rr.cdvr.dcpt01.ciscocdvr.net:80/recordingInfo/95e6632c-caa4-4449-a56e-83b8b47335dc?contentType=MPEG4&mode=playback&responseFormat=json
URL to get contentid from recoring id : http://rr.cdvr.dcpt01.ciscocdvr.net:80/recordingInfo/a8e67e52-f4de-4b09-a70b-0927aeeb1af0?contentType=MPEG4&mode=playback&responseFormat=json
ContentId list : [u'7d399c0c-f375-43e5-b991-c373b23b1b8a', u'54520016-f974-4155-807a-32f5763466a5']

URL to get the vmr response: http://192.168.21.66:9999/api/findxrid/7d399c0c-f375-43e5-b991-c373b23b1b8a
JSON response : [{"XRID":"7d399c0c-f375-43e5-b991-c373b23b1b8a","IRID":"37154696925833216","CopyType":"UNIQUE","ISID":"502","AccountID":"AUTO_3006_cornercase_set1_scripts_1","BatchID":1,"StartTime":"2018-04-30T08:38:00Z","EndTime":"2018-04-30T08:42:00Z","ScheduledTime":"2018-04-30T08:37:11.62Z","ActualStartTime":"2018-04-30T08:37:58.037565Z","ActualEndTime":"2018-04-30T08:42:04.283565Z","StreamID":"502","AdZone":"0","StationID":"502","A8UpdateURL":"http://rr.cdvr.dcpt01.ciscocdvr.net:80/a8/update/PRIMETIME_RECORDER","ErasedTime":"0001-01-01T00:00:00Z","ErrorCode":0,"Status":"COMPLETE"}]
Verified the status is complete in VMR Response
Actualstarttime, Actualendtime 2018-04-30T08:37:58.037565Z 2018-04-30T08:42:04.283565Z
Actualstarttimeinepoch, Actualendtimeinepoch 1525077478 1525077724
Bookingstarttimeinepoch, Bookingendtimeinepoch 1525077480 1525077600
Verified the Actual Starttime started on time and ended late than the bookingendtime in vmr response
Laterecordingcounter 2
Verified the recording happened with late end time

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: Recording is done with given end guard time and verified that start time is correct

2018/04/30 08:45:51 UTC ############################## ENDED :  corner_US31735_TC1290_seriesRecording_lateEndtime ##############################

2018/04/30 08:45:51 UTC ############################## STARTED :  corner_US31735_TC1292_seriesRecording_earlyStart_lateEnd ##############################
{'TC1292': ['US31735', '', 3]}

 US31721: UseCase: Schedule Series Recording

 TC1292: Book series recording with start x minutes early and end x minutes late
Starting test corner_US31735_TC1292_seriesRecording_earlyStart_lateEnd
Final list :[('cmdc', 'pps.cdvr.dcpt01.ciscocdvr.net', 'upm.cdvr.dcpt01.ciscocdvr.net')]


### STEP1: Ingest a series of 2 episodes, 2 minutes each #################################################################

{'services': { 502: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 2, 'programID': 'generic_1', 'rating': 1},
                     { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 2, 'programID': 'serearly19_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'serearly19'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 2, 'programID': 'serearly19_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'serearly19'},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 2, 'programID': 'generic_1', 'rating': 1}],
         'lineupLength': 8,
         'message': ''}},
'shows': set(['serearly19']),
'seasons': { 'serearly19': { 1: set([1, 2])}},
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.5552
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525078092000~1525085292000?lang=eng&serviceList=502&count=255&region=101&catalogueId=1
ContentId dictionary from the grid response {u'programid://1993775367~programid://1998034135': [1525078320000, 1525078440000, 120000], u'programid://1993775366~programid://1998034132': [1525078440000, 1525078560000, 120000]}
Content id details of event in sorted manner:  [(u'programid://1993775367~programid://1998034135', [1525078320000, 1525078440000, 120000]), (u'programid://1993775366~programid://1998034132', [1525078440000, 1525078560000, 120000])]


### STEP2: set the end guard time and start guard time to 2 ####################################################

List of all content ids for booking:  [u'programid://1993775367~programid://1998034135', u'programid://1993775366~programid://1998034132']


### STEP3: Book the series and verify the BOOKED state and endguard time and start guard time value in catalog ####################################


PPS booking is Doing for 
 householdId AUTO_3006_cornercase_set1_scripts_1 and its program id is programid://1993775367~programid://1998034135

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookings 
PPS Booking completed successfully
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookings
 
All programs with the contentids [u'programid://1993775367~programid://1998034135', u'programid://1993775366~programid://1998034132'] is in BOOKED state
Start guard time for  programid://1993775367~programid://1998034135  :  00:02:00 , End guard time :  00:02:00 from booking catalog
Start guard time for  programid://1993775366~programid://1998034132  :  00:02:00 , End guard time :  00:02:00 from booking catalog
Booking is done with given end and start guard time
Script will wait for  106.0 Seconds for program to start and  60 seconds for state change from Booked to recording


### STEP4: Record the series and verify the RECORDED state and endguard time and start guard time value in catalog #########################################

get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/recordings
 
All Program with the contentid [u'programid://1993775367~programid://1998034135'] is in RECORDING state
script will wait for  420.0  seconds for recording to complete
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/recordings
 
All Programs with the contentids [u'programid://1993775367~programid://1998034135', u'programid://1993775366~programid://1998034132'] is in RECORDED state
Programdurationinseconds, programlengthwithguardtime 367 360
Length of the program is as expected so checking vmr response to confirm
### Started VMR verification ###
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/recordings
 
Playback URI list : [u'?recId=94ad8667-43d1-4b36-bb3a-3ad762d4a091', u'?recId=b9b41bf7-5f8d-4489-b7e0-ab24ff05492f']
URL to get contentid from recoring id : http://rr.cdvr.dcpt01.ciscocdvr.net:80/recordingInfo/94ad8667-43d1-4b36-bb3a-3ad762d4a091?contentType=MPEG4&mode=playback&responseFormat=json
URL to get contentid from recoring id : http://rr.cdvr.dcpt01.ciscocdvr.net:80/recordingInfo/b9b41bf7-5f8d-4489-b7e0-ab24ff05492f?contentType=MPEG4&mode=playback&responseFormat=json
ContentId list : [u'b77065f7-21c0-4982-b8a8-2f96613952a3', u'14530f60-4bc0-4a29-9fe4-0984e8fe9044']

URL to get the vmr response: http://192.168.21.66:9999/api/findxrid/b77065f7-21c0-4982-b8a8-2f96613952a3
JSON response : [{"XRID":"b77065f7-21c0-4982-b8a8-2f96613952a3","IRID":"38280596832678552","CopyType":"UNIQUE","ISID":"502","AccountID":"AUTO_3006_cornercase_set1_scripts_1","BatchID":1,"StartTime":"2018-04-30T08:50:00Z","EndTime":"2018-04-30T08:56:00Z","ScheduledTime":"2018-04-30T08:49:00.047Z","ActualStartTime":"2018-04-30T08:49:58.757565Z","ActualEndTime":"2018-04-30T08:56:05.123565Z","StreamID":"502","AdZone":"0","StationID":"502","A8UpdateURL":"http://rr.cdvr.dcpt01.ciscocdvr.net:80/a8/update/PRIMETIME_RECORDER","ErasedTime":"0001-01-01T00:00:00Z","ErrorCode":0,"Status":"COMPLETE"}]
Verified the status is complete in VMR Response
Actualstarttime, Actualendtime 2018-04-30T08:49:58.757565Z 2018-04-30T08:56:05.123565Z
Actualstarttimeinepoch, Actualendtimeinepoch 1525078198 1525078565
Bookingstarttimeinepoch, Bookingendtimeinepoch 1525078320 1525078440
Verified the Actual Starttime started earlier and end later than the bookingstarttime and bookingendtimein vmr response
Programdurationinseconds, programlengthwithguardtime 367 360
Length of the program is as expected so checking vmr response to confirm
### Started VMR verification ###
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/recordings
 
Playback URI list : [u'?recId=94ad8667-43d1-4b36-bb3a-3ad762d4a091', u'?recId=b9b41bf7-5f8d-4489-b7e0-ab24ff05492f']
URL to get contentid from recoring id : http://rr.cdvr.dcpt01.ciscocdvr.net:80/recordingInfo/94ad8667-43d1-4b36-bb3a-3ad762d4a091?contentType=MPEG4&mode=playback&responseFormat=json
URL to get contentid from recoring id : http://rr.cdvr.dcpt01.ciscocdvr.net:80/recordingInfo/b9b41bf7-5f8d-4489-b7e0-ab24ff05492f?contentType=MPEG4&mode=playback&responseFormat=json
ContentId list : [u'b77065f7-21c0-4982-b8a8-2f96613952a3', u'14530f60-4bc0-4a29-9fe4-0984e8fe9044']

URL to get the vmr response: http://192.168.21.66:9999/api/findxrid/b77065f7-21c0-4982-b8a8-2f96613952a3
JSON response : [{"XRID":"b77065f7-21c0-4982-b8a8-2f96613952a3","IRID":"38280596832678552","CopyType":"UNIQUE","ISID":"502","AccountID":"AUTO_3006_cornercase_set1_scripts_1","BatchID":1,"StartTime":"2018-04-30T08:50:00Z","EndTime":"2018-04-30T08:56:00Z","ScheduledTime":"2018-04-30T08:49:00.047Z","ActualStartTime":"2018-04-30T08:49:58.757565Z","ActualEndTime":"2018-04-30T08:56:05.123565Z","StreamID":"502","AdZone":"0","StationID":"502","A8UpdateURL":"http://rr.cdvr.dcpt01.ciscocdvr.net:80/a8/update/PRIMETIME_RECORDER","ErasedTime":"0001-01-01T00:00:00Z","ErrorCode":0,"Status":"COMPLETE"}]
Verified the status is complete in VMR Response
Actualstarttime, Actualendtime 2018-04-30T08:49:58.757565Z 2018-04-30T08:56:05.123565Z
Actualstarttimeinepoch, Actualendtimeinepoch 1525078198 1525078565
Bookingstarttimeinepoch, Bookingendtimeinepoch 1525078320 1525078440
Verified the Actual Starttime started earlier and end later than the bookingstarttime and bookingendtimein vmr response
Earlylaterecordingcounter 2
Verified the recording with early start and late end time

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed:Recording is done with given end and start guard time 

2018/04/30 08:59:51 UTC ############################## ENDED :  corner_US31735_TC1292_seriesRecording_earlyStart_lateEnd ##############################

2018/04/30 08:59:51 UTC ############################## STARTED :  corner_US31735_TC1296_FailSeriesBookingRequest_storageQuotaConflict ##############################
{'TC1296': ['US31735', '', 3]}

US31735: UseCase: Schedule Series Recording

TC1296: book series recordings, storage quota exceeds, booking series fails. Verify that error message displays and Vall the scheduled episodes with default setting are not scheduled in the booking list
Starting test corner_US31735_TC1296_FailSeriesBookingRequest_storageQuotaConflict


### STEP1: Ingest a series of 2 episodes, 1 minute each ##################################################################

{'services': { 502: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'serquotcon40_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'serquotcon40'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'serquotcon40_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'serquotcon40'}],
         'lineupLength': 8,
         'message': ''}},
'shows': set(['serquotcon40']),
'seasons': { 'serquotcon40': { 1: set([1, 2])}},
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.5552
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################



### STEP2: Fetch the original value of storage space, save it to a variable ##############################################

Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Retrieve Total diskQuota fetched  via URL :  http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_0/diskQuota
Diskquota for the household is 108000
original  diskquota is 108000
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525078932000~1525086132000?lang=eng&serviceList=502&count=255&region=101&catalogueId=1


### STEP3: Fetch the grid and modify storage space such that booked program will exceed the storage space ##############################

Content id details of event in sorted manner:  [(u'programid://2147480297~programid://1485533818', [1525078980000, 1525079220000, 240000]), (u'programid://2147480296~programid://1485533819', [1525079220000, 1525079460000, 240000])]
List of all content ids for booking:  [u'programid://2147480297~programid://1485533818', u'programid://2147480296~programid://1485533819']
New storage value to be updated:  432 minutes
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
DiskQuota is modified  via URL :  http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_0/diskQuota
Storage quota was updated succesfully
### STEP4: Try booking the series, which should fail due to storage space conflict ######################################


PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase passed: Booking done for the event 

2018/04/30 09:02:33 UTC ############################## ENDED :  corner_US31735_TC1296_FailSeriesBookingRequest_storageQuotaConflict ##############################

2018/04/30 09:02:33 UTC ############################## STARTED :  corner_US31739_TC1361_Playback_Recordedfutureprogram ##############################

 US31739: UseCase: Schedule Event based Recording on Control Plane

 TC1361: Record future program from Search and playback the content after the recording completes
Starting test corner_US31739_TC1361_Playback_Recordedfutureprogram
### STEP1: Ingest 1 Event of 3 Minutes duration each to the CI Host with the post time ########### 
 

{'services': { 502: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'futprsea397_1', 'rating': 1}], 'lineupLength': 4, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:04:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.2776
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

### STEP2: Fetch the Grid Request and do the booking for the future program ############## 
 

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525079093000~1525086293000?lang=eng&serviceList=502&count=255&region=101&catalogueId=1
ContentId dictionary from the Grid Response
{u'programid://1231318159~programid://1764102442': [1525079160000, 1525079400000, 240000, u'futprsea397_1']}
ContentId list after Sorting
[(u'programid://1231318159~programid://1764102442', 1525079160000, 1525079400000, 240000)]

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings 
PPS Booking is successful for the Event contentId programid://1231318159~programid://1764102442
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
All programs with the contentids [u'programid://1231318159~programid://1764102442'] is in BOOKED state
### STEP3: Wait till the Event changes from Booked to Recording and Verify ######### 
 

Script wait till till 1.08333333333 minutes to start the recording
Script will wait for 1 minutes for the state change from Booked to Recording
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/recordings
 
Recording Catalog is empty
Recording catalog is empty

#################### DEBUG STARTED ####################

Script Fetching the Household Booked/Recorded Catalog at 2018-04-30 09:07:01.060330
get all Catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog
 
Household Booked/Recorded Catalog Response:
[
    {
        "pvr": "nPVR", 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set1_scripts_0", 
        "channelId": "502", 
        "isSynchronized": true, 
        "duration": "00:04:00", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T09:06:00Z", 
        "content": {
            "instanceId": "programid://1764102442", 
            "broadcastDateTime": 1525079160000, 
            "seasonPremiere": false, 
            "locator": "{NWY4OThiMDllNDkzOGRmYjBhZDE=,java.lang.String,NORMAL}[+]{hashKey,NORMAL}", 
            "erotic": false, 
            "audioType": "stereo", 
            "duration": 240000, 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": false, 
            "macrovision": false, 
            "id": "programid://1231318159", 
            "mixSource": false, 
            "externalKey": "futprsea397_1_502_tk04300910", 
            "audioDescription": false, 
            "restartAvailable": false, 
            "title": "futprsea397_1", 
            "allOfferIdList": [
                2
            ], 
            "mixContentId": false, 
            "contentNdsDrmAttributes": {
                "isBto": false, 
                "lastOfferEndDateTime": 1765963847000, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "rentalDuration": 2147483647, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isExtendedRental": false, 
                "isIppv": false, 
                "isPar": false, 
                "isOppv": false
            }, 
            "source": "ltv", 
            "live": false, 
            "subtitlesHardOfHearing": false, 
            "type": "instance", 
            "channel": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
            "videoFormat": "sd", 
            "wideScreen": false, 
            "isPurchasable": true, 
            "hdcp": false, 
            "serviceId": "502", 
            "adult": false, 
            "sortTitle": "futprsea397_1", 
            "endAvailability": 1525079400000, 
            "hasChapters": false, 
            "cdvrAvailable": true, 
            "seasonFinale": false, 
            "shortSynopsis": "futprsea397_1 - synopsis", 
            "synopsis": "futprsea397_1 - synopsis", 
            "broadcaster": "VGE", 
            "serviceEquivalenceKey": "502", 
            "ict": false
        }, 
        "title": "futprsea397_1", 
        "recurrence": "NONE", 
        "state": "BOOKED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "37954", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{502,java.lang.Integer,NORMAL}-|-{MmFhMTlkZDMwOWM2ZTA4NWVkNDY=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "502", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 502, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 502", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 502", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "502", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "502", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_11759~PPS_INSTANCE_37954", 
        "startTime": "2018-04-30T09:06:00Z", 
        "bookingDuration": "00:04:00", 
        "notificationHandles": [
            "5ae6dc35e9c28320e241998c"
        ], 
        "created": "2018-04-30T09:04:53Z", 
        "lastModified": "2018-04-30T09:05:00Z", 
        "contentPlayUri": "?recId=37d8b790-af34-41ee-8b2c-16b42fa13533", 
        "uri": "/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae6dc35e9c28320e241998c", 
        "scheduleInstance": "programid://1231318159~programid://1764102442", 
        "keep": false, 
        "contentId": "PPS_CONTENT_11759~PPS_INSTANCE_37954"
    }
]
Script Fetching Household Failed Recording Catalog at 2018-04-30 09:07:01.117239
get all failed recording catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog?filter:state=FAILED
 
Failed Recording Catalog is empty

#################### DEBUG ENDED   ####################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Failed: Unable to Verify Recording Catalog
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX   ^ ^ ^ ^ ^   XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX   E R R O R   XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

2018/04/30 09:07:21 UTC ############################## ENDED :  corner_US31739_TC1361_Playback_Recordedfutureprogram ##############################

2018/04/30 09:07:21 UTC ############################## STARTED :  corner_US31739_TC1365_stoprecordingafter10minutes ##############################
US31739: UseCase: Schedule Event based Recording on Control Plane
TC1365: Record future program from EPG grid, start on time and stop 10 minutes late
Starting test corner_US31739_TC1365_stoprecordingafter10minutes
### STEP1: Verify the recording mode and proceed further if it is unique copy environment, else return Unsupported to TIMS and 2 to EC Job Run######### 
 

Testscript proceeds further since the Environment is not in Common Copy
### STEP2: Ingest an Event of n Minutes on one channel with post time more than x Minutes to the CI Host######### 
 

{'services': { 502: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'enguar360_1', 'rating': 1}], 'lineupLength': 4, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:04:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.2776
### STEP3: Fetch the Grid Request and Do the PPS Booking with the EndGuardtime of 10 Minutes######## 
 

Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525079381000~1525086581000?lang=eng&serviceList=502&count=255&region=101&catalogueId=1
ContentId Dictionary from the Grid Response
{u'programid://2147480300~programid://2147482841': [1525079460000, 1525079700000, 240000, u'enguar360_1']}
ContentId List after Sorting
[(u'programid://2147480300~programid://2147482841', 1525079460000, 1525079700000, 240000)]

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_3/bookings 
PPS Booking is successful for the event contentId programid://2147480300~programid://2147482841
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_3/bookings
 
All programs with the contentids [u'programid://2147480300~programid://2147482841'] is in BOOKED state
### STEP4: Verify the Booked Event in the library  has the StartGuardTime of 0 Minutes and EndGuardTime of 10 Minutes####### 
 

startGuardTime is set to default value in the Booked Catalog and endGuardTime is set successfully
Waiting for 1.26666666667 minutes to check the Recording state
### STEP5: Verify the Recording starts on time and proceed further########### 
 

get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_3/recordings
 
All Program with the contentid [u'programid://2147480300~programid://2147482841'] is in RECORDING state
Recording Started on time successfully
Program takes 1525079700000(in epoch) to complete with actual time
Script will wait for 3.0 and adding 10 minutes to check the Recording still continues after actual end time
### STEP6: Fetch the Recorded Catalog after 10 Minutes and Verify the Event is in Recording State and wait till it completes recording############# 
 

get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_3/recordings
 
All Program with the contentid [u'programid://2147480300~programid://2147482841'] is in RECORDING state
Script will add few minutes to wait for the state change from Recording to Recorded
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_3/recordings
 
All Programs with the contentids [u'programid://2147480300~programid://2147482841'] is in RECORDED state
### STEP7: Playback the Recorded Event and Verify, cleanup the Event and update the Results################# 
 

URL to get the RM response : http://rr.cdvr.dcpt01.ciscocdvr.net:80/recordingInfo/a63d43cc-c871-429d-aa22-12a8aeed1497?contentType=MPEG4&mode=playback&responseFormat=json
Download the manifest file viahttp://cdvr.pe1.ciscocdvr.net:80/cdvr/97a20bf6-658e-488a-ab85-7862b031f0fc/97a20bf6-658e-488a-ab85-7862b031f0fc.m3u8
Manifest for the Recorded Content
#EXTM3U
#EXT-X-MEDIA:TYPE=SUBTITLES,GROUP-ID="subs",FORCED=NO,AUTOSELECT=YES,LANGUAGE="en",NAME="cc1",URI="subtitles_cc1_5000_smptett_frag_cc1_CEA-608_.m3u8"
#EXT-X-STREAM-INF:BANDWIDTH=203600,CODECS="avc1.4D400D",RESOLUTION=320x240,FRAME-RATE=29.970,SUBTITLES="subs"
5004_video_seg_auto.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=510000,CODECS="avc1.4D400D",RESOLUTION=320x240,FRAME-RATE=29.970,SUBTITLES="subs"
5003_video_seg_auto.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=664400,CODECS="avc1.4D4016",RESOLUTION=480x360,FRAME-RATE=29.970,SUBTITLES="subs"
5002_video_seg_auto.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=1073200,CODECS="avc1.4D4016",RESOLUTION=480x360,FRAME-RATE=29.970,SUBTITLES="subs"
5001_video_seg_auto.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=1481600,CODECS="avc1.4D4016",RESOLUTION=480x360,FRAME-RATE=29.970,SUBTITLES="subs"
5000_video_seg_auto.m3u8
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=203600,CODECS="avc1.4D400D",RESOLUTION=320x240,URI="iframe_5004_i-frame.m3u8"
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=510000,CODECS="avc1.4D400D",RESOLUTION=320x240,URI="iframe_5003_i-frame.m3u8"
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=664400,CODECS="avc1.4D4016",RESOLUTION=480x360,URI="iframe_5002_i-frame.m3u8"
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=1073200,CODECS="avc1.4D4016",RESOLUTION=480x360,URI="iframe_5001_i-frame.m3u8"
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=1481600,CODECS="avc1.4D4016",RESOLUTION=480x360,URI="iframe_5000_i-frame.m3u8"

Manifest file for the recorded video saved to /home/centos/cdvr_crnrset1/corner_US31739_TC1365_stoprecordingafter10minutes0_enguar360_1_manifest_20180430-092626.txt
Download the Video Sample viahttp://cdvr.pe1.ciscocdvr.net:80/cdvr/97a20bf6-658e-488a-ab85-7862b031f0fc/5004_video_seg_auto_dLMfBOz4QyK_SN5aBAn1jw/53103751701.ts
Video Sample File Downloaded at /home/centos/cdvr_crnrset1/cdvr_sanity_tests/scripts/cornercase_scripts/cornercase_set1_scripts/corner_US31739_TC1365_stoprecordingafter10minutes0_enguar360_1_file__20180430-092628.ts
Video Sample saved in the same folder with the name corner_US31739_TC1365_stoprecordingafter10minutes0_enguar360_1_file__20180430-092628.ts with the size of 148520 bytes

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: Event recorded and Played back successfully

2018/04/30 09:26:48 UTC ############################## ENDED :  corner_US31739_TC1365_stoprecordingafter10minutes ##############################

2018/04/30 09:26:48 UTC ############################## STARTED :  corner_US31739_TC1366_start3minutesearlyandstopafter2minutes ##############################
US31739: UseCase: Schedule Event based Recording on Control Plane
TC1366: Record future program from EPG grid, start 3 minutes early and stop 2 minutes late
Starting test corner_US31739_TC1366_start3minutesearlyandstopafter2minutes


### STEP1: Verify the recording mode and proceed further if it is unique copy environment, else return Unsupported to TIMS and 2 to EC Job Run#########



### STEP2: Ingest an Event of n Minutes on one channel with post time more than x Minutes to the CI Host#########

{'services': { 502: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 2, 'programID': 'generic_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 2, 'programID': 'starengua360_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 2, 'programID': 'generic_1', 'rating': 1}],
         'lineupLength': 6,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.4164


### STEP3: Fetch the Grid Request and Do the PPS Booking with the StartGuardtime of 3 Minutes and EndGuardtime of 2 Minutes########

Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525080549000~1525087749000?lang=eng&serviceList=502&count=255&region=101&catalogueId=1
ContentId Dictionary from the Grid Response
{u'programid://1745580955~programid://1328514818': [1525080840000, 1525080960000, 120000, u'starengua360_1']}
Content Id list which has broadcasttime greater than 5 minutes of current time:
[(u'programid://1745580955~programid://1328514818', [1525080840000, 1525080960000, 120000, u'starengua360_1'])]

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_3/bookings 
PPS Booking is successful for the event contentId programid://1745580955~programid://1328514818
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_3/bookings
 
All programs with the contentids [u'programid://1745580955~programid://1328514818'] is in BOOKED state


### STEP4: Verify the Booked Event in the library  has the StartGuardTime of 2 Minutes and EndGuardTime of 2 Minutes#######

startGuardTime and endGuardTime in the Booked Catalog is set successfully
Startime, Duration 1525080840000 00:02:00
Waiting for 2.81666666667 minutes to check the Recording state


### STEP5: Verify the Recording starts earlier and proceed further###########

get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_3/recordings
 
All Program with the contentid [u'programid://1745580955~programid://1328514818'] is in RECORDING state
Recording Started earlier than the actual time successfully
Program takes 1525080960000(in epoch) to complete with actual time
Script will wait for 3.0 and adding 2 minutes to check the Recording still continues after actual end time


### STEP6: Fetch the Recorded Catalog after 2 Minutes and Verify the Event is in Recording State and wait till it completes recording#############

get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_3/recordings
 
All Program with the contentid [u'programid://1745580955~programid://1328514818'] is in RECORDING state
Script will add few minutes to wait for the state change from Recording to Recorded
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_3/recordings
 
All Programs with the contentids [u'programid://1745580955~programid://1328514818'] is in RECORDED state
Actualprogramlength, programlengthwithguardtime 366 360
### Started VMR verification ###
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_3/recordings
 
Playback URI list : [u'?recId=92e3c188-9380-42cd-b219-2be54bcd7057']
URL to get contentid from recoring id : http://rr.cdvr.dcpt01.ciscocdvr.net:80/recordingInfo/92e3c188-9380-42cd-b219-2be54bcd7057?contentType=MPEG4&mode=playback&responseFormat=json
ContentId list : [u'df989748-2692-4a8c-9de6-646ebc3b0f3b']

URL to get the vmr response: http://192.168.21.66:9999/api/findxrid/df989748-2692-4a8c-9de6-646ebc3b0f3b
JSON response : [{"XRID":"df989748-2692-4a8c-9de6-646ebc3b0f3b","IRID":"37154696925833386","CopyType":"UNIQUE","ISID":"502","AccountID":"AUTO_3006_cornercase_set1_scripts_3","BatchID":1,"StartTime":"2018-04-30T09:32:00Z","EndTime":"2018-04-30T09:38:00Z","ScheduledTime":"2018-04-30T09:30:00Z","ActualStartTime":"2018-04-30T09:31:55.271565Z","ActualEndTime":"2018-04-30T09:38:01.637565Z","StreamID":"502","AdZone":"0","StationID":"502","A8UpdateURL":"http://rr.cdvr.dcpt01.ciscocdvr.net:80/a8/update/PRIMETIME_RECORDER","ErasedTime":"0001-01-01T00:00:00Z","ErrorCode":0,"Status":"COMPLETE"}]
Verified the status is complete in VMR Response
Actualstarttime, Actualendtime 2018-04-30T09:31:55.271565Z 2018-04-30T09:38:01.637565Z
Actualstarttimeinepoch, Actualendtimeinepoch 1525080715000 1525081081000
Bookingstarttimeinepoch, Bookingendtimeinepoch 1525080840000 1525080960000
Verified the Actual Starttime started earlier than the bookingstarttime and ending later in vmr response


### STEP7: Playback the Recorded Event and Verify, cleanup the Event and update the Results#################

URL to get the RM response : http://rr.cdvr.dcpt01.ciscocdvr.net:80/recordingInfo/92e3c188-9380-42cd-b219-2be54bcd7057?contentType=MPEG4&mode=playback&responseFormat=json
Download the manifest file viahttp://cdvr.pe1.ciscocdvr.net:80/cdvr/df989748-2692-4a8c-9de6-646ebc3b0f3b/df989748-2692-4a8c-9de6-646ebc3b0f3b.m3u8
Manifest for the Recorded Content
#EXTM3U
#EXT-X-MEDIA:TYPE=SUBTITLES,GROUP-ID="subs",FORCED=NO,AUTOSELECT=YES,LANGUAGE="en",NAME="cc1",URI="subtitles_cc1_5000_smptett_frag_cc1_CEA-608_.m3u8"
#EXT-X-STREAM-INF:BANDWIDTH=203600,CODECS="avc1.4D400D",RESOLUTION=320x240,FRAME-RATE=29.970,SUBTITLES="subs"
5004_video_seg_auto.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=510000,CODECS="avc1.4D400D",RESOLUTION=320x240,FRAME-RATE=29.970,SUBTITLES="subs"
5003_video_seg_auto.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=664400,CODECS="avc1.4D4016",RESOLUTION=480x360,FRAME-RATE=29.970,SUBTITLES="subs"
5002_video_seg_auto.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=1073200,CODECS="avc1.4D4016",RESOLUTION=480x360,FRAME-RATE=29.970,SUBTITLES="subs"
5001_video_seg_auto.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=1481600,CODECS="avc1.4D4016",RESOLUTION=480x360,FRAME-RATE=29.970,SUBTITLES="subs"
5000_video_seg_auto.m3u8
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=203600,CODECS="avc1.4D400D",RESOLUTION=320x240,URI="iframe_5004_i-frame.m3u8"
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=510000,CODECS="avc1.4D400D",RESOLUTION=320x240,URI="iframe_5003_i-frame.m3u8"
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=664400,CODECS="avc1.4D4016",RESOLUTION=480x360,URI="iframe_5002_i-frame.m3u8"
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=1073200,CODECS="avc1.4D4016",RESOLUTION=480x360,URI="iframe_5001_i-frame.m3u8"
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=1481600,CODECS="avc1.4D4016",RESOLUTION=480x360,URI="iframe_5000_i-frame.m3u8"

Manifest file for the recorded video saved to /home/centos/cdvr_crnrset1/corner_US31739_TC1366_start3minutesearlyandstopafter2minutes0_starengua360_1_manifest_20180430-093926.txt
Download the Video Sample viahttp://cdvr.pe1.ciscocdvr.net:80/cdvr/df989748-2692-4a8c-9de6-646ebc3b0f3b/5004_video_seg_auto_dLMfBOz4QyK_SN5aBAn1jw/53217265101.ts
Video Sample File Downloaded at /home/centos/cdvr_crnrset1/cdvr_sanity_tests/scripts/cornercase_scripts/cornercase_set1_scripts/corner_US31739_TC1366_start3minutesearlyandstopafter2minutes0_starengua360_1_file__20180430-093928.ts
Video Sample saved in the same folder with the name corner_US31739_TC1366_start3minutesearlyandstopafter2minutes0_starengua360_1_file__20180430-093928.ts with the size of 148708 bytes

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: Event recorded and Played back successfully

2018/04/30 09:40:08 UTC ############################## ENDED :  corner_US31739_TC1366_start3minutesearlyandstopafter2minutes ##############################

2018/04/30 09:40:08 UTC ############################## STARTED :  corner_US31739_TC1370_series_booking ##############################
US31739: UseCase: Schedule Event based Recording on Control Plane
TC1370: Record series recording on future program from EPG Grid by pressing Record button?(Client)
US31863: As a viewer, when I browse my cDVR series recordings I want to be able to expand and collapse the list of episodes within each series.
TC1165: Series recording, expand the list, all recorded episodes in a single group can be expanded
Starting test corner_US31739_TC1370_series_booking
### STEP1: Ingest a series with three episodes of two minutes duration ######### 
 
 

{'services': { 502: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'SrsBook397_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'SrsBook397'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'SrsBook397_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'SrsBook397'}],
         'lineupLength': 6,
         'message': ''}},
'shows': set(['SrsBook397']),
'seasons': { 'SrsBook397': { 1: set([1, 2])}},
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for catalog ingest to get synced with the ci host in seconds 120.4164

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525081349000~1525088549000?lang=eng&serviceList=502&count=255&region=101&catalogueId=1
### STEP2: Fetch the Series and its episodes from the the grid response ############## 
 
 

### STEP3: Perform the series booking ####### 
 
 


PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings 
PPS Booking completed successfully for the series contentId programid://2147480311~programid://2147482847
### STEP4: Check whether all the episodes of the series are present in the booked library ######### 
 
 

get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
All episodes are successfully booked
### STEP5: Wait to complete all the episodes recorded and verify that all the episodes of the series are present in the recorded library in recorded state.####### 
 
 

System wait time to record all the episode is 454.37737793 seconds
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/recordings
 
All Programs with the contentids [u'programid://2147480311~programid://2147482847', u'programid://2147480310~programid://2147482848'] is in RECORDED state
[
    {
        "seriesId": "groupid://1488405264", 
        "pvr": "nPVR", 
        "partialContent": false, 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set1_scripts_0", 
        "channelId": "502", 
        "isSynchronized": true, 
        "duration": "00:03:07", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T09:44:00Z", 
        "recurrence": "SERIES", 
        "title": "SrsBook397_1_1", 
        "content": {
            "seriesId": "groupid://1488405264", 
            "shortSynopsis": "SrsBook397_1_1 - synopsis", 
            "title": "SrsBook397_1_1", 
            "instanceId": "PPS_INSTANCE_38000", 
            "recordingId": "38000", 
            "broadcastDateTime": 1525081440000, 
            "synopsis": "SrsBook397_1_1 - synopsis", 
            "endAvailability": 1525081620000, 
            "source": "pvr", 
            "erotic": false, 
            "serviceId": "502", 
            "adult": false, 
            "sortTitle": "SrsBook397_1_1", 
            "duration": 180000, 
            "serviceEquivalenceKey": "502", 
            "type": "instance", 
            "id": "PPS_CONTENT_11865"
        }, 
        "state": "RECORDED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "38000", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{502,java.lang.Integer,NORMAL}-|-{MmFhMTlkZDMwOWM2ZTA4NWVkNDY=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "502", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 502, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 502", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 502", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "502", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "502", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_11865~PPS_INSTANCE_38000", 
        "startTime": "2018-04-30T09:43:55Z", 
        "recurrenceActive": true, 
        "bookingDuration": "00:03:00", 
        "notificationHandles": [
            "5ae6e5055a35bf20e5a98863"
        ], 
        "created": "2018-04-30T09:42:29Z", 
        "lastModified": "2018-04-30T09:48:20Z", 
        "contentPlayUri": "?recId=d4d8e2e1-b4ac-42af-b54b-08702c7bd8e0", 
        "uri": "/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae6e5055a35bf20e5a98863", 
        "scheduleInstance": "programid://2147480311~programid://2147482847", 
        "keep": false, 
        "contentId": "PPS_CONTENT_11865~PPS_INSTANCE_38000"
    }, 
    {
        "seriesId": "groupid://1488405264", 
        "pvr": "nPVR", 
        "partialContent": false, 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set1_scripts_0", 
        "channelId": "502", 
        "isSynchronized": true, 
        "duration": "00:03:06", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T09:47:00Z", 
        "recurrence": "SERIES", 
        "title": "SrsBook397_1_2", 
        "content": {
            "seriesId": "groupid://1488405264", 
            "shortSynopsis": "SrsBook397_1_2 - synopsis", 
            "title": "SrsBook397_1_2", 
            "instanceId": "PPS_INSTANCE_38001", 
            "recordingId": "38001", 
            "broadcastDateTime": 1525081620000, 
            "synopsis": "SrsBook397_1_2 - synopsis", 
            "endAvailability": 1525081800000, 
            "source": "pvr", 
            "erotic": false, 
            "serviceId": "502", 
            "adult": false, 
            "sortTitle": "SrsBook397_1_2", 
            "duration": 180000, 
            "serviceEquivalenceKey": "502", 
            "type": "instance", 
            "id": "PPS_CONTENT_11866"
        }, 
        "state": "RECORDED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "38001", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{502,java.lang.Integer,NORMAL}-|-{MmFhMTlkZDMwOWM2ZTA4NWVkNDY=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "502", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 502, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 502", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 502", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "502", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "502", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_11866~PPS_INSTANCE_38001", 
        "startTime": "2018-04-30T09:46:56Z", 
        "recurrenceActive": true, 
        "bookingDuration": "00:03:00", 
        "notificationHandles": [
            "5ae6e5055a35bf20e5a98865"
        ], 
        "created": "2018-04-30T09:42:29Z", 
        "lastModified": "2018-04-30T09:50:40Z", 
        "contentPlayUri": "?recId=a6b9c645-a771-4b4c-882b-5279a809b993", 
        "uri": "/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae6e5055a35bf20e5a98865", 
        "scheduleInstance": "programid://2147480310~programid://2147482848", 
        "keep": false, 
        "contentId": "PPS_CONTENT_11866~PPS_INSTANCE_38001"
    }
]
concecutive Episodes of a series are successfully recorded
### STEP6:Playback an episode from the recorded library ######### 
 
 

URL to get the RM response : http://rr.cdvr.dcpt01.ciscocdvr.net:80/recordingInfo/d4d8e2e1-b4ac-42af-b54b-08702c7bd8e0?contentType=MPEG4&mode=playback&responseFormat=json
Download the manifest file viahttp://cdvr.pe1.ciscocdvr.net:80/cdvr/aa5c8ae3-ea68-4296-ba52-9d985d34272c/aa5c8ae3-ea68-4296-ba52-9d985d34272c.m3u8
Manifest for the Recorded Content
#EXTM3U
#EXT-X-MEDIA:TYPE=SUBTITLES,GROUP-ID="subs",FORCED=NO,AUTOSELECT=YES,LANGUAGE="en",NAME="cc1",URI="subtitles_cc1_5000_smptett_frag_cc1_CEA-608_.m3u8"
#EXT-X-STREAM-INF:BANDWIDTH=203600,CODECS="avc1.4D400D",RESOLUTION=320x240,FRAME-RATE=29.970,SUBTITLES="subs"
5004_video_seg_auto.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=510000,CODECS="avc1.4D400D",RESOLUTION=320x240,FRAME-RATE=29.970,SUBTITLES="subs"
5003_video_seg_auto.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=664400,CODECS="avc1.4D4016",RESOLUTION=480x360,FRAME-RATE=29.970,SUBTITLES="subs"
5002_video_seg_auto.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=1073200,CODECS="avc1.4D4016",RESOLUTION=480x360,FRAME-RATE=29.970,SUBTITLES="subs"
5001_video_seg_auto.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=1481600,CODECS="avc1.4D4016",RESOLUTION=480x360,FRAME-RATE=29.970,SUBTITLES="subs"
5000_video_seg_auto.m3u8
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=203600,CODECS="avc1.4D400D",RESOLUTION=320x240,URI="iframe_5004_i-frame.m3u8"
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=510000,CODECS="avc1.4D400D",RESOLUTION=320x240,URI="iframe_5003_i-frame.m3u8"
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=664400,CODECS="avc1.4D4016",RESOLUTION=480x360,URI="iframe_5002_i-frame.m3u8"
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=1073200,CODECS="avc1.4D4016",RESOLUTION=480x360,URI="iframe_5001_i-frame.m3u8"
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=1481600,CODECS="avc1.4D4016",RESOLUTION=480x360,URI="iframe_5000_i-frame.m3u8"

Manifest file for the recorded video saved to /home/centos/cdvr_crnrset1/corner_US31739_TC1370_series_booking0_SrsBook397_1_1_manifest_20180430-095139.txt
Download the Video Sample viahttp://cdvr.pe1.ciscocdvr.net:80/cdvr/aa5c8ae3-ea68-4296-ba52-9d985d34272c/5004_video_seg_auto_dLMfBOz4QyK_SN5aBAn1jw/53282129901.ts
Video Sample File Downloaded at /home/centos/cdvr_crnrset1/cdvr_sanity_tests/scripts/cornercase_scripts/cornercase_set1_scripts/corner_US31739_TC1370_series_booking0_SrsBook397_1_1_file__20180430-095140.ts
Video Sample saved in the same folder with the name corner_US31739_TC1370_series_booking0_SrsBook397_1_1_file__20180430-095140.ts with the size of 148520 bytes

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: Event recorded and Played back successfully

2018/04/30 09:52:20 UTC ############################## ENDED :  corner_US31739_TC1370_series_booking ##############################

2018/04/30 09:52:20 UTC ############################## STARTED :  corner_US31743_TC1223_Delete_series_recording_schedule_single_episode_of_series_again ##############################

US42889: Delete series recording

TC1223: Delete series recording, schedule an episode of series again. Verify that the single recording will be booked in the booking list and recorded in the recorded library
Starting test corner_US31743_TC1223_Delete_series_recording_schedule_single_episode_of_series_again
['GenericCh9', 'GenericCh10', 'GenericCh11', 'GenericCh12', 'GenericCh13']
[u'508']

### STEP1: Ingest a series of two episode of n min with n min post time  ########
{'services': { 508: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'TC1223139_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'TC1223139'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'TC1223139_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'TC1223139'}],
         'lineupLength': 6,
         'message': ''}},
'shows': set(['TC1223139']),
'seasons': { 'TC1223139': { 1: set([1, 2])}},
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.4164
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################


### STEP2: fetch the grid respoce and the do the series booking and verify it ######
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525082081000~1525089281000?lang=eng&serviceList=508&count=255&region=101&catalogueId=1
ContentId dictionary from the grid response
{u'programid://1193219083~programid://1360624926': [1525082160000, 1525082340000, u'TC1223139_1_1'], u'programid://1193219082~programid://1360624925': [1525082340000, 1525082520000, u'TC1223139_1_2']}
ContentId list after sorting
[(u'programid://1193219083~programid://1360624926', [1525082160000, 1525082340000, u'TC1223139_1_1']), (u'programid://1193219082~programid://1360624925', [1525082340000, 1525082520000, u'TC1223139_1_2'])]
[u'programid://1193219083~programid://1360624926', u'programid://1193219082~programid://1360624925']

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings

### STEP3: fetch the booking catalog and verify the booking is successfull  ######
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
All programs with the contentids [u'programid://1193219083~programid://1360624926', u'programid://1193219082~programid://1360624925'] is in BOOKED state
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/recordings
 
All Program with the contentid [u'programid://1193219083~programid://1360624926'] is in RECORDING state

###STEP4:Delete the Booking and Recording simultaneously and verifying it in the booking catalog and recorded library ######## 
Stop the series recurrence via : http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae6e7e11ab94a20f760ba24/recurrence/management
 
Series recurrence stopped successfully

Wait for 20 seconds to stop the recordings
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
Booking Catalog is empty
Booked catalog is empty
Series booking and recording is stopped and deleted successfully
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/recordings
 
Recording Catalog is empty
Recording catalog is empty

### STEP5: Rebook the Series again and verify it is booked successfully ###########################
 


PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
All programs with the contentids [u'programid://1193219083~programid://1360624926', u'programid://1193219082~programid://1360624925'] is in BOOKED state
Deleted series is booked again and verified
Script will wait for  278.0  seconds to complete recording
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/recordings
 
All Programs with the contentids [u'programid://1193219083~programid://1360624926', u'programid://1193219082~programid://1360624925'] is in RECORDED state

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: Series Booking successful and Verified the Recording Catalog

2018/04/30 10:03:51 UTC ############################## ENDED :  corner_US31743_TC1223_Delete_series_recording_schedule_single_episode_of_series_again ##############################

2018/04/30 10:03:51 UTC ############################## STARTED :  corner_US31773_TC993_Cancel_scheduled_series_and_Delete_Series ##############################

 US31773: As a viewer, I want the ability to delete all the recording of a series via a single action

TC993 : Cancel scheduled series and Delete Series from Guide 

 TC994:Cancel scheduled series and Delete Series from Search
Starting test corner_US31773_TC993_Cancel_scheduled_series_and_Delete_Series
### STEP1:Ingest a series of two episodes with five minutes duration.#################################



{'services': { 502: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'canschser220_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'canschser220'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'canschser220_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'canschser220'}],
         'lineupLength': 12,
         'message': ''}},
'shows': set(['canschser220']),
'seasons': { 'canschser220': { 1: set([1, 2])}},
'totalLength': "00:12:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.8328

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525082772000~1525089972000?lang=eng&serviceList=502,503&count=255&region=101&catalogueId=1
### STEP2:Perform the Series booking. #########################




PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
Series Booking Successfull seriesId 1260939251 
### STEP3:Verify that all episode of the Series booked successfully. ###



get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
All programs with the contentids [u'programid://1494855447~programid://1533433999', u'programid://1494855448~programid://1533433998'] is in BOOKED state
### STEP4:Verify that the first episode of the series booked successfully and wait to start the recording.  #############



get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
Program starts broadcasting from 1525082820000 (in epoch)
Script will wait for 0.716666666667 minutes to start the recording
series booked successfully 
### STEP5:Verify that the  first episode is in recording state.###################



get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/recordings
 
All Program with the contentid [u'programid://1494855447~programid://1533433999'] is in RECORDING state
###STEP6:Stop the in-progress recording of the first episode of the series and verify it stopped. #########



Stop the recording via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae6ea9429368720c773d0f8/management
Stop Recording is successful
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/recordings
 
All Programs with the contentids [u'programid://1494855447~programid://1533433999'] is in RECORDED state
Event is in recorded state in recorded catalog after stopping the recording
### STEP8:Verify that all  scheduled recordings are removed from the booking list and all the recorded episodes are removed from the Recorded library.  #######



get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
All programs with the contentids [u'programid://1494855447~programid://1533433999', u'programid://1494855448~programid://1533433998'] is not in BOOKED state
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/recordings
 
Programs not in recorded state : [u'programid://1494855448~programid://1533433998'] 
### Started VMR verification ###
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/recordings
 
Length of ContentPlaybackURI list is not equal to the content id list : [u'?recId=6e2b0723-d020-4369-b9fc-a33c8a0459b0']

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

  Testcase passed : all scheduled recordings are removed from the booking list and all the recorded episodes are removed from the Recorded library 

2018/04/30 10:09:51 UTC ############################## ENDED :  corner_US31773_TC993_Cancel_scheduled_series_and_Delete_Series ##############################

2018/04/30 10:09:51 UTC ############################## STARTED :  corner_US31773_TC996_Cancel_series_recordings_from_Booking_List ##############################

 US31773: As a viewer, I want the ability to delete all the recording of a series via a single action

TC996 : Conflict Resolution, 1 tuner, single current recording program overlaps to single future recording program 
Starting test corner_US31773_TC996_Cancel_series_recordings_from_Booking_List
### STEP1:Ingest a series of two episodes with five minutes duration.#################################



{'services': { 502: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'cansre220_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'cansre220'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'cansre220_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'cansre220'}],
         'lineupLength': 12,
         'message': ''}},
'shows': set(['cansre220']),
'seasons': { 'cansre220': { 1: set([1, 2])}},
'totalLength': "00:12:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.8328

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525083132000~1525090332000?lang=eng&serviceList=502&count=255&region=101&catalogueId=1
### STEP2:Perform the Series booking. #########################




PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
Series Booking Successfull series with contentId programid://2147480313~programid://2147482852 
### STEP3:Verify that the all episodes of the series booked successfully #############



get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
All programs with the contentids [u'programid://2147480312~programid://2147482853', u'programid://2147480313~programid://2147482852'] is in BOOKED state
### STEP4:Delete the Series bookings. #########



Delete series booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae6ebfce9c28320e2419996/recurrence/episodes
 

Series Booking and Recording Deleted successfully
Series deletion successfull 
### STEP5:Verify that all the episodes of the series are removed from the booked catalog .############



get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
Booking Catalog is empty
Booked catalog is empty

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

 Testcase passed : Episodes of the series are not in the booked catalog 

2018/04/30 10:12:37 UTC ############################## ENDED :  corner_US31773_TC996_Cancel_series_recordings_from_Booking_List ##############################

2018/04/30 10:12:37 UTC ############################## STARTED :  corner_US31774_TC977_cancel_currently_recording_episode_of_series ##############################
{'TC977': ['US31774', '', 3]}
US31774: As a viewer, I want the ability to delete a series booking
TC977: Cancel currenly recording episode of Series
Starting test corner_US31774_TC977_cancel_currently_recording_episode_of_series
### STEP1:Ingest a series with two episodes of 5 minutes duration #### 


{'services': { 502: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'Cancu397_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'Cancu397'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'Cancu397_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'Cancu397'}],
         'lineupLength': 12,
         'message': ''}},
'shows': set(['Cancu397']),
'seasons': { 'Cancu397': { 1: set([1, 2])}},
'totalLength': "00:12:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Script will wait for 120.8328 minutes for the Ingest to sync with the CI Host

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525083299000~1525090499000?lang=eng&serviceList=502&count=255&region=101&catalogueId=1
### STEP2:Perform the series booking ##### 


{u'programid://2028227796~programid://2147482855': [1525083360000, 1525083720000, u'Cancu397_1_1', 1496061346, 1], u'programid://2028227797~programid://2147482854': [1525083720000, 1525084080000, u'Cancu397_1_2', 1496061346, 2]}

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
Series Booking Successful with contentId programid://2028227796~programid://2147482855 
### STEP3:Check whether all episodes are present in the booked library ### 


get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
All programs with the contentids [u'programid://2028227796~programid://2147482855', u'programid://2028227797~programid://2147482854'] is in BOOKED state
### STEP4:Wait till the state changed from booked to recording in the record library #######


get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
Program starts broadcasting from 1525083360000 (in epoch)
Script will wait for 0.933333333333 minutes to start the recording
###  STEP5:Verify that  the first episode id in recording state ###### 


get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/recordings
 
All Program with the contentid [u'programid://2028227796~programid://2147482855'] is in RECORDING state
### STEP6:  Deleting only the first recording episode of the series.###### 



Delete PPS recording via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae6eca3a7f2b7218ae8e15b 
PPS recording Deleted successfully
### STEP7: Verify that First episode deleted  successfully from the booked catalog ############


get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
### STEP8: Verify that remaining episodes are present in the booked catalog#### 


get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
All programs with the contentids [u'programid://2028227797~programid://2147482854'] is in BOOKED state
Testcase Passed : Remaining episodes are  present in the booked catalog

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################


2018/04/30 10:17:20 UTC ############################## ENDED :  corner_US31774_TC977_cancel_currently_recording_episode_of_series ##############################

2018/04/30 10:17:20 UTC ############################## STARTED :  corner_US31774_TC987_cancel_currently_recording_episode_of_series ##############################
US31774: As a viewer, I want the ability to delete a series booking
TC987: Cancel episode during recording, Rebook episode, turn on record one copy
Starting test corner_US31774_TC987_cancel_currently_recording_episode_of_series
### STEP1:Ingest a series of two episodes with five minutes duration.#################################



{'services': { 502: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'cancurre220_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'cancurre220'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'cancurre220_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'cancurre220'}],
         'lineupLength': 12,
         'message': ''}},
'shows': set(['cancurre220']),
'seasons': { 'cancurre220': { 1: set([1, 2])}},
'totalLength': "00:12:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.8328
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525083581000~1525090781000?lang=eng&serviceList=502&count=255&region=101&catalogueId=1
### STEP2:Perform the Series booking. #########################




PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
Series Booking Successfull series with contentId programid://1317655981~programid://641954566 
### STEP3:Verify that the first episode of the series booked successfully #############



get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
Program starts broadcasting from 1525083660000 (in epoch)
Script will wait for 1.23333333333 minutes to start the recording
### STEP4:Verify that the  first episode is in recording state.###################



get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/recordings
 
Recording Catalog is empty
Recording catalog is empty

#################### DEBUG STARTED ####################

Script Fetching the Household Booked/Recorded Catalog at 2018-04-30 10:22:01.065382
get all Catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog
 
Household Booked/Recorded Catalog Response:
[
    {
        "seriesId": "groupid://1260334003", 
        "pvr": "nPVR", 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set1_scripts_0", 
        "channelId": "502", 
        "isSynchronized": true, 
        "duration": "00:06:00", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T10:21:00Z", 
        "recurrence": "SERIES", 
        "title": "cancurre220_1_1", 
        "content": {
            "seriesId": 1260334003, 
            "instanceId": "programid://641954566", 
            "broadcastDateTime": 1525083660000, 
            "seasonPremiere": false, 
            "locator": "{YTIyODUyNTA4ZTJiYzQwOTNlMmU=,java.lang.String,NORMAL}[+]{hashKey,NORMAL}", 
            "erotic": false, 
            "audioType": "stereo", 
            "duration": 360000, 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": false, 
            "macrovision": false, 
            "id": "programid://1317655981", 
            "mixSource": false, 
            "externalKey": "cancurre220_1_1_502_tk04301027", 
            "audioDescription": false, 
            "restartAvailable": false, 
            "title": "cancurre220_1_1", 
            "allOfferIdList": [
                2
            ], 
            "synopsis": "cancurre220_1_1 - synopsis", 
            "contentNdsDrmAttributes": {
                "isBto": false, 
                "lastOfferEndDateTime": 1765963847000, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "rentalDuration": 2147483647, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isExtendedRental": false, 
                "isIppv": false, 
                "isPar": false, 
                "isOppv": false
            }, 
            "source": "ltv", 
            "live": false, 
            "parentGroupId": "groupid://1260334003", 
            "type": "instance", 
            "channel": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
            "videoFormat": "sd", 
            "wideScreen": false, 
            "episodeNumber": 1, 
            "isPurchasable": true, 
            "subtitlesHardOfHearing": false, 
            "hdcp": false, 
            "serviceId": "502", 
            "adult": false, 
            "sortTitle": "cancurre220_1_1", 
            "endAvailability": 1525084020000, 
            "hasChapters": false, 
            "cdvrAvailable": true, 
            "seasonFinale": false, 
            "shortSynopsis": "cancurre220_1_1 - synopsis", 
            "mixContentId": false, 
            "broadcaster": "VGE", 
            "serviceEquivalenceKey": "502", 
            "ict": false, 
            "parentGroups": [
                {
                    "groupType": "Series", 
                    "groupId": "groupid://1260334003"
                }
            ]
        }, 
        "state": "BOOKED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "38015", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{502,java.lang.Integer,NORMAL}-|-{MmFhMTlkZDMwOWM2ZTA4NWVkNDY=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "502", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 502, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 502", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 502", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "502", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "502", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_11898~PPS_INSTANCE_38015", 
        "startTime": "2018-04-30T10:21:00Z", 
        "recurrenceActive": true, 
        "bookingDuration": "00:06:00", 
        "notificationHandles": [
            "5ae6edbd4d156f20e0f5e984"
        ], 
        "created": "2018-04-30T10:19:41Z", 
        "lastModified": "2018-04-30T10:20:00Z", 
        "contentPlayUri": "?recId=bd73b611-078f-47a8-97f5-99c3ad97b492", 
        "uri": "/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae6edbd4d156f20e0f5e984", 
        "scheduleInstance": "programid://1317655981~programid://641954566", 
        "keep": false, 
        "contentId": "PPS_CONTENT_11898~PPS_INSTANCE_38015"
    }, 
    {
        "seriesId": "groupid://1260334003", 
        "pvr": "nPVR", 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set1_scripts_0", 
        "channelId": "502", 
        "isSynchronized": true, 
        "duration": "00:06:00", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T10:27:00Z", 
        "recurrence": "SERIES", 
        "title": "cancurre220_1_2", 
        "content": {
            "seriesId": 1260334003, 
            "instanceId": "programid://641954565", 
            "broadcastDateTime": 1525084020000, 
            "seasonPremiere": false, 
            "locator": "{YmVlMmI5NDkxZmQwM2MyYWQ0ODc=,java.lang.String,NORMAL}[+]{hashKey,NORMAL}", 
            "erotic": false, 
            "audioType": "stereo", 
            "duration": 360000, 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": false, 
            "macrovision": false, 
            "id": "programid://1317655980", 
            "mixSource": false, 
            "externalKey": "cancurre220_1_2_502_tk04301033", 
            "audioDescription": false, 
            "restartAvailable": false, 
            "title": "cancurre220_1_2", 
            "allOfferIdList": [
                2
            ], 
            "synopsis": "cancurre220_1_2 - synopsis", 
            "contentNdsDrmAttributes": {
                "isBto": false, 
                "lastOfferEndDateTime": 1765963847000, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "rentalDuration": 2147483647, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isExtendedRental": false, 
                "isIppv": false, 
                "isPar": false, 
                "isOppv": false
            }, 
            "source": "ltv", 
            "live": false, 
            "parentGroupId": "groupid://1260334003", 
            "type": "instance", 
            "channel": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
            "videoFormat": "sd", 
            "wideScreen": false, 
            "episodeNumber": 2, 
            "isPurchasable": true, 
            "subtitlesHardOfHearing": false, 
            "hdcp": false, 
            "serviceId": "502", 
            "adult": false, 
            "sortTitle": "cancurre220_1_2", 
            "endAvailability": 1525084380000, 
            "hasChapters": false, 
            "cdvrAvailable": true, 
            "seasonFinale": false, 
            "shortSynopsis": "cancurre220_1_2 - synopsis", 
            "mixContentId": false, 
            "broadcaster": "VGE", 
            "serviceEquivalenceKey": "502", 
            "ict": false, 
            "parentGroups": [
                {
                    "groupType": "Series", 
                    "groupId": "groupid://1260334003"
                }
            ]
        }, 
        "state": "BOOKED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "38016", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{502,java.lang.Integer,NORMAL}-|-{MmFhMTlkZDMwOWM2ZTA4NWVkNDY=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "502", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 502, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 502", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 502", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "502", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "502", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_11899~PPS_INSTANCE_38016", 
        "startTime": "2018-04-30T10:27:00Z", 
        "recurrenceActive": true, 
        "bookingDuration": "00:06:00", 
        "notificationHandles": [
            "5ae6edbd4d156f20e0f5e986"
        ], 
        "created": "2018-04-30T10:19:41Z", 
        "lastModified": "2018-04-30T10:20:00Z", 
        "contentPlayUri": "?recId=e48e14aa-67a2-4168-adda-6257cff5d056", 
        "uri": "/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae6edbd4d156f20e0f5e986", 
        "scheduleInstance": "programid://1317655980~programid://641954565", 
        "keep": false, 
        "contentId": "programid://1317655980~programid://641954565"
    }
]
Script Fetching Household Failed Recording Catalog at 2018-04-30 10:22:01.124371
get all failed recording catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog?filter:state=FAILED
 
Failed Recording Catalog is empty

#################### DEBUG ENDED   ####################

 Testcase Failed :The booked episode of the series is not in the recording state

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX   ^ ^ ^ ^ ^   XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX   E R R O R   XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

2018/04/30 10:22:21 UTC ############################## ENDED :  corner_US31774_TC987_cancel_currently_recording_episode_of_series ##############################

2018/04/30 10:22:21 UTC ############################## STARTED :  corner_US31774_TC989_cancel_series_with_currentlyrecording_event_rebook ##############################
US31774: As a viewer, I want the ability to delete a series booking.
TC989 : Cancel series during one episode recording, Rebook Series.
TC978: Cancel series with currently recording episode. Verify all future episodes of series are removed from booking list including the current recording event
Starting test corner_US31774_TC989_cancel_series_with_currentlyrecording_event_rebook
### STEP1:Ingest a series of two episodes with five minutes duration.#################################



{'services': { 502: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'cancureve220_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'cancureve220'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'cancureve220_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'cancureve220'}],
         'lineupLength': 12,
         'message': ''}},
'shows': set(['cancureve220']),
'seasons': { 'cancureve220': { 1: set([1, 2])}},
'totalLength': "00:12:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.8328
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525083882000~1525091082000?lang=eng&serviceList=502&count=255&region=101&catalogueId=1
### STEP2:Perform the Series booking. #########################




PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
Series Booking Successfull series with contentId programid://1650606543~programid://1100682445 
### STEP3:Verify that the first episode of the series booked successfully #############



get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
Program starts broadcasting from 1525083960000 (in epoch)
Script will wait for 1.21666666667 minutes to start the recording
### STEP4:Verify that the  first episode is in recording state.###################



get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/recordings
 
Recording Catalog is empty
Recording catalog is empty

#################### DEBUG STARTED ####################

Script Fetching the Household Booked/Recorded Catalog at 2018-04-30 10:27:00.816516
get all Catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog
 
Household Booked/Recorded Catalog Response:
[
    {
        "seriesId": "groupid://1552392639", 
        "pvr": "nPVR", 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set1_scripts_0", 
        "channelId": "502", 
        "isSynchronized": true, 
        "duration": "00:06:00", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T10:26:00Z", 
        "recurrence": "SERIES", 
        "title": "cancureve220_1_1", 
        "content": {
            "seriesId": 1552392639, 
            "instanceId": "programid://1100682445", 
            "broadcastDateTime": 1525083960000, 
            "seasonPremiere": false, 
            "locator": "{ZjAyZjRlOTk0OGQ4ZTk5NWZmNzk=,java.lang.String,NORMAL}[+]{hashKey,NORMAL}", 
            "erotic": false, 
            "audioType": "stereo", 
            "duration": 360000, 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": false, 
            "macrovision": false, 
            "id": "programid://1650606543", 
            "mixSource": false, 
            "externalKey": "cancureve220_1_1_502_tk04301032", 
            "audioDescription": false, 
            "restartAvailable": false, 
            "title": "cancureve220_1_1", 
            "allOfferIdList": [
                2
            ], 
            "synopsis": "cancureve220_1_1 - synopsis", 
            "contentNdsDrmAttributes": {
                "isBto": false, 
                "lastOfferEndDateTime": 1765963847000, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "rentalDuration": 2147483647, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isExtendedRental": false, 
                "isIppv": false, 
                "isPar": false, 
                "isOppv": false
            }, 
            "source": "ltv", 
            "live": false, 
            "parentGroupId": "groupid://1552392639", 
            "type": "instance", 
            "channel": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
            "videoFormat": "sd", 
            "wideScreen": false, 
            "episodeNumber": 1, 
            "isPurchasable": true, 
            "subtitlesHardOfHearing": false, 
            "hdcp": false, 
            "serviceId": "502", 
            "adult": false, 
            "sortTitle": "cancureve220_1_1", 
            "endAvailability": 1525084320000, 
            "hasChapters": false, 
            "cdvrAvailable": true, 
            "seasonFinale": false, 
            "shortSynopsis": "cancureve220_1_1 - synopsis", 
            "mixContentId": false, 
            "broadcaster": "VGE", 
            "serviceEquivalenceKey": "502", 
            "ict": false, 
            "parentGroups": [
                {
                    "groupType": "Series", 
                    "groupId": "groupid://1552392639"
                }
            ]
        }, 
        "state": "BOOKED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "38020", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{502,java.lang.Integer,NORMAL}-|-{MmFhMTlkZDMwOWM2ZTA4NWVkNDY=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "502", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 502, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 502", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 502", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "502", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "502", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_11903~PPS_INSTANCE_38020", 
        "startTime": "2018-04-30T10:26:00Z", 
        "recurrenceActive": true, 
        "bookingDuration": "00:06:00", 
        "notificationHandles": [
            "5ae6eeea96094c205988ec3f"
        ], 
        "created": "2018-04-30T10:24:42Z", 
        "lastModified": "2018-04-30T10:25:00Z", 
        "contentPlayUri": "?recId=c2564ed2-53c7-482a-b07b-5d3e83f713cd", 
        "uri": "/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae6eeea96094c205988ec3f", 
        "scheduleInstance": "programid://1650606543~programid://1100682445", 
        "keep": false, 
        "contentId": "PPS_CONTENT_11903~PPS_INSTANCE_38020"
    }, 
    {
        "seriesId": "groupid://1552392639", 
        "pvr": "nPVR", 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set1_scripts_0", 
        "channelId": "502", 
        "isSynchronized": true, 
        "duration": "00:06:00", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T10:32:00Z", 
        "recurrence": "SERIES", 
        "title": "cancureve220_1_2", 
        "content": {
            "seriesId": 1552392639, 
            "instanceId": "programid://1100682444", 
            "broadcastDateTime": 1525084320000, 
            "seasonPremiere": false, 
            "locator": "{YjQwYWY3MmU1Y2U2NmQzMzk3MGY=,java.lang.String,NORMAL}[+]{hashKey,NORMAL}", 
            "erotic": false, 
            "audioType": "stereo", 
            "duration": 360000, 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": false, 
            "macrovision": false, 
            "id": "programid://1650606544", 
            "mixSource": false, 
            "externalKey": "cancureve220_1_2_502_tk04301038", 
            "audioDescription": false, 
            "restartAvailable": false, 
            "title": "cancureve220_1_2", 
            "allOfferIdList": [
                2
            ], 
            "synopsis": "cancureve220_1_2 - synopsis", 
            "contentNdsDrmAttributes": {
                "isBto": false, 
                "lastOfferEndDateTime": 1765963847000, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "rentalDuration": 2147483647, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isExtendedRental": false, 
                "isIppv": false, 
                "isPar": false, 
                "isOppv": false
            }, 
            "source": "ltv", 
            "live": false, 
            "parentGroupId": "groupid://1552392639", 
            "type": "instance", 
            "channel": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
            "videoFormat": "sd", 
            "wideScreen": false, 
            "episodeNumber": 2, 
            "isPurchasable": true, 
            "subtitlesHardOfHearing": false, 
            "hdcp": false, 
            "serviceId": "502", 
            "adult": false, 
            "sortTitle": "cancureve220_1_2", 
            "endAvailability": 1525084680000, 
            "hasChapters": false, 
            "cdvrAvailable": true, 
            "seasonFinale": false, 
            "shortSynopsis": "cancureve220_1_2 - synopsis", 
            "mixContentId": false, 
            "broadcaster": "VGE", 
            "serviceEquivalenceKey": "502", 
            "ict": false, 
            "parentGroups": [
                {
                    "groupType": "Series", 
                    "groupId": "groupid://1552392639"
                }
            ]
        }, 
        "state": "BOOKED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "38021", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{502,java.lang.Integer,NORMAL}-|-{MmFhMTlkZDMwOWM2ZTA4NWVkNDY=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "502", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 502, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 502", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 502", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "502", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "502", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_11904~PPS_INSTANCE_38021", 
        "startTime": "2018-04-30T10:32:00Z", 
        "recurrenceActive": true, 
        "bookingDuration": "00:06:00", 
        "notificationHandles": [
            "5ae6eeea96094c205988ec41"
        ], 
        "created": "2018-04-30T10:24:42Z", 
        "lastModified": "2018-04-30T10:25:00Z", 
        "contentPlayUri": "?recId=ad1f3307-dbf0-4109-ac30-05984752fc38", 
        "uri": "/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae6eeea96094c205988ec41", 
        "scheduleInstance": "programid://1650606544~programid://1100682444", 
        "keep": false, 
        "contentId": "programid://1650606544~programid://1100682444"
    }
]
Script Fetching Household Failed Recording Catalog at 2018-04-30 10:27:00.890629
get all failed recording catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog?filter:state=FAILED
 
Failed Recording Catalog is empty

#################### DEBUG ENDED   ####################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

 Testcase Failed : Unable to Verify Recording Catalog
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX   ^ ^ ^ ^ ^   XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX   E R R O R   XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

2018/04/30 10:27:21 UTC ############################## ENDED :  corner_US31774_TC989_cancel_series_with_currentlyrecording_event_rebook ##############################

2018/04/30 10:27:21 UTC ############################## STARTED :  corner_US31774_TC990_CancelandRebook_episode ##############################
{'TC990': ['US31774', '', 3]}
TC990: Cancel episode, rebook episode, episode is rebroadcasting. Verify the episode is scheduled accordingly if it did not get recorded before
US31774: As a viewer, I want the ability to delete a series booking


###STEP1:Ingest a series with three episodes of n minutes duration and ingest the first episode again .######

{'services': { 502: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'canep185_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'canep185'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'canep185_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'canep185'},
                     { 'episodeNum': 3, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'canep185_1_3', 'rating': 1, 'seasonNum': 1, 'showID': 'canep185'}],
         'lineupLength': 12,
         'message': ''}},
'shows': set(['canep185']),
'seasons': { 'canep185': { 1: set([1, 2, 3])}},
'totalLength': "00:12:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Rebroadcast episode start time : 2018-04-30T10:43:21Z
Current time :  2018-04-30 10:27:21.282272

Episode to rebroadcast : ['canep185_1_1']

Rebroadcasting the episode :  canep185_1_1_502_04301035
New Id : canep185_1_1_502_4301135
Original Episode Timing : 2018-04-30T10:31:00Z  To : 2018-04-30T10:35:00Z
Duration : 240
Post Time : 2018-04-30T10:43:21Z
End Availability : 2018-04-30T10:47:21Z
New content id : 502~30042018103100~30042018104721
Prepared for Rebroadcast : canep185_1_1

Rebroadcast XML file generated : rebroadcast_canep185.xml
Script will wait for 2.01388 minutes for the CI Host to get synced
Starting test corner_US31774_TC990_CancelandRebook_episode
Cleaning up the booked and recorded catalog from the household

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525084182000~1525091382000?lang=eng&serviceList=502&count=255&region=101&catalogueId=1
ContentId dictionary from grid response {u'programid://1766634416~programid://1356227927': [1525085001000, 1525085241000, u'canep185_1_1', 1698713082, 1], u'programid://1766634416~programid://2147482856': [1525084260000, 1525084500000, u'canep185_1_1', 1698713082, 1], u'programid://1766634415~programid://2147482857': [1525084740000, 1525084980000, u'canep185_1_3', 1698713082, 3], u'programid://1766634414~programid://2147482858': [1525084500000, 1525084740000, u'canep185_1_2', 1698713082, 2]}
ContentId list after Sorting: [(u'programid://1766634416~programid://2147482856', [1525084260000, 1525084500000, u'canep185_1_1', 1698713082, 1]), (u'programid://1766634414~programid://2147482858', [1525084500000, 1525084740000, u'canep185_1_2', 1698713082, 2]), (u'programid://1766634415~programid://2147482857', [1525084740000, 1525084980000, u'canep185_1_3', 1698713082, 3]), (u'programid://1766634416~programid://1356227927', [1525085001000, 1525085241000, u'canep185_1_1', 1698713082, 1])]
Details of rebroadcated Episode[1525085001000, 1525085241000, u'canep185_1_1', 1698713082, 1]


###STEP2:Perform the series booking #####


PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings 
PPS Booking completed successfully for the series contentId programid://1766634416~programid://2147482856
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
Series Id: 1698713082
Episode number : 1
Episode number : 2
Episode number : 3
List of Booked Episodes{1: [1525084260000, 1525084500000, 240000, u'38022', u'/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae6f0164935241fe4c13c08', u'canep185_1_1', u'programid://1766634416~programid://2147482856', u'groupid://1698713082', u'502'], 2: [1525084500000, 1525084740000, 240000, u'38023', u'/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae6f0164935241fe4c13c0a', u'canep185_1_2', u'programid://1766634414~programid://2147482858', u'groupid://1698713082', u'502'], 3: [1525084740000, 1525084980000, 240000, u'38024', u'/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae6f0164935241fe4c13c0b', u'canep185_1_3', u'programid://1766634415~programid://2147482857', u'groupid://1698713082', u'502']}


###STEP3:Delete the First episode of the series.##########


Delete PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae6f0164935241fe4c13c08
PPS Booking Deleted successfully
Episode to be Rebroadcasted cancelled Successfully
System wait for 553.0 Seconds to book the Rebroadcasted Episode


###STEP4:Rebook first episode of the series ######


PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings 
PPS Booking completed successfully for the Rebroadcasted Episode
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
Rebroadcasted Episode is  successfully booked 
Testcase Passed: Rebroadcasted Episode is  successfully booked 

Delete PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae6f2445a35bf20e5a9886a
PPS Booking Deleted successfully

2018/04/30 10:39:05 UTC ############################## ENDED :  corner_US31774_TC990_CancelandRebook_episode ##############################

2018/04/30 10:39:05 UTC ############################## STARTED :  corner_US31774_TC991_CancelSeries_RebookEpisode ##############################
{'TC991': ['US31774', '', 3]}
TC991: Cancel seires, rebook episode, episodes are rebroadcasting.
US31774: As a viewer, I want the ability to delete a series booking
### STEP1:Ingest a series with three episodes of 2 minutes duration and ingest the first episode again .######



{'services': { 502: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'canse397_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'canse397'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'canse397_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'canse397'},
                     { 'episodeNum': 3, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'canse397_1_3', 'rating': 1, 'seasonNum': 1, 'showID': 'canse397'}],
         'lineupLength': 9,
         'message': ''}},
'shows': set(['canse397']),
'seasons': { 'canse397': { 1: set([1, 2, 3])}},
'totalLength': "00:09:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Rebroadcast episode start time : 2018-04-30T10:52:05Z
Current time :  2018-04-30 10:39:05.979905

Episode to rebroadcast : ['canse397_1_1']

Rebroadcasting the episode :  canse397_1_1_502_04301046
New Id : canse397_1_1_502_4301146
Original Episode Timing : 2018-04-30T10:43:00Z  To : 2018-04-30T10:46:00Z
Duration : 180
Post Time : 2018-04-30T10:52:05Z
End Availability : 2018-04-30T10:55:05Z
New content id : 502~30042018104300~30042018105505
Prepared for Rebroadcast : canse397_1_1

Rebroadcast XML file generated : rebroadcast_canse397.xml
Script will wait for 2.01041 minutes for the CI Host to get synced
Starting test corner_US31774_TC991_CancelSeries_RebookEpisode
Cleaning up the booked and recorded catalog from the household

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525084886000~1525092086000?lang=eng&serviceList=502&count=255&region=101&catalogueId=1
ContentId dictionary from the grid response {u'programid://1085462909~programid://129920756': [1525085160000, 1525085340000, u'canse397_1_2', 1237295604, 2], u'programid://1085462908~programid://129920757': [1525085340000, 1525085520000, u'canse397_1_3', 1237295604, 3], u'programid://1085462907~programid://129920758': [1525084980000, 1525085160000, u'canse397_1_1', 1237295604, 1], u'programid://1085462907~programid://2147482859': [1525085525000, 1525085705000, u'canse397_1_1', 1237295604, 1]}
ContentId list from the ContentId dictionary [(u'programid://1085462907~programid://129920758', [1525084980000, 1525085160000, u'canse397_1_1', 1237295604, 1]), (u'programid://1085462909~programid://129920756', [1525085160000, 1525085340000, u'canse397_1_2', 1237295604, 2]), (u'programid://1085462908~programid://129920757', [1525085340000, 1525085520000, u'canse397_1_3', 1237295604, 3]), (u'programid://1085462907~programid://2147482859', [1525085525000, 1525085705000, u'canse397_1_1', 1237295604, 1])]
Details of rebroadcated Episode[1525085525000, 1525085705000, u'canse397_1_1', 1237295604, 1]
### STEP2:Perform the series booking #####




PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings 
PPS Booking completed successfully for the series contentId programid://1085462907~programid://129920758
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
Series Id: 1237295604
Episode number : 1
Episode number : 3
Episode number : 2
###STEP3:Delete the First episode of the series.##########



Delete series booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae6f2d6e9c28320e2419998/recurrence/episodes
 

Series Booking and Recording Deleted successfully
Series to be Rebroadcasted cancelled Successfully
System wait for 449.0 Seconds to book the Rebroadcasted Episode
###STEP4:Rebook first episode of the series again ######




PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings 
PPS Booking completed successfully for the Rebroadcasted Episode
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
Rebroadcasted Episode is  successfully booked 

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed :Rebroadcasted Episode is  successfully booked 

2018/04/30 10:49:26 UTC ############################## ENDED :  corner_US31774_TC991_CancelSeries_RebookEpisode ##############################

2018/04/30 10:49:26 UTC ############################## STARTED :  corner_US31785_TC1582_manual_tunerConflict_cancelExisting ##############################

US31785: As a SP, I want to provide Conflict Resolution support to the household to resolve Recorder Tuner Quota issues at Booking

TC1582: With 1 tuner, a conflict message displays when users schedule 2 manual future recording programs. Prog-C overlaps Prog-A. To relsolve conflict, this test checks user is able cancel Prog-A in order to schedule Prog-C
Starting test corner_US31785_TC1582_manual_tunerConflict_cancelExisting
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
### STEP1: Ingest the Event of n minutes (with post time) on one channel and another Event of n minutes (with post time of 6 minutes) on another channel ########################################################################

{'services': { 502: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'futcnmt829_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'futcnmt829_2', 'rating': 1}],
         'lineupLength': 12,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:12:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 503: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'futcnmnt400_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'futcnmnt400_2', 'rating': 1}],
         'lineupLength': 12,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:12:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 121.6656
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Fetching Number of tuners in the Household
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_1/numOfTuners
Number of Tuners is 4
### STEP2: Change the tuner quota to 1 ##########################################################################################################################

Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_1/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_1/numOfTuners
Number of Tuners is 1
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525085508000~1525092708000?lang=eng&serviceList=502,503&count=255&region=101&catalogueId=1
### STEP3: Do the Manual Booking for both events and see second one fails ##############################################################################################


PPS time based booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookings 
PPS booking is successful for the channel 502
Pps booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookings
 
Pps Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookings
403
{'date': 'Mon, 30 Apr 2018 10:51:48 GMT', 'flow_context': '5AE6F544E4B0E127EFAE43DB', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6F544E4B0E127EFAE43DB"}
PPS Booking Failed due to tuner conflict detected which is expected
### STEP4: Delete the first manual booked one and book the second one, second manual booking should be successful #######################################################

get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookings
 
start wait time from func 132.0
Event is present in the Booked catalog

Delete PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/catalog/5ae6f544e9c28320e241999d
PPS Booking Deleted successfully
Booking was deleted successfully before recording start

PPS booking is Doing for householdId AUTO_3006_cornercase_set1_scripts_1 : 

PPS time based booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookings 
PPS booking is successful
### STEP5: Verify second event is in the booked catalog and not the first one ###################################################################################
#
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookings
 
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookings
 
start wait time from func 252.0
Event is present in the Booked catalog
### STEP6: Revert back to the original value which is stored initially from UPM ###############################################################################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: Booking was deleted successfully before recording start and VERIFIED in booking catalog

2018/04/30 10:52:08 UTC ############################## ENDED :  corner_US31785_TC1582_manual_tunerConflict_cancelExisting ##############################

2018/04/30 10:52:08 UTC ############################## STARTED :  corner_US31785_TC1592_currentandfurture_event_conflict_with_futureevent ##############################
US31785: As a SP, I want to provide Conflict Resolution support to the household to resolve Recorder Tuner Quota issues at Booking
TC1592: With 1 tuner, user schedules current single Prog-A and future manual Prog-A1. Both programs are back to back and on same channel. A conflict message displays when user schedules a future manual recording Prog-C overlaps to both Prog-A and Prog-A1. To resolve conflict, this test checks user is able cancel both Prog-A and Prog-A1 in order to schedule Prog-C
Starting test corner_US31785_TC1592_currentandfurture_event_conflict_with_futureevent
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']


### STEP1: Ingest the 2 Event of 8 minutes(without post time) on one channel and another Event of 4 minutes (with post time of 4 minutes) on another channel##########

{'services': { 502: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'futeve274_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'futeve274_2', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'futeve274_3', 'rating': 1}],
         'lineupLength': 12,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:12:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 503: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 11, 'programID': 'duteve731_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 11, 'programID': 'duteve731_2', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 11, 'programID': 'duteve731_3', 'rating': 1}],
         'lineupLength': 33,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:33:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 123.123
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Fetching Number of tuners in the Household
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_0/numOfTuners
Number of Tuners is 4


### STEP2: Change the tuner quota to 1 ######################################################################################################

Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_0/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_0/numOfTuners
Number of Tuners is 1


### STEP3: Do the current Event Booking of first event and future manual booking for the secon event  on channel one and see that it passes#############

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525082072000~1525089272000?lang=eng&serviceList=502,503&count=255&region=101&catalogueId=1
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525085672000~1525092872000?lang=eng&serviceList=502,503&count=255&region=101&catalogueId=1
content id details for event [(u'programid://2145414644~programid://910257791', 1525085640000, 1525086300000, 660000), (u'programid://2145414643~programid://910257790', 1525086300000, 1525086960000, 660000), (u'programid://2145414645~programid://910257789', 1525086960000, 1525087620000, 660000)]
Program from Grid Request which is currently broadcasting:  programid://2145414644~programid://910257791

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
PPS booking is successful for the event contentId programid://2145414644~programid://910257791
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/recordings
 
All Program with the contentid [u'programid://2145414644~programid://910257791'] is in RECORDING state
Pps booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
PPS booking is successful for the channel 503


### STEP4: Do the future manual booking for the third event  on channel two and verify#############

{
                    "startTime": "2018-04-30T10:56:00Z",
                    "endTime": "2018-04-30T11:00:00Z",
                    "channel": "502",
                    "checkConflicts" : true,
                    "pvr":"nPVR"
                    }
                   

PPS booking is Doing for householdId AUTO_3006_cornercase_set1_scripts_0 : 
Pps booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
Pps Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
403
{'date': 'Mon, 30 Apr 2018 10:55:32 GMT', 'flow_context': '5AE6F624E4B0D1FE7D344CEB', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6F624E4B0D1FE7D344CEB"}
Manual booking for third event failed due to Tuner Conflict


###  STEP5: stop the first and book the third one againg, third manual booking should be successful ##########################################

Stop the recording via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae6f5e8a3078b20f29fe84a/management
Stop Recording is successful
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/recordings
 
All Programs with the contentids [u'programid://2145414644~programid://910257791'] is in RECORDED state
Pps booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
Third event booked successfully after stopping second


### STEP6: Verify third event and the second manual booking  is in the booked catalog##########################################

get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
start wait time from func 476.0
Event is present in the Booked catalog
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
start wait time from func 1
Event is present in the Booked catalog
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/recordings
 
All Programs with the contentids [u'programid://2145414644~programid://910257791'] is in RECORDED state
PPS booking is successful for event after stoping the event recording


### STEP7: Revert back to the original value which is stored initially from UPM ###############################################################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: third event is present in booking catalog after stoping the earlier  pps booking 

2018/04/30 10:57:25 UTC ############################## ENDED :  corner_US31785_TC1592_currentandfurture_event_conflict_with_futureevent ##############################

2018/04/30 10:57:25 UTC ############################## STARTED :  corner_US31785_TC1593_tunerconflct_CancelCurrent_event_rec ##############################

 US31785: As a SP, I want to provide Conflict Resolution support to the household to resolve Recorder Tuner Quota issues at Booking

TC1593 : Conflict Resolution, 1 tuner, single current recording program overlaps to single future recording program 
Starting test corner_US31785_TC1593_tunerconflct_CancelCurrent_event_rec
### STEP1:Ingest two event of 8 minutes duration, second event overlap in future with the first event #########################################

{'services': { 502: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 7, 'programID': 'cancurre220_1', 'rating': 1}], 'lineupLength': 7, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:07:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 503: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 7, 'programID': 'cancur1e829_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 7, 'programID': 'cancur1e829_2', 'rating': 1}],
         'lineupLength': 14,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:14:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 121.4574
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Fetching Number of tuners in the Household
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_0/numOfTuners
Number of Tuners is 4
### STEP2:Set the tuner quota to 1  ###

Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_0/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_0/numOfTuners
Number of Tuners is 1
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525082387000~1525089587000?lang=eng&serviceList=502,503&count=255&region=101&catalogueId=1
### STEP3:Perform the current booking of the first program.  ###

[(u'programid://1582085182~programid://2132890894', [1525085940000, 1525086360000, 420000, u'cancurre220_1'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
Event Booking Successfull  
Event Booking Successfull  for first Program
### STEP4:Verify that the event booked successfully and first event is in recording state. ###

get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/recordings
 
All Program with the contentid [u'programid://1582085182~programid://2132890894'] is in RECORDING state
### STEP5:Perform the booking of the second event.  ###

[(u'programid://1710022892~programid://1322474238', [1525086060000, 1525086480000, 420000, u'cancur1e829_1']), (u'programid://1710022893~programid://1322474237', [1525086480000, 1525086900000, 420000, u'cancur1e829_2'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
PPS Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
403
{'date': 'Mon, 30 Apr 2018 11:00:47 GMT', 'flow_context': '5AE6F75FE4B0286852CB1E77', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6F75FE4B0286852CB1E77"}
### STEP6:Verify that the tuner conflict message occured.  ###

 PPS Booking Failed due to Tuner Conflict
### STEP7:Stop the in-progress recording of the first program   ###

Stop the recording via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae6f72329368720c773d0fd/management
Stop Recording is successful
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/recordings
 
### STEP8:Perform the booking of the second event again   ###

Current Time: 2018-04-30 11:02:17.399967
Content StartTime: 1525086060000
Content EndTime: 1525086480000
[(u'programid://1710022893~programid://1322474237', [1525086480000, 1525086900000, 420000, u'cancur1e829_2'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
Event Booking Successfull  
### STEP9:Verify that the second event booked successfully.      ###

get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
All programs with the contentids [u'programid://1710022893~programid://1322474237'] is in BOOKED state
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
All programs with the contentids [u'programid://1582085182~programid://2132890894'] is not in BOOKED state

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase passed:  First event is not in the booking list and the second event is present

2018/04/30 11:02:37 UTC ############################## ENDED :  corner_US31785_TC1593_tunerconflct_CancelCurrent_event_rec ##############################

2018/04/30 11:02:37 UTC ############################## STARTED :  corner_US31785_TC1594_series_noconflict ##############################
US31785: As a SP, I want to provide Conflict Resolution support to the household to resolve Recorder Tuner Quota issues at Booking
TC1594 : Conflict Resolution, 1 tuners,  first episode of Series-B overlaps to one future episode of Series-A 
Starting test corner_US31785_TC1594_series_noconflict
###STEP1:Ingest the Series1 with 2 Episodes of n minutes (difference between Episode1 and Episode2 is x minutes) and Series 2 with 1 Episode of n minutes with post time of 8 minutes

Final list :[('cmdc', 'pps.cdvr.dcpt01.ciscocdvr.net', 'upm.cdvr.dcpt01.ciscocdvr.net')]
{'services': { 502: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'Refac220_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'Refac220'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'Refac220_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'Refac220'}],
         'lineupLength': 12,
         'message': ''}},
'shows': set(['Refac220']),
'seasons': { 'Refac220': { 1: set([1, 2])}},
'totalLength': "00:12:00",
'BoundaryInMinutes': "1",
'gap': "6",
'is_1050': "True"
'is_24': "False"
}
{'services': { 503: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'codref829_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'codref829'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'codref829_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'codref829'}],
         'lineupLength': 12,
         'message': ''}},
'shows': set(['codref829']),
'seasons': { 'codref829': { 1: set([1, 2])}},
'totalLength': "00:12:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 121.6656
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_0/numOfTuners
Number of Tuners is 4
### STEP2:Set the tuner quota to 1#############################################################################



Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_0/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_0/numOfTuners
Number of Tuners is 1
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525082699000~1525089899000?lang=eng&serviceList=502,503&count=255&region=101&catalogueId=1
###STEP3:Perform the first series booking. ###################



ContentId Dictionary from the Grid Response
{u'programid://1888995766~programid://42889795': [1525086960000, 1525087320000, 360000, 2143589530, 2], u'programid://1888995767~programid://42889796': [1525086240000, 1525086600000, 360000, 2143589530, 1]}
ContentId list after Sorting
[(u'programid://1888995767~programid://42889796', [1525086240000, 1525086600000, 360000, 2143589530, 1]), (u'programid://1888995766~programid://42889795', [1525086960000, 1525087320000, 360000, 2143589530, 2])]
Current time:  1525086299.91

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
Series Booking Successful with contentId programid://1888995767~programid://42889796 
### STEP4:Verify that the all the episodes of the first series is in the booked catalog.###################



get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
All programs with the contentids [u'programid://1888995766~programid://42889795', u'programid://1888995767~programid://42889796'] is in BOOKED state
###STEP5:Verify that the first episode of the first series is in recording state. ########################



get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/recordings
 
All Program with the contentid [u'programid://1888995767~programid://42889796'] is in RECORDING state
###STEP6:Perform the second series booking.#################



ContentId Dictionary from the Grid Response
{u'programid://1972660494~programid://1353072601': [1525087320000, 1525087680000, 360000, 1859589777, 2], u'programid://1972660495~programid://1353072600': [1525086960000, 1525087320000, 360000, 1859589777, 1]}
ContentId list after Sorting
[(u'programid://1972660495~programid://1353072600', [1525086960000, 1525087320000, 360000, 1859589777, 1]), (u'programid://1972660494~programid://1353072601', [1525087320000, 1525087680000, 360000, 1859589777, 2])]
Current time:  1525086365.09

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
PPS Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
403
{'date': 'Mon, 30 Apr 2018 11:06:05 GMT', 'flow_context': '5AE6F89DE4B08D9582AA824C', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6F89DE4B08D9582AA824C"}
booking response <Response [403]>
### STEP7:Verify that the tuner conflict message occured. #################



 PPS Booking failed due to Tuner Conflict
Series Id: 2143589530
Episode number : 1
Episode number : 2
Second Episode Details [1525086960000, 1525087320000, 360000, u'38067', u'/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae6f85b74f21e20e06d23fc', u'Refac220_1_2', u'programid://1888995766~programid://42889795', u'groupid://2143589530', u'502']
###STEP8:Delete the second episode of the first series. ######################




Delete PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae6f85b74f21e20e06d23fc
PPS Booking Deleted successfully
###STEP9:Perform the second series booking again. ############



ContentId Dictionary from the Grid Response
{u'programid://1972660494~programid://1353072601': [1525087320000, 1525087680000, 360000, 1859589777, 2], u'programid://1972660495~programid://1353072600': [1525086960000, 1525087320000, 360000, 1859589777, 1]}
ContentId list after Sorting
[(u'programid://1972660495~programid://1353072600', [1525086960000, 1525087320000, 360000, 1859589777, 1]), (u'programid://1972660494~programid://1353072601', [1525087320000, 1525087680000, 360000, 1859589777, 2])]
Current time:  1525086380.18

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
Series Booking Successful with contentId programid://1972660495~programid://1353072600 
###STEP10:Verify that the second series is booked successfully and the second epiosde of the first series is not in the booked catalog. ###########



get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
All programs with the contentids [u'programid://1888995766~programid://42889795'] is not in BOOKED state
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
All programs with the contentids [u'programid://1972660494~programid://1353072601', u'programid://1972660495~programid://1353072600'] is in BOOKED state

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

 Testcase Passed: All the episodes of the second series is present in the booked catalog and second epiosode of the  first series is not in the booked catalog

2018/04/30 11:06:45 UTC ############################## ENDED :  corner_US31785_TC1594_series_noconflict ##############################

2018/04/30 11:06:45 UTC ############################## STARTED :  corner_US31785_TC1595_tunerconflct_CancelCurrent_series_rec ##############################
US31785: As a SP, I want to provide Conflict Resolution support to the household to resolve Recorder Tuner Quota issues at Booking
TC1595 : Conflict Resolution, 1 tuners, 2 overlap current series
Starting test corner_US31785_TC1595_tunerconflct_CancelCurrent_series_rec
### STEP1:Ingest two series, first series with one episode of n minutes duration  on channel and second series with 2n minutes duration on channel 2.######################

{'services': { 502: { 'lineup': [{ 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'cancurtun220_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'cancurtun220'}],
         'lineupLength': 6,
         'message': ''},
  503: { 'lineup': [{ 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 11, 'programID': 'cancurtu1829_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'cancurtu1829'}],
         'lineupLength': 11,
         'message': ''}},
'shows': set(['cancurtu1829', 'cancurtun220']),
'seasons': { 'cancurtu1829': { 1: set([1])}, 'cancurtun220': { 1: set([1])}},
'totalLength': "00:11:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.7634
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Fetching Number of tuners in the Household
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_0/numOfTuners
Number of Tuners is 4
### STEP2:Set the tuner quota to 1 ###################



Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_0/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_0/numOfTuners
Number of Tuners is 1
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525082946000~1525090146000?lang=eng&serviceList=502,503&count=255&region=101&catalogueId=1
### STEP3:Perform the current booking of the first series. #########################



ContentId dictionary from the grid response
{u'programid://1331264082~programid://910436675': [1525086480000, 1525086840000, 360000, u'cancurtun220_1_1', 1421942080, 1]}
ContentId list after Sorting
[(u'programid://1331264082~programid://910436675', [1525086480000, 1525086840000, 360000, u'cancurtun220_1_1', 1421942080, 1])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
Series Booking Successfull for the contentId programid://1331264082~programid://910436675 
### STEP4:Verify that the series booked successfully and first episode is in recording state.###################



get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/recordings
 
All Program with the contentid [u'programid://1331264082~programid://910436675'] is in RECORDING state
### STEP5:Perform the booking of the second series. ####################



ContentId dictionary from the grid response
{u'programid://1282140657~programid://760939286': [1525086480000, 1525087140000, 660000, u'cancurtu1829_1_1', 2147480070, 1]}
ContentId list after Sorting
[(u'programid://1282140657~programid://760939286', [1525086480000, 1525087140000, 660000, u'cancurtu1829_1_1', 2147480070, 1])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
PPS Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
403
{'date': 'Mon, 30 Apr 2018 11:10:13 GMT', 'flow_context': '5AE6F995E4B0520F9FFB58B4', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6F995E4B0520F9FFB58B4"}
### STEP6:Verify that the tuner conflict message occured. #################



 PPS Booking failed due to Tuner Conflict
### STEP7:Stop the in-progress recording of the first episode of the series and verify it stopped #####



Stop the recording via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae6f952a3078b20f29fe84c/management
Stop Recording is successful
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/recordings
 
Stop recording Successfull and event is in recorded state in recorded library
### STEP8:Perform the booking of the second series again .############



ContentId dictionary from the grid response
{u'programid://1282140657~programid://760939286': [1525086480000, 1525087140000, 660000, u'cancurtu1829_1_1', 2147480070, 1]}
ContentId list after Sorting
[(u'programid://1282140657~programid://760939286', [1525086480000, 1525087140000, 660000, u'cancurtu1829_1_1', 2147480070, 1])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
Series Booking Successfull for the contentId programid://1282140657~programid://760939286 
### STEP9:Verify that the second series booked successfully. #################



get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
All programs with the contentids [u'programid://1282140657~programid://760939286'] is in BOOKED state
booked2_rslt PASS
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
All programs with the contentids [u'programid://1331264082~programid://910436675'] is not in BOOKED state
booked1_reslt FAIL

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

 Testcase passed: First episode of the first series is not in the booking list and the second series firstepisode is present

2018/04/30 11:12:15 UTC ############################## ENDED :  corner_US31785_TC1595_tunerconflct_CancelCurrent_series_rec ##############################

2018/04/30 11:12:15 UTC ############################## STARTED :  corner_US31785_TC1596_series_tunerconflict_cancelExisting ##############################

US31785: As a SP, I want to provide Conflict Resolution support to the household to resolve Recorder Tuner Quota issues at Booking

TC1596: With 1 tuner, a conflict message displays when user schedules new future series overlaps to an existing future series. To resolve conflict, this test checks user is able to cancel an existing future series in order to schedule new series
Starting test corner_US31785_TC1596_series_tunerconflict_cancelExisting


### STEP1: Ingest the Series1 of 1 episode of 3 minutes(with post time of 6 minutes) in channel1 and Series2 of 1 episode of 6minutes(with post time of 3 minutes) in channel2 #####################################################

{'services': { 502: { 'lineup': [{ 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'caxoee220_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'caxoee220'}],
         'lineupLength': 6,
         'message': ''}},
'shows': set(['caxoee220']),
'seasons': { 'caxoee220': { 1: set([1])}},
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 503: { 'lineup': [{ 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 11, 'programID': 'caxiee829_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'caxiee829'}],
         'lineupLength': 11,
         'message': ''}},
'shows': set(['caxiee829']),
'seasons': { 'caxiee829': { 1: set([1])}},
'totalLength': "00:11:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 121.1798
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Fetching Number of tuners in the Household
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_0/numOfTuners
Number of Tuners is 4


### STEP2: Change the tuner quota to 1 ########################################################################################

Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_0/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_0/numOfTuners
Number of Tuners is 1


### STEP3: Book Series1 and Series2, series2 booking fails ##########################################################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525086877000~1525094077000?lang=eng&serviceList=502,503&count=255&region=101&catalogueId=1

                                                      {
                                                       "scheduleInstanceId" : "programid://1547308660~programid://703106543",
                                                       "checkConflicts" : true,
                                                       "pvr":"nPVR",
                                                       "recurrence":"SERIES"
                                                      }
                                                       

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
PPS booking is successful

                                                      {
                                                       "scheduleInstanceId" : "programid://2147480325~programid://2116945096",
                                                       "checkConflicts" : true,
                                                       "pvr":"nPVR",
                                                       "recurrence":"SERIES"
                                                      }
                                                       

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
PPS Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
403
{'date': 'Mon, 30 Apr 2018 11:14:37 GMT', 'flow_context': '5AE6FA9DE4B0C93770ED91DC', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6FA9DE4B0C93770ED91DC"}
PPS Booking failed due to Tuner Conflict
first pps booking passed and second pps booking failed due to tuner conflict


### STEP4: Delete the Series1 and do booking of series2, series 2 booking passes ###################################################################################

get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
All programs with the contentids [u'programid://1547308660~programid://703106543'] is in BOOKED state
Delete series booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae6fa9db1f9e9206752a81f/recurrence/episodes
 

Series Booking and Recording Deleted successfully

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings


## STEP5: Verify the booked catalog has Series2 and not series1 #############################################################################

get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
All programs with the contentids [u'programid://1547308660~programid://703106543'] is not in BOOKED state
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
All programs with the contentids [u'programid://2147480325~programid://2116945096'] is in BOOKED state


### STEP6: Revert back to the original value which is stored initially from UPM #########################################################################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: second series is present  present in booking catalog after deleting the first pps booking 

2018/04/30 11:14:57 UTC ############################## ENDED :  corner_US31785_TC1596_series_tunerconflict_cancelExisting ##############################

2018/04/30 11:14:57 UTC ############################## STARTED :  corner_US31785_TC1597_current_eventSeriesConflict_stopExisting ##############################

US31785: As a SP, I want to provide Conflict Resolution support to the household to resolve Recorder Tuner Quota issues at Booking

TC1597: With 1 tuner, a conflict message displays when user schedules a current series overlaps to current single recording program. To resolve conflict, this test checks user is able to cancel an existing current single recording in order to schedule new series
Starting test corner_US31785_TC1597_current_eventSeriesConflict_stopExisting


### STEP1: Ingest the Event of 10  minutes(with no post time) on one channel and a series of 2 episodes, 5 minutes each on another channel ###################################################

{'services': { 502: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'evesercont220_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'evesercont220'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'evesercont220_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'evesercont220'}],
         'lineupLength': 12,
         'message': ''}},
'shows': set(['evesercont220']),
'seasons': { 'evesercont220': { 1: set([1, 2])}},
'totalLength': "00:12:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 503: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 11, 'programID': 'eveserconi829_1', 'rating': 1}], 'lineupLength': 11, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:11:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 121.5962
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Fetching Number of tuners in the Household
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_0/numOfTuners
Number of Tuners is 4


### STEP2: Change the tuner quota to 1 ######################################################################################################

Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_0/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_0/numOfTuners
Number of Tuners is 1


### STEP3: Do the Future Event Booking for ongoing event ########################################################################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525083439000~1525090639000?lang=eng&serviceList=502,503&count=255&region=101&catalogueId=1
Program from Grid Request which is currently broadcasting:  programid://1729259685~programid://2147482868

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings 
Booking for event was succesful
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/recordings
 
All Program with the contentid [u'programid://1729259685~programid://2147482868'] is in RECORDING state


### STEP4: Book the series, which should fail due to tuner conflict ###################################################################################


#################### DEBUG STARTED ####################

Script Fetching the Household Booked/Recorded Catalog at 2018-04-30 11:18:19.852525
get all Catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog
 
Household Booked/Recorded Catalog Response:
[
    {
        "pvr": "nPVR", 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set1_scripts_0", 
        "channelId": "503", 
        "isSynchronized": true, 
        "duration": "00:11:00", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T11:14:00Z", 
        "content": {
            "instanceId": "programid://2147482868", 
            "broadcastDateTime": 1525086840000, 
            "seasonPremiere": false, 
            "locator": "{M2I2MDA1OGYxNDY2MjhhMDJjNGY=,java.lang.String,NORMAL}[+]{hashKey,NORMAL}", 
            "erotic": false, 
            "audioType": "stereo", 
            "duration": 660000, 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": false, 
            "macrovision": false, 
            "id": "programid://1729259685", 
            "mixSource": false, 
            "externalKey": "eveserconi829_1_503_tk04301125", 
            "audioDescription": false, 
            "restartAvailable": false, 
            "title": "eveserconi829_1", 
            "allOfferIdList": [
                2
            ], 
            "mixContentId": false, 
            "contentNdsDrmAttributes": {
                "isBto": false, 
                "lastOfferEndDateTime": 1765963847000, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "rentalDuration": 2147483647, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isExtendedRental": false, 
                "isIppv": false, 
                "isPar": false, 
                "isOppv": false
            }, 
            "source": "ltv", 
            "live": false, 
            "subtitlesHardOfHearing": false, 
            "type": "instance", 
            "channel": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
            "videoFormat": "sd", 
            "wideScreen": false, 
            "isPurchasable": true, 
            "hdcp": false, 
            "serviceId": "503", 
            "adult": false, 
            "sortTitle": "eveserconi829_1", 
            "endAvailability": 1525087500000, 
            "hasChapters": false, 
            "cdvrAvailable": true, 
            "seasonFinale": false, 
            "shortSynopsis": "eveserconi829_1 - synopsis", 
            "synopsis": "eveserconi829_1 - synopsis", 
            "broadcaster": "VGE", 
            "serviceEquivalenceKey": "503", 
            "ict": false
        }, 
        "title": "eveserconi829_1", 
        "recurrence": "NONE", 
        "state": "RECORDING", 
        "startGuardTime": "00:00:00", 
        "recordingId": "38086", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{503,java.lang.Integer,NORMAL}-|-{NzEyYWQ0ODM4ZjAwOWFmMWM2Y2Y=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "503", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 503, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 503", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 503", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "503", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "503", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_12049~PPS_INSTANCE_38086", 
        "startTime": "2018-04-30T11:17:08Z", 
        "bookingDuration": "00:11:00", 
        "notificationHandles": [
            "5ae6fb3ff365362240f145c3"
        ], 
        "created": "2018-04-30T11:17:19Z", 
        "lastModified": "2018-04-30T11:17:25Z", 
        "contentPlayUri": "?recId=5b3a0967-809e-49ca-afc1-1d7ce305738e", 
        "uri": "/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae6fb3ff365362240f145c3", 
        "scheduleInstance": "programid://1729259685~programid://2147482868", 
        "keep": false, 
        "contentId": "PPS_CONTENT_12049~PPS_INSTANCE_38086"
    }
]
Script Fetching Household Failed Recording Catalog at 2018-04-30 11:18:19.879932
get all failed recording catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog?filter:state=FAILED
 
Failed Recording Catalog is empty

#################### DEBUG ENDED   ####################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Failed: Unable to Form ContentId dictionary from the Grid Response
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX   ^ ^ ^ ^ ^   XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX   E R R O R   XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

2018/04/30 11:18:40 UTC ############################## ENDED :  corner_US31785_TC1597_current_eventSeriesConflict_stopExisting ##############################

2018/04/30 11:18:40 UTC ############################## STARTED :  corner_US31785_TC1599_series_single_tunerconflict_cancelExisting ##############################

US31785: As a SP, I want to provide Conflict Resolution support to the household to resolve Recorder Tuner Quota issues at Booking

TC17928: With 1 tuner, a conflict message displays when user schedules a future series overlaps to future single recording program. To resolve a conflict, this test checks user is able to cancel an existing future single recording in order to schedule new series
Starting test corner_US31785_TC1599_series_single_tunerconflict_cancelExisting


### STEP1: Ingest the Event1 in channel1 of N minutes(with post time of X minutes) and Series1 of 1episode in channel2 of N/2 minutes(with post time of X minutes) ##################################################

{'services': { 502: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'canexi2829_1', 'rating': 1}], 'lineupLength': 6, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 503: { 'lineup': [{ 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'canexi1220_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'canexi1220'}],
         'lineupLength': 3,
         'message': ''}},
'shows': set(['canexi1220']),
'seasons': { 'canexi1220': { 1: set([1])}},
'totalLength': "00:03:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.6246
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Fetching Number of tuners in the Household
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_0/numOfTuners
Number of Tuners is 4


### STEP2: Change the Tuner quota to 1 #############################################################################

Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_0/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_0/numOfTuners
Number of Tuners is 1
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525087261000~1525094461000?lang=eng&serviceList=502,503&count=255&region=101&catalogueId=1


### STEP3: Do the Event1 Booking and than try Series1 booking and it will fail #################################################################


PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
PPS booking is successful

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
PPS Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
403
{'date': 'Mon, 30 Apr 2018 11:21:01 GMT', 'flow_context': '5AE6FC1DE4B0CA76F1C6FB12', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6FC1DE4B0CA76F1C6FB12"}
PPS Booking failed due to Tuner Conflict


### STEP4: Delete the Event1 booking and than book Series1, it passes ##############################################################

get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
All programs with the contentids [u'programid://1929052284~programid://646363270'] is in BOOKED state

Delete PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae6fc1d2660f71ffec4eb0d
PPS Booking Deleted successfully
Booking was deleted successfully before recording start

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings


### STEP5: Revert back to the original value which is stored initially from UPM ################################################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: pps booking is successful 

2018/04/30 11:21:21 UTC ############################## ENDED :  corner_US31785_TC1599_series_single_tunerconflict_cancelExisting ##############################

2018/04/30 11:21:21 UTC ############################## STARTED :  corner_US31787_TC860_createHousehold_verify_TunerQuota ##############################
US31787: As a SP, I want to be able to set a global default for recorder tuner quota per household and have it applied at household account creation
TC860 : Verify global Tuner Quota level is applied at account creation
Starting test corner_US31787_TC860_createHousehold_verify_TunerQuota
###STEP1: create the Household  with only Restart Service ##################


Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Create household via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/TC8600
###STEP2:Fetch the Tuner_quota of the household ############################


Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/TC8600/numOfTuners
Number of Tuners is 4
###STEP3:verify the Tuner quota of the household  same as the value set in the config file ###############


Testcase Passed:  Tunerquota, updated successfully 
###STEP4: Delete the household and update the results irrespective of pass or fail ################


Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Household deleted via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/TC8600

2018/04/30 11:21:21 UTC ############################## ENDED :  corner_US31787_TC860_createHousehold_verify_TunerQuota ##############################

2018/04/30 11:21:21 UTC ############################## STARTED :  corner_US31810_TC1147_series_manualExtended_tunerconflict ##############################

US31810: As a SP, when a series recording is created I want the cDVR System to perform Recording Tuner Quota checking on the first episode in the series

TC1147: With 1 tuner, this test checks a 'Conflict Message' displays when user schedules a series ovelaps to a manual recording program with end time late
Starting test corner_US31810_TC1147_series_manualExtended_tunerconflict
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']


### STEP1: Ingest Event of 6 minutes and Series2 with 1 episode of 3 minutes(with post time of 3 minutes) on 2 channels #########################################################

{'services': { 502: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'manext1875_1', 'rating': 1}], 'lineupLength': 6, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 503: { 'lineup': [{ 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'manext342_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'manext342'}],
         'lineupLength': 3,
         'message': ''}},
'shows': set(['manext342']),
'seasons': { 'manext342': { 1: set([1])}},
'totalLength': "00:03:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.6246
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################



### STEP2: Change the tuner quota to 1 #######################################################################################################

Fetching Number of tuners in the Household
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_1/numOfTuners
Number of Tuners is 4
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_1/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_1/numOfTuners
Number of Tuners is 1
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525087422000~1525094622000?lang=eng&serviceList=502,503&count=255&region=101&catalogueId=1


### STEP3: Do the Manual Booking of the Event from first channel from 1 to 5 minutes of Event ####################################################


PPS booking is Doing for householdId AUTO_3006_cornercase_set1_scripts_1 : 

PPS time based booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookings 
PPS booking is successful


### STEP3: Do the Booking of Series2, Series2 booking will fail ################################################


PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookings
PPS Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookings
403
{'date': 'Mon, 30 Apr 2018 11:23:42 GMT', 'flow_context': '5AE6FCBEE4B01484F81AC04C', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6FCBEE4B01484F81AC04C"}


### STEP4: Revert back to the original value which is stored initially from UPM ####################################################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: PPS Booking failed due to Tuner Conflict

2018/04/30 11:24:02 UTC ############################## ENDED :  corner_US31810_TC1147_series_manualExtended_tunerconflict ##############################

2018/04/30 11:24:02 UTC ############################## STARTED :  corner_US31810_TC1148_guardband_tunerconflict ##############################
US31810: As a SP, when a series recording is created I want the cDVR System to perform Recording Tuner Quota checking on the first episode in the series
TC1148: No Conflict, 1 tuner, schedule a series overlaps a single recording program with guardband 20 minutes early
Starting test corner_US31810_TC1148_guardband_tunerconflict
### STEP1: Ingest the Event of 4 minutes duration with Post time of 8 minutes on Channel1 and Series1 with 1 Episode of 4 minutes with post time of 4 minutes#####

Post time of  guardtun808  is :  1525088162.83
Post time of  guardtun199  is : 1525087922.83
{'services': { 502: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'guardtun808_1', 'rating': 1}], 'lineupLength': 4, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:04:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 503: { 'lineup': [{ 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'guardtun199_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'guardtun199'}],
         'lineupLength': 4,
         'message': ''}},
'shows': set(['guardtun199']),
'seasons': { 'guardtun199': { 1: set([1])}},
'totalLength': "00:04:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.5552
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Fetching Number of tuners in the Household
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_0/numOfTuners
Number of Tuners is 4
### STEP2: Change the tuner quota to 1 ####################################################

Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_0/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_0/numOfTuners
Number of Tuners is 1
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525087583000~1525094783000?lang=eng&serviceList=502,503&count=255&region=101&catalogueId=1
### STEP3 :Schedule the Event with startguardtime of 2 minutes and verify it ##########################################################

ContentId Dictionary from Grid Response
{u'programid://1409396120~programid://2147482869': [1525088160000, 1525088400000, 240000, u'guardtun808_1']}
ContentId List after Sorting
[(u'programid://1409396120~programid://2147482869', [1525088160000, 1525088400000, 240000, u'guardtun808_1'])]
Event with guardtime payload {
                                    "checkConflicts": true,
                                    "pvr": "nPVR",
                                    "scheduleInstanceId": "programid://1409396120~programid://2147482869",
                                    "startGuardTime" : "00:02:00"
                                    }

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
PPS booking is successful for the event contentId programid://1409396120~programid://2147482869
PPS Booking completed successfully
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
All programs with the contentids [u'programid://1409396120~programid://2147482869'] is in BOOKED state
episode is present in the catalog

Details for:  programid://1409396120~programid://2147482869
Start guard time:  00:02:00 , End guard time :  00:00:00 Startime, Duration 2018-04-30T11:36:00Z 00:04:00
Endtime from grid response 1525088400000
End time :  1525088400000 from booking catalog
Booking is done with given start guard time and end time is also correct
### STEP4: Schedule the series booking and verify it books successfully without any conflict ##########################################################

Series contentId [(u'programid://1980221678~programid://1095013190', [1525087920000, 1525088160000, u'guardtun199_1_1', 2057748114, 1])]
Series Payload 
                                 {
                                 "scheduleInstanceId" : "programid://1980221678~programid://1095013190",
                                 "checkConflicts" : true,
                                 "pvr":"nPVR",
                                 "recurrence":"SERIES"
                                 }
                                 

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
### STEP5: Revert back to the original value which is stored initially from UPM ###########################################################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: PPS Booking is successfull without any conflict

2018/04/30 11:26:44 UTC ############################## ENDED :  corner_US31810_TC1148_guardband_tunerconflict ##############################

2018/04/30 11:26:44 UTC ############################## STARTED :  corner_US31810_TC1149_eventseries_noTunerConflict ##############################

US31810: As a SP, when a series recording is created I want the cDVR System to perform Recording Tuner Quota checking on the first episode in the series

TC1149: With 1 tuner, this test checks user is able to schedule a series with its first episode doesn't overlap to a single schedule recording
Starting test corner_US31810_TC1149_eventseries_noTunerConflict


### STEP1: Ingest Event of 6 minutes(with posttime of 6 minutes) and Series2 with 2 episode of 3 minutes(without post time and timedifference between episode1 and episode2 is 3 minutes) on 2 channels
Post time of  eveserno808  is :  1525088504.04  length : 6
Post time of  sereveno199  is :  1525087964.04 length : 3
{'services': { 502: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'eveserno808_1', 'rating': 1}], 'lineupLength': 6, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 503: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'sereveno199_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'sereveno199'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'sereveno199_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'sereveno199'}],
         'lineupLength': 6,
         'message': ''}},
'shows': set(['sereveno199']),
'seasons': { 'sereveno199': { 1: set([1, 2])}},
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "3",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.8328
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Fetching Number of tuners in the Household
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_0/numOfTuners
Number of Tuners is 4


### STEP2: Change the tuner quota to 1 ########################################################################################################################

Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_0/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_0/numOfTuners
Number of Tuners is 1
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525087745000~1525094945000?lang=eng&serviceList=502,503&count=255&region=101&catalogueId=1


### STEP3: Do the Event and Series booking, than verify there is no conflict as per the testcase since the first episode of Series2 does not have any overlap ##########################################################


PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
PPS booking is successful

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings


### STEP4: Revert back to the original value which is stored initially from UPM ###########################################################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

 Testcase passed: PPS Booking is successfull 

2018/04/30 11:29:25 UTC ############################## ENDED :  corner_US31810_TC1149_eventseries_noTunerConflict ##############################

2018/04/30 11:29:25 UTC ############################## STARTED :  corner_US31810_TC1150_manualSeries_notunerConflict ##############################

US31810: As a SP, when a series recording is created I want the cDVR System to perform Recording Tuner Quota checking on the first episode in the series

TC1150: With 1 tuner, this test checks user is able to schedule a series with its first episode doesn't overlap to a manual schedule recording
Starting test corner_US31810_TC1150_manualSeries_notunerConflict
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']


### STEP1: Ingest Event of 6 minutes(with post time of 6 minutes) and Series2 with 2 episode of 3 minutes(without posttime and timedifference between episode1 and episode2 is 6 minutes) on 2 channels #######################################################

{'services': { 502: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'manevetun829_1', 'rating': 1}], 'lineupLength': 6, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 503: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'mansertun220_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'mansertun220'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'mansertun220_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'mansertun220'}],
         'lineupLength': 6,
         'message': ''}},
'shows': set(['mansertun220']),
'seasons': { 'mansertun220': { 1: set([1, 2])}},
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "6",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.8328
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Fetching Number of tuners in the Household
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_0/numOfTuners
Number of Tuners is 4


### STEP2: Change the tuner quota to 1 #############################################################################################################

Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_0/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_0/numOfTuners
Number of Tuners is 1
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525087906000~1525095106000?lang=eng&serviceList=502,503&count=255&region=101&catalogueId=1


### STEP3: Do the Manual Booking of the Event and Series, than verify there is no conflict as per the testcase since the first episode of Series2 does not have any overlap ##########################################################################


PPS booking is Doing for householdId AUTO_3006_cornercase_set1_scripts_0 : 

PPS time based booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings 
PPS booking is successful

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings


### STEP4: Revert back to the original value which is stored initially from UPM ###########################################################################################################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

 Testcase passed:PPS Booking is successfull 

2018/04/30 11:32:07 UTC ############################## ENDED :  corner_US31810_TC1150_manualSeries_notunerConflict ##############################

2018/04/30 11:32:07 UTC ############################## STARTED :  corner_US31810_TC1151_book_event_series_withGuardTime ##############################

US31810: As a SP, when a series recording is created I want the cDVR System to perform Recording Tuner Quota checking on the first episode in the series

TC1151 : No Conflict, 1 tuner, schedule a series with guardband 15 minutes late, series overlaps to a manual recording 
Starting test corner_US31810_TC1151_book_event_series_withGuardTime
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
###STEP1:Ingest the Event of 4 minutes duration with Post time of 8 minutes on Channel1 and Series1 with 1 Episode of 4 minutes with post time of 4 minutes#################################



Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Final list :[('cmdc', 'pps.cdvr.dcpt01.ciscocdvr.net', 'upm.cdvr.dcpt01.ciscocdvr.net')]
{'services': { 502: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'seriesgua829_1', 'rating': 1}], 'lineupLength': 4, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:04:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 503: { 'lineup': [{ 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'seriesguar220_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'seriesguar220'}],
         'lineupLength': 4,
         'message': ''}},
'shows': set(['seriesguar220']),
'seasons': { 'seriesguar220': { 1: set([1])}},
'totalLength': "00:04:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.5552
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Fetching Number of tuners in the Household
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_0/numOfTuners
Number of Tuners is 4

### STEP2:Set the tuner quota to 1############

Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_0/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_0/numOfTuners
Number of Tuners is 1
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525088067000~1525095267000?lang=eng&serviceList=502,503&count=255&region=101&catalogueId=1

###STEP3:Perform the manual booking on the first channel. #######


PPS booking is Doing for householdId AUTO_3006_cornercase_set1_scripts_0 : 
Pps booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
Event Booking Successfull  
### STEP4:Verify that the manual book successfully and it is in booked catalog.###################



get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
start wait time from func 572.0
Event is present in the Booked catalog
###STEP5:Perform the Series booking on the second channel.#################




PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
Series Booking Successful with contentId programid://1357086171~programid://1209573949 
###STEP6:Verify that the Series booking successfull and all the episodes are present in the booked catalog. #####



get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
All programs with the contentids [u'programid://1357086171~programid://1209573949'] is in BOOKED state
Start Guard time:  00:00:00  End guard time :  00:03:00
Booking is done with given end guard time 

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

 Testcase passed:Series booking with guard time of 3 minutes is successfull

2018/04/30 11:34:53 UTC ############################## ENDED :  corner_US31810_TC1151_book_event_series_withGuardTime ##############################

2018/04/30 11:34:53 UTC ############################## STARTED :  corner_US31822_TC1136_Book_recording_user_set_autodelete_after_n_days_changeto_0_day ##############################

 TC1136:Book Recording, user set auto delete after n day and change auto delete after 0 day

 US31822:As a viewer, I want to be able to set a auto-delete after 'n' days value to help me stay under my storage quota that will override the SP default
Starting test corner_US31822_TC1136_Book_recording_user_set_autodelete_after_n_days_changeto_0_day
### STEP1: Ingest the catalog with 2event of n min each ############################################################


{'services': { 502: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'autozer220_1', 'rating': 1}], 'lineupLength': 4, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:04:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.2776
### STEP2: Do the pps booking of the event and verify that it is booked successfully ############################################################


Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525088233000~1525095433000?lang=eng&serviceList=502&count=255&region=101&catalogueId=1
ContentId dictionary from the grid response
{u'programid://1263033465~programid://1859354446': [1525088280000, 1525088520000, 240000, u'autozer220_1']}
ContentId list after sorting
[(u'programid://1263033465~programid://1859354446', [1525088280000, 1525088520000, 240000, u'autozer220_1'])]

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings 
PPS booking is successful for the event contentId programid://1263033465~programid://1859354446
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
All programs with the contentids [u'programid://1263033465~programid://1859354446'] is in BOOKED state
contentURI is successfully retrived from the event 
#### STEP3:retrieve the original autodelete value and modify it to new one (i.e 1)  ############################################################



#################### DEBUG STARTED ####################

Script Fetching the Household Booked/Recorded Catalog at 2018-04-30 11:37:15.871621
get all Catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog
 
Household Booked/Recorded Catalog Response:
[
    {
        "pvr": "nPVR", 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set1_scripts_0", 
        "channelId": "502", 
        "isSynchronized": true, 
        "duration": "00:04:00", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T11:38:00Z", 
        "content": {
            "instanceId": "programid://1859354446", 
            "broadcastDateTime": 1525088280000, 
            "seasonPremiere": false, 
            "locator": "{M2EwYjczZmZkYmVlZjAwZDdiZTY=,java.lang.String,NORMAL}[+]{hashKey,NORMAL}", 
            "erotic": false, 
            "audioType": "stereo", 
            "duration": 240000, 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": false, 
            "macrovision": false, 
            "id": "programid://1263033465", 
            "mixSource": false, 
            "externalKey": "autozer220_1_502_tk04301142", 
            "audioDescription": false, 
            "restartAvailable": false, 
            "title": "autozer220_1", 
            "allOfferIdList": [
                2
            ], 
            "mixContentId": false, 
            "contentNdsDrmAttributes": {
                "isBto": false, 
                "lastOfferEndDateTime": 1765963847000, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "rentalDuration": 2147483647, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isExtendedRental": false, 
                "isIppv": false, 
                "isPar": false, 
                "isOppv": false
            }, 
            "source": "ltv", 
            "live": false, 
            "subtitlesHardOfHearing": false, 
            "type": "instance", 
            "channel": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
            "videoFormat": "sd", 
            "wideScreen": false, 
            "isPurchasable": true, 
            "hdcp": false, 
            "serviceId": "502", 
            "adult": false, 
            "sortTitle": "autozer220_1", 
            "endAvailability": 1525088520000, 
            "hasChapters": false, 
            "cdvrAvailable": true, 
            "seasonFinale": false, 
            "shortSynopsis": "autozer220_1 - synopsis", 
            "synopsis": "autozer220_1 - synopsis", 
            "broadcaster": "VGE", 
            "serviceEquivalenceKey": "502", 
            "ict": false
        }, 
        "title": "autozer220_1", 
        "recurrence": "NONE", 
        "state": "BOOKED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "38116", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{502,java.lang.Integer,NORMAL}-|-{MmFhMTlkZDMwOWM2ZTA4NWVkNDY=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "502", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 502, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 502", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 502", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "502", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "502", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_12122~PPS_INSTANCE_38116", 
        "startTime": "2018-04-30T11:38:00Z", 
        "bookingDuration": "00:04:00", 
        "notificationHandles": [
            "5ae6ffe94935241fe4c13c14"
        ], 
        "created": "2018-04-30T11:37:13Z", 
        "lastModified": "2018-04-30T11:37:13Z", 
        "contentPlayUri": "?recId=11f1c5a3-3202-4f5e-8956-1c9d232c4200", 
        "uri": "/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae6ffe94935241fe4c13c14", 
        "scheduleInstance": "programid://1263033465~programid://1859354446", 
        "keep": false, 
        "contentId": "programid://1263033465~programid://1859354446"
    }
]
Script Fetching Household Failed Recording Catalog at 2018-04-30 11:37:15.892445
get all failed recording catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog?filter:state=FAILED
 
Failed Recording Catalog is empty

#################### DEBUG ENDED   ####################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Failed: Unable to fetch the AutodeleteDays  from the Household Catalog 
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX   ^ ^ ^ ^ ^   XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX   E R R O R   XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

2018/04/30 11:37:36 UTC ############################## ENDED :  corner_US31822_TC1136_Book_recording_user_set_autodelete_after_n_days_changeto_0_day ##############################

2018/04/30 11:37:36 UTC ############################## STARTED :  corner_US31833_TC1312_playback_currentrecording_cancelrecording ##############################
US31833: As a user I want to be able to setup playback session for recorded content
TC1312: Playback currently recording and cancel the program during recording and playback
Starting test corner_US31833_TC1312_playback_currentrecording_cancelrecording

###STEP1:Ingest  two events with n minutes duration ####


{'services': { 502: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'Individual220_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'Individual220_2', 'rating': 1}],
         'lineupLength': 8,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.5552
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525088396000~1525095596000?lang=eng&serviceList=502&count=255&region=101&catalogueId=1
### STEP2:Perform the event booking. #########################


contentId Dictionary from the Grid Response
{u'programid://1872275919~programid://768228545': [1525088700000, 1525088940000, 240000, u'Individual220_2'], u'programid://1872275920~programid://768228544': [1525088460000, 1525088700000, 240000, u'Individual220_1']}
contentId list after Sorting
[(u'programid://1872275920~programid://768228544', [1525088460000, 1525088700000, 240000, u'Individual220_1']), (u'programid://1872275919~programid://768228545', [1525088700000, 1525088940000, 240000, u'Individual220_2'])]

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings 
PPS Booking is successful for the event contentId programid://1872275920~programid://768228544
###STEP3:Verify that event booked successfully and wait to start recording.  #############


get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
All programs with the contentids [u'programid://1872275920~programid://768228544'] is in BOOKED state
Program starts broadcasting from 1525088460000 (in epoch)
Script will wait for 1.06666666667 minutes to start the recording
contentId is present in the Booked Catalog
### STEP4:Verify that the event is in recording state in recording library####


get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/recordings
 
All Program with the contentid [u'programid://1872275920~programid://768228544'] is in RECORDING state
###STEP5:Perform the playback of the currently recording event.####


URL to get the RM response : http://rr.cdvr.dcpt01.ciscocdvr.net:80/recordingInfo/4d544f98-0693-412f-a7c1-edbc9fc9e194?contentType=MPEG4&mode=playback&responseFormat=json
Download the manifest file viahttp://cdvr.pe1.ciscocdvr.net:80/cdvr/ee46cd21-a0d7-4a84-ad6a-db0c784f37d8/ee46cd21-a0d7-4a84-ad6a-db0c784f37d8.m3u8
Manifest for the Recorded Content
#EXTM3U
#EXT-X-MEDIA:TYPE=SUBTITLES,GROUP-ID="subs",FORCED=NO,AUTOSELECT=YES,LANGUAGE="en",NAME="cc1",URI="subtitles_cc1_5000_smptett_frag_cc1_CEA-608_.m3u8"
#EXT-X-STREAM-INF:BANDWIDTH=203600,CODECS="avc1.4D400D",RESOLUTION=320x240,FRAME-RATE=29.970,SUBTITLES="subs"
5004_video_seg_auto.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=510000,CODECS="avc1.4D400D",RESOLUTION=320x240,FRAME-RATE=29.970,SUBTITLES="subs"
5003_video_seg_auto.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=664400,CODECS="avc1.4D4016",RESOLUTION=480x360,FRAME-RATE=29.970,SUBTITLES="subs"
5002_video_seg_auto.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=1073200,CODECS="avc1.4D4016",RESOLUTION=480x360,FRAME-RATE=29.970,SUBTITLES="subs"
5001_video_seg_auto.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=1481600,CODECS="avc1.4D4016",RESOLUTION=480x360,FRAME-RATE=29.970,SUBTITLES="subs"
5000_video_seg_auto.m3u8
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=203600,CODECS="avc1.4D400D",RESOLUTION=320x240,URI="iframe_5004_i-frame.m3u8"
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=510000,CODECS="avc1.4D400D",RESOLUTION=320x240,URI="iframe_5003_i-frame.m3u8"
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=664400,CODECS="avc1.4D4016",RESOLUTION=480x360,URI="iframe_5002_i-frame.m3u8"
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=1073200,CODECS="avc1.4D4016",RESOLUTION=480x360,URI="iframe_5001_i-frame.m3u8"
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=1481600,CODECS="avc1.4D4016",RESOLUTION=480x360,URI="iframe_5000_i-frame.m3u8"

Manifest file for the recorded video saved to /home/centos/cdvr_crnrset1/corner_US31833_TC1312_playback_currentrecording_cancelrecording_Individual220_1_manifest_20180430-114201.txt
Download the Video Sample viahttp://cdvr.pe1.ciscocdvr.net:80/cdvr/ee46cd21-a0d7-4a84-ad6a-db0c784f37d8/5004_video_seg_auto_dLMfBOz4QyK_SN5aBAn1jw/53914021161.ts
Download the Video Sample viahttp://cdvr.pe1.ciscocdvr.net:80/cdvr/ee46cd21-a0d7-4a84-ad6a-db0c784f37d8/5004_video_seg_auto_dLMfBOz4QyK_SN5aBAn1jw/53914021161.ts
Video Sample File Downloaded at /home/centos/cdvr_crnrset1/corner_US31833_TC1312_playback_currentrecording_cancelrecording_Individual220_1_file__20180430-114202.ts
Video Sample saved in the same folder with the name corner_US31833_TC1312_playback_currentrecording_cancelrecording_Individual220_1_file__20180430-114202.ts with the size of 149836 bytes
###STEP6:Stop currently playback#######


Stop the recording via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae7008ce9c28320e24199a0/management
Stop Recording is successful
Recording is successfully cancelled(stopped) during Recording and Playback
###STEP7:Verify that the event stopped recording and it is in recorded  library.###


get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/recordings
 
All Programs with the contentids [u'programid://1872275920~programid://768228544'] is in RECORDED state

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: Event is successfully stopped and in recorded library

2018/04/30 11:43:52 UTC ############################## ENDED :  corner_US31833_TC1312_playback_currentrecording_cancelrecording ##############################

2018/04/30 11:43:52 UTC ############################## STARTED :  corner_US31833_TC1328_playback_episodeofseries ##############################
US31833: As a user I want to be able to setup playback session for recorded content
TC1328 :Playback an episode of a series
Starting test corner_US31833_TC1328_playback_episodeofseries
### STEP1:Ingest a series of two episodes with three minutes duration.#################################



{'services': { 502: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'First342_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'First342'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'First342_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'First342'}],
         'lineupLength': 8,
         'message': ''}},
'shows': set(['First342']),
'seasons': { 'First342': { 1: set([1, 2])}},
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.5552
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

### STEP2:Perform the Series booking. #########################


cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525088773000~1525095973000?lang=eng&serviceList=502&count=255&region=101&catalogueId=1
Series ContentId Dictionary from the Grid Response
{u'programid://1530400253~programid://634043990': [1525089060000, 1525089300000, u'First342_1_2', 2033155899, u'502'], u'programid://1530400254~programid://634043989': [1525088820000, 1525089060000, u'First342_1_1', 2033155899, u'502']}
Series ContentId list after Sorting
[(u'programid://1530400254~programid://634043989', [1525088820000, 1525089060000, u'First342_1_1', 2033155899, u'502']), (u'programid://1530400253~programid://634043990', [1525089060000, 1525089300000, u'First342_1_2', 2033155899, u'502'])]
programid://1530400254~programid://634043989

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookings
PPS Booking is Successful for the series contentId programid://1530400254~programid://634043989 
### STEP3:Verify that the all episodes of the series booked successfully###########


get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookings
 
All programs with the contentids [u'programid://1530400253~programid://634043990', u'programid://1530400254~programid://634043989'] is in BOOKED state
### STEP4:Verify that the first episode of the series is booked and wait to start recording #############


get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookings
 
All programs with the contentids [u'programid://1530400254~programid://634043989'] is in BOOKED state
Program starts broadcasting from 1525088820000 (in epoch)
Script will wait for 0.7 minutes to start the recording
### STEP5:Verify that the first episode of the series is in recording state and wait to compleete recording####


get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/recordings
 
All Program with the contentid [u'programid://1530400254~programid://634043989'] is in RECORDING state
Script will wait for 2.98333333333 minutes to finish the recording
### STEP6:Verify first episode is in recorded state in record catalog . 


get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/recordings
 
All Programs with the contentids [u'programid://1530400254~programid://634043989'] is in RECORDED state
### STEP7:Perform the playback of the first epiosde of the series. #### 


URL to get the RM response : http://rr.cdvr.dcpt01.ciscocdvr.net:80/recordingInfo/394a5be8-1aa5-473c-b385-15f38891b53c?contentType=MPEG4&mode=playback&responseFormat=json
Download the manifest file viahttp://cdvr.pe1.ciscocdvr.net:80/cdvr/5eb37ff3-5405-4092-9410-8274dac56ffb/5eb37ff3-5405-4092-9410-8274dac56ffb.m3u8
Manifest for the Recorded Content
#EXTM3U
#EXT-X-MEDIA:TYPE=SUBTITLES,GROUP-ID="subs",FORCED=NO,AUTOSELECT=YES,LANGUAGE="en",NAME="cc1",URI="subtitles_cc1_5000_smptett_frag_cc1_CEA-608_.m3u8"
#EXT-X-STREAM-INF:BANDWIDTH=203600,CODECS="avc1.4D400D",RESOLUTION=320x240,FRAME-RATE=29.970,SUBTITLES="subs"
5004_video_seg_auto.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=510000,CODECS="avc1.4D400D",RESOLUTION=320x240,FRAME-RATE=29.970,SUBTITLES="subs"
5003_video_seg_auto.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=664400,CODECS="avc1.4D4016",RESOLUTION=480x360,FRAME-RATE=29.970,SUBTITLES="subs"
5002_video_seg_auto.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=1073200,CODECS="avc1.4D4016",RESOLUTION=480x360,FRAME-RATE=29.970,SUBTITLES="subs"
5001_video_seg_auto.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=1481600,CODECS="avc1.4D4016",RESOLUTION=480x360,FRAME-RATE=29.970,SUBTITLES="subs"
5000_video_seg_auto.m3u8
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=203600,CODECS="avc1.4D400D",RESOLUTION=320x240,URI="iframe_5004_i-frame.m3u8"
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=510000,CODECS="avc1.4D400D",RESOLUTION=320x240,URI="iframe_5003_i-frame.m3u8"
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=664400,CODECS="avc1.4D4016",RESOLUTION=480x360,URI="iframe_5002_i-frame.m3u8"
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=1073200,CODECS="avc1.4D4016",RESOLUTION=480x360,URI="iframe_5001_i-frame.m3u8"
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=1481600,CODECS="avc1.4D4016",RESOLUTION=480x360,URI="iframe_5000_i-frame.m3u8"

Manifest file for the recorded video saved to /home/centos/cdvr_crnrset1/corner_US31833_TC1328_playback_episodeofseries0_First342_1_1_manifest_20180430-115230.txt
Download the Video Sample viahttp://cdvr.pe1.ciscocdvr.net:80/cdvr/5eb37ff3-5405-4092-9410-8274dac56ffb/5004_video_seg_auto_dLMfBOz4QyK_SN5aBAn1jw/53946453561.ts
Video Sample File Downloaded at /home/centos/cdvr_crnrset1/cdvr_sanity_tests/scripts/cornercase_scripts/cornercase_set1_scripts/corner_US31833_TC1328_playback_episodeofseries0_First342_1_1_file__20180430-115232.ts
Video Sample saved in the same folder with the name corner_US31833_TC1328_playback_episodeofseries0_First342_1_1_file__20180430-115232.ts with the size of 149460 bytes

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: Event recorded and Played back successfully

2018/04/30 11:52:52 UTC ############################## ENDED :  corner_US31833_TC1328_playback_episodeofseries ##############################

2018/04/30 11:52:52 UTC ############################## STARTED :  corner_US31833_TC1332_Schedule_Event_based_Recording_Playback_twoclients ##############################
US31833: As a user I want to be able to setup playback session for recorded content
TC1332: Playback same programs on different clients at the same time
Starting test corner_US31833_TC1332_Schedule_Event_based_Recording_Playback_twoclients
### STEP1: Verify if PRM Supported, proceed further if it is True ######## 


Testcase Unsupported: Playback on two clients not possible in Non-PRM Method
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX   ^ ^ ^ ^ ^ ^ ^   XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX   W A R N I N G   XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

2018/04/30 11:52:52 UTC ############################## ENDED :  corner_US31833_TC1332_Schedule_Event_based_Recording_Playback_twoclients ##############################

2018/04/30 11:52:52 UTC ############################## STARTED :  corner_US31861_TC1476_Storage_Quota_check_recordinginprogress ##############################
{'TC1476': ['US31861', '', 3]}

 US31861: As a SP, when the system performs storage quota checking at scheduling the algorithm will include Recording in Progress  and Recorded events only

 TC1476: Storage Quota checking at Schedule time with one active recording in progress and active recording has later end broadcast time
Starting test corner_US31861_TC1476_Storage_Quota_check_recordinginprogress
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']

### STEP1: Ingest the catalog for 4 individual event of n minutes each ##########

post_time :  1525089412.68
{'services': { 503: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'TC1476118_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'TC1476118_2', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'TC1476118_3', 'rating': 1}],
         'lineupLength': 9,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:09:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.6246
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################


### STEP2:fetch the content ID of all the three event and diskquota for the first event ####### 

Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Retrieve Total diskQuota fetched  via URL :  http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_1/diskQuota
Diskquota for the household is 108000
Original Diskquota is : 108000
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525089313000~1525096513000?lang=eng&serviceList=503&count=255&region=101&catalogueId=1
ContentId dictionary from the grid response
{u'programid://2147480329~programid://2147482872': [1525089540000, 1525089720000, 180000, u'TC1476118_2'], u'programid://2147480328~programid://2147482871': [1525089360000, 1525089540000, 180000, u'TC1476118_1'], u'programid://2147480330~programid://2147482873': [1525089720000, 1525089900000, 180000, u'TC1476118_3']}
ContentId list after sorting
[(u'programid://2147480328~programid://2147482871', [1525089360000, 1525089540000, 180000, u'TC1476118_1']), (u'programid://2147480329~programid://2147482872', [1525089540000, 1525089720000, 180000, u'TC1476118_2']), (u'programid://2147480330~programid://2147482873', [1525089720000, 1525089900000, 180000, u'TC1476118_3'])]
event_contentId_list :  [(u'programid://2147480328~programid://2147482871', [1525089360000, 1525089540000, 180000, u'TC1476118_1']), (u'programid://2147480329~programid://2147482872', [1525089540000, 1525089720000, 180000, u'TC1476118_2']), (u'programid://2147480330~programid://2147482873', [1525089720000, 1525089900000, 180000, u'TC1476118_3'])]

### STEP3: Modify the diskquota to the 2% of the  calculated duration #####
 
diskquota :  367
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
DiskQuota is modified  via URL :  http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_1/diskQuota
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Retrieve Total diskQuota fetched  via URL :  http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_1/diskQuota
Diskquota for the household is 367
Full diskquota is  367

### STEP4: Do the pps booking for the first event verify that the event is successfully recorded ####


PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookings 
PPS booking is successful for the event contentId programid://2147480328~programid://2147482871
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookings
 
All programs with the contentids [u'programid://2147480328~programid://2147482871'] is in BOOKED state
event_state :  [{u'pvr': u'nPVR', u'lock': False, u'household': u'AUTO_3006_cornercase_set1_scripts_1', u'channelId': u'503', u'isSynchronized': True, u'duration': u'00:03:00', u'bookingType': u'EVENT', u'bookingStartTime': u'2018-04-30T11:56:00Z', u'content': {u'instanceId': u'programid://2147482871', u'broadcastDateTime': 1525089360000, u'seasonPremiere': False, u'locator': u'{ODM1ZmI4NTU2Nzk4MTExNzA2ZmQ=,java.lang.String,NORMAL}[+]{hashKey,NORMAL}', u'erotic': False, u'audioType': u'stereo', u'duration': 180000, u'offerIdList': [2], u'catchupAvailable': False, u'macrovision': False, u'id': u'programid://2147480328', u'mixSource': False, u'externalKey': u'TC1476118_1_503_tk04301159', u'audioDescription': False, u'restartAvailable': False, u'title': u'TC1476118_1', u'allOfferIdList': [2], u'mixContentId': False, u'contentNdsDrmAttributes': {u'isBto': False, u'lastOfferEndDateTime': 1765963847000, u'isDrmFree': False, u'price': 20, u'isIsu': False, u'rentalDuration': 2147483647, u'isSubscription': True, u'currencySymbol': u'$', u'isExtendedRental': False, u'isIppv': False, u'isPar': False, u'isOppv': False}, u'source': u'ltv', u'live': False, u'subtitlesHardOfHearing': False, u'type': u'instance', u'channel': u'http://linear.cdvr.primetime.com/coid/coid.m3u8', u'videoFormat': u'sd', u'wideScreen': False, u'isPurchasable': True, u'hdcp': False, u'serviceId': u'503', u'adult': False, u'sortTitle': u'TC1476118_1', u'endAvailability': 1525089540000, u'hasChapters': False, u'cdvrAvailable': True, u'seasonFinale': False, u'shortSynopsis': u'TC1476118_1 - synopsis', u'synopsis': u'TC1476118_1 - synopsis', u'broadcaster': u'VGE', u'serviceEquivalenceKey': u'503', u'ict': False}, u'title': u'TC1476118_1', u'recurrence': u'NONE', u'state': u'BOOKED', u'startGuardTime': u'00:00:00', u'recordingId': u'38123', u'type': u'LINEAR-RECORDING', u'channel': {u'locator': u'{503,java.lang.Integer,NORMAL}-|-{NzEyYWQ0ODM4ZjAwOWFmMWM2Y2Y=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}', u'offerIdList': [2], u'catchupAvailable': True, u'id': u'503', u'relatedRecommendationsAvailable': True, u'logicalChannelNumber': 503, u'genres': [{u'_links': {u'genres': {u'href': u'/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng'}}, u'type': u'Action/Adventure', u'id': 1}], u'drmProtected': False, u'restartAvailable': True, u'_links': {u'parentalRatings': [{u'href': u'/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng'}]}, u'provider': u'VGE', u'hidden': False, u'type': u'1', u'description': u'Service Description 503', u'recordControl': u'noRecording', u'isPurchasable': True, u'scheduleAvailable': True, u'cdvrAvailable': True, u'operatorSpecificData': [{u'data': u'false', u'namespace': u'urn:nnds:mercury:service:PPV'}], u'adult': False, u'name': u'Service 503', u'serviceNdsDrmAttributes': {u'hasFecm': False, u'isDrmFree': False, u'price': 20, u'isIsu': False, u'isSubscription': True, u'currencySymbol': u'$', u'isBundle': False, u'isIppv': False, u'isOppv': False}, u'parentalRating': {u'rating': 2, u'scheme': u'custom'}, u'serviceDeliveries': [{u'externalServiceId': u'503', u'bandwidth': 15, u'type': u'abr', u'uri': u'http://linear.cdvr.primetime.com/coid/coid.m3u8', u'mode': u'hlsabr'}], u'serviceEquivalenceKey': u'503', u'storeAvailable': False, u'runningStatus': True, u'protectionType': u'VGS'}, u'endGuardTime': u'00:00:00', u'recordingContentId': u'PPS_CONTENT_12147~PPS_INSTANCE_38123', u'startTime': u'2018-04-30T11:56:00Z', u'bookingDuration': u'00:03:00', u'notificationHandles': [u'5ae70421f365362240f145cb'], u'created': u'2018-04-30T11:55:13Z', u'lastModified': u'2018-04-30T11:55:13Z', u'contentPlayUri': u'?recId=3bd474ce-0368-46f3-bf31-e843fdb55db5', u'uri': u'/pps/households/AUTO_3006_cornercase_set1_scripts_1/catalog/5ae70421f365362240f145cb', u'scheduleInstance': u'programid://2147480328~programid://2147482871', u'keep': False, u'contentId': u'programid://2147480328~programid://2147482871'}]
Program starts broadcasting from  1525089360000  (in epoch)
Script will wait for  0.783333333333  minutes to start the recording
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/recordings
 
All Program with the contentid [u'programid://2147480328~programid://2147482871'] is in RECORDING state
Recording Started and Program broadcasting completes at  1525089540000  (in epoch)
Program Recording completes in  120.0  seconds
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/recordings
 
All Programs with the contentids [u'programid://2147480328~programid://2147482871'] is in RECORDED state
Trying to attempt for second booking
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Retrieve Total diskQuota fetched  via URL :  http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_1/diskQuota
Diskquota for the household is 367
Full diskquota is  367

### STEP5: Do pps booking for the second event , and verify that recording happens.  ######


PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookings
response :  
Program starts broadcasting from  1525089540000  (in epoch)
Script will wait for  0  minutes to start the recording
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/recordings
 
All Program with the contentid [u'programid://2147480329~programid://2147482872'] is in RECORDING state
Event 2 is in recording state.
Trying to attempt for third booking
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Retrieve Total diskQuota fetched  via URL :  http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_1/diskQuota
Diskquota for the household is 367
Full diskquota is  367

### STEP6: Do pps booking for the third event , and verify that recording happens by automatically deleting the existing content due to insufficient quota  ######


PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookings
response :  
Program starts broadcasting from  1525089540000  (in epoch)
Script will wait for  0  minutes to start the recording
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/recordings
 
All Program with the contentid [u'programid://2147480330~programid://2147482873'] is in RECORDING state
Event 3 is in recording state.

### STEP7: Confirm event 3 has been recorded.
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/recordings
 
All Programs with the contentids [u'programid://2147480330~programid://2147482873'] is in RECORDED state
Event 3 is successfully recorded.

### STEP7.1: Confirm event 2 has been recorded.
Program Recording completes in  1  seconds
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/recordings
 
All Programs with the contentids [u'programid://2147480329~programid://2147482872'] is in RECORDED state
Event 2 is successfully recorded.

### STEP7.2: Confirm event 1 has been deleted from the recorded catalog.
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/recordings
 
Programs not in recorded state : [u'programid://2147480328~programid://2147482871'] 
### Started VMR verification ###
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/recordings
 
Length of ContentPlaybackURI list is not equal to the content id list : []
#### STEP9: Revert back the original conditions, verify the results ####

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: Final PPS Booking, recording is successful, after deleting the older ones

2018/04/30 12:09:25 UTC ############################## ENDED :  corner_US31861_TC1476_Storage_Quota_check_recordinginprogress ##############################

2018/04/30 12:09:25 UTC ############################## STARTED :  corner_US31863_TC1163_series_recording_inbookinglist ##############################

US31863: As a viewer, when I browse my cDVR series recordings I want to be able to expand and collapse the list of episodes within each series.

TC1163 :Series Recording, one currently recording episode of the series and no recorded episode in the recorded library
Starting test corner_US31863_TC1163_series_recording_inbookinglist
### STEP1:Ingest a series of two episodes with five minutes duration.#################################



{'services': { 502: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'Recap220_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'Recap220'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'Recap220_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'Recap220'}],
         'lineupLength': 12,
         'message': ''}},
'shows': set(['Recap220']),
'seasons': { 'Recap220': { 1: set([1, 2])}},
'totalLength': "00:12:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.8328

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525090306000~1525097506000?lang=eng&serviceList=502&count=255&region=101&catalogueId=1
### STEP2:Perform the Series booking. #########################




PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
Series Booking Successfull series with contentId programid://1374985797~programid://2147482881 
### STEP3:Verify that the all episodes of the series booked successfully###########



get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
All programs with the contentids [u'programid://1374985797~programid://2147482881', u'programid://1374985798~programid://2147482880'] is in BOOKED state
### STEP4:Verify that the first episode of the series is booked and wait to start recording #############



get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
Program starts broadcasting from 1525090380000 (in epoch)
Script will wait for 1.15 minutes to start the recording
series booked successfully 
### STEP5:Verify that the  first episode is in recording state.###################



get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/recordings
 
All Program with the contentid [u'programid://1374985797~programid://2147482881'] is in RECORDING state
###STEP6:Verify that no epispdes of the series are in the recorded catalog..#########



get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/recordings
 
Programs not in recorded state : [u'programid://1374985797~programid://2147482881', u'programid://1374985798~programid://2147482880'] 
### Started VMR verification ###
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/recordings
 
Length of ContentPlaybackURI list is not equal to the content id list : [u'?recId=ae897b45-7c91-46ea-914d-db55ee90fc46']

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

 Testcase passed: No episodes of the series is in the recorded catalog 

2018/04/30 12:14:21 UTC ############################## ENDED :  corner_US31863_TC1163_series_recording_inbookinglist ##############################

2018/04/30 12:14:21 UTC ############################## STARTED :  corner_US31863_TC1164_series_notstarted_verify_recordingcatalog ##############################
{'TC1164': ['US31863', '', 3]}
US31863: As a viewer, when I browse my cDVR series recordings, Iwant to be able to expand and collapse the list of episodes within each series.
TC1164: Series recording, only scheduled recording of the series and no recorded episode in the recorded library. Verify that there is no single group of series in the recorded tab and all scheduled recordings are in booking list.
Starting test corner_US31863_TC1164_series_notstarted_verify_recordingcatalog
### STEP1: Ingest Series1 of 3 Episodes and placeholder Series2 of 3 Episodes each on two channel respectively with the post time####################### 
 

{'services': { 502: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'onlyfutu93_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'onlyfutu93'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'onlyfutu93_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'onlyfutu93'},
                     { 'episodeNum': 3, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'onlyfutu93_1_3', 'rating': 1, 'seasonNum': 1, 'showID': 'onlyfutu93'}],
         'lineupLength': 9,
         'message': ''},
  503: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'onlyfuts698_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'onlyfuts698'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'onlyfuts698_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'onlyfuts698'},
                     { 'episodeNum': 3, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'onlyfuts698_1_3', 'rating': 1, 'seasonNum': 1, 'showID': 'onlyfuts698'}],
         'lineupLength': 9,
         'message': ''}},
'shows': set(['onlyfuts698', 'onlyfutu93']),
'seasons': { 'onlyfuts698': { 1: set([1, 2, 3])}, 'onlyfutu93': { 1: set([1, 2, 3])}},
'totalLength': "00:09:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Script will wait for 2.01041minutes to sync with the CI Host
Cleanup the catalog for the household before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

### STEP2: Fetch the Grid Request and do booking for both Series1 and placeholder Series2 ######################## 
 

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525090602000~1525097802000?lang=eng&serviceList=502,503&count=255&region=101&catalogueId=1

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings 

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings 
PPS Booking completed successfully for the series with contentId programid://1265432747~programid://2147482882
### STEP3: Verify all the episodes of the Series1 are in booked catalog and proceed further ################# 
 

get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
All programs with the contentids [u'programid://1265432747~programid://2147482882', u'programid://1265432746~programid://2147482883', u'programid://1265432748~programid://2147482884'] is in BOOKED state
All the Episodes are in the Booked Library
### STEP4: Verify there is no episodes present in the recorded library for the same Series1 ################## 
 

Recorded library fetched  via URL :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/recordings
Recorded Library is empty
Series Episodes are only in the booking list and not in the recorded library
### STEP5: Do the Collapse and Expand for the Series1, than verify and update the results ######################## 
 

group id list [u'groupid://1374826046']
series collapse via url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog?collapse=true
 
series collapse is successful
series collapsed successfully
Series Collapse Response[
    {
        "title": "onlyfutu93_1:Title ", 
        "contentId": "groupid://1374826046", 
        "household": "AUTO_3006_cornercase_set1_scripts_0", 
        "uri": "/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog?filter%3Aseries=groupid%3A%2F%2F1374826046&collapse=true", 
        "recurrence": "SERIES", 
        "bookingType": "EVENT", 
        "type": "COLLAPSED-INSTANCE"
    }, 
    {
        "title": "onlyfuts698_1:Title ", 
        "contentId": "groupid://2072537764", 
        "household": "AUTO_3006_cornercase_set1_scripts_0", 
        "uri": "/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog?filter%3Aseries=groupid%3A%2F%2F2072537764&collapse=true", 
        "recurrence": "SERIES", 
        "bookingType": "EVENT", 
        "type": "COLLAPSED-INSTANCE"
    }
]
Series Collapsed Successfully
group id list [u'groupid://1374826046']
series expand via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog?filter:series=groupid://1374826046&collapse=true
 
series expansion is successful
series expanded successfully

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: All episodes are in Booked state and collapsed/expanded successfully

2018/04/30 12:17:07 UTC ############################## ENDED :  corner_US31863_TC1164_series_notstarted_verify_recordingcatalog ##############################

2018/04/30 12:17:07 UTC ############################## STARTED :  corner_US31863_TC1166_series_Recording_Collapse_Expand_2times ##############################
US31863: As a viewer, when I browse my cDVR series recordings I want to be able to expand and collapse the list of episodes within each series.
TC1166: Series recording,  expand the list,  collapse the list and expand the list
Starting test corner_US31863_TC1166_series_Recording_Collapse_Expand_2times
### STEP1: Ingest two series with same broadcasttime (3 Episodes of 2 minutes duration) ########
 
 

{'services': { 502: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'collexptw308_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'collexptw308'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'collexptw308_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'collexptw308'}],
         'lineupLength': 12,
         'message': ''},
  503: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'collexpt860_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'collexpt860'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'collexpt860_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'collexpt860'}],
         'lineupLength': 12,
         'message': ''}},
'shows': set(['collexpt860', 'collexptw308']),
'seasons': { 'collexpt860': { 1: set([1, 2])}, 'collexptw308': { 1: set([1, 2])}},
'totalLength': "00:12:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Script will wait for 120.8328 seconds to sync with the CI Host

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525090769000~1525097969000?lang=eng&serviceList=502,503&count=255&region=101&catalogueId=1
### STEP2: Do the Series booking for the first Seriesi(Place holder series ) ######### 
 
 


PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookings 
Series Booking Successfull for series contentId programid://1287744863~programid://12050050 
### STEP3: Do Series booking for the Second Series ######### 
 
 


PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookings 
Series Booking Successfull for series contentId programid://2147480335~programid://1466146145 
###  STEP4: Verify all the episodes of the series is present in the booked library ##### 
 
 

get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/bookings
 
Content Ids from the booked library [u'programid://2147480335~programid://1466146145', u'programid://2147480334~programid://1466146144']
Content Ids from the grid response [u'programid://2147480334~programid://1466146144', u'programid://2147480335~programid://1466146145']
all booked programes are present in the booked library
### STEP5: Wait till  all the episodes get recorded and verify that all episodes are in the recorded library############ 
 
 

System will wait for  861.0 seconds to compleete the recording
Recorded library fetched  via URL :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/recordings
all programs are present in the recorded library
###  STEP6: Perform the Series collapse and Series Expand two times ############ 
 
 

group id list [u'groupid://1342634667']
series collapse via url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/catalog?collapse=true
 
series collapse is successful
series collapsed successfully
group id list [u'groupid://1342634667']
series expand via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/catalog?filter:series=groupid://1342634667&collapse=true
 
series expansion is successful
series expanded successfully
Episodes of series with group id [u'groupid://1342634667'] is expanded and collapse successfully
group id list [u'groupid://1342634667']
series collapse via url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/catalog?collapse=true
 
series collapse is successful
series collapsed successfully
group id list [u'groupid://1342634667']
series expand via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_1/catalog?filter:series=groupid://1342634667&collapse=true
 
series expansion is successful
series expanded successfully
Episodes of series with group id [u'groupid://1342634667'] is expanded and collapse successfully
### STEP7: Verify Series Episodes are collapsed and expanded into individual episodes two times, than update the results ################# 
 


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed : Series Episodes collapsed and expanded two times successfully

2018/04/30 12:35:50 UTC ############################## ENDED :  corner_US31863_TC1166_series_Recording_Collapse_Expand_2times ##############################

2018/04/30 12:35:50 UTC ############################## STARTED :  corner_US31863_TC1170_IndividualRecording_Cancel_Bookseries_CollapseExpand ##############################
US31863: As a viewer, when I browse my cDVR series recordings I want to be able to expand and collapse the list of episodes within each series.
TC1170: Book individual recording, recording is on going,  cancel the scheduled recording,  partially recorded program,  Book Series with same title with individual recording, display in the recorded library
Starting test corner_US31863_TC1170_IndividualRecording_Cancel_Bookseries_CollapseExpand
### STEP1: Verify the recording mode and proceed further if it is not common copy environment ##################### 
 

Proceeding furthere since the Environment is Unique Copy
Cleaning up the Booked/Recording Catalog for the household

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

### STEP2: Ingest an Event and Series with same title and placeholder Series on two channels with the post time ###################### 
 

{'services': { 502: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'colexpan199_1_1', 'rating': 1},
                     { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'colexpan199_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'colexpan199'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'colexpan199_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'colexpan199'}],
         'lineupLength': 12,
         'message': ''},
  503: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'collexpand808_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'collexpand808'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'collexpand808_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'collexpand808'},
                     { 'episodeNum': 3, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'collexpand808_1_3', 'rating': 1, 'seasonNum': 1, 'showID': 'collexpand808'}],
         'lineupLength': 12,
         'message': ''}},
'shows': set(['colexpan199', 'collexpand808']),
'seasons': { 'colexpan199': { 1: set([1, 2])}, 'collexpand808': { 1: set([1, 2, 3])}},
'totalLength': "00:12:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Wait time for the catalog ingest to get synced with the CI Host in seconds 120.8328
### STEP3: Fetch the grid request and do the PPS Booking for the Event and the placeholder Series
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525091892000~1525099092000?lang=eng&serviceList=502,503&count=255&region=101&catalogueId=1
ContentId Dictionary from the Grid Response
{u'programid://1918145714~programid://1809004650': [1525092480000, 1525092720000, 240000, u'collexpand808_1_3', 1838932386], u'programid://2147480336~programid://924072026': [1525092240000, 1525092480000, 240000, u'colexpan199_1_1', 2147480090], u'programid://2147480336~programid://924072027': [1525092000000, 1525092240000, 240000, u'colexpan199_1_1', 2147480090], u'programid://1918145713~programid://1809004652': [1525092240000, 1525092480000, 240000, u'collexpand808_1_2', 1838932386], u'programid://2147480337~programid://924072025': [1525092480000, 1525092720000, 240000, u'colexpan199_1_2', 2147480090], u'programid://1918145712~programid://1809004651': [1525092000000, 1525092240000, 240000, u'collexpand808_1_1', 1838932386]}
ContentId list after Sorting
[(u'programid://2147480336~programid://924072027', [1525092000000, 1525092240000, 240000, u'colexpan199_1_1', 2147480090]), (u'programid://1918145712~programid://1809004651', [1525092000000, 1525092240000, 240000, u'collexpand808_1_1', 1838932386]), (u'programid://2147480336~programid://924072026', [1525092240000, 1525092480000, 240000, u'colexpan199_1_1', 2147480090]), (u'programid://1918145713~programid://1809004652', [1525092240000, 1525092480000, 240000, u'collexpand808_1_2', 1838932386]), (u'programid://2147480337~programid://924072025', [1525092480000, 1525092720000, 240000, u'colexpan199_1_2', 2147480090]), (u'programid://1918145714~programid://1809004650', [1525092480000, 1525092720000, 240000, u'collexpand808_1_3', 1838932386])]
[(u'programid://2147480336~programid://924072027', [1525092000000, 1525092240000, 240000, u'colexpan199_1_1', 2147480090]), (u'programid://2147480336~programid://924072026', [1525092240000, 1525092480000, 240000, u'colexpan199_1_1', 2147480090]), (u'programid://2147480337~programid://924072025', [1525092480000, 1525092720000, 240000, u'colexpan199_1_2', 2147480090])] [(u'programid://1918145712~programid://1809004651', [1525092000000, 1525092240000, 240000, u'collexpand808_1_1', 1838932386]), (u'programid://1918145713~programid://1809004652', [1525092240000, 1525092480000, 240000, u'collexpand808_1_2', 1838932386]), (u'programid://1918145714~programid://1809004650', [1525092480000, 1525092720000, 240000, u'collexpand808_1_3', 1838932386])]
contentId for the individual eventprogramid://2147480336~programid://924072027
contentId for series with same titleprogramid://2147480336~programid://924072026
series contentId placeholderprogramid://1918145712~programid://1809004651
SeriesId list[2147480090, 1838932386]

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings 
PPS Booking is successful for the event contentId programid://2147480336~programid://924072027

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings 
PPS Booking is successful for the Series contentId programid://1918145712~programid://1809004651
### STEP4: Wait till the first individual event starts recording and stop the in-progress recording #################### 
 

get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
All programs with the contentids [u'programid://2147480336~programid://924072027', u'programid://1918145712~programid://1809004651'] is in BOOKED state
Script will wait for the first episode to start recording in minutes 1.71666666667
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/recordings
 
All Program with the contentid [u'programid://2147480336~programid://924072027'] is in RECORDING state
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/recordings
 
All Program with the contentid [u'programid://1918145712~programid://1809004651'] is in RECORDING state
Stop the recording via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae70e34f365362240f145cc/management
Stop Recording is successful
### STEP5: Verify Individual Event is in Recorded state and book the Series of same title ####################### 
 

get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/recordings
 
All Programs with the contentids [u'programid://2147480336~programid://924072027'] is in RECORDED state

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings 
PPS Booking is successful for the Series with same title contentId programid://2147480336~programid://924072026
### STEP6: Wait till all the episodes completes recording and verify the Recorded Library ########################## 
 

get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
booked catalog [
    {
        "seriesId": "groupid://1838932386", 
        "pvr": "nPVR", 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set1_scripts_0", 
        "channelId": "503", 
        "isSynchronized": true, 
        "duration": "00:04:00", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T12:40:00Z", 
        "recurrence": "SERIES", 
        "title": "collexpand808_1_1", 
        "content": {
            "seriesId": 1838932386, 
            "instanceId": "programid://1809004651", 
            "broadcastDateTime": 1525092000000, 
            "seasonPremiere": false, 
            "locator": "{ZTgzYjlhYTE4NjcxNmNiNTIzZTU=,java.lang.String,NORMAL}[+]{hashKey,NORMAL}", 
            "erotic": false, 
            "audioType": "stereo", 
            "duration": 240000, 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": false, 
            "macrovision": false, 
            "id": "programid://1918145712", 
            "mixSource": false, 
            "externalKey": "collexpand808_1_1_503_tk04301244", 
            "audioDescription": false, 
            "restartAvailable": false, 
            "title": "collexpand808_1_1", 
            "allOfferIdList": [
                2
            ], 
            "synopsis": "collexpand808_1_1 - synopsis", 
            "contentNdsDrmAttributes": {
                "isBto": false, 
                "lastOfferEndDateTime": 1765963847000, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "rentalDuration": 2147483647, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isExtendedRental": false, 
                "isIppv": false, 
                "isPar": false, 
                "isOppv": false
            }, 
            "source": "ltv", 
            "live": false, 
            "parentGroupId": "groupid://1838932386", 
            "type": "instance", 
            "channel": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
            "videoFormat": "sd", 
            "wideScreen": false, 
            "episodeNumber": 1, 
            "isPurchasable": true, 
            "subtitlesHardOfHearing": false, 
            "hdcp": false, 
            "serviceId": "503", 
            "adult": false, 
            "sortTitle": "collexpand808_1_1", 
            "endAvailability": 1525092240000, 
            "hasChapters": false, 
            "cdvrAvailable": true, 
            "seasonFinale": false, 
            "shortSynopsis": "collexpand808_1_1 - synopsis", 
            "mixContentId": false, 
            "broadcaster": "VGE", 
            "serviceEquivalenceKey": "503", 
            "ict": false, 
            "parentGroups": [
                {
                    "groupType": "Series", 
                    "groupId": "groupid://1838932386"
                }
            ]
        }, 
        "state": "RECORDING", 
        "startGuardTime": "00:00:00", 
        "recordingId": "38160", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{503,java.lang.Integer,NORMAL}-|-{NzEyYWQ0ODM4ZjAwOWFmMWM2Y2Y=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "503", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 503, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 503", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 503", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "503", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "503", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_12225~PPS_INSTANCE_38160", 
        "startTime": "2018-04-30T12:39:55Z", 
        "recurrenceActive": true, 
        "bookingDuration": "00:04:00", 
        "notificationHandles": [
            "5ae70e3447551d206618c76b"
        ], 
        "created": "2018-04-30T12:38:12Z", 
        "lastModified": "2018-04-30T12:40:20Z", 
        "contentPlayUri": "?recId=8503306a-fdca-499d-8aa5-6ecaa65dea62", 
        "uri": "/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae70e3447551d206618c76b", 
        "scheduleInstance": "programid://1918145712~programid://1809004651", 
        "keep": false, 
        "contentId": "PPS_CONTENT_12225~PPS_INSTANCE_38160"
    }, 
    {
        "seriesId": "groupid://1838932386", 
        "pvr": "nPVR", 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set1_scripts_0", 
        "channelId": "503", 
        "isSynchronized": true, 
        "duration": "00:04:00", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T12:48:00Z", 
        "recurrence": "SERIES", 
        "title": "collexpand808_1_3", 
        "content": {
            "seriesId": 1838932386, 
            "instanceId": "programid://1809004650", 
            "broadcastDateTime": 1525092480000, 
            "seasonPremiere": false, 
            "locator": "{Yzc2ZDBkYThjNmEzNWU3OWEzMmQ=,java.lang.String,NORMAL}[+]{hashKey,NORMAL}", 
            "erotic": false, 
            "audioType": "stereo", 
            "duration": 240000, 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": false, 
            "macrovision": false, 
            "id": "programid://1918145714", 
            "mixSource": false, 
            "externalKey": "collexpand808_1_3_503_tk04301252", 
            "audioDescription": false, 
            "restartAvailable": false, 
            "title": "collexpand808_1_3", 
            "allOfferIdList": [
                2
            ], 
            "synopsis": "collexpand808_1_3 - synopsis", 
            "contentNdsDrmAttributes": {
                "isBto": false, 
                "lastOfferEndDateTime": 1765963847000, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "rentalDuration": 2147483647, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isExtendedRental": false, 
                "isIppv": false, 
                "isPar": false, 
                "isOppv": false
            }, 
            "source": "ltv", 
            "live": false, 
            "parentGroupId": "groupid://1838932386", 
            "type": "instance", 
            "channel": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
            "videoFormat": "sd", 
            "wideScreen": false, 
            "episodeNumber": 3, 
            "isPurchasable": true, 
            "subtitlesHardOfHearing": false, 
            "hdcp": false, 
            "serviceId": "503", 
            "adult": false, 
            "sortTitle": "collexpand808_1_3", 
            "endAvailability": 1525092720000, 
            "hasChapters": false, 
            "cdvrAvailable": true, 
            "seasonFinale": false, 
            "shortSynopsis": "collexpand808_1_3 - synopsis", 
            "mixContentId": false, 
            "broadcaster": "VGE", 
            "serviceEquivalenceKey": "503", 
            "ict": false, 
            "parentGroups": [
                {
                    "groupType": "Series", 
                    "groupId": "groupid://1838932386"
                }
            ]
        }, 
        "state": "BOOKED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "38165", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{503,java.lang.Integer,NORMAL}-|-{NzEyYWQ0ODM4ZjAwOWFmMWM2Y2Y=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "503", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 503, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 503", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 503", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "503", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "503", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_12229~PPS_INSTANCE_38165", 
        "startTime": "2018-04-30T12:48:00Z", 
        "recurrenceActive": true, 
        "bookingDuration": "00:04:00", 
        "notificationHandles": [
            "5ae70e3447551d206618c76d"
        ], 
        "created": "2018-04-30T12:38:12Z", 
        "lastModified": "2018-04-30T12:39:00Z", 
        "contentPlayUri": "?recId=c4c06fe8-6396-44b8-8a8c-803d2c6919c3", 
        "uri": "/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae70e3447551d206618c76d", 
        "scheduleInstance": "programid://1918145714~programid://1809004650", 
        "keep": false, 
        "contentId": "programid://1918145714~programid://1809004650"
    }, 
    {
        "seriesId": "groupid://1838932386", 
        "pvr": "nPVR", 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set1_scripts_0", 
        "channelId": "503", 
        "isSynchronized": true, 
        "duration": "00:04:00", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T12:44:00Z", 
        "recurrence": "SERIES", 
        "title": "collexpand808_1_2", 
        "content": {
            "seriesId": 1838932386, 
            "instanceId": "programid://1809004652", 
            "broadcastDateTime": 1525092240000, 
            "seasonPremiere": false, 
            "locator": "{ZWJhZTc0ZTAzZmFhZTkwZjVlNDg=,java.lang.String,NORMAL}[+]{hashKey,NORMAL}", 
            "erotic": false, 
            "audioType": "stereo", 
            "duration": 240000, 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": false, 
            "macrovision": false, 
            "id": "programid://1918145713", 
            "mixSource": false, 
            "externalKey": "collexpand808_1_2_503_tk04301248", 
            "audioDescription": false, 
            "restartAvailable": false, 
            "title": "collexpand808_1_2", 
            "allOfferIdList": [
                2
            ], 
            "synopsis": "collexpand808_1_2 - synopsis", 
            "contentNdsDrmAttributes": {
                "isBto": false, 
                "lastOfferEndDateTime": 1765963847000, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "rentalDuration": 2147483647, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isExtendedRental": false, 
                "isIppv": false, 
                "isPar": false, 
                "isOppv": false
            }, 
            "source": "ltv", 
            "live": false, 
            "parentGroupId": "groupid://1838932386", 
            "type": "instance", 
            "channel": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
            "videoFormat": "sd", 
            "wideScreen": false, 
            "episodeNumber": 2, 
            "isPurchasable": true, 
            "subtitlesHardOfHearing": false, 
            "hdcp": false, 
            "serviceId": "503", 
            "adult": false, 
            "sortTitle": "collexpand808_1_2", 
            "endAvailability": 1525092480000, 
            "hasChapters": false, 
            "cdvrAvailable": true, 
            "seasonFinale": false, 
            "shortSynopsis": "collexpand808_1_2 - synopsis", 
            "mixContentId": false, 
            "broadcaster": "VGE", 
            "serviceEquivalenceKey": "503", 
            "ict": false, 
            "parentGroups": [
                {
                    "groupType": "Series", 
                    "groupId": "groupid://1838932386"
                }
            ]
        }, 
        "state": "BOOKED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "38163", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{503,java.lang.Integer,NORMAL}-|-{NzEyYWQ0ODM4ZjAwOWFmMWM2Y2Y=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "503", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 503, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 503", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 503", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "503", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "503", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_12227~PPS_INSTANCE_38163", 
        "startTime": "2018-04-30T12:44:00Z", 
        "recurrenceActive": true, 
        "bookingDuration": "00:04:00", 
        "notificationHandles": [
            "5ae70e3447551d206618c76e"
        ], 
        "created": "2018-04-30T12:38:12Z", 
        "lastModified": "2018-04-30T12:39:00Z", 
        "contentPlayUri": "?recId=2e507f42-fb0d-4632-9196-1e8d41e62f8e", 
        "uri": "/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae70e3447551d206618c76e", 
        "scheduleInstance": "programid://1918145713~programid://1809004652", 
        "keep": false, 
        "contentId": "programid://1918145713~programid://1809004652"
    }, 
    {
        "seriesId": "groupid://2147480090", 
        "pvr": "nPVR", 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set1_scripts_0", 
        "channelId": "502", 
        "isSynchronized": true, 
        "duration": "00:04:00", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T12:44:00Z", 
        "recurrence": "SERIES", 
        "title": "colexpan199_1_1", 
        "content": {
            "seriesId": 2147480090, 
            "instanceId": "programid://924072026", 
            "broadcastDateTime": 1525092240000, 
            "seasonPremiere": false, 
            "locator": "{ZWViYWE1OWM5NzVlOTA2ZDQ3Yzc=,java.lang.String,NORMAL}[+]{hashKey,NORMAL}", 
            "erotic": false, 
            "audioType": "stereo", 
            "duration": 240000, 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": false, 
            "macrovision": false, 
            "id": "programid://2147480336", 
            "mixSource": false, 
            "externalKey": "colexpan199_1_1_502_tk04301248", 
            "audioDescription": false, 
            "restartAvailable": false, 
            "title": "colexpan199_1_1", 
            "allOfferIdList": [
                2
            ], 
            "synopsis": "colexpan199_1_1 - synopsis", 
            "contentNdsDrmAttributes": {
                "isBto": false, 
                "lastOfferEndDateTime": 1765963847000, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "rentalDuration": 2147483647, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isExtendedRental": false, 
                "isIppv": false, 
                "isPar": false, 
                "isOppv": false
            }, 
            "source": "ltv", 
            "live": false, 
            "parentGroupId": "groupid://2147480090", 
            "type": "instance", 
            "channel": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
            "videoFormat": "sd", 
            "wideScreen": false, 
            "episodeNumber": 1, 
            "isPurchasable": true, 
            "subtitlesHardOfHearing": false, 
            "hdcp": false, 
            "serviceId": "502", 
            "adult": false, 
            "sortTitle": "colexpan199_1_1", 
            "endAvailability": 1525092480000, 
            "hasChapters": false, 
            "cdvrAvailable": true, 
            "seasonFinale": false, 
            "shortSynopsis": "colexpan199_1_1 - synopsis", 
            "mixContentId": false, 
            "broadcaster": "VGE", 
            "serviceEquivalenceKey": "502", 
            "ict": false, 
            "parentGroups": [
                {
                    "groupType": "Series", 
                    "groupId": "groupid://2147480090"
                }
            ]
        }, 
        "state": "BOOKED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "38162", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{502,java.lang.Integer,NORMAL}-|-{MmFhMTlkZDMwOWM2ZTA4NWVkNDY=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "502", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 502, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 502", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 502", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "502", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "502", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_12226~PPS_INSTANCE_38162", 
        "startTime": "2018-04-30T12:44:00Z", 
        "recurrenceActive": true, 
        "bookingDuration": "00:04:00", 
        "notificationHandles": [
            "5ae70f36f365362240f145cd"
        ], 
        "created": "2018-04-30T12:42:30Z", 
        "lastModified": "2018-04-30T12:42:30Z", 
        "contentPlayUri": "?recId=ba79c507-db32-46e0-b041-b9ff91882be1", 
        "uri": "/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae70f36f365362240f145cd", 
        "scheduleInstance": "programid://2147480336~programid://924072026", 
        "keep": false, 
        "contentId": "programid://2147480336~programid://924072026"
    }, 
    {
        "seriesId": "groupid://2147480090", 
        "pvr": "nPVR", 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set1_scripts_0", 
        "channelId": "502", 
        "isSynchronized": true, 
        "duration": "00:04:00", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T12:48:00Z", 
        "recurrence": "SERIES", 
        "title": "colexpan199_1_2", 
        "content": {
            "seriesId": 2147480090, 
            "instanceId": "programid://924072025", 
            "broadcastDateTime": 1525092480000, 
            "seasonPremiere": false, 
            "locator": "{OGIwZDJiZmE4MTU3N2EzMjhmM2E=,java.lang.String,NORMAL}[+]{hashKey,NORMAL}", 
            "erotic": false, 
            "audioType": "stereo", 
            "duration": 240000, 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": false, 
            "macrovision": false, 
            "id": "programid://2147480337", 
            "mixSource": false, 
            "externalKey": "colexpan199_1_2_502_tk04301252", 
            "audioDescription": false, 
            "restartAvailable": false, 
            "title": "colexpan199_1_2", 
            "allOfferIdList": [
                2
            ], 
            "synopsis": "colexpan199_1_2 - synopsis", 
            "contentNdsDrmAttributes": {
                "isBto": false, 
                "lastOfferEndDateTime": 1765963847000, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "rentalDuration": 2147483647, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isExtendedRental": false, 
                "isIppv": false, 
                "isPar": false, 
                "isOppv": false
            }, 
            "source": "ltv", 
            "live": false, 
            "parentGroupId": "groupid://2147480090", 
            "type": "instance", 
            "channel": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
            "videoFormat": "sd", 
            "wideScreen": false, 
            "episodeNumber": 2, 
            "isPurchasable": true, 
            "subtitlesHardOfHearing": false, 
            "hdcp": false, 
            "serviceId": "502", 
            "adult": false, 
            "sortTitle": "colexpan199_1_2", 
            "endAvailability": 1525092720000, 
            "hasChapters": false, 
            "cdvrAvailable": true, 
            "seasonFinale": false, 
            "shortSynopsis": "colexpan199_1_2 - synopsis", 
            "mixContentId": false, 
            "broadcaster": "VGE", 
            "serviceEquivalenceKey": "502", 
            "ict": false, 
            "parentGroups": [
                {
                    "groupType": "Series", 
                    "groupId": "groupid://2147480090"
                }
            ]
        }, 
        "state": "BOOKED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "38164", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{502,java.lang.Integer,NORMAL}-|-{MmFhMTlkZDMwOWM2ZTA4NWVkNDY=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "502", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 502, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 502", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 502", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "502", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "502", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_12228~PPS_INSTANCE_38164", 
        "startTime": "2018-04-30T12:48:00Z", 
        "recurrenceActive": true, 
        "bookingDuration": "00:04:00", 
        "notificationHandles": [
            "5ae70f36f365362240f145cf"
        ], 
        "created": "2018-04-30T12:42:30Z", 
        "lastModified": "2018-04-30T12:42:30Z", 
        "contentPlayUri": "?recId=8c393eef-102a-45ed-a236-5185de3b08af", 
        "uri": "/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae70f36f365362240f145cf", 
        "scheduleInstance": "programid://2147480337~programid://924072025", 
        "keep": false, 
        "contentId": "programid://2147480337~programid://924072025"
    }
]
Series Id: 2147480090
Episode number : 1
Episode number : 2
Booked Episodes {1: [1525092240000, 1525092480000, 240000, u'38162', u'/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae70f36f365362240f145cd', u'colexpan199_1_1', u'programid://2147480336~programid://924072026', u'groupid://2147480090', u'502'], 2: [1525092480000, 1525092720000, 240000, u'38164', u'/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae70f36f365362240f145cf', u'colexpan199_1_2', u'programid://2147480337~programid://924072025', u'groupid://2147480090', u'502']}
Booked catalog has the episodes of series from second episode
contentIdlist: [u'programid://2147480336~programid://924072026', u'programid://2147480337~programid://924072025']
episodesStartTimelist: [1525092240000, 1525092480000]
episodeEndTimelist: [1525092480000, 1525092720000]
groupId: groupid://2147480090
Wait for the first episode to start in minutes1.4
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/recordings
 
First Episode of a series started recording
Wait time to fetch the recorded library in minutes7.0
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/recordings
 
All Programs with the contentids [u'programid://2147480336~programid://924072027', u'programid://2147480336~programid://924072026', u'programid://2147480337~programid://924072025', u'programid://1918145712~programid://1809004651'] is in RECORDED state
Series with the same title recorded successfully
### STEP7: Collapse and Expand the Recorded library, verify that the Event is not collapsed in the series and update the results ###################### 
 

group id list [u'groupid://2147480090']
series collapse via url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog?collapse=true
 
series collapse is successful
series collapsed successfully
Series Collapsed successfully

#################### DEBUG STARTED ####################

Series Collapse Response[
    {
        "seriesId": "groupid://2147480090", 
        "pvr": "nPVR", 
        "partialContent": false, 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set1_scripts_0", 
        "channelId": "502", 
        "isSynchronized": true, 
        "duration": "00:01:12", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T12:40:00Z", 
        "recurrence": "NONE", 
        "title": "colexpan199_1_1", 
        "content": {
            "seriesId": "groupid://2147480090", 
            "shortSynopsis": "colexpan199_1_1 - synopsis", 
            "title": "colexpan199_1_1", 
            "instanceId": "PPS_INSTANCE_38161", 
            "recordingId": "38161", 
            "broadcastDateTime": 1525092000000, 
            "synopsis": "colexpan199_1_1 - synopsis", 
            "endAvailability": 1525092240000, 
            "source": "pvr", 
            "erotic": false, 
            "serviceId": "502", 
            "adult": false, 
            "sortTitle": "colexpan199_1_1", 
            "duration": 240000, 
            "serviceEquivalenceKey": "502", 
            "type": "instance", 
            "id": "PPS_CONTENT_12226"
        }, 
        "state": "RECORDED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "38161", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{502,java.lang.Integer,NORMAL}-|-{MmFhMTlkZDMwOWM2ZTA4NWVkNDY=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "502", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 502, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 502", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 502", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "502", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "502", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_12226~PPS_INSTANCE_38161", 
        "startTime": "2018-04-30T12:39:54Z", 
        "bookingDuration": "00:04:00", 
        "notificationHandles": [
            "5ae70e34f365362240f145cc"
        ], 
        "created": "2018-04-30T12:38:12Z", 
        "lastModified": "2018-04-30T12:41:41Z", 
        "contentPlayUri": "?recId=af34dbdb-92d0-4a33-ae66-c843352dfc44", 
        "uri": "/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae70e34f365362240f145cc", 
        "scheduleInstance": "programid://2147480336~programid://924072027", 
        "keep": false, 
        "contentId": "PPS_CONTENT_12226~PPS_INSTANCE_38161"
    }, 
    {
        "title": "collexpand808_1:Title ", 
        "contentId": "groupid://1838932386", 
        "household": "AUTO_3006_cornercase_set1_scripts_0", 
        "uri": "/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog?filter%3Aseries=groupid%3A%2F%2F1838932386&collapse=true", 
        "recurrence": "SERIES", 
        "bookingType": "EVENT", 
        "type": "COLLAPSED-INSTANCE"
    }, 
    {
        "title": "colexpan199_1:Title ", 
        "contentId": "groupid://2147480090", 
        "household": "AUTO_3006_cornercase_set1_scripts_0", 
        "uri": "/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog?filter%3Aseries=groupid%3A%2F%2F2147480090&collapse=true", 
        "recurrence": "SERIES", 
        "bookingType": "EVENT", 
        "type": "COLLAPSED-INSTANCE"
    }
]

#################### DEBUG ENDED ####################

Individual Event is not Collapsed with the Series with the same title
group id list [u'groupid://2147480090']
series expand via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog?filter:series=groupid://2147480090&collapse=true
 

#################### DEBUG STARTED ####################

Script Fetching the Household Booked/Recorded Catalog at 2018-04-30 12:53:30.580917
get all Catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog
 
Household Booked/Recorded Catalog Response:
[
    {
        "seriesId": "groupid://2147480090", 
        "pvr": "nPVR", 
        "partialContent": false, 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set1_scripts_0", 
        "channelId": "502", 
        "isSynchronized": true, 
        "duration": "00:01:12", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T12:40:00Z", 
        "recurrence": "NONE", 
        "title": "colexpan199_1_1", 
        "content": {
            "seriesId": "groupid://2147480090", 
            "shortSynopsis": "colexpan199_1_1 - synopsis", 
            "title": "colexpan199_1_1", 
            "instanceId": "PPS_INSTANCE_38161", 
            "recordingId": "38161", 
            "broadcastDateTime": 1525092000000, 
            "synopsis": "colexpan199_1_1 - synopsis", 
            "endAvailability": 1525092240000, 
            "source": "pvr", 
            "erotic": false, 
            "serviceId": "502", 
            "adult": false, 
            "sortTitle": "colexpan199_1_1", 
            "duration": 240000, 
            "serviceEquivalenceKey": "502", 
            "type": "instance", 
            "id": "PPS_CONTENT_12226"
        }, 
        "state": "RECORDED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "38161", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{502,java.lang.Integer,NORMAL}-|-{MmFhMTlkZDMwOWM2ZTA4NWVkNDY=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "502", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 502, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 502", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 502", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "502", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "502", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_12226~PPS_INSTANCE_38161", 
        "startTime": "2018-04-30T12:39:54Z", 
        "bookingDuration": "00:04:00", 
        "notificationHandles": [
            "5ae70e34f365362240f145cc"
        ], 
        "created": "2018-04-30T12:38:12Z", 
        "lastModified": "2018-04-30T12:41:41Z", 
        "contentPlayUri": "?recId=af34dbdb-92d0-4a33-ae66-c843352dfc44", 
        "uri": "/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae70e34f365362240f145cc", 
        "scheduleInstance": "programid://2147480336~programid://924072027", 
        "keep": false, 
        "contentId": "PPS_CONTENT_12226~PPS_INSTANCE_38161"
    }, 
    {
        "seriesId": "groupid://1838932386", 
        "pvr": "nPVR", 
        "partialContent": false, 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set1_scripts_0", 
        "channelId": "503", 
        "isSynchronized": true, 
        "duration": "00:04:06", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T12:40:00Z", 
        "recurrence": "SERIES", 
        "title": "collexpand808_1_1", 
        "content": {
            "seriesId": "groupid://1838932386", 
            "shortSynopsis": "collexpand808_1_1 - synopsis", 
            "title": "collexpand808_1_1", 
            "instanceId": "PPS_INSTANCE_38160", 
            "recordingId": "38160", 
            "broadcastDateTime": 1525092000000, 
            "synopsis": "collexpand808_1_1 - synopsis", 
            "endAvailability": 1525092240000, 
            "source": "pvr", 
            "erotic": false, 
            "serviceId": "503", 
            "adult": false, 
            "sortTitle": "collexpand808_1_1", 
            "duration": 240000, 
            "serviceEquivalenceKey": "503", 
            "type": "instance", 
            "id": "PPS_CONTENT_12225"
        }, 
        "state": "RECORDED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "38160", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{503,java.lang.Integer,NORMAL}-|-{NzEyYWQ0ODM4ZjAwOWFmMWM2Y2Y=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "503", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 503, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 503", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 503", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "503", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "503", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_12225~PPS_INSTANCE_38160", 
        "startTime": "2018-04-30T12:39:55Z", 
        "recurrenceActive": true, 
        "bookingDuration": "00:04:00", 
        "notificationHandles": [
            "5ae70e3447551d206618c76b"
        ], 
        "created": "2018-04-30T12:38:12Z", 
        "lastModified": "2018-04-30T12:44:20Z", 
        "contentPlayUri": "?recId=8503306a-fdca-499d-8aa5-6ecaa65dea62", 
        "uri": "/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae70e3447551d206618c76b", 
        "scheduleInstance": "programid://1918145712~programid://1809004651", 
        "keep": false, 
        "contentId": "PPS_CONTENT_12225~PPS_INSTANCE_38160"
    }, 
    {
        "seriesId": "groupid://1838932386", 
        "pvr": "nPVR", 
        "partialContent": false, 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set1_scripts_0", 
        "channelId": "503", 
        "isSynchronized": true, 
        "duration": "00:04:07", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T12:48:00Z", 
        "recurrence": "SERIES", 
        "title": "collexpand808_1_3", 
        "content": {
            "seriesId": "groupid://1838932386", 
            "shortSynopsis": "collexpand808_1_3 - synopsis", 
            "title": "collexpand808_1_3", 
            "instanceId": "PPS_INSTANCE_38165", 
            "recordingId": "38165", 
            "broadcastDateTime": 1525092480000, 
            "synopsis": "collexpand808_1_3 - synopsis", 
            "endAvailability": 1525092720000, 
            "source": "pvr", 
            "erotic": false, 
            "serviceId": "503", 
            "adult": false, 
            "sortTitle": "collexpand808_1_3", 
            "duration": 240000, 
            "serviceEquivalenceKey": "503", 
            "type": "instance", 
            "id": "PPS_CONTENT_12229"
        }, 
        "state": "RECORDED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "38165", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{503,java.lang.Integer,NORMAL}-|-{NzEyYWQ0ODM4ZjAwOWFmMWM2Y2Y=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "503", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 503, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 503", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 503", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "503", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "503", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_12229~PPS_INSTANCE_38165", 
        "startTime": "2018-04-30T12:47:55Z", 
        "recurrenceActive": true, 
        "bookingDuration": "00:04:00", 
        "notificationHandles": [
            "5ae70e3447551d206618c76d"
        ], 
        "created": "2018-04-30T12:38:12Z", 
        "lastModified": "2018-04-30T12:52:20Z", 
        "contentPlayUri": "?recId=c4c06fe8-6396-44b8-8a8c-803d2c6919c3", 
        "uri": "/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae70e3447551d206618c76d", 
        "scheduleInstance": "programid://1918145714~programid://1809004650", 
        "keep": false, 
        "contentId": "PPS_CONTENT_12229~PPS_INSTANCE_38165"
    }, 
    {
        "seriesId": "groupid://1838932386", 
        "pvr": "nPVR", 
        "partialContent": false, 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set1_scripts_0", 
        "channelId": "503", 
        "isSynchronized": true, 
        "duration": "00:04:06", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T12:44:00Z", 
        "recurrence": "SERIES", 
        "title": "collexpand808_1_2", 
        "content": {
            "seriesId": "groupid://1838932386", 
            "shortSynopsis": "collexpand808_1_2 - synopsis", 
            "title": "collexpand808_1_2", 
            "instanceId": "PPS_INSTANCE_38163", 
            "recordingId": "38163", 
            "broadcastDateTime": 1525092240000, 
            "synopsis": "collexpand808_1_2 - synopsis", 
            "endAvailability": 1525092480000, 
            "source": "pvr", 
            "erotic": false, 
            "serviceId": "503", 
            "adult": false, 
            "sortTitle": "collexpand808_1_2", 
            "duration": 240000, 
            "serviceEquivalenceKey": "503", 
            "type": "instance", 
            "id": "PPS_CONTENT_12227"
        }, 
        "state": "RECORDED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "38163", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{503,java.lang.Integer,NORMAL}-|-{NzEyYWQ0ODM4ZjAwOWFmMWM2Y2Y=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "503", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 503, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 503", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 503", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "503", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "503", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_12227~PPS_INSTANCE_38163", 
        "startTime": "2018-04-30T12:43:55Z", 
        "recurrenceActive": true, 
        "bookingDuration": "00:04:00", 
        "notificationHandles": [
            "5ae70e3447551d206618c76e"
        ], 
        "created": "2018-04-30T12:38:12Z", 
        "lastModified": "2018-04-30T12:48:20Z", 
        "contentPlayUri": "?recId=2e507f42-fb0d-4632-9196-1e8d41e62f8e", 
        "uri": "/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae70e3447551d206618c76e", 
        "scheduleInstance": "programid://1918145713~programid://1809004652", 
        "keep": false, 
        "contentId": "PPS_CONTENT_12227~PPS_INSTANCE_38163"
    }, 
    {
        "seriesId": "groupid://2147480090", 
        "pvr": "nPVR", 
        "partialContent": false, 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set1_scripts_0", 
        "channelId": "502", 
        "isSynchronized": true, 
        "duration": "00:04:07", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T12:44:00Z", 
        "recurrence": "SERIES", 
        "title": "colexpan199_1_1", 
        "content": {
            "seriesId": "groupid://2147480090", 
            "shortSynopsis": "colexpan199_1_1 - synopsis", 
            "title": "colexpan199_1_1", 
            "instanceId": "PPS_INSTANCE_38162", 
            "recordingId": "38162", 
            "broadcastDateTime": 1525092240000, 
            "synopsis": "colexpan199_1_1 - synopsis", 
            "endAvailability": 1525092480000, 
            "source": "pvr", 
            "erotic": false, 
            "serviceId": "502", 
            "adult": false, 
            "sortTitle": "colexpan199_1_1", 
            "duration": 240000, 
            "serviceEquivalenceKey": "502", 
            "type": "instance", 
            "id": "PPS_CONTENT_12226"
        }, 
        "state": "RECORDED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "38162", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{502,java.lang.Integer,NORMAL}-|-{MmFhMTlkZDMwOWM2ZTA4NWVkNDY=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "502", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 502, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 502", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 502", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "502", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "502", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_12226~PPS_INSTANCE_38162", 
        "startTime": "2018-04-30T12:43:54Z", 
        "recurrenceActive": true, 
        "bookingDuration": "00:04:00", 
        "notificationHandles": [
            "5ae70f36f365362240f145cd"
        ], 
        "created": "2018-04-30T12:42:30Z", 
        "lastModified": "2018-04-30T12:48:35Z", 
        "contentPlayUri": "?recId=ba79c507-db32-46e0-b041-b9ff91882be1", 
        "uri": "/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae70f36f365362240f145cd", 
        "scheduleInstance": "programid://2147480336~programid://924072026", 
        "keep": false, 
        "contentId": "PPS_CONTENT_12226~PPS_INSTANCE_38162"
    }, 
    {
        "seriesId": "groupid://2147480090", 
        "pvr": "nPVR", 
        "partialContent": false, 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set1_scripts_0", 
        "channelId": "502", 
        "isSynchronized": true, 
        "duration": "00:04:06", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T12:48:00Z", 
        "recurrence": "SERIES", 
        "title": "colexpan199_1_2", 
        "content": {
            "seriesId": "groupid://2147480090", 
            "shortSynopsis": "colexpan199_1_2 - synopsis", 
            "title": "colexpan199_1_2", 
            "instanceId": "PPS_INSTANCE_38164", 
            "recordingId": "38164", 
            "broadcastDateTime": 1525092480000, 
            "synopsis": "colexpan199_1_2 - synopsis", 
            "endAvailability": 1525092720000, 
            "source": "pvr", 
            "erotic": false, 
            "serviceId": "502", 
            "adult": false, 
            "sortTitle": "colexpan199_1_2", 
            "duration": 240000, 
            "serviceEquivalenceKey": "502", 
            "type": "instance", 
            "id": "PPS_CONTENT_12228"
        }, 
        "state": "RECORDED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "38164", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{502,java.lang.Integer,NORMAL}-|-{MmFhMTlkZDMwOWM2ZTA4NWVkNDY=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "502", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 502, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 502", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 502", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "502", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "502", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_12228~PPS_INSTANCE_38164", 
        "startTime": "2018-04-30T12:47:55Z", 
        "recurrenceActive": true, 
        "bookingDuration": "00:04:00", 
        "notificationHandles": [
            "5ae70f36f365362240f145cf"
        ], 
        "created": "2018-04-30T12:42:30Z", 
        "lastModified": "2018-04-30T12:52:40Z", 
        "contentPlayUri": "?recId=8c393eef-102a-45ed-a236-5185de3b08af", 
        "uri": "/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog/5ae70f36f365362240f145cf", 
        "scheduleInstance": "programid://2147480337~programid://924072025", 
        "keep": false, 
        "contentId": "PPS_CONTENT_12228~PPS_INSTANCE_38164"
    }
]
Script Fetching Household Failed Recording Catalog at 2018-04-30 12:53:30.655773
get all failed recording catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog?filter:state=FAILED
 
Failed Recording Catalog is empty

#################### DEBUG ENDED   ####################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Failed: Error Occurred in Script EXCEPTION IN (/home/centos/cdvr_crnrset1/cdvr_sanity_tests/scripts/cornercase_scripts/cornercase_set1_scripts/corner_US31863_TC1170_IndividualRecording_Cancel_Bookseries_CollapseExpand.py, LINE 482 'seriesexpandresult,seriesexpandresponse = Verify_Series_expand([groupId],pps_port,protocol,pps_host,householdid,timeout,printflg)'): 'seriesId'
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX   ^ ^ ^ ^ ^   XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX   E R R O R   XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

2018/04/30 12:53:50 UTC ############################## ENDED :  corner_US31863_TC1170_IndividualRecording_Cancel_Bookseries_CollapseExpand ##############################

2018/04/30 12:53:50 UTC ############################## STARTED :  corner_US31863_TC1172_display_date_new_recorded ##############################
US31863: As a viewer, when I browse my cDVR series recordings I want to be able to expand and collapse the list of episodes within each series.
TC1172: When you expand the series recording list, display the date when each episode was recorded
Starting test corner_US31863_TC1172_display_date_new_recorded
### STEP1: Ingest two series with same broadcasttime (3 Episodes of 2 minutes duration) ########
 
{'services': { 502: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'dateexpa199_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'dateexpa199'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'dateexpa199_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'dateexpa199'}],
         'lineupLength': 8,
         'message': ''},
  503: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'dateexpas808_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'dateexpas808'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'dateexpas808_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'dateexpas808'}],
         'lineupLength': 8,
         'message': ''}},
'shows': set(['dateexpa199', 'dateexpas808']),
'seasons': { 'dateexpa199': { 1: set([1, 2])}, 'dateexpas808': { 1: set([1, 2])}},
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Script wait for catalog ingest to sync with the ci host in seconds 120.5552

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525092972000~1525100172000?lang=eng&serviceList=502,503&count=255&region=101&catalogueId=1
### STEP2: Do the Series booking for the first Seriesi(Place holder series ) ##################

Series ContentId list[(u'programid://1280615968~programid://1044300327', [1525093020000, 1525093260000, u'dateexpa199_1_1', 1463651374, 1]), (u'programid://1280615969~programid://1044300326', [1525093260000, 1525093500000, u'dateexpa199_1_2', 1463651374, 2])]

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings 
Series Booking Successfull for series 1463651374 
### STEP3: Series booking for the Second Series ############
Series ContentId list[(u'programid://1595033592~programid://402443656', [1525093020000, 1525093260000, u'dateexpas808_1_1', 1372204412, 1]), (u'programid://1595033591~programid://402443655', [1525093260000, 1525093500000, u'dateexpas808_1_2', 1372204412, 2])]

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings 
Series Booking Successfull for series 1372204412 
###  STEP4: Verify all the episodes of the series is present in the booked library ##### 

get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/bookings
 
Content Ids from the booked library [u'programid://1595033592~programid://402443656', u'programid://1595033591~programid://402443655']
Content Ids from the grid response [u'programid://1595033592~programid://402443656', u'programid://1595033591~programid://402443655']
all booked programes are present in the booked library
### STEP5: Wait till  all the episodes get recorded and verify that all episodes are in the recorded library###########
System will wait for  523.0 seconds to complete the recording 
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/recordings
 
All Programs with the contentids [u'programid://1595033592~programid://402443656', u'programid://1595033591~programid://402443655'] is in RECORDED state
###  STEP6: Perform the Series collapse ############
group id list [u'groupid://1372204412']
series collapse via url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog?collapse=true
 
series collapse is successful
series collapsed successfully
### STEP7: Perform Series Expand ############
group id list [u'groupid://1372204412']
series expand via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set1_scripts_0/catalog?filter:series=groupid://1372204412&collapse=true
 
series expansion is successful
series expanded successfully
### STEP8: Read the expand responce and display the date of creation #######################

Content id:  programid://1595033592~programid://402443656 Date of creation :  2018-04-30T12:56:12Z
Content id:  programid://1595033591~programid://402443655 Date of creation :  2018-04-30T12:56:12Z

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: Date displayed succesfully for all episodes

2018/04/30 13:06:50 UTC ############################## ENDED :  corner_US31863_TC1172_display_date_new_recorded ##############################

2018/04/30 13:06:50 UTC ############################## STARTED :  corner_delete_household ##############################
Starting test corner_delete_household
delete via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_0
delete via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_1
delete via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_2
delete via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_3
waiting a few seconds in an effort for PVR deletion to catch up
delete via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set1_scripts_4
waiting a few seconds in an effort for PVR deletion to catch up

2018/04/30 13:06:57 UTC ############################## ENDED :  corner_delete_household ##############################

2018/04/30 13:06:57 UTC done

##############################   Summary   ##############################

The following scripts returned non-zero exit codes:

Test Name                                          Return Code
-------------------------------------------------- -----------
corner_US31785_TC1597_current_eventSeriesConflict_stopExisting      1     
corner_US31833_TC1332_Schedule_Event_based_Recording_Playback_twoclients      2     
corner_US31681_TC1176_series_booking_same_episode_on_two_different_channels_at_same_time      1     
corner_US31774_TC987_cancel_currently_recording_episode_of_series      1     
corner_US31774_TC989_cancel_series_with_currentlyrecording_event_rebook      1     
corner_US31739_TC1361_Playback_Recordedfutureprogram      1     
corner_US31721_TC1525_Deletescheduledrecording_duringrecording      1     
corner_US31822_TC1136_Book_recording_user_set_autodelete_after_n_days_changeto_0_day      1     
corner_US31863_TC1170_IndividualRecording_Cancel_Bookseries_CollapseExpand      1     
