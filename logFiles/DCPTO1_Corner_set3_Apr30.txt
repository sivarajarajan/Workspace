
2018/04/30 06:03:50 UTC ############################## C O N F I G U R A T I O N ##############################

The following configuration is being used (aws_dcpt01):

{'EXTRACONF': None,
 'GITLASTCOMMIT': '4adcc3a5390',
 'GITREPO': 'origin\tlocalhost/cdvr-sanity-e3e0058 (fetch)',
 'LABNAME': 'aws_dcpt01',
 'activemq': {'service': 'nds_activemq'},
 'adZone': 'mkt1',
 'authz': {'consul_search_string': '-authz-',
           'host': 'authz.cdvr.dcpt01.ciscocdvr.net',
           'service': 'nds_authz'},
 'basic-feature-channels': ['GenericCh1', 'GenericCh2'],
 'basic_feature': {'allinstances': True,
                   'delete_household': False,
                   'household_prefix': 'AWS_AUTO',
                   'households_needed': 5,
                   'max_failures_allowed': 10,
                   'print_cfg': False,
                   'stop_on_first_failure': False,
                   'throttle_milliseconds': 250},
 'bsm': {'host': 'datamasters', 'service': 'nds_bsm'},
 'bsm-rest': {'host': 'datamasters', 'service': 'nds_bsm-rest'},
 'caSystemId': 2558,
 'carm': {'host': 'datamasters', 'service': 'nds_carm'},
 'catalogueId': 1,
 'catchup-restart-channels': ['GenericCh16', 'GenericCh17'],
 'ccm': {'host': 'datamasters', 'service': 'nds_ccm'},
 'cdvrServices': ['CDVR-ENABLED', 'ALLOW-CDVR-TIME-BASED-RECORDING'],
 'ci': {'earliestSecondsFromNowToSchedule': 120,
        'host': 'ci',
        'ingest_delay_factor_per_minute': 0.069400000000000003,
        'ingest_minimum_delay': 120,
        'port': 5155,
        'service': 'nds_ci'},
 'cmdc': {'host': 'cmdc', 'port': 5600, 'service': 'nds_cmdc'},
 'cmdcRegion': 101,
 'cmsrules': {'service': 'nds_cmsrules'},
 'cmsstatus': {'service': 'nds_cmsstatus'},
 'consul': {'host': 'consul.service.cdvr',
            'port': 8500,
            'running_instances_collection_api': '/v1/catalog/nodes'},
 'contentplayback': {'host': 'cdvr.pe1.ciscocdvr.net',
                     'port': 80,
                     'url': '/cdvr/'},
 'corner': {'allinstances': True,
            'delete_household': False,
            'household_prefix': 'AUTO_3006_cornercase_set3_scripts_',
            'households_needed': 5,
            'print_cfg': False,
            'stop_on_first_failure': False,
            'throttle_milliseconds': 250},
 'cornercase-channelsets': {'set1': ['GenericCh3',
                                     'GenericCh4',
                                     'GenericCh5'],
                            'set2': ['GenericCh6',
                                     'GenericCh7',
                                     'GenericCh8'],
                            'set3': ['GenericCh9',
                                     'GenericCh10',
                                     'GenericCh11',
                                     'GenericCh12',
                                     'GenericCh13']},
 'cos': {'active_storage_path': 'rio/active',
         'api': 'v2p',
         'urls': ['http://192.168.22.6',
                  'http://192.168.22.7',
                  'http://192.168.22.8',
                  'http://192.168.22.9',
                  'http://192.168.22.10',
                  'http://192.168.22.11',
                  'http://192.168.22.12',
                  'http://192.168.22.13',
                  'http://192.168.22.14',
                  'http://192.168.22.15',
                  'http://192.168.22.16',
                  'http://192.168.22.17',
                  'http://192.168.22.18',
                  'http://192.168.22.19',
                  'http://192.168.22.20',
                  'http://192.168.22.21',
                  'http://192.168.22.22',
                  'http://192.168.22.23',
                  'http://192.168.22.24',
                  'http://192.168.22.25',
                  'http://192.168.22.29',
                  'http://192.168.22.30',
                  'http://192.168.22.31',
                  'http://192.168.22.32',
                  'http://192.168.22.33',
                  'http://192.168.22.34',
                  'http://192.168.22.35',
                  'http://192.168.22.36',
                  'http://192.168.22.37',
                  'http://192.168.22.38',
                  'http://192.168.22.39',
                  'http://192.168.22.40'],
         'x-auth-key': 'rootroot',
         'x-auth-user': 'mostest:mostest'},
 'dashboardCheck': {'enabled': False, 'nodes': ['kibana', 'uchima']},
 'enabledServices': ['CATCHUP_ENABLER',
                     'RESTART_ENABLER',
                     'CDVR-ENABLED',
                     'ALLOW-CDVR-TIME-BASED-RECORDING'],
 'externalAuthz': {'host': 'cmdc-0', 'isenabled': True, 'port': 9988},
 'hc': {'host': 'external-ma', 'port': 6410, 'service': 'nds_hc'},
 'health-check': {'enabled': False,
                  'nodes': ['pps', 'upm', 'sr', 'ma-batch', 'ma-api']},
 'hornetq': {'host': 'pps.cdvr.dcpt01.ciscocdvr.net', 'service': 'hornetq'},
 'idsync': {'host': 'datamasters', 'service': 'nds_idsync'},
 'ignore_dataplane_tests': False,
 'ipom': {'host': '211.208.160.45', 'port': 8081},
 'lab-description': 'AWS',
 'longterm': {'allinstances': True,
              'delete_household': False,
              'filename': 'keyvalues',
              'household_prefix': 'LONG',
              'households_needed': 5,
              'longterm_duration': 1,
              'print_cfg': False,
              'stop_on_first_failure': False,
              'throttle_milliseconds': 250},
 'longterm-channels': ['GenericCh14', 'GenericCh15'],
 'lsm': {'host': 'datamasters', 'service': 'nds_lsm'},
 'ma': {'config_keys': ['ma-api', 'ma-batch']},
 'ma-api': {'corelocation': '/var/log/nds/core*',
            'host': 'external-ma',
            'port': 6410,
            'service': 'nds_ma-api'},
 'ma-batch': {'corelocation': '/var/log/nds/core*',
              'host': 'external-ma',
              'port': 6419,
              'service': 'nds_ma-batch'},
 'marketingTarget': 'mkt1',
 'mongo': {'consul_search_string': 'mongo-0',
           'host': 'pps.cdvr.dcpt01.ciscocdvr.net',
           'service': 'mongod'},
 'mos': {'active_name': 'recmgmt',
         'v1url': 'http://vdc3-mos-v1api.mos-dns-cache.vdc3.vcte.com',
         'v2url': 'https://vdc3-mos-v2api.mos-dns-cache.vdc3.vcte.com'},
 'msr': {'active_name': 'source1',
         'functional_port': 9998,
         'host': '192.168.21.66',
         'sanity_port': 8080,
         'v1url': 'https://ui.rio-mos-dns.vdc7.vcte.com:7001',
         'v2url': 'https://ui.rio-mos-dns.vdc7.vcte.com:8043'},
 'ndsconsole': {'host': 'ci', 'service': 'nds_ndsconsole'},
 'nm': {'host': 'datamasters', 'service': 'nds_nm'},
 'oasm': {'host': 'datamasters', 'service': 'nds_oasm'},
 'performance': {'allinstances': True,
                 'delete_household': False,
                 'household_prefix': 'PERF',
                 'households_needed': 50000,
                 'print_cfg': False,
                 'stop_on_first_failure': False,
                 'throttle_milliseconds': 250},
 'pps': {'api': 'v2',
         'booked_to_recording_delay': 60,
         'consul_search_string': '-pps-',
         'corelocation': '/var/log/nds/core*',
         'fetch_bookingCatalog_delay': 2,
         'host': 'pps.cdvr.dcpt01.ciscocdvr.net',
         'port': 6060,
         'protocol': 'http',
         'recording_to_recorded_delay': 90,
         'series_bookingstatecheck_waittime': 5,
         'service': 'nds_pps'},
 'prm_supported': False,
 'protocol': 'http',
 'proxyHostNeeded': False,
 'proxyhost': {'host': '192.168.0.30', 'port': 8080},
 'quotas': {'diskQuota': 108000, 'numOfTuners': 4},
 'rally_initiatives_to_run': ['Core DVR Functionality'],
 'recorderRegion': 'PRIMETIME_RECORDER',
 'recording_api': 'v2p',
 'recording_mode': 'unique_copy',
 'region': 101,
 'rm': {'host': 'rr.cdvr.dcpt01.ciscocdvr.net',
        'port': 80,
        'protocol': 'http'},
 'sanity': {'allinstances': True,
            'delete_household': True,
            'household_prefix': 'AWS_SANITY',
            'households_needed': 10,
            'print_cfg': False,
            'stop_on_first_failure': False,
            'throttle_milliseconds': 250},
 'service_restart': False,
 'sgw': {'host': 'authz.cdvr.dcpt01.ciscocdvr.net', 'service': 'nds_sgw'},
 'sm': {'host': '211.208.132.19', 'port': 8080},
 'sr': {'corelocation': '/opt/cisco/seriesresolution/core*',
        'service': 'cisco_seriesresolution'},
 'ssh_userid': 'ecuser',
 'test-flags': ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy'],
 'test_channels': {'GenericCh1': {'Description': 'Service programming is determined by a test script',
                                  'ServiceId': 500,
                                  'cmdcRegion': 101,
                                  'region': 101},
                   'GenericCh10': {'Description': 'Service programming is determined by a test script',
                                   'ServiceId': 509,
                                   'cmdcRegion': 101,
                                   'region': 101},
                   'GenericCh11': {'Description': 'Service programming is determined by a test script',
                                   'ServiceId': 510,
                                   'cmdcRegion': 101,
                                   'region': 101},
                   'GenericCh12': {'Description': 'Service programming is determined by a test script',
                                   'ServiceId': 511,
                                   'cmdcRegion': 101,
                                   'region': 101},
                   'GenericCh13': {'Description': 'Service programming is determined by a test script',
                                   'ServiceId': 512,
                                   'cmdcRegion': 101,
                                   'region': 101},
                   'GenericCh14': {'Description': 'Service programming is determined by a test script',
                                   'ServiceId': 513,
                                   'cmdcRegion': 101,
                                   'region': 101},
                   'GenericCh15': {'Description': 'Service programming is determined by a test script',
                                   'ServiceId': 514,
                                   'cmdcRegion': 101,
                                   'region': 101},
                   'GenericCh16': {'Description': 'Service programming is determined by a test script',
                                   'ServiceId': 515,
                                   'cmdcRegion': 101,
                                   'region': 101},
                   'GenericCh17': {'Description': 'Service programming is determined by a test script',
                                   'ServiceId': 516,
                                   'cmdcRegion': 101,
                                   'region': 101},
                   'GenericCh2': {'Description': 'Service programming is determined by a test script',
                                  'ServiceId': 501,
                                  'cmdcRegion': 101,
                                  'region': 101},
                   'GenericCh3': {'Description': 'Service programming is determined by a test script',
                                  'ServiceId': 502,
                                  'cmdcRegion': 101,
                                  'region': 101},
                   'GenericCh4': {'Description': 'Service programming is determined by a test script',
                                  'ServiceId': 503,
                                  'cmdcRegion': 101,
                                  'region': 101},
                   'GenericCh5': {'Description': 'Service programming is determined by a test script',
                                  'ServiceId': 504,
                                  'cmdcRegion': 101,
                                  'region': 101},
                   'GenericCh6': {'Description': 'Service programming is determined by a test script',
                                  'ServiceId': 505,
                                  'cmdcRegion': 101,
                                  'region': 101},
                   'GenericCh7': {'Description': 'Service programming is determined by a test script',
                                  'ServiceId': 506,
                                  'cmdcRegion': 101,
                                  'region': 101},
                   'GenericCh8': {'Description': 'Service programming is determined by a test script',
                                  'ServiceId': 507,
                                  'cmdcRegion': 101,
                                  'region': 101},
                   'GenericCh9': {'Description': 'Service programming is determined by a test script',
                                  'ServiceId': 508,
                                  'cmdcRegion': 101,
                                  'region': 101},
                   'longProgramLength': 5,
                   'mediumProgramLength': 3,
                   'shortProgramLength': 2,
                   'xlongProgramLength': 10},
 'test_results': {'filename': 'ec_results.json', 'format': 'json'},
 'tests-to-run': ['sanity', 'basic-feature'],
 'tgs': {'host': 'cmdc', 'service': 'nds_tgs'},
 'tpi': {'host': 'cmdc', 'service': 'nds_tpi'},
 'tstvm': {'host': 'cmdc', 'service': 'nds_tstvm'},
 'tui': {'host': 'cmdc', 'service': 'nds_tui'},
 'ubs': {'service': 'nds_ubs'},
 'upm': {'consul_search_string': '-upm-',
         'corelocation': '/var/log/nds/core*',
         'host': 'upm.cdvr.dcpt01.ciscocdvr.net',
         'port': 6040,
         'protocol': 'http',
         'service': 'nds_upm'},
 'username': 'centos',
 'v2p': {'api_port': 8043,
         'api_token': '52d6ce4e-b9ca-4343-bbd2-192f92e01b07',
         'assets_url': 'am1.ciscocdvr.net',
         'interface_port': 7001,
         'masters': ['v2pc-ui.ciscocdvr.net'],
         'mgmt_port': 8443,
         'pam_node': '0.0.0.0',
         'protocol': 'https',
         'sm_api_token': 'eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6ImFkbWluIiwicm9sZXMiOlHAiOjE1MjQ1NzUwNzd9.H08XWgINkpQGzLRB_CJOvScnXJpmqnVgJZomOuqEqoeQbt-uBNK2sau_62qmLOcOULKR66zf8547LVXCfTHE4bweqmRkgPFy4fEhj74S5upJGBgs2F3vPKTLtSmBVBGXdGRNGxBnjayd9g5bhTotr94Y9jlST4fRuUSXfrNUElbYxv-uaWt6Z8AAeaJCfOHhuof7pB5D65cHBZBm6C1eWQ5nYgaqWiY7Ha7hsSgRK4MGFw0vK40df5OOG0LQmbn0C-Eapm5zTRqRDZjS8MSTJ30GEue3AqyVdKz32t7KcMkFd7fAm16H4x1whWyzJ5edY9C6Misg5o5ek3FSGFeJ6g',
         'use_proxy': False},
 'vcmgateway': {'service': 'nds_vcmgateway'},
 'vcmingest': {'service': 'nds_vcmingest'},
 'vcmpublish': {'service': 'nds_vcmpublish'},
 'vcmsupport': {'service': 'nds_vcmsupport'},
 'vcmworkflow': {'service': 'nds_vcmworkflow'},
 'vmr': {'host': '192.168.21.66', 'port': 9999},
 'vsrm': {'host': 'rr.cdvr.dcpt01.ciscocdvr.net',
          'port': 80,
          'protocol': 'http'}}


2018/04/30 06:03:50 UTC ############################## STARTED :  corner_delete_household ##############################
Starting test corner_delete_household
waiting a few seconds in an effort for PVR deletion to catch up
waiting a few seconds in an effort for PVR deletion to catch up

2018/04/30 06:03:57 UTC ############################## ENDED :  corner_delete_household ##############################

2018/04/30 06:03:57 UTC ############################## STARTED :  corner_create_household ##############################
Starting test corner_create_household
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Create household via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_0
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Create household via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_1
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Create household via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Create household via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_3
waiting a few seconds in an effort for PVR creation to catch up before 1st use
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Create household via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_4
waiting a few seconds in an effort for PVR creation to catch up before 1st use

2018/04/30 06:04:04 UTC ############################## ENDED :  corner_create_household ##############################

2018/04/30 06:04:04 UTC ############################## STARTED :  corner_0001_getCatalogServices ##############################
Starting test corner_0001_getCatalogServices

2018/04/30 06:04:04 UTC ############################## ENDED :  corner_0001_getCatalogServices ##############################

2018/04/30 06:04:04 UTC ############################## STARTED :  corner_0002_getOffers ##############################
Starting test corner_0002_getOffers

2018/04/30 06:04:04 UTC ############################## ENDED :  corner_0002_getOffers ##############################

2018/04/30 06:04:04 UTC ############################## STARTED :  corner_0003_setOffers ##############################
Starting test corner_0003_setOffers
Skipping Enabler services as there is no UPM

2018/04/30 06:04:04 UTC ############################## ENDED :  corner_0003_setOffers ##############################

2018/04/30 06:04:04 UTC ############################## STARTED :  corner_0023_US31837_TC1227_Increase_household_quota_while_recording_is_in_progress ##############################

US31837: As a SP, I want a way to change the storage quota limit at the household level via my Billing System

TC1227:Increase household quota while recording is in progress
Starting test corner_0023_US31837_TC1227_Increase_household_quota_while_recording_is_in_progress
### STEP1: Ingest the catalog for 4 individual event of 3 min each ###################################### 
 
 
{'services': { 508: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'recinc175_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'recinc175_2', 'rating': 1}],
         'lineupLength': 6,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.4164
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

### STEP2: Fetch the content ID of all the three event and diskquota for the first event  ###################################### 
 
 
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Retrieve Total diskQuota fetched  via URL :  http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/diskQuota
Diskquota for the household is 108000
original diskquota is 108000
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525068385000~1525075585000?lang=eng&serviceList=508&count=255&region=101&catalogueId=1
ContentId dictionary from the grid response
{u'programid://1182256621~programid://1881085003': [1525068660000, 1525068840000, 180000, u'recinc175_2'], u'programid://1182256622~programid://1881085002': [1525068480000, 1525068660000, 180000, u'recinc175_1']}
ContentId list after sorting
[(u'programid://1182256622~programid://1881085002', [1525068480000, 1525068660000, 180000, u'recinc175_1']), (u'programid://1182256621~programid://1881085003', [1525068660000, 1525068840000, 180000, u'recinc175_2'])]
### STEP3: Modify the diskquota as required by the first event booking  ###################################### 
 
 
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
DiskQuota is modified  via URL :  http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/diskQuota
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Retrieve Total diskQuota fetched  via URL :  http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/diskQuota
Diskquota for the household is 180
### STEP4: Do the pps booking for the first event verify that the event is successfully moved to recording state################################### 
 
 
full diskquota is 180

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings 
PPS booking is successful for the event contentId programid://1182256622~programid://1881085002
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1182256622~programid://1881085002'] is in BOOKED state
PPS Booking is successful and verified
Recording will start in 93.0seconds
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/recordings
 
All Program with the contentid [u'programid://1182256622~programid://1881085002'] is in RECORDING state
### STEP5:while recording , increase the diskquota and verify the same in updated in UX######################## 
 
 
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
DiskQuota is modified  via URL :  http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/diskQuota
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Retrieve Total diskQuota fetched  via URL :  http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/diskQuota
Diskquota for the household is 270

#################### DEBUG STARTED ####################

Script Fetching the Household Booked/Recorded Catalog at 2018-04-30 06:09:01.195687
get all Catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog
 
Household Booked/Recorded Catalog Response:
[
    {
        "pvr": "nPVR", 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set3_scripts_2", 
        "channelId": "508", 
        "isSynchronized": true, 
        "duration": "00:03:00", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T06:08:00Z", 
        "content": {
            "instanceId": "programid://1881085002", 
            "broadcastDateTime": 1525068480000, 
            "seasonPremiere": false, 
            "locator": "{ODdhNDA3ZTA4MGI2MWYyNjNmNWY=,java.lang.String,NORMAL}[+]{hashKey,NORMAL}", 
            "erotic": false, 
            "audioType": "stereo", 
            "duration": 180000, 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": false, 
            "macrovision": false, 
            "id": "programid://1182256622", 
            "mixSource": false, 
            "externalKey": "recinc175_1_508_tk04300611", 
            "audioDescription": false, 
            "restartAvailable": false, 
            "title": "recinc175_1", 
            "allOfferIdList": [
                2
            ], 
            "mixContentId": false, 
            "contentNdsDrmAttributes": {
                "isBto": false, 
                "lastOfferEndDateTime": 1765963847000, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "rentalDuration": 2147483647, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isExtendedRental": false, 
                "isIppv": false, 
                "isPar": false, 
                "isOppv": false
            }, 
            "source": "ltv", 
            "live": false, 
            "subtitlesHardOfHearing": false, 
            "type": "instance", 
            "channel": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
            "videoFormat": "sd", 
            "wideScreen": false, 
            "isPurchasable": true, 
            "hdcp": false, 
            "serviceId": "508", 
            "adult": false, 
            "sortTitle": "recinc175_1", 
            "endAvailability": 1525068660000, 
            "hasChapters": false, 
            "cdvrAvailable": true, 
            "seasonFinale": false, 
            "shortSynopsis": "recinc175_1 - synopsis", 
            "synopsis": "recinc175_1 - synopsis", 
            "broadcaster": "VGE", 
            "serviceEquivalenceKey": "508", 
            "ict": false
        }, 
        "title": "recinc175_1", 
        "recurrence": "NONE", 
        "state": "RECORDING", 
        "startGuardTime": "00:00:00", 
        "recordingId": "37682", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{508,java.lang.Integer,NORMAL}-|-{MjhlMWFhODYyYzllMjg4N2VmNTM=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "508", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 508, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 508", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 508", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "508", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "508", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_11208~PPS_INSTANCE_37682", 
        "startTime": "2018-04-30T06:07:58Z", 
        "bookingDuration": "00:03:00", 
        "notificationHandles": [
            "5ae6b261f365362240f145ad"
        ], 
        "created": "2018-04-30T06:06:25Z", 
        "lastModified": "2018-04-30T06:08:15Z", 
        "contentPlayUri": "?recId=89158eb9-dd00-4ae2-9f24-91159ce5f066", 
        "uri": "/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog/5ae6b261f365362240f145ad", 
        "scheduleInstance": "programid://1182256622~programid://1881085002", 
        "keep": false, 
        "contentId": "PPS_CONTENT_11208~PPS_INSTANCE_37682"
    }
]
Script Fetching Household Failed Recording Catalog at 2018-04-30 06:09:01.255302
get all failed recording catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog?filter:state=FAILED
 
Failed Recording Catalog is empty

#################### DEBUG ENDED   ####################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: Diskquota space for the household has increased while recording 

2018/04/30 06:09:21 UTC ############################## ENDED :  corner_0023_US31837_TC1227_Increase_household_quota_while_recording_is_in_progress ##############################

2018/04/30 06:09:21 UTC ############################## STARTED :  corner_0024_US31837_TC1228_Decrease_household_quota_while_recording_is_in_progress ##############################

US31837: As a SP, I want a way to change the storage quota limit at the household level via my Billing System

TC1228:Decrease household quota while recording is in progress
Starting test corner_0024_US31837_TC1228_Decrease_household_quota_while_recording_is_in_progress
### STEP1: Ingest the catalog for 2 individual event of 3 min each ###################################### 
 
 
{'services': { 508: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'recdec122_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'recdec122_2', 'rating': 1}],
         'lineupLength': 6,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.4164
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

### STEP2 fetch the content ID of all the  event and diskquota for the first event  ###################################### 
 
 
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Retrieve Total diskQuota fetched  via URL :  http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/diskQuota
Diskquota for the household is 108000
original diskquota is 108000
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525068702000~1525075902000?lang=eng&serviceList=508&count=255&region=101&catalogueId=1
ContentId dictionary from the grid response
{u'programid://2147476294~programid://552335622': [1525068960000, 1525069140000, 180000, u'recdec122_2'], u'programid://2147476293~programid://552335621': [1525068780000, 1525068960000, 180000, u'recdec122_1']}
ContentId list after sorting
[(u'programid://2147476293~programid://552335621', [1525068780000, 1525068960000, 180000, u'recdec122_1']), (u'programid://2147476294~programid://552335622', [1525068960000, 1525069140000, 180000, u'recdec122_2'])]
### STEP3: Modify the diskquota as required by the first event booking  ###################################### 
 
 
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
DiskQuota is modified  via URL :  http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/diskQuota
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Retrieve Total diskQuota fetched  via URL :  http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/diskQuota
Diskquota for the household is 180
### STEP4: Do the pps booking for the first event verify that the event is successfully moved to recording state###################################### 
 
 
full diskquota is 180

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings 
PPS booking is successful for the event contentId programid://2147476293~programid://552335621
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://2147476293~programid://552335621'] is in BOOKED state
PPS Booking is successful and verified
Recording will start in 76.0seconds
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/recordings
 
All Program with the contentid [u'programid://2147476293~programid://552335621'] is in RECORDING state
###STEP5:while recording , decerease the diskquota and verify the same in updated in UX ###################################### 
 
 
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
DiskQuota is modified  via URL :  http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/diskQuota
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Retrieve Total diskQuota fetched  via URL :  http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/diskQuota
Diskquota for the household is 90
Diskquota space has decreased and updated in the UX 
Program Recording completes in 2.0 minutes
###STEP6: After decresing the diskquota , verify that the event is successfully recorded ###################################### 
 
 
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/recordings
 
All Programs with the contentids [u'programid://2147476293~programid://552335621'] is in RECORDED state

#################### DEBUG STARTED ####################

Script Fetching the Household Booked/Recorded Catalog at 2018-04-30 06:17:30.697331
get all Catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog
 
Household Booked/Recorded Catalog Response:
[
    {
        "pvr": "nPVR", 
        "partialContent": false, 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set3_scripts_2", 
        "channelId": "508", 
        "isSynchronized": true, 
        "duration": "00:03:06", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T06:13:00Z", 
        "content": {
            "shortSynopsis": "recdec122_1 - synopsis", 
            "title": "recdec122_1", 
            "instanceId": "PPS_INSTANCE_37689", 
            "recordingId": "37689", 
            "broadcastDateTime": 1525068780000, 
            "synopsis": "recdec122_1 - synopsis", 
            "endAvailability": 1525068960000, 
            "source": "pvr", 
            "erotic": false, 
            "serviceId": "508", 
            "adult": false, 
            "sortTitle": "recdec122_1", 
            "duration": 180000, 
            "serviceEquivalenceKey": "508", 
            "type": "instance", 
            "id": "PPS_CONTENT_11223"
        }, 
        "title": "recdec122_1", 
        "recurrence": "NONE", 
        "state": "RECORDED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "37689", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{508,java.lang.Integer,NORMAL}-|-{MjhlMWFhODYyYzllMjg4N2VmNTM=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "508", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 508, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 508", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 508", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "508", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "508", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_11223~PPS_INSTANCE_37689", 
        "startTime": "2018-04-30T06:12:59Z", 
        "bookingDuration": "00:03:00", 
        "notificationHandles": [
            "5ae6b39e74f21e20e06d23e3"
        ], 
        "created": "2018-04-30T06:11:42Z", 
        "lastModified": "2018-04-30T06:16:19Z", 
        "contentPlayUri": "?recId=d5d790d3-1009-4a15-bfd2-ad97036fe635", 
        "uri": "/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog/5ae6b39e74f21e20e06d23e3", 
        "scheduleInstance": "programid://2147476293~programid://552335621", 
        "keep": false, 
        "contentId": "PPS_CONTENT_11223~PPS_INSTANCE_37689"
    }
]
Script Fetching Household Failed Recording Catalog at 2018-04-30 06:17:30.727637
get all failed recording catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog?filter:state=FAILED
 
Failed Recording Catalog is empty

#################### DEBUG ENDED   ####################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: Recording is present in the catalog ,after decreasing the household 

2018/04/30 06:17:50 UTC ############################## ENDED :  corner_0024_US31837_TC1228_Decrease_household_quota_while_recording_is_in_progress ##############################

2018/04/30 06:17:50 UTC ############################## STARTED :  corner_0025_US31724_TC1389_More_than_one_booking_program_in_the_booking_list ##############################
{'TC1389': ['US31724', '', 3], 'TC1394': ['US31724', '', 3]}

US31724: Usecase: Enable Subscriber Browse for Scheduled Content via Control Plane

TC1389: More than one booking program in the booking list. Verify that user can navigate in the booking list by pressing page up/page down, arrow up/arrow down, arrow right/ arrow left, select

TC1394: Booking program displays from Search. Verify that the user can navigate to the booking in search such as page up/page down, arrow up/arrow down, arrow right/ arrow left, select key
Starting test corner_0025_US31724_TC1389_More_than_one_booking_program_in_the_booking_list


### STEP1: Ingest 2 events of n minutes each ################################################################################################

{'services': { 508: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'delevemor21_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'delevemor21_2', 'rating': 1}],
         'lineupLength': 8,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.5552
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################



### STEP2: Fetch the grid and book and verify state of the events ##########################################################################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525069211000~1525076411000?lang=eng&serviceList=508&count=255&region=101&catalogueId=1
Content id details of event in sorted manner:  [(u'programid://1849948007~programid://2147482789', [1525069260000, 1525069500000, 240000]), (u'programid://1849948008~programid://2147482790', [1525069500000, 1525069740000, 240000])]
List of all content ids for booking:  [u'programid://1849948007~programid://2147482789', u'programid://1849948008~programid://2147482790']

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings 
PPS Booking completed successfully
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1849948007~programid://2147482789'] is in BOOKED state
Booking done and verified for contentid:  programid://1849948007~programid://2147482789 


PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings 
PPS Booking completed successfully
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1849948008~programid://2147482790'] is in BOOKED state
Booking done and verified for contentid:  programid://1849948008~programid://2147482790 



### STEP3: Verify that all booked events are present in the booking library #############################################################

get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1849948007~programid://2147482789', u'programid://1849948008~programid://2147482790'] is in BOOKED state

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: All events are present in Booking library and User can navigate through the list

2018/04/30 06:20:36 UTC ############################## ENDED :  corner_0025_US31724_TC1389_More_than_one_booking_program_in_the_booking_list ##############################

2018/04/30 06:20:36 UTC ############################## STARTED :  corner_0026_US31739_TC1364_startrecordingbefore5minutes ##############################
US31739: UseCase: Schedule Event based Recording on Control Plane
TC1364: Record future program from EPG grid, start 5 minutes earlier and stop on time
Starting test corner_0026_US31739_TC1364_startrecordingbefore5minutes
### STEP1: Verify the recording mode and proceed further if it is unique copy environment, else return Unsupported to TIMS and 2 to EC Job Run######### 
 

### STEP2: Ingest an Event of n Minutes on one channel with post time more than x Minutes to the CI Host######### 
 

{'services': { 508: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'starecbef226_1', 'rating': 1}], 'lineupLength': 4, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:04:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.2776
### STEP3: Fetch the Grid Request and Do the PPS Booking with the StartGuardtime of 5 Minutes######## 
 

Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525069376000~1525076576000?lang=eng&serviceList=508&count=255&region=101&catalogueId=1
ContentId dictionary from the grid response
{u'programid://1464548755~programid://962445913': [1525069560000, 1525069800000, 240000, u'starecbef226_1']}
Content Id list which has broadcasttime greater than 5 minutes of current time
 [(u'programid://1464548755~programid://962445913', 1525069560000, 1525069800000, 240000)]

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings 
PPS booking is successful for the event contentId programid://1464548755~programid://962445913
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1464548755~programid://962445913'] is in BOOKED state
### STEP4: Verify the Booked Event in the library  has the StartGuardTime of 5 Minutes and EndGuardTime of 0 Minutes####### 
 

startGuardTime is set successfully in the Booked Catalog and endGuardTime is set to default value
Waiting for 0 minutes to check the Recording state
### STEP5: Verify the Recording starts earlier than the actual broadcasttime and proceed further########### 
 

get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/recordings
 
All Program with the contentid [u'programid://1464548755~programid://962445913'] is in RECORDING state
Recording Started before 5 Minutes Earlier than the Start Time
Program takes 1525069800000(in epoch) to complete
Script will wait for 6.01666666667 and adding few minutes to check the Recorded State
### STEP6: Fetch the Recorded Catalog and Verify the Event is in Recorded State, get the contentplayuri for playback############### 
 

get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/recordings
 
All Programs with the contentids [u'programid://1464548755~programid://962445913'] is in RECORDED state
### STEP7: Playback the Recorded Event and Verify, cleanup the Event and update the Results################# 
 

URL to get the RM response : http://rr.cdvr.dcpt01.ciscocdvr.net:80/recordingInfo/8976bc77-56f0-41c9-a7e5-c49882b4aa3b?contentType=MPEG4&mode=playback&responseFormat=json
Download the manifest file viahttp://cdvr.pe1.ciscocdvr.net:80/cdvr/5574782e-3cfa-4106-ab11-618093442072/5574782e-3cfa-4106-ab11-618093442072.m3u8
Manifest for the Recorded Content
#EXTM3U
#EXT-X-MEDIA:TYPE=SUBTITLES,GROUP-ID="subs",FORCED=NO,AUTOSELECT=YES,LANGUAGE="en",NAME="cc1",URI="subtitles_cc1_5000_smptett_frag_cc1_CEA-608_.m3u8"
#EXT-X-MEDIA:TYPE=SUBTITLES,GROUP-ID="subs",FORCED=NO,LANGUAGE="en",NAME="svc1",URI="subtitles_svc1_5000_smptett_frag_svc1_CEA-708_.m3u8"
#EXT-X-MEDIA:TYPE=SUBTITLES,GROUP-ID="subs",FORCED=NO,LANGUAGE="en",NAME="svc2",URI="subtitles_svc2_5000_smptett_frag_svc2_CEA-708_.m3u8"
#EXT-X-STREAM-INF:BANDWIDTH=203600,CODECS="avc1.4D400D",RESOLUTION=320x240,FRAME-RATE=29.970,SUBTITLES="subs"
5004_video_seg_auto.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=510000,CODECS="avc1.4D400D",RESOLUTION=320x240,FRAME-RATE=29.970,SUBTITLES="subs"
5003_video_seg_auto.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=664400,CODECS="avc1.4D4016",RESOLUTION=480x360,FRAME-RATE=29.970,SUBTITLES="subs"
5002_video_seg_auto.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=1073200,CODECS="avc1.4D4016",RESOLUTION=480x360,FRAME-RATE=29.970,SUBTITLES="subs"
5001_video_seg_auto.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=1481600,CODECS="avc1.4D4016",RESOLUTION=480x360,FRAME-RATE=29.970,SUBTITLES="subs"
5000_video_seg_auto.m3u8
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=203600,CODECS="avc1.4D400D",RESOLUTION=320x240,URI="iframe_5004_i-frame.m3u8"
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=510000,CODECS="avc1.4D400D",RESOLUTION=320x240,URI="iframe_5003_i-frame.m3u8"
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=664400,CODECS="avc1.4D4016",RESOLUTION=480x360,URI="iframe_5002_i-frame.m3u8"
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=1073200,CODECS="avc1.4D4016",RESOLUTION=480x360,URI="iframe_5001_i-frame.m3u8"
#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=1481600,CODECS="avc1.4D4016",RESOLUTION=480x360,URI="iframe_5000_i-frame.m3u8"

Manifest file for the recorded video saved to /home/centos/cdvr_crnrset3/corner_0026_US31739_TC1364_startrecordingbefore5minutes0_starecbef226_1_manifest_20180430-063131.txt
Download the Video Sample viahttp://cdvr.pe1.ciscocdvr.net:80/cdvr/5574782e-3cfa-4106-ab11-618093442072/5004_video_seg_auto_kSxmWGLMTtG5BB2laqwKlQ/52196001858.ts
Video Sample File Downloaded at /home/centos/cdvr_crnrset3/cdvr_sanity_tests/scripts/cornercase_scripts/cornercase_set3_scripts/corner_0026_US31739_TC1364_startrecordingbefore5minutes0_starecbef226_1_file__20180430-063133.ts
Video Sample saved in the same folder with the name corner_0026_US31739_TC1364_startrecordingbefore5minutes0_starecbef226_1_file__20180430-063133.ts with the size of 151528 bytes

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: Event recorded and Played back successfully

2018/04/30 06:31:53 UTC ############################## ENDED :  corner_0026_US31739_TC1364_startrecordingbefore5minutes ##############################

2018/04/30 06:31:53 UTC ############################## STARTED :  corner_0028_US31798_TC1064_RecordNow_Stoprecording ##############################
US31798: As a viewer, I want to be able to press the RECORD button on my remote while watching live content and have the event recorded from that point to the end of the event
TC1064: Record currently watching program by pressing Record button, stop recording earlier by pressing stop from the remote
TC1063: Record currently watching program by pressing Record button, stop recording earlier by cancel recording from the booking list
US31797: As a viewer, I want to select individual live shows from an EPG for immediate recording
TC1335: Record currently broadcasting program from EPG grid, stop recording earlier by pressing stop from the Apps/Client
Starting test corner_0028_US31798_TC1064_RecordNow_Stoprecording
### STEP1: Verify the recording mode and proceed further only if it is not Common Copy Environment######### 
 

Testscript Proceeds further since it is not Common Copy Environment
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

### STEP2: Ingest an event of n minutes on one channel without any post time so that it will show as currently broadcasting event######## 
 

{'services': { 508: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'recrdnwst114_1', 'rating': 1}], 'lineupLength': 6, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.4164
### STEP3: Fetch the Grid Request and get the currently broadcasting event, than book the event and verify######## 
 

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525066454000~1525073654000?lang=eng&serviceList=508&count=255&region=101&catalogueId=1
Programs from Grid Request which is currently broadcasting
{u'programid://1938589366~programid://716810378': [1525070040000, 1525070400000, 360000, u'recrdnwst114_1']}
Content Id list after Sorting
 [(u'programid://1938589366~programid://716810378', 1525070040000, 1525070400000, 360000)]

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings 
PPS booking is successful for the event contentId programid://1938589366~programid://716810378
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1938589366~programid://716810378'] is in BOOKED state
Script will wait for 0minutes to check the Recording State
### STEP4: Verify the Event is in Recording State and proceed further################# 
 

get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/recordings
 
All Program with the contentid [u'programid://1938589366~programid://716810378'] is in RECORDING state
### STEP5: Stop the Recording and Verify the Event can be Stopped before the Program Ends######### 
 

Stop the recording via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog/5ae6b8e696094c205988ec1b/management
Stop Recording is successful
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/recordings
 
All Programs with the contentids [u'programid://1938589366~programid://716810378'] is in RECORDED state

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: Recording stopped successfully and present in the recorded library

2018/04/30 06:37:07 UTC ############################## ENDED :  corner_0028_US31798_TC1064_RecordNow_Stoprecording ##############################

2018/04/30 06:37:07 UTC ############################## STARTED :  corner_0029_US31798_TC1065_RecordNow_Stoprecordinglate5minutes ##############################
US31798: As a viewer, I want to be able to press the RECORD button on my remote while watching live content and have the event recorded from that point to the end of the event
TC1065: Record currently watching program by pressing Record button, stop recording late 5 minutes
Starting test corner_0029_US31798_TC1065_RecordNow_Stoprecordinglate5minutes
### STEP1: Verify the recording mode and proceed further only if it is not Common Copy Environment######### 
 

### STEP2: Ingest an event of n minutes on one channel without any post time so that it will show as currently broadcasting event######## 
 

{'services': { 508: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'stopreclat114_1', 'rating': 1}], 'lineupLength': 4, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:04:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.2776
### STEP3: Fetch the Grid Request and get the currently broadcasting event, than book the event and verify######## 
 

Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525066768000~1525073968000?lang=eng&serviceList=508&count=255&region=101&catalogueId=1
Programs from Grid Request which is currently broadcasting
{u'programid://1170708260~programid://2147482791': [1525070340000, 1525070580000, 240000, u'stopreclat114_1']}
ContentId list after sorting
[(u'programid://1170708260~programid://2147482791', 1525070340000, 1525070580000, 240000)]

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings 
PPS booking is successful for the event contentId programid://1170708260~programid://2147482791
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1170708260~programid://2147482791'] is in BOOKED state
Script will wait for 0minutes to check the Recording State
### STEP4: Verify the Event is in Recording State and proceed further################# 
 

get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/recordings
 
All Program with the contentid [u'programid://1170708260~programid://2147482791'] is in RECORDING state
### STEP5: Wait till the Event completes Recording and Verify######### 
 

Script will wait for 3.98333333333 minutes to complete the Recording and check the state change
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/recordings
 
All Programs with the contentids [u'programid://1170708260~programid://2147482791'] is in RECORDED state
Recording of the current broadcasting program got completed
### STEP6: Stop the Recording and Verify the Event cannot be Stopped before the Program Ends######### 
 

Stop the recording via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog/5ae6ba201ab94a20f760ba13/management
Stop Recording Failed
403
{'date': 'Mon, 30 Apr 2018 06:44:30 GMT', 'flow_context': '5AE6BB4EE4B0D1FE7D344BC1', 'content-length': '85', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.004","message":"Forbidden","flowContext":"5AE6BB4EE4B0D1FE7D344BC1"}

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: Extending the recording of Currently Broadcasting Event is Failed which is as expected

2018/04/30 06:44:50 UTC ############################## ENDED :  corner_0029_US31798_TC1065_RecordNow_Stoprecordinglate5minutes ##############################

2018/04/30 06:44:50 UTC ############################## STARTED :  corner_TC7219_hybrid_common_unique_copy_record_now ##############################
US46359: Test Hybrid Common and Unique Copy Functionality
TC7219: Test Basic Hybrid Common and Unique Copy Functionality with RecordNOW
Starting test corner_TC7219_hybrid_common_unique_copy_record_now
### STEP1: Make sure 3 Households present in the CDVR System ################### 
 

### STEP2: Ingest 1 Event A of n minutes without posttime in Common copy channel ######## 

### STEP3: Ingest 1 Event B of n minutes without posttime in Unique copy channel #########

{'services': { 504: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'TC7219CC298_1', 'rating': 1}], 'lineupLength': 6, 'message': ''},
  511: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'TC7219UQ114_1', 'rating': 1}], 'lineupLength': 6, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Wait time for the catalog ingest to get synced with the CI Host in seconds: 120.4164
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################


### STEP4: Do PPS booking for both events in all 3 households ###########
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525067271000~1525074471000?lang=eng&serviceList=504,511&count=255&region=101&catalogueId=1
ContentID dictionary from the Grid Response
{u'programid://1206602941~programid://2147482792': [1525070640000, 1525071000000, 360000]}
ContentID dictionary from the Grid Response
{u'programid://1542153101~programid://315906109': [1525070640000, 1525071000000, 360000]}
ContentId list after Sorting Common copy
[(u'programid://1206602941~programid://2147482792', 1525070640000, 1525071000000, 360000)]
ContentId list after Sorting Common copy
[(u'programid://1542153101~programid://315906109', 1525070640000, 1525071000000, 360000)]

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_1/bookings 

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings 

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_3/bookings 

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_1/bookings 

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings 

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_3/bookings 
PPS Booking is successful for the event contentid  programid://1206602941~programid://2147482792  and  programid://1542153101~programid://315906109  on all 3 households

### STEP5: Wait till the recording completes #########
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_1/bookings
 
All programs with the contentids [u'programid://1206602941~programid://2147482792'] is in BOOKED state
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_1/bookings
 
All programs with the contentids [u'programid://1542153101~programid://315906109'] is in BOOKED state
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1206602941~programid://2147482792'] is in BOOKED state
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1542153101~programid://315906109'] is in BOOKED state
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_3/bookings
 
All programs with the contentids [u'programid://1206602941~programid://2147482792'] is in BOOKED state
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_3/bookings
 
All programs with the contentids [u'programid://1542153101~programid://315906109'] is in BOOKED state
Script will wait for 2.11666666667 minutes to complete the recording

### STEP6: Verify the Events A and B recordings present in all 3 households ###
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_1/recordings
 
All Programs with the contentids [u'programid://1206602941~programid://2147482792'] is in RECORDED state
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/recordings
 
All Programs with the contentids [u'programid://1206602941~programid://2147482792'] is in RECORDED state
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_3/recordings
 
All Programs with the contentids [u'programid://1206602941~programid://2147482792'] is in RECORDED state
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_1/recordings
 
All Programs with the contentids [u'programid://1542153101~programid://315906109'] is in RECORDED state
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/recordings
 
All Programs with the contentids [u'programid://1542153101~programid://315906109'] is in RECORDED state
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_3/recordings
 
All Programs with the contentids [u'programid://1542153101~programid://315906109'] is in RECORDED state
Both the events are in Recorded state in all households
### STEP7: Get the contentplayuri from the Recorded Catalog on all 3 Households ###
### STEP8: Get the recordingid using the contentplayuri and RM playback API for all 3 Household recordings ###
### STEP9: Get the streamid/isid/batchid/actualstarttime/actualendtime for all recordingids from STEP7 using the VMR API Request ###
### STEP10: Verify actualstarttime and actualendtime from STEP8 matching for all household recordingids successfully ###
### STEP11: Get all the segments using the streamid/actualstarttime and actualendtime from the VMR API Request and store it in a temp file ###
### STEP12: Verify 200 OK Response in the COS Active Storage with 'X-Fanout-Copy-Index': '0' using isid/segmentid/batchid on all the segments from a temp file and 416 Response with 'X-Fanout-Copy-Index':1 ###
### Started Common copy verification ###
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_1/recordings
 
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/recordings
 
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_3/recordings
 
Playback URI list : [u'?recId=df0eaf69-03c8-4c74-b9d0-9c646b8fea57', u'?recId=74a7bff0-a21e-4c55-9b89-01ce333d648b', u'?recId=52c9263e-a556-4750-a22e-51858edea17f']
URL to get contentid from recoring id : http://rr.cdvr.dcpt01.ciscocdvr.net:80/recordingInfo/df0eaf69-03c8-4c74-b9d0-9c646b8fea57?contentType=MPEG4&mode=playback&responseFormat=json
URL to get contentid from recoring id : http://rr.cdvr.dcpt01.ciscocdvr.net:80/recordingInfo/74a7bff0-a21e-4c55-9b89-01ce333d648b?contentType=MPEG4&mode=playback&responseFormat=json
URL to get contentid from recoring id : http://rr.cdvr.dcpt01.ciscocdvr.net:80/recordingInfo/52c9263e-a556-4750-a22e-51858edea17f?contentType=MPEG4&mode=playback&responseFormat=json
ContentId list : [u'e263ccb5-4b9d-4b29-9560-7f05e69476b8', u'3b444278-3e9d-4d59-991c-f7733b24981a', u'447e0ee5-8cca-4f0f-808a-691df350f911']

URL to get the stream id, start time and end time: http://192.168.21.66:9999/api/findxrid/e263ccb5-4b9d-4b29-9560-7f05e69476b8
JSON response : [{"XRID":"e263ccb5-4b9d-4b29-9560-7f05e69476b8","IRID":"40532396646359384","CopyType":"UNIQUE","ISID":"504","AccountID":"AUTO_3006_cornercase_set3_scripts_1","BatchID":1,"StartTime":"2018-04-30T06:44:00Z","EndTime":"2018-04-30T06:50:00Z","ScheduledTime":"2018-04-30T06:47:51.507Z","ActualStartTime":"2018-04-30T06:47:37.263198Z","ActualEndTime":"2018-04-30T06:50:01.407198Z","StreamID":"504","AdZone":"0","StationID":"504","A8UpdateURL":"http://rr.cdvr.dcpt01.ciscocdvr.net:80/a8/update/PRIMETIME_RECORDER","ErasedTime":"0001-01-01T00:00:00Z","ErrorCode":1,"Status":"INCOMPLETE"}]

URL to get the stream id, start time and end time: http://192.168.21.66:9999/api/findxrid/3b444278-3e9d-4d59-991c-f7733b24981a
JSON response : [{"XRID":"3b444278-3e9d-4d59-991c-f7733b24981a","IRID":"38280596832678120","CopyType":"UNIQUE","ISID":"504","AccountID":"AUTO_3006_cornercase_set3_scripts_2","BatchID":1,"StartTime":"2018-04-30T06:44:00Z","EndTime":"2018-04-30T06:50:00Z","ScheduledTime":"2018-04-30T06:47:51.597Z","ActualStartTime":"2018-04-30T06:47:37.263198Z","ActualEndTime":"2018-04-30T06:50:01.407198Z","StreamID":"504","AdZone":"0","StationID":"504","A8UpdateURL":"http://rr.cdvr.dcpt01.ciscocdvr.net:80/a8/update/PRIMETIME_RECORDER","ErasedTime":"0001-01-01T00:00:00Z","ErrorCode":1,"Status":"INCOMPLETE"}]

URL to get the stream id, start time and end time: http://192.168.21.66:9999/api/findxrid/447e0ee5-8cca-4f0f-808a-691df350f911
JSON response : [{"XRID":"447e0ee5-8cca-4f0f-808a-691df350f911","IRID":"40532396646359385","CopyType":"UNIQUE","ISID":"504","AccountID":"AUTO_3006_cornercase_set3_scripts_3","BatchID":1,"StartTime":"2018-04-30T06:44:00Z","EndTime":"2018-04-30T06:50:00Z","ScheduledTime":"2018-04-30T06:47:51.631Z","ActualStartTime":"2018-04-30T06:47:37.263198Z","ActualEndTime":"2018-04-30T06:50:01.407198Z","StreamID":"504","AdZone":"0","StationID":"504","A8UpdateURL":"http://rr.cdvr.dcpt01.ciscocdvr.net:80/a8/update/PRIMETIME_RECORDER","ErasedTime":"0001-01-01T00:00:00Z","ErrorCode":1,"Status":"INCOMPLETE"}]
Stream id , Starttime and Endtime List: [[u'504', u'20180430064737.263198', u'20180430065001.407198', u'504', 1], [u'504', u'20180430064737.263198', u'20180430065001.407198', u'504', 1], [u'504', u'20180430064737.263198', u'20180430065001.407198', u'504', 1]]
MainList: [u'20180430064737.263198', u'20180430065001.407198']
StreamId : 504 ISIS : 504 BatchID : 1
URL to get segment response : http://192.168.21.66:9999/api/streams/504/segments?start=20180430064737&end=20180430065001
HTTPConnectionPool(host='192.168.22.6', port=80): Read timed out.
Problem accessing ...... http://192.168.22.6/rio/active/isid/504/segmentid/37154696931835625/batchid/1
Response to verify fanout value is none
Error in verify_common_unique_copy : Fanout value is not as expected

#################### DEBUG STARTED ####################

Script Fetching the Household Booked/Recorded Catalog at 2018-04-30 06:51:35.400123
get all Catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_1/catalog
 
Household Booked/Recorded Catalog Response:
[
    {
        "pvr": "nPVR", 
        "partialContent": true, 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set3_scripts_1", 
        "channelId": "504", 
        "isSynchronized": true, 
        "duration": "00:02:24", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T06:44:00Z", 
        "content": {
            "instanceId": "programid://2147482792", 
            "broadcastDateTime": 1525070640000, 
            "seasonPremiere": false, 
            "locator": "{OGEzM2IwNTIzMzdmYTQwMjJiOTk=,java.lang.String,NORMAL}[+]{hashKey,NORMAL}", 
            "erotic": false, 
            "audioType": "stereo", 
            "duration": 360000, 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": false, 
            "macrovision": false, 
            "id": "programid://1206602941", 
            "mixSource": false, 
            "externalKey": "TC7219CC298_1_504_tk04300650", 
            "audioDescription": false, 
            "restartAvailable": false, 
            "title": "TC7219CC298_1", 
            "allOfferIdList": [
                2
            ], 
            "mixContentId": false, 
            "contentNdsDrmAttributes": {
                "isBto": false, 
                "lastOfferEndDateTime": 1765963847000, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "rentalDuration": 2147483647, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isExtendedRental": false, 
                "isIppv": false, 
                "isPar": false, 
                "isOppv": false
            }, 
            "source": "ltv", 
            "live": false, 
            "subtitlesHardOfHearing": false, 
            "type": "instance", 
            "channel": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
            "videoFormat": "sd", 
            "wideScreen": false, 
            "isPurchasable": true, 
            "hdcp": false, 
            "serviceId": "504", 
            "adult": false, 
            "sortTitle": "TC7219CC298_1", 
            "endAvailability": 1525071000000, 
            "hasChapters": false, 
            "cdvrAvailable": true, 
            "seasonFinale": false, 
            "shortSynopsis": "TC7219CC298_1 - synopsis", 
            "synopsis": "TC7219CC298_1 - synopsis", 
            "broadcaster": "VGE", 
            "serviceEquivalenceKey": "504", 
            "ict": false
        }, 
        "title": "TC7219CC298_1", 
        "recurrence": "NONE", 
        "state": "RECORDED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "37712", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{504,java.lang.Integer,NORMAL}-|-{YjEzYjlmNzllY2NhY2ZhZWM3YjU=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "504", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 504, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 504", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 504", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "504", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "504", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_11264~PPS_INSTANCE_37712", 
        "startTime": "2018-04-30T06:47:37Z", 
        "bookingDuration": "00:06:00", 
        "notificationHandles": [
            "5ae6bc1796094c205988ec1c"
        ], 
        "created": "2018-04-30T06:47:51Z", 
        "lastModified": "2018-04-30T06:50:20Z", 
        "contentPlayUri": "?recId=df0eaf69-03c8-4c74-b9d0-9c646b8fea57", 
        "uri": "/pps/households/AUTO_3006_cornercase_set3_scripts_1/catalog/5ae6bc1796094c205988ec1c", 
        "scheduleInstance": "programid://1206602941~programid://2147482792", 
        "keep": false, 
        "contentId": "PPS_CONTENT_11264~PPS_INSTANCE_37712"
    }, 
    {
        "pvr": "nPVR", 
        "partialContent": true, 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set3_scripts_1", 
        "channelId": "511", 
        "isSynchronized": true, 
        "duration": "00:02:24", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T06:44:00Z", 
        "content": {
            "instanceId": "programid://315906109", 
            "broadcastDateTime": 1525070640000, 
            "seasonPremiere": false, 
            "locator": "{OTRhNDMxOWUxN2FiYzg4OTA5ZTA=,java.lang.String,NORMAL}[+]{hashKey,NORMAL}", 
            "erotic": false, 
            "audioType": "stereo", 
            "duration": 360000, 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": false, 
            "macrovision": false, 
            "id": "programid://1542153101", 
            "mixSource": false, 
            "externalKey": "TC7219UQ114_1_511_tk04300650", 
            "audioDescription": false, 
            "restartAvailable": false, 
            "title": "TC7219UQ114_1", 
            "allOfferIdList": [
                2
            ], 
            "mixContentId": false, 
            "contentNdsDrmAttributes": {
                "isBto": false, 
                "lastOfferEndDateTime": 1765963847000, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "rentalDuration": 2147483647, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isExtendedRental": false, 
                "isIppv": false, 
                "isPar": false, 
                "isOppv": false
            }, 
            "source": "ltv", 
            "live": false, 
            "subtitlesHardOfHearing": false, 
            "type": "instance", 
            "channel": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
            "videoFormat": "sd", 
            "wideScreen": false, 
            "isPurchasable": true, 
            "hdcp": false, 
            "serviceId": "511", 
            "adult": false, 
            "sortTitle": "TC7219UQ114_1", 
            "endAvailability": 1525071000000, 
            "hasChapters": false, 
            "cdvrAvailable": true, 
            "seasonFinale": false, 
            "shortSynopsis": "TC7219UQ114_1 - synopsis", 
            "synopsis": "TC7219UQ114_1 - synopsis", 
            "broadcaster": "VGE", 
            "serviceEquivalenceKey": "511", 
            "ict": false
        }, 
        "title": "TC7219UQ114_1", 
        "recurrence": "NONE", 
        "state": "RECORDED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "37711", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{511,java.lang.Integer,NORMAL}-|-{OGJlNGZiMzlhMTUwMGU4YWE5ODQ=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "511", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 511, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 511", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 511", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "511", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "511", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_11263~PPS_INSTANCE_37711", 
        "startTime": "2018-04-30T06:47:37Z", 
        "bookingDuration": "00:06:00", 
        "notificationHandles": [
            "5ae6bc17f365362240f145ae"
        ], 
        "created": "2018-04-30T06:47:51Z", 
        "lastModified": "2018-04-30T06:50:20Z", 
        "contentPlayUri": "?recId=e26dd4dd-c33f-44f0-81a8-767a6f65f07e", 
        "uri": "/pps/households/AUTO_3006_cornercase_set3_scripts_1/catalog/5ae6bc17f365362240f145ae", 
        "scheduleInstance": "programid://1542153101~programid://315906109", 
        "keep": false, 
        "contentId": "PPS_CONTENT_11263~PPS_INSTANCE_37711"
    }
]
Script Fetching Household Failed Recording Catalog at 2018-04-30 06:51:35.413169
get all failed recording catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_1/catalog?filter:state=FAILED
 
Failed Recording Catalog is empty

#################### DEBUG ENDED   ####################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################


#################### DEBUG STARTED ####################

Script Fetching the Household Booked/Recorded Catalog at 2018-04-30 06:51:55.635283
get all Catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog
 
Household Booked/Recorded Catalog Response:
[
    {
        "pvr": "nPVR", 
        "partialContent": true, 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set3_scripts_2", 
        "channelId": "504", 
        "isSynchronized": true, 
        "duration": "00:02:24", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T06:44:00Z", 
        "content": {
            "shortSynopsis": "TC7219CC298_1 - synopsis", 
            "title": "TC7219CC298_1", 
            "instanceId": "PPS_INSTANCE_37712", 
            "recordingId": "37712", 
            "broadcastDateTime": 1525070640000, 
            "synopsis": "TC7219CC298_1 - synopsis", 
            "endAvailability": 1525071000000, 
            "source": "pvr", 
            "erotic": false, 
            "serviceId": "504", 
            "adult": false, 
            "sortTitle": "TC7219CC298_1", 
            "duration": 360000, 
            "serviceEquivalenceKey": "504", 
            "type": "instance", 
            "id": "PPS_CONTENT_11264"
        }, 
        "title": "TC7219CC298_1", 
        "recurrence": "NONE", 
        "state": "RECORDED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "37712", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{504,java.lang.Integer,NORMAL}-|-{YjEzYjlmNzllY2NhY2ZhZWM3YjU=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "504", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 504, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 504", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 504", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "504", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "504", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_11264~PPS_INSTANCE_37712", 
        "startTime": "2018-04-30T06:47:37Z", 
        "bookingDuration": "00:06:00", 
        "notificationHandles": [
            "5ae6bc17a7f2b7218ae8e145"
        ], 
        "created": "2018-04-30T06:47:51Z", 
        "lastModified": "2018-04-30T06:50:19Z", 
        "contentPlayUri": "?recId=74a7bff0-a21e-4c55-9b89-01ce333d648b", 
        "uri": "/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog/5ae6bc17a7f2b7218ae8e145", 
        "scheduleInstance": "programid://1206602941~programid://2147482792", 
        "keep": false, 
        "contentId": "PPS_CONTENT_11264~PPS_INSTANCE_37712"
    }, 
    {
        "pvr": "nPVR", 
        "partialContent": true, 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set3_scripts_2", 
        "channelId": "511", 
        "isSynchronized": true, 
        "duration": "00:02:24", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T06:44:00Z", 
        "content": {
            "shortSynopsis": "TC7219UQ114_1 - synopsis", 
            "title": "TC7219UQ114_1", 
            "instanceId": "PPS_INSTANCE_37711", 
            "recordingId": "37711", 
            "broadcastDateTime": 1525070640000, 
            "synopsis": "TC7219UQ114_1 - synopsis", 
            "endAvailability": 1525071000000, 
            "source": "pvr", 
            "erotic": false, 
            "serviceId": "511", 
            "adult": false, 
            "sortTitle": "TC7219UQ114_1", 
            "duration": 360000, 
            "serviceEquivalenceKey": "511", 
            "type": "instance", 
            "id": "PPS_CONTENT_11263"
        }, 
        "title": "TC7219UQ114_1", 
        "recurrence": "NONE", 
        "state": "RECORDED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "37711", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{511,java.lang.Integer,NORMAL}-|-{OGJlNGZiMzlhMTUwMGU4YWE5ODQ=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "511", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 511, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 511", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 511", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "511", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "511", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_11263~PPS_INSTANCE_37711", 
        "startTime": "2018-04-30T06:47:37Z", 
        "bookingDuration": "00:06:00", 
        "notificationHandles": [
            "5ae6bc174d156f20e0f5e975"
        ], 
        "created": "2018-04-30T06:47:51Z", 
        "lastModified": "2018-04-30T06:50:20Z", 
        "contentPlayUri": "?recId=c7c7a9af-ec1c-44d7-af40-4792cd75a5d0", 
        "uri": "/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog/5ae6bc174d156f20e0f5e975", 
        "scheduleInstance": "programid://1542153101~programid://315906109", 
        "keep": false, 
        "contentId": "PPS_CONTENT_11263~PPS_INSTANCE_37711"
    }
]
Script Fetching Household Failed Recording Catalog at 2018-04-30 06:51:55.676159
get all failed recording catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog?filter:state=FAILED
 
Failed Recording Catalog is empty

#################### DEBUG ENDED   ####################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################


#################### DEBUG STARTED ####################

Script Fetching the Household Booked/Recorded Catalog at 2018-04-30 06:52:15.793821
get all Catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_3/catalog
 
Household Booked/Recorded Catalog Response:
[
    {
        "pvr": "nPVR", 
        "partialContent": true, 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set3_scripts_3", 
        "channelId": "504", 
        "isSynchronized": true, 
        "duration": "00:02:24", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T06:44:00Z", 
        "content": {
            "shortSynopsis": "TC7219CC298_1 - synopsis", 
            "title": "TC7219CC298_1", 
            "instanceId": "PPS_INSTANCE_37712", 
            "recordingId": "37712", 
            "broadcastDateTime": 1525070640000, 
            "synopsis": "TC7219CC298_1 - synopsis", 
            "endAvailability": 1525071000000, 
            "source": "pvr", 
            "erotic": false, 
            "serviceId": "504", 
            "adult": false, 
            "sortTitle": "TC7219CC298_1", 
            "duration": 360000, 
            "serviceEquivalenceKey": "504", 
            "type": "instance", 
            "id": "PPS_CONTENT_11264"
        }, 
        "title": "TC7219CC298_1", 
        "recurrence": "NONE", 
        "state": "RECORDED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "37712", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{504,java.lang.Integer,NORMAL}-|-{YjEzYjlmNzllY2NhY2ZhZWM3YjU=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "504", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 504, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 504", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 504", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "504", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "504", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_11264~PPS_INSTANCE_37712", 
        "startTime": "2018-04-30T06:47:37Z", 
        "bookingDuration": "00:06:00", 
        "notificationHandles": [
            "5ae6bc1729368720c773d0dd"
        ], 
        "created": "2018-04-30T06:47:51Z", 
        "lastModified": "2018-04-30T06:50:19Z", 
        "contentPlayUri": "?recId=52c9263e-a556-4750-a22e-51858edea17f", 
        "uri": "/pps/households/AUTO_3006_cornercase_set3_scripts_3/catalog/5ae6bc1729368720c773d0dd", 
        "scheduleInstance": "programid://1206602941~programid://2147482792", 
        "keep": false, 
        "contentId": "PPS_CONTENT_11264~PPS_INSTANCE_37712"
    }, 
    {
        "pvr": "nPVR", 
        "partialContent": true, 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set3_scripts_3", 
        "channelId": "511", 
        "isSynchronized": true, 
        "duration": "00:02:24", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T06:44:00Z", 
        "content": {
            "shortSynopsis": "TC7219UQ114_1 - synopsis", 
            "title": "TC7219UQ114_1", 
            "instanceId": "PPS_INSTANCE_37711", 
            "recordingId": "37711", 
            "broadcastDateTime": 1525070640000, 
            "synopsis": "TC7219UQ114_1 - synopsis", 
            "endAvailability": 1525071000000, 
            "source": "pvr", 
            "erotic": false, 
            "serviceId": "511", 
            "adult": false, 
            "sortTitle": "TC7219UQ114_1", 
            "duration": 360000, 
            "serviceEquivalenceKey": "511", 
            "type": "instance", 
            "id": "PPS_CONTENT_11263"
        }, 
        "title": "TC7219UQ114_1", 
        "recurrence": "NONE", 
        "state": "RECORDED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "37711", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{511,java.lang.Integer,NORMAL}-|-{OGJlNGZiMzlhMTUwMGU4YWE5ODQ=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "511", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 511, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 511", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 511", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "511", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "511", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_11263~PPS_INSTANCE_37711", 
        "startTime": "2018-04-30T06:47:37Z", 
        "bookingDuration": "00:06:00", 
        "notificationHandles": [
            "5ae6bc17e9c28320e241997e"
        ], 
        "created": "2018-04-30T06:47:51Z", 
        "lastModified": "2018-04-30T06:50:20Z", 
        "contentPlayUri": "?recId=83db2acd-11d9-4532-a918-37ce33b5dc1e", 
        "uri": "/pps/households/AUTO_3006_cornercase_set3_scripts_3/catalog/5ae6bc17e9c28320e241997e", 
        "scheduleInstance": "programid://1542153101~programid://315906109", 
        "keep": false, 
        "contentId": "PPS_CONTENT_11263~PPS_INSTANCE_37711"
    }
]
Script Fetching Household Failed Recording Catalog at 2018-04-30 06:52:15.805592
get all failed recording catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_3/catalog?filter:state=FAILED
 
Failed Recording Catalog is empty

#################### DEBUG ENDED   ####################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Failed: The content is not in the common copy state
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX   ^ ^ ^ ^ ^   XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX   E R R O R   XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

2018/04/30 06:52:35 UTC ############################## ENDED :  corner_TC7219_hybrid_common_unique_copy_record_now ##############################

2018/04/30 06:52:35 UTC ############################## STARTED :  corner_TC7881_CreateHH_empty_recorderregion_Event_Recording_Playback ##############################
US31739: UseCase: Schedule Event based Recording on Control Plane
TC7881: Schedule Event based Recording
Starting test corner_TC7881_CreateHH_empty_recorderregion_Event_Recording_Playback
### STEP2. Ingest 2 events(eg:Event1 and Event2) on one generic channel and 1 series of 2 episodes(Episode1 and Episode2) on another generic channel.#####
{'services': { 500: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'TC7881541_1', 'rating': 1}], 'lineupLength': 3, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:03:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.2082
### STEP2: Create HH with empty recorder region and Do set offers ###
Create HouseHold Payload : 
                        {
                          "householdId" : "TEST01",
                          "householdStatus" : "ACTIVATED",
                          "operateStatus": "ACTIVE",
                          "locale" : {
                                "region" : "101",
                                "cmdcRegion":"101",
                                "adZone": "mkt1",
                                    "marketingTarget": "mkt1",
                                    "recorderRegion": ""
                                     },
                          "cDvrPvr": true
                    }
                    
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Create household via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/TEST01
400
{'date': 'Mon, 30 Apr 2018 06:54:36 GMT', 'content-length': '119', 'x-powered-by': 'Express'}
{"code":"PPS.400.001","message":"Recorder Region cannot be empty","flowContext":"403dd533-7656-4759-aef6-dfaba8e3715a"}

#################### DEBUG STARTED ####################

Script Fetching the Household Booked/Recorded Catalog at 2018-04-30 06:54:36.409454
get all Catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/TEST01/catalog
 
Fetching Recording Catalog Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/TEST01/catalog
404
{'date': 'Mon, 30 Apr 2018 06:54:36 GMT', 'flow_context': '5AE6BDACE4B01484F81ABF1A', 'content-length': '185', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.404.001","message":"resource does not exist. couldn't find household with id: TEST01, or no pvrs (recording devices) in household","flowContext":"5AE6BDACE4B01484F81ABF1A"}
Script Fetching Household Failed Recording Catalog at 2018-04-30 06:54:36.415933
get all failed recording catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/TEST01/catalog?filter:state=FAILED
 
fetch failed recording catalog failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/TEST01/catalog?filter:state=FAILED
404
{'date': 'Mon, 30 Apr 2018 06:54:36 GMT', 'flow_context': '5AE6BDACE4B0C8958DD67933', 'content-length': '185', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.404.001","message":"resource does not exist. couldn't find household with id: TEST01, or no pvrs (recording devices) in household","flowContext":"5AE6BDACE4B0C8958DD67933"}

#################### DEBUG ENDED   ####################

Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Household deleted via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/TEST01
404
{'date': 'Mon, 30 Apr 2018 06:54:36 GMT', 'content-length': '153', 'x-powered-by': 'Express'}
{"code":"PPS.404.001","message":"resource does not exist. couldn't find pvr with plannerId: TEST01","flowContext":"a24b76e2-b552-40d4-ac3f-b2c05fc3bced"}
Testcase Failed: Unable to create household with empty recorder region
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX   ^ ^ ^ ^ ^   XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX   E R R O R   XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

2018/04/30 06:54:36 UTC ############################## ENDED :  corner_TC7881_CreateHH_empty_recorderregion_Event_Recording_Playback ##############################

2018/04/30 06:54:36 UTC ############################## STARTED :  corner_TC7882_CreateHH_invalid_recorderregion_Event_Recording_Playback ##############################
US31739: UseCase: Schedule Event based Recording on Control Plane
TC7882: Create a household with invalid recorderRegion value and verify BOOKINGs fail
Starting test corner_TC7882_CreateHH_invalid_recorderregion_Event_Recording_Playback
### STEP2. Ingest 2 events(eg:Event1 and Event2) on one generic channel and 1 series of 2 episodes(Episode1 and Episode2) on another generic channel.#####
{'services': { 500: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'TC7882595_1', 'rating': 1}], 'lineupLength': 3, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:03:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.2082
### STEP2: Create HH with empty recorder region and Do set offers ###
Create HouseHold Payload : 
                        {
                          "householdId" : "TEST02",
                          "householdStatus" : "ACTIVATED",
                          "operateStatus": "ACTIVE",
                          "locale" : {
                                "region" : "101",
                                "cmdcRegion":"101",
                                "adZone": "mkt1",
                                    "marketingTarget": "mkt1",
                                    "recorderRegion": "abc"
                                     },
                          "cDvrPvr": true
                    }
                    
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Create household via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/TEST02
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
500,501,502,503,504,505,506,507,508,509,510,511,512,513,514,515,516,517,518,519,520,521
http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/TEST02/authorizations/subscriptions/2
Problem accessing: http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/TEST02/authorizations/subscriptions/2
404
{'content-length': '191', 'content-security-policy': "default-src 'self'", 'x-content-type-options': 'nosniff', 'x-powered-by': 'Express', 'date': 'Mon, 30 Apr 2018 06:56:37 GMT', 'content-type': 'text/html; charset=utf-8'}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Error</title>
</head>
<body>
<pre>Cannot PUT /upm/households/TEST02/authorizations/subscriptions/2</pre>
</body>
</html>


#################### DEBUG STARTED ####################

Script Fetching the Household Booked/Recorded Catalog at 2018-04-30 06:56:37.649988
get all Catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/TEST02/catalog
 
Household Catalog is empty
Script Fetching Household Failed Recording Catalog at 2018-04-30 06:56:37.658313
get all failed recording catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/TEST02/catalog?filter:state=FAILED
 
Failed Recording Catalog is empty

#################### DEBUG ENDED   ####################

Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Household deleted via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/TEST02
Testcase Failed : Unable to set offers to the Household TEST02
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX   ^ ^ ^ ^ ^   XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX   E R R O R   XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

2018/04/30 06:56:37 UTC ############################## ENDED :  corner_TC7882_CreateHH_invalid_recorderregion_Event_Recording_Playback ##############################

2018/04/30 06:56:37 UTC ############################## STARTED :  corner_TC7883_CreateHH_no_recorderregion_Event_Recording_Playback ##############################
US31739: UseCase: Schedule Event based Recording on Control Plane
TC7883: Create a household with valid recorderRegion value and verify event recording and playback is successful
Starting test corner_TC7883_CreateHH_no_recorderregion_Event_Recording_Playback
### STEP2. Ingest 2 events(eg:Event1 and Event2) on one generic channel and 1 series of 2 episodes(Episode1 and Episode2) on another generic channel.#####
{'services': { 500: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'TC7883_1', 'rating': 1}], 'lineupLength': 3, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:03:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.2082
### STEP2: Create HH with empty recorder region and Do set offers ###
Create HouseHold Payload : 
                        {
                          "householdId" : "TEST03",
                          "householdStatus" : "ACTIVATED",
                          "operateStatus": "ACTIVE",
                          "locale" : {
                                "region" : "101",
                                "cmdcRegion":"101",
                                "adZone": "mkt1",
                                    "marketingTarget": "mkt1"
                                     },
                          "cDvrPvr": true
                    }
                    
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Create household via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/TEST03
400
{'date': 'Mon, 30 Apr 2018 06:58:38 GMT', 'content-length': '116', 'x-powered-by': 'Express'}
{"code":"PPS.400.001","message":"Mandatory fields are missing","flowContext":"33f8a138-986d-4237-ac48-2e6c43d4289d"}

#################### DEBUG STARTED ####################

Script Fetching the Household Booked/Recorded Catalog at 2018-04-30 06:58:38.122953
get all Catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/TEST03/catalog
 
Fetching Recording Catalog Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/TEST03/catalog
404
{'date': 'Mon, 30 Apr 2018 06:58:38 GMT', 'flow_context': '5AE6BE9EE4B0D62D41237763', 'content-length': '185', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.404.001","message":"resource does not exist. couldn't find household with id: TEST03, or no pvrs (recording devices) in household","flowContext":"5AE6BE9EE4B0D62D41237763"}
Script Fetching Household Failed Recording Catalog at 2018-04-30 06:58:38.129788
get all failed recording catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/TEST03/catalog?filter:state=FAILED
 
fetch failed recording catalog failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/TEST03/catalog?filter:state=FAILED
404
{'date': 'Mon, 30 Apr 2018 06:58:38 GMT', 'flow_context': '5AE6BE9EE4B0CBA15170C2DB', 'content-length': '185', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.404.001","message":"resource does not exist. couldn't find household with id: TEST03, or no pvrs (recording devices) in household","flowContext":"5AE6BE9EE4B0CBA15170C2DB"}

#################### DEBUG ENDED   ####################

Testcase Failed: Unable to create household with empty recorder region
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX   ^ ^ ^ ^ ^   XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX   E R R O R   XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

2018/04/30 06:58:38 UTC ############################## ENDED :  corner_TC7883_CreateHH_no_recorderregion_Event_Recording_Playback ##############################

2018/04/30 06:58:38 UTC ############################## STARTED :  corner_US31735_TC1295_Book_Series_recording_with_all_showings ##############################

 US31735:UseCase: Schedule Series Recording

 TC1295: Book series recording with all showings. Verify all episodes of the series are books on all available dates and channels in the booking list and all the episodes are shown in the recorded library aftet the recordings complete

 TC1303:Book back to back recordings for the whole day. Verify all recordings are recorded properly 

 TC1309:Book multple series with multiple episodes per day 
Starting test corner_US31735_TC1295_Book_Series_recording_with_all_showings
title_list: ['sershow126', 'sersho601', 'sershwo897']
Post time: 1525071758.14
{'services': { 508: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'sershow126_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'sershow126'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'sershow126_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'sershow126'},
                     { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'sershwo897_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'sershwo897'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'sershwo897_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'sershwo897'}],
         'lineupLength': 12,
         'message': ''},
  509: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'sersho601_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'sersho601'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'sersho601_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'sersho601'}],
         'lineupLength': 6,
         'message': ''}},
'shows': set(['sersho601', 'sershow126', 'sershwo897']),
'seasons': { 'sersho601': { 1: set([1, 2])}, 'sershow126': { 1: set([1, 2])}, 'sershwo897': { 1: set([1, 2])}},
'totalLength': "00:12:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.8328

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

### STEP2: do back to back 3 series booking ###########
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525071659000~1525078859000?lang=eng&serviceList=508,509&count=255&region=101&catalogueId=1
Series ContentId dictionary from the grid response
{u'programid://1319720665~programid://962113251': [1525071900000, 1525072080000, u'sershow126_1_2', 2147477837, 2], u'programid://1319720666~programid://962113249': [1525071720000, 1525071900000, u'sershow126_1_1', 2147477837, 1]}
Series ContentId list after sorting
[(u'programid://1319720666~programid://962113249', [1525071720000, 1525071900000, u'sershow126_1_1', 2147477837, 1]), (u'programid://1319720665~programid://962113251', [1525071900000, 1525072080000, u'sershow126_1_2', 2147477837, 2])]

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings 
PPS Booking successful for : programid://1319720666~programid://962113249

Status Code : 201

PPS booking is successful for the event contentId programid://1319720666~programid://962113249
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525071664000~1525078864000?lang=eng&serviceList=508,509&count=255&region=101&catalogueId=1
Series ContentId dictionary from the grid response
{u'programid://1779425894~programid://1739569228': [1525071720000, 1525071900000, u'sersho601_1_1', 2147480054, 1], u'programid://1779425895~programid://1739569229': [1525071900000, 1525072080000, u'sersho601_1_2', 2147480054, 2]}
Series ContentId list after sorting
[(u'programid://1779425894~programid://1739569228', [1525071720000, 1525071900000, u'sersho601_1_1', 2147480054, 1]), (u'programid://1779425895~programid://1739569229', [1525071900000, 1525072080000, u'sersho601_1_2', 2147480054, 2])]

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings 
PPS Booking successful for : programid://1779425894~programid://1739569228

Status Code : 201

PPS booking is successful for the event contentId programid://1779425894~programid://1739569228
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525071669000~1525078869000?lang=eng&serviceList=508,509&count=255&region=101&catalogueId=1
Series ContentId dictionary from the grid response
{u'programid://1252130636~programid://962113252': [1525072080000, 1525072260000, u'sershwo897_1_1', 1392569274, 1], u'programid://1252130635~programid://962113250': [1525072260000, 1525072440000, u'sershwo897_1_2', 1392569274, 2]}
Series ContentId list after sorting
[(u'programid://1252130636~programid://962113252', [1525072080000, 1525072260000, u'sershwo897_1_1', 1392569274, 1]), (u'programid://1252130635~programid://962113250', [1525072260000, 1525072440000, u'sershwo897_1_2', 1392569274, 2])]

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings 
PPS Booking successful for : programid://1252130636~programid://962113252

Status Code : 201

PPS booking is successful for the event contentId programid://1252130636~programid://962113252
Content id list: [u'programid://1319720666~programid://962113249', u'programid://1319720665~programid://962113251', u'programid://1779425894~programid://1739569228', u'programid://1779425895~programid://1739569229', u'programid://1252130636~programid://962113252', u'programid://1252130635~programid://962113250']
Wait time for the system to book the recording of all episode - 60 Seconds
### STEP3: verify whether all the episode of all the series are booked or not ###############
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
Series Id: 2147477837
Episode number : 1
Episode number : 2

Series Episodes in the booked catalog {1: [1525071720000, 1525071900000, 180000, u'37722', u'/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog/5ae6bf2b74f21e20e06d23e6', u'sershow126_1_1', u'programid://1319720666~programid://962113249', u'groupid://2147477837', u'508'], 2: [1525071900000, 1525072080000, 180000, u'37724', u'/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog/5ae6bf2b74f21e20e06d23e8', u'sershow126_1_2', u'programid://1319720665~programid://962113251', u'groupid://2147477837', u'508']}
List of Booked Episodes for seriesID:  2147477837  ->  {1: [1525071720000, 1525071900000, 180000, u'37722', u'/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog/5ae6bf2b74f21e20e06d23e6', u'sershow126_1_1', u'programid://1319720666~programid://962113249', u'groupid://2147477837', u'508'], 2: [1525071900000, 1525072080000, 180000, u'37724', u'/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog/5ae6bf2b74f21e20e06d23e8', u'sershow126_1_2', u'programid://1319720665~programid://962113251', u'groupid://2147477837', u'508']}
Series Id: 2147480054
Episode number : 1
Episode number : 2

Series Episodes in the booked catalog {1: [1525071720000, 1525071900000, 180000, u'37723', u'/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog/5ae6bf305a35bf20e5a9884e', u'sersho601_1_1', u'programid://1779425894~programid://1739569228', u'groupid://2147480054', u'509'], 2: [1525071900000, 1525072080000, 180000, u'37725', u'/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog/5ae6bf305a35bf20e5a98850', u'sersho601_1_2', u'programid://1779425895~programid://1739569229', u'groupid://2147480054', u'509']}
List of Booked Episodes for seriesID:  2147480054  ->  {1: [1525071720000, 1525071900000, 180000, u'37723', u'/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog/5ae6bf305a35bf20e5a9884e', u'sersho601_1_1', u'programid://1779425894~programid://1739569228', u'groupid://2147480054', u'509'], 2: [1525071900000, 1525072080000, 180000, u'37725', u'/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog/5ae6bf305a35bf20e5a98850', u'sersho601_1_2', u'programid://1779425895~programid://1739569229', u'groupid://2147480054', u'509']}
Series Id: 1392569274
Episode number : 1
Episode number : 2

Series Episodes in the booked catalog {1: [1525072080000, 1525072260000, 180000, u'37726', u'/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog/5ae6bf3596094c205988ec1e', u'sershwo897_1_1', u'programid://1252130636~programid://962113252', u'groupid://1392569274', u'508'], 2: [1525072260000, 1525072440000, 180000, u'37727', u'/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog/5ae6bf3596094c205988ec20', u'sershwo897_1_2', u'programid://1252130635~programid://962113250', u'groupid://1392569274', u'508']}
List of Booked Episodes for seriesID:  1392569274  ->  {1: [1525072080000, 1525072260000, 180000, u'37726', u'/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog/5ae6bf3596094c205988ec1e', u'sershwo897_1_1', u'programid://1252130636~programid://962113252', u'groupid://1392569274', u'508'], 2: [1525072260000, 1525072440000, 180000, u'37727', u'/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog/5ae6bf3596094c205988ec20', u'sershwo897_1_2', u'programid://1252130635~programid://962113250', u'groupid://1392569274', u'508']}

List of Episodes booked:  [u'programid://1319720666~programid://962113249', u'programid://1319720665~programid://962113251', u'programid://1779425894~programid://1739569228', u'programid://1779425895~programid://1739569229', u'programid://1252130636~programid://962113252', u'programid://1252130635~programid://962113250']
All the episodes are present in Booked catalog
### STEP4: wait till the recording  of all the series gets completed and verify it ################
Wait time for the system to complete recording of all episode is 705.0 Seconds
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/recordings
 
All Programs with the contentids [u'programid://1319720666~programid://962113249'] is in RECORDED state
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/recordings
 
All Programs with the contentids [u'programid://1319720665~programid://962113251'] is in RECORDED state
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/recordings
 
All Programs with the contentids [u'programid://1779425894~programid://1739569228'] is in RECORDED state
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/recordings
 
All Programs with the contentids [u'programid://1779425895~programid://1739569229'] is in RECORDED state
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/recordings
 
All Programs with the contentids [u'programid://1252130636~programid://962113252'] is in RECORDED state
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/recordings
 
All Programs with the contentids [u'programid://1252130635~programid://962113250'] is in RECORDED state

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: All the episodes in all Series are Booked and Recorded

2018/04/30 07:15:50 UTC ############################## ENDED :  corner_US31735_TC1295_Book_Series_recording_with_all_showings ##############################

2018/04/30 07:15:50 UTC ############################## STARTED :  corner_US31743_TC1222 ##############################
US31743: Delete series recording
TC1222: Delete series recording, schedule series again
Starting test corner_US31743_TC1222
### Step 1: Ingest a Series of 2 Episodes of n mins with post time of n mins #### 
 
 
{'services': { 508: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'TC1222145_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'TC1222145'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'TC1222145_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'TC1222145'}],
         'lineupLength': 6,
         'message': ''}},
'shows': set(['TC1222145']),
'seasons': { 'TC1222145': { 1: set([1, 2])}},
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.4164
### Cleaning up the household at the beginning###################################

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

### Step 2: Do the Series  booking and verfiy it #### 
 

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525072691000~1525079891000?lang=eng&serviceList=508&count=255&region=101&catalogueId=1
ContentId dictionary from the grid response
{u'programid://2147476302~programid://804462105': [1525072920000, 1525073100000, u'TC1222145_1_2', 1310790631, 2], u'programid://2147476301~programid://804462104': [1525072740000, 1525072920000, u'TC1222145_1_1', 1310790631, 1]}
ContentId list after sorting
[(u'programid://2147476301~programid://804462104', [1525072740000, 1525072920000, u'TC1222145_1_1', 1310790631, 1]), (u'programid://2147476302~programid://804462105', [1525072920000, 1525073100000, u'TC1222145_1_2', 1310790631, 2])]

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AWS_AUTO2/bookings 
PPS Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AWS_AUTO2/bookings
400
{'date': 'Mon, 30 Apr 2018 07:18:11 GMT', 'flow_context': '5AE6C333E4B0286852CB1D6A', 'content-length': '200', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.400.001","message":"PPS can't find in the DB the pvr that was provided in the request [nPVR]. (correct format is \"pvr:deviceId\"  or  \"nPVR\")","flowContext":"5AE6C333E4B0286852CB1D6A"}

#################### DEBUG STARTED ####################

Script Fetching the Household Booked/Recorded Catalog at 2018-04-30 07:18:11.768197
get all Catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AWS_AUTO2/catalog
 
Fetching Recording Catalog Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AWS_AUTO2/catalog
404
{'date': 'Mon, 30 Apr 2018 07:18:11 GMT', 'flow_context': '5AE6C333E4B0CBA15170C2F0', 'content-length': '188', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.404.001","message":"resource does not exist. couldn't find household with id: AWS_AUTO2, or no pvrs (recording devices) in household","flowContext":"5AE6C333E4B0CBA15170C2F0"}
Script Fetching Household Failed Recording Catalog at 2018-04-30 07:18:11.775181
get all failed recording catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AWS_AUTO2/catalog?filter:state=FAILED
 
fetch failed recording catalog failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AWS_AUTO2/catalog?filter:state=FAILED
404
{'date': 'Mon, 30 Apr 2018 07:18:11 GMT', 'flow_context': '5AE6C333E4B0D1FE7D344BDB', 'content-length': '188', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.404.001","message":"resource does not exist. couldn't find household with id: AWS_AUTO2, or no pvrs (recording devices) in household","flowContext":"5AE6C333E4B0D1FE7D344BDB"}

#################### DEBUG ENDED   ####################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Failed : PPS Booking failed for the contentId programid://2147476301~programid://804462104
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX   ^ ^ ^ ^ ^   XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX   E R R O R   XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

2018/04/30 07:18:31 UTC ############################## ENDED :  corner_US31743_TC1222 ##############################

2018/04/30 07:18:31 UTC ############################## STARTED :  corner_US31785_TC1156_two_tuners_event_manual_fail_series_book ##############################
US31785: As a SP, I want to provide Conflict Resolution support to the household to resolve Recorder Tuner Quota issues at Booking
TC1156: With 2 tuners, a conflict message displays when user schedules current single recording Prog-C overlaps to current singles recording Prog-A and Prog-B. Prog-A, Prog-B and Prog-C are on different channels. To resolve conflict, this test checks user is able to cancel Prog-A or Prog-B in order to schedule Prog-C
Starting test corner_US31785_TC1156_two_tuners_event_manual_fail_series_book


### STEP1: Ingest Event1 of 2n minutes, Event2 of 3n minutes, Event3 of 1n minutes without the post time on 3 channels #########################################

Titles of events to be booked:  ['tuncur169', 'tuncur2363']
{'services': { 508: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 11, 'programID': 'tuncur3763_1', 'rating': 1}], 'lineupLength': 11, 'message': ''},
  509: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 22, 'programID': 'tuncur169_1', 'rating': 1}], 'lineupLength': 22, 'message': ''},
  510: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 33, 'programID': 'tuncur2363_1', 'rating': 1}], 'lineupLength': 33, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:33:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 122.2902
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Fetching Number of tuners in the Household
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 4


### STEP2: Set the tuner quota to 2#############################################################################

Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 2


### STEP3: Do PPS Booking for Event1 and Event2 , verify if it is successful ###################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525069254000~1525076454000?lang=eng&serviceList=508,509,510&count=255&region=101&catalogueId=1
Content id list:  [(u'programid://2009486902~programid://1172208638', [1525072800000, 1525074120000, 1320000, u'tuncur169_1'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
Event Booking Successfull   for title: tuncur169
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://2009486902~programid://1172208638'] is in BOOKED state
Booked state verified for content id: programid://2009486902~programid://1172208638, Title: tuncur169
Content id list:  [(u'programid://2128991673~programid://1148374381', [1525072800000, 1525074780000, 1980000, u'tuncur2363_1'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
Event Booking Successfull   for title: tuncur2363
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://2128991673~programid://1148374381'] is in BOOKED state
Booked state verified for content id: programid://2128991673~programid://1148374381, Title: tuncur2363


### STEP4: Do PPS Booking of Event3 and verify it should fail due to Tuner Conflict ##########################

Content id list:  [(u'programid://1426011094~programid://603597913', [1525072800000, 1525073460000, 660000, u'tuncur3763_1'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
PPS Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
403
{'date': 'Mon, 30 Apr 2018 07:20:54 GMT', 'flow_context': '5AE6C3D6E4B0520F9FFB57A3', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6C3D6E4B0520F9FFB57A3"}
Testcase Failed: PPS Booking Failed for the event contentId programid://1426011094~programid://603597913
 PPS Booking Failed due to Tuner Conflict


### STEP5: Verify the recording state of Event1 and Event2 and stop the Event1 recording ###########################

get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/recordings
 
Stop the recording via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog/5ae6c3d674f21e20e06d23ea/management
Stop Recording is successful
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/recordings
 
All Programs with the contentids [u'programid://2009486902~programid://1172208638'] is in RECORDED state
Event is in recorded state in recorded catalog after stopping the recording


### STEP6: Do PPS Booking of Event3 again and verify it should be successful ####################

Content id list:  [(u'programid://1426011094~programid://603597913', [1525072800000, 1525073460000, 660000, u'tuncur3763_1'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings


### STEP7: Verify the Booking Catalog and it should have only Event2 and Event3 present #################

get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/recordings
 
All Program with the contentid [u'programid://2128991673~programid://1148374381'] is in RECORDING state
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/recordings
 
All Programs with the contentids [u'programid://2009486902~programid://1172208638'] is in RECORDED state
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1426011094~programid://603597913'] is in BOOKED state

States:
Event1: Stopped and recorded
Event2: Recording
Event3: Booked/Recording


### STEP8: Revent back the original conditions, than update the results ##############


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase passed: First event is not in the booking list and the second event is present

2018/04/30 07:23:45 UTC ############################## ENDED :  corner_US31785_TC1156_two_tuners_event_manual_fail_series_book ##############################

2018/04/30 07:23:45 UTC ############################## STARTED :  corner_US31785_TC1244_future_schedulee_basedOnNtuners ##############################
US31786: As a SP, I want an API to be able to change from my Billing System the recorder tuner quota for a household account
TC1244: User schedules Prog-1. upgrade from 1 tuner to n tuners (n>1). This test checks after user cancels Prog-1, he is able to book more programs based on number of n tuners
Starting test corner_US31785_TC1244_future_schedulee_basedOnNtuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']


### STEP1. Ingest 1 event of 2n mins in Channel 1 with post time of n mins, Ingets the seriesA of 1 episode of n mins with posttime of 3n mins on channel2, 1 event of n mins with posttime of 2n mins in channel3, series of 1 episode of n mins with posttime of 2n mins in channel 4, 1 event of 2n mins with post time of 2n mins in channel5 ########################### 

Titles of events to be booked:  ['tuAfur242', 'tu2fur509', 'tuBfur691']
{'services': { 500: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 7, 'programID': 'tu1fur46_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 7, 'programID': 'tu1fur46_2', 'rating': 1}],
         'lineupLength': 14,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:14:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 501: { 'lineup': [{ 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'tuAfur242_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'tuAfur242'}],
         'lineupLength': 4,
         'message': ''}},
'shows': set(['tuAfur242']),
'seasons': { 'tuAfur242': { 1: set([1])}},
'totalLength': "00:04:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 502: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'tu2fur509_1', 'rating': 1}], 'lineupLength': 4, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:04:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 503: { 'lineup': [{ 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'tuBfur691_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'tuBfur691'}],
         'lineupLength': 4,
         'message': ''}},
'shows': set(['tuBfur691']),
'seasons': { 'tuBfur691': { 1: set([1])}},
'totalLength': "00:04:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 504: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 7, 'programID': 'tu3fur983_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 7, 'programID': 'tu3fur983_2', 'rating': 1}],
         'lineupLength': 14,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:14:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 122.776
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################



### STEP2. Set the tuner quota to 1 ########################### 

Fetching Number of tuners in the Household
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 4
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 1


### STEP3. Do the manual bookign of the event 1 ########################### 

Pps booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
start wait time from func 231.0
Event is present in the Booked catalog
Manual Booking is successful for the channel 500


### STEP4. Cancel the manual booking on channel1 ########################### 


Delete PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog/5ae6c511fddcf120e1a0805e
PPS Booking Deleted successfully
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
Booking Catalog is empty
Booking was deleted succesfully
Booking was deleted succesfully


### STEP5. Set the tuner quota to 3 ########################### 

Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 3


### STEP6. Check the tuner quota is 3 ########################### 

Tuner quota value set to 3


### STEP7. Do the manual booking of event 1 on channel1 ########################### 

Pps booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
start wait time from func 411.0
Event is present in the Booked catalog
Manual Booking is successful for the channel 500


### STEP8. Do the series booking on channel2, event booking on Channel3, series booking on Channel4, Veriy all the bookings are successful ########################### 

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525073169000~1525080369000?lang=eng&serviceList=500,501,502,503,504&count=255&region=101&catalogueId=1
content id list:  [(u'programid://1348283113~programid://1877744984', [1525073700000, 1525073940000, 240000, u'tuAfur242_1_1'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1348283113~programid://1877744984'] is in BOOKED state
Booking done successfully for title: tuAfur242 for title: tuAfur242
content id list:  [(u'programid://1892796556~programid://110696805', [1525073520000, 1525073760000, 240000, u'tu2fur509_1'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1892796556~programid://110696805'] is in BOOKED state
Booking done successfully for title: tu2fur509 for title: tu2fur509
content id list:  [(u'programid://1268093817~programid://1012723712', [1525073520000, 1525073760000, 240000, u'tuBfur691_1_1'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1268093817~programid://1012723712'] is in BOOKED state
Booking done successfully for title: tuBfur691 for title: tuBfur691
All the events booked succesfully


### STEP9. Do the Manual booking in channel 5 and verify it is failed due to Tuner Conflict ########################### 

Pps booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
Pps Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
403
{'date': 'Mon, 30 Apr 2018 07:26:09 GMT', 'flow_context': '5AE6C511E4B0A57495AA76B8', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6C511E4B0A57495AA76B8"}


### STEP10. Revert the tuner quota ################################################# 


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: Manual Booking for channel 5 Failed due to Tuner Conflict

2018/04/30 07:26:29 UTC ############################## ENDED :  corner_US31785_TC1244_future_schedulee_basedOnNtuners ##############################

2018/04/30 07:26:29 UTC ############################## STARTED :  corner_US31785_TC1601_tunconflict3_stopcurent_rec ##############################
US31785: As a SP, I want to provide Conflict Resolution support to the household to resolve Recorder Tuner Quota issues at Booking
TC1601: With 2 tuners, a conflict message displays when user schedules current single recording Prog-C overlaps to current singles recording Prog-A and Prog-B. Prog-A, Prog-B and Prog-C are on different channels. To resolve conflict, this test checks user is able to cancel Prog-A or Prog-B in order to schedule Prog-C
Starting test corner_US31785_TC1601_tunconflict3_stopcurent_rec


### STEP1: Ingest Event1 of 2n minutes, Event2 of 3n minutes, Event3 of 1n minutes without the post time on 3 channels #########################################

Titles of events to be booked:  ['tun12scur169', 'tun24scur2363']
{'services': { 508: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 11, 'programID': 'tun36scur3763_1', 'rating': 1}], 'lineupLength': 11, 'message': ''},
  509: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 22, 'programID': 'tun12scur169_1', 'rating': 1}], 'lineupLength': 22, 'message': ''},
  510: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 33, 'programID': 'tun24scur2363_1', 'rating': 1}], 'lineupLength': 33, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:33:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 122.2902
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Fetching Number of tuners in the Household
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 4


### STEP2: Set the tuner quota to 2#############################################################################

Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 2


### STEP3: Do PPS Booking for Event1 and Event2 , verify if it is successful ###################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525069732000~1525076932000?lang=eng&serviceList=508,509,510&count=255&region=101&catalogueId=1
Content id list:  [(u'programid://1739580453~programid://11154010', [1525073280000, 1525074600000, 1320000, u'tun12scur169_1'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
Event Booking Successfull   for title: tun12scur169
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1739580453~programid://11154010'] is in BOOKED state
Booked state verified for content id: programid://1739580453~programid://11154010, Title: tun12scur169
Content id list:  [(u'programid://2147480264~programid://1337501914', [1525073280000, 1525075260000, 1980000, u'tun24scur2363_1'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
Event Booking Successfull   for title: tun24scur2363
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://2147480264~programid://1337501914'] is in BOOKED state
Booked state verified for content id: programid://2147480264~programid://1337501914, Title: tun24scur2363


### STEP4: Do PPS Booking of Event3 and verify it should fail due to Tuner Conflict ##########################

Content id list:  [(u'programid://1909122359~programid://1039103657', [1525073280000, 1525073940000, 660000, u'tun36scur3763_1'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
PPS Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
403
{'date': 'Mon, 30 Apr 2018 07:28:52 GMT', 'flow_context': '5AE6C5B4E4B092400004071A', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6C5B4E4B092400004071A"}
Testcase Failed: PPS Booking Failed for the event contentId programid://1909122359~programid://1039103657
 PPS Booking Failed due to Tuner Conflict


### STEP5: Verify the recording state of Event1 and Event2 and stop the Event1 recording ###########################

get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/recordings
 
Stop the recording via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog/5ae6c5b4a3078b20f29fe83b/management
Stop Recording is successful
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/recordings
 
All Programs with the contentids [u'programid://1739580453~programid://11154010'] is in RECORDED state
Event is in recorded state in recorded catalog after stopping the recording


### STEP6: Do PPS Booking of Event3 again and verify it should be successful ####################

Content id list:  [(u'programid://1909122359~programid://1039103657', [1525073280000, 1525073940000, 660000, u'tun36scur3763_1'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings


### STEP7: Verify the Booking Catalog and it should have only Event2 and Event3 present #################

get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/recordings
 
All Program with the contentid [u'programid://2147480264~programid://1337501914'] is in RECORDING state
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/recordings
 
All Programs with the contentids [u'programid://1739580453~programid://11154010'] is in RECORDED state
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1909122359~programid://1039103657'] is in BOOKED state

States:
Event1: Stopped and recorded
Event2: Recording
Event3: Booked/Recording


### STEP8: Revent back the original conditions, than update the results ##############


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase passed: First event is not in the booking list and the second event is present

2018/04/30 07:31:43 UTC ############################## ENDED :  corner_US31785_TC1601_tunconflict3_stopcurent_rec ##############################

2018/04/30 07:31:43 UTC ############################## STARTED :  corner_US31785_TC1602_future_tunconflict3_deletesecond_rec ##############################
US31785: As a SP, I want to provide Conflict Resolution support to the household to resolve Recorder Tuner Quota issues at Booking
TC1602: With 2 tuners, a conflict message displays when user schedules future single recording Prog-C overlaps to two future single recording Prog-A and Prog-B. To resolve conflict, this test checks user is able to cancel Prog-A or Prog-B in order to schedule Prog-C
Starting test corner_US31785_TC1602_future_tunconflict3_deletesecond_rec


### STEP1: Ingest Event1 of 1n minutes, Event2 of 1n minutes, Event3 of 1n minutes with the post time of 2n minutes on 3 channels ##########

Titles of events to be booked:  ['tuns30cur169', 'tuns40cur2363']
{'services': { 508: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'tuns50cur3763_1', 'rating': 1}], 'lineupLength': 4, 'message': ''},
  509: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 7, 'programID': 'tuns40cur2363_1', 'rating': 1}], 'lineupLength': 7, 'message': ''},
  510: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'tuns30cur169_1', 'rating': 1}], 'lineupLength': 4, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:07:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.4858
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Fetching Number of tuners in the Household
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 4

### STEP2: Set the tuner quota to 2#############################################################################

Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 2


### STEP3: Do PPS Booking for Event1 and Event2 , verify if it is successful ################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525073644000~1525080844000?lang=eng&serviceList=508,509,510&count=255&region=101&catalogueId=1
Content id list:  [(u'programid://2147476310~programid://529853749', [1525074000000, 1525074240000, 240000, u'tuns30cur169_1'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
Event Booking Successfull   for title: tuns30cur169
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://2147476310~programid://529853749'] is in BOOKED state
Booking state verified for content id: programid://2147476310~programid://529853749, Title: tuns30cur169
Content id list:  [(u'programid://1101965689~programid://876680861', [1525074000000, 1525074420000, 420000, u'tuns40cur2363_1'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
Event Booking Successfull   for title: tuns40cur2363
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1101965689~programid://876680861'] is in BOOKED state
Booking state verified for content id: programid://1101965689~programid://876680861, Title: tuns40cur2363


### STEP4: Do PPS Booking of Event3 and verify it should fail due to Tuner Conflict #################################

Content id list:  [(u'programid://2147480265~programid://673097894', [1525074000000, 1525074240000, 240000, u'tuns50cur3763_1'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
PPS Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
403
{'date': 'Mon, 30 Apr 2018 07:34:04 GMT', 'flow_context': '5AE6C6ECE4B0520F9FFB57B5', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6C6ECE4B0520F9FFB57B5"}
Testcase Failed: PPS Booking Failed for the event contentId programid://2147480265~programid://673097894
PPS Booking Failed due to Tuner Conflict


### STEP5: Delete the PPS Booking of Event2 and verify it is successful #######################

get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 

Delete PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog/5ae6c6eca7f2b7218ae8e148
PPS Booking Deleted successfully
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1101965689~programid://876680861'] is not in BOOKED state
Booking was deleted succesfully


### STEP6: Do PPS Booking of Event3 again and verify it should be successful ########################

Content id list:  [(u'programid://2147480265~programid://673097894', [1525074000000, 1525074240000, 240000, u'tuns50cur3763_1'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings


### STEP7: Verify the Booking Catalog and it should have only Event1 and Event3 present ##################
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1101965689~programid://876680861'] is not in BOOKED state
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://2147476310~programid://529853749'] is in BOOKED state
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://2147480265~programid://673097894'] is in BOOKED state

States:
Event1: Booked
Event2: Deleted
Event3: Booked


### STEP8: Revert back the original conditions, than update the results ###################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: second event is not in the booking list and the first and third event present

2018/04/30 07:34:24 UTC ############################## ENDED :  corner_US31785_TC1602_future_tunconflict3_deletesecond_rec ##############################

2018/04/30 07:34:24 UTC ############################## STARTED :  corner_US31785_TC1603_future_tunconflict4_stopFirst_current_rec ##############################
US31785: As a SP, I want to provide Conflict Resolution support to the household to resolve Recorder Tuner Quota issues at Booking
TC1603: User schedules current single recording Prog-A Ch.A (8:00am-9:00am), future single recording Prog-B Ch.B (8:30am-9:30am) and future single recording Prog-C (9:00am-10:00am). A conflict message displays when user schedules a future manual program Prog-D Ch.D (8:30am-9:00am). Prog-D overlaps to Prog-A and Prog-B. To resolve conflict, user is able to cancel current Prog-A in order to schedule Prog-D
Starting test corner_US31785_TC1603_future_tunconflict4_stopFirst_current_rec
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']


### STEP1: Ingest Event1 of 2n minutes without the post time, Event2 of 2n minutes with the post time of n minutes, Event3 of 2n minutes with the post time of 2n minutes, Event4 of 2n minutes with the post time of n minutes on 4 channels ###################

Titles of events to be booked:  ['tun1scu469', 'tun2scu4363', 'tun3scu4709']
{'services': { 508: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 7, 'programID': 'tun1scu469_1', 'rating': 1}], 'lineupLength': 7, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:07:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 509: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 7, 'programID': 'tun2scu4363_1', 'rating': 1}], 'lineupLength': 7, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:07:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 510: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 7, 'programID': 'tun3scu4709_1', 'rating': 1}], 'lineupLength': 7, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:07:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 511: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 7, 'programID': 'tun4scu4846_1', 'rating': 1}], 'lineupLength': 7, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:07:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 121.9432
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Fetching Number of tuners in the Household
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 4

### STEP2: Set the tuner quota to 2############################################################################

Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 2


### STEP3: Do PPS Booking of Event1, Event2 and Event3, verify if it is successful ###################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525070207000~1525077407000?lang=eng&serviceList=508,509,510,511&count=255&region=101&catalogueId=1
Content id list:  [(u'programid://1673715963~programid://1688611966', [1525073760000, 1525074180000, 420000, u'tun1scu469_1'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
Event Booking Successfull   for title: tun1scu469
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1673715963~programid://1688611966'] is in BOOKED state
Booked state verified for content id: programid://1673715963~programid://1688611966, Title: tun1scu469
Content id list:  [(u'programid://1890373662~programid://474682867', [1525074000000, 1525074420000, 420000, u'tun2scu4363_1'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
Event Booking Successfull   for title: tun2scu4363
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1890373662~programid://474682867'] is in BOOKED state
Booked state verified for content id: programid://1890373662~programid://474682867, Title: tun2scu4363
Content id list:  [(u'programid://1736140174~programid://77461208', [1525074180000, 1525074600000, 420000, u'tun3scu4709_1'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
Event Booking Successfull   for title: tun3scu4709
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1736140174~programid://77461208'] is in BOOKED state
Booked state verified for content id: programid://1736140174~programid://77461208, Title: tun3scu4709
all the events booked succesfully


### STEP4: Do Manual Booking for 4th channel with the posttime of nminutes as starttime and endtime as startime+nminutes, verify it fails due to tuner conflict ############

Pps booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
Pps Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
403
{'date': 'Mon, 30 Apr 2018 07:36:47 GMT', 'flow_context': '5AE6C78FE4B0D524DC1CB09F', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6C78FE4B0D524DC1CB09F"}
 PPS Booking Failed due to Tuner Conflict


### STEP5: Stop the in-progress recording of Event1 and verify it is successful ####################

get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
Stop the recording via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog/5ae6c78f96094c205988ec22/management
Stop Recording is successful
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/recordings
 
All Programs with the contentids [u'programid://1673715963~programid://1688611966'] is in RECORDED state
Recording was stopped succesfully


### STEP6: Rebook the Manual Booking with the starttime and endtime from Step4, verify it should be successful now ######################

Pps booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
start wait time from func 103.0
Event is present in the Booked catalog
PPS Booking is successful for the channel 511


### STEP7: Verify the Booking Catalog and It should have Event2, Event3 and Manual Booking present #####################

get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/recordings
 
All Programs with the contentids [u'programid://1673715963~programid://1688611966'] is in RECORDED state
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1890373662~programid://474682867'] is in BOOKED state
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1736140174~programid://77461208'] is in BOOKED state
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
start wait time from func 103.0
Event is present in the Booked catalog

States:
Event1: Stopped and recorded
Event2: Booked
Event3: Booked
Event4: Booked


### STEP8: Revert back the original conditions, than update the results ################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: second event is not in the booking list and the first,third and forth event present

2018/04/30 07:39:38 UTC ############################## ENDED :  corner_US31785_TC1603_future_tunconflict4_stopFirst_current_rec ##############################

2018/04/30 07:39:38 UTC ############################## STARTED :  corner_US31785_TC1604_future_tunconflict4_deletesecond_rec ##############################
US31785: As a SP, I want to provide Conflict Resolution support to the household to resolve Recorder Tuner Quota issues at Booking
TC1604: User schedules current single recording Prog-A Ch.A (8:00am-9:00am), future single recording Prog-B Ch.B (8:30am-9:30am) and future single recording Prog-C (9:00am-10:00am). A conflict message displays when user schedules a future manual program Prog-D Ch.D (8:30am-9:00am). Prog-D overlaps to 2 Prog-A and Prog-B. To resolve conflict, user is able to cancel future Prog-B in order to schedule Prog-D
Starting test corner_US31785_TC1604_future_tunconflict4_deletesecond_rec
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']


### STEP1: Ingest Event1 of 2n minutes without the post time, Event2 of 2n minutes with the post time of n minutes, Event3 of 2n minutes with the post time of 2n minutes, Event4 of 2n minutes with the post time of n minutes on 4 channels #######################################

Titles of events to be booked:  ['tu1scur469', 'tu2scur4363', 'tu3scur4709']
{'services': { 508: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 7, 'programID': 'tu1scur469_1', 'rating': 1}], 'lineupLength': 7, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:07:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 509: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 7, 'programID': 'tu2scur4363_1', 'rating': 1}], 'lineupLength': 7, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:07:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 510: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 7, 'programID': 'tu3scur4709_1', 'rating': 1}], 'lineupLength': 7, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:07:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 511: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 7, 'programID': 'tu4scur4846_1', 'rating': 1}], 'lineupLength': 7, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:07:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 121.9432
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Fetching Number of tuners in the Household
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 4

### STEP2: Set the tuner quota to 2#############################################################################

Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 2


### STEP3: Do PPS Booking of Event1, Event2 and Event3, verify if it is successful ###############################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525070520000~1525077720000?lang=eng&serviceList=508,509,510,511&count=255&region=101&catalogueId=1
content id list:  [(u'programid://1980600347~programid://420989751', [1525074060000, 1525074480000, 420000, u'tu1scur469_1'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
Event Booking Successfull   for title: tu1scur469
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1980600347~programid://420989751'] is in BOOKED state
Booked state verified for content id: programid://1980600347~programid://420989751, Title: tu1scur469
content id list:  [(u'programid://1349644409~programid://2147482806', [1525074300000, 1525074720000, 420000, u'tu2scur4363_1'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
Event Booking Successfull   for title: tu2scur4363
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1349644409~programid://2147482806'] is in BOOKED state
Booked state verified for content id: programid://1349644409~programid://2147482806, Title: tu2scur4363
content id list:  [(u'programid://1975677382~programid://451461171', [1525074480000, 1525074900000, 420000, u'tu3scur4709_1'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
Event Booking Successfull   for title: tu3scur4709
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1975677382~programid://451461171'] is in BOOKED state
Booked state verified for content id: programid://1975677382~programid://451461171, Title: tu3scur4709
all the events booked succesfully


### STEP4: Do Manual Booking for 4th channel with the posttime of nminutes as starttime and endtime as startime+nminutes, verify it fails due to tuner conflict ######################################

Pps booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
Pps Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
403
{'date': 'Mon, 30 Apr 2018 07:42:00 GMT', 'flow_context': '5AE6C8C8E4B0CA76F1C6FA05', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6C8C8E4B0CA76F1C6FA05"}
 PPS Booking Failed due to Tuner Conflict


### STEP5: Delete the future booking Event2 and verify it is successful #############################

get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 

Delete PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog/5ae6c8c81ab94a20f760ba16
PPS Booking Deleted successfully
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1349644409~programid://2147482806'] is not in BOOKED state
Booking was deleted succesfully


### STEP6: Rebook the Manual Booking with the starttime and endtime from Step4, verify it should be successful now #####################

Pps booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
start wait time from func 240.0
Event is present in the Booked catalog
Manual Booking is successful for the channel 511


### STEP7: Verify the Booking Catalog and It should have Event1, Event3 and Manual Booking present ##################

get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1980600347~programid://420989751'] is in BOOKED state
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1349644409~programid://2147482806'] is not in BOOKED state
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1975677382~programid://451461171'] is in BOOKED state
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
start wait time from func 239.0
Event is present in the Booked catalog

States:
First Event : Booked 
Second Event: deleted 
Third event : Booked 
Forth Event: Booked


### STEP8: Revert back the original conditions, than update the results ###############################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: second event is not in the booking list and the first,third and forth event present

2018/04/30 07:42:21 UTC ############################## ENDED :  corner_US31785_TC1604_future_tunconflict4_deletesecond_rec ##############################

2018/04/30 07:42:21 UTC ############################## STARTED :  corner_US31785_TC1609_single_recording_conflictwith_manual ##############################
US31785: As a SP, I want to provide Conflict Resolution support to the household to resolve Recorder Tuner Quota issues at Booking
TC1609: User schedules a future manual recording Prog-A Ch. A (8:30-9:30) and a manual recording Prog-C Ch. C (8:30-9:30). A confict message displays when user schedules a single current recording Prog-B Ch. B (8:00-9:00) because Prog-B overlaps Prog-A and Prog-C. To resolve confict, this test checks user is able to cancel Prog-a or Prog-C in order to schedule Prog-B
Starting test corner_US31785_TC1609_single_recording_conflictwith_manual
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']


### STEP1. Ingest Event1 of 2n minutes with a posttime of n minute, Event2 of 2n minutes without the post time and  Event3 of 2n minutes with the post time of n minute on 3 channels ############################# 

{'services': { 508: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 7, 'programID': 'tu4scu469_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 7, 'programID': 'tu4scu469_2', 'rating': 1}],
         'lineupLength': 14,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:14:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 509: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 7, 'programID': 'tu5scu4363_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 7, 'programID': 'tu5scu4363_2', 'rating': 1}],
         'lineupLength': 14,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:14:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 510: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 7, 'programID': 'tu6scu4709_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 7, 'programID': 'tu6scu4709_2', 'rating': 1}],
         'lineupLength': 14,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:14:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 122.9148
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Fetching Number of tuners in the Household
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 4

### STEP2: Set the tuner quota to 2 ############################################################################

Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 2
Tuner value was set succesfully


### STEP3. Do manual booking for Event1, verify if it is successful ############################## 

Pps booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
start wait time from func 256.0
Event is present in the Booked catalog
PPS Booking is successful for the channel 508
Manual booking was successful for first event


### STEP4. Do manual booking for Event3, verify if it is successful ################### 

Pps booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
start wait time from func 256.0
start wait time from func 1.52354946572e+12
Event is present in the Booked catalog
PPS Booking is successful for the channel 510
Manual booking was successful for third event


### STEP5. Do manual booking for Event2, verify it fail due to Tuner conflict ##################### 

Pps booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
Pps Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
403
{'date': 'Mon, 30 Apr 2018 07:44:44 GMT', 'flow_context': '5AE6C96CE4B0CBA15170C30F', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6C96CE4B0CBA15170C30F"}
Booking Failed due to Tuner Conflict for event2


### STEP6. Delete the Event1 booking ######################## 


Delete PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog/5ae6c96c4d156f20e0f5e97a
PPS Booking Deleted successfully
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
Booking was deleted succesfully


### STEP7. Do manual booking for Event2 again and verify it should be successful ############################# 

Pps booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
start wait time from func 16.0
Event is present in the Booked catalog
PPS Booking is successful for the channel 509


### STEP8. Verify the Booking Catalog and it should have only Event2 and  Event3 are present ###################### 

get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
start wait time from func 256.0
Event is present in the Booked catalog
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
start wait time from func 16.0
Event is present in the Booked catalog

States:
Event1: Deleted
Event2: Booked
Event3: Booked


### STEP9. Revert back the original conditions, than update the results ####################### 


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: First event is not in the booking list and second and third event present

2018/04/30 07:45:04 UTC ############################## ENDED :  corner_US31785_TC1609_single_recording_conflictwith_manual ##############################

2018/04/30 07:45:04 UTC ############################## STARTED :  corner_US31785_TC1610_furturemanual_conflict_withcurrent_manual ##############################
US31785: As a SP, I want to provide Conflict Resolution support to the household to resolve Recorder Tuner Quota issues at Booking
TC1610: User schedules future manual Prog-A on Ch. A (8:30am-9:00am) and future manual Prog-B Ch. B (8:30am-9:30am). A conflict message displays when user schedules current manual recording Prog-C Ch.C (8:00am-9:00am) because Prog-C overlaps to Prog-A and Prog-B. To resolve conflict, this test checks user is able to cancel Prog-A or Prog-B in order to schedule Prog-C
Starting test corner_US31785_TC1610_furturemanual_conflict_withcurrent_manual
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']


### STEP1. Ingest Event1 of n minutes with a posttime of n minute, Event2 of 2n minutes with the post time of n minute and  Event3 of 2n minutes without the post time  on 3 channels ################# 
 
{'services': { 508: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'tusercu169_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'tusercu169_2', 'rating': 1}],
         'lineupLength': 8,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 509: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 7, 'programID': 'tusercu2363_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 7, 'programID': 'tusercu2363_2', 'rating': 1}],
         'lineupLength': 14,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:14:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 510: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 7, 'programID': 'tusercu3709_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 7, 'programID': 'tusercu3709_2', 'rating': 1}],
         'lineupLength': 14,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:14:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 122.4984
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Fetching Number of tuners in the Household
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 4

### STEP2: Set the tuner quota to 2############################################################################

Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 2
Tuner value was set succesfully


### STEP3. Do manual booking for Event1, verify if it is successful #####################

Pps booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
start wait time from func 273.0
Event is present in the Booked catalog
PPS Booking is successful for the channel 508
Manual booking was successful for first event


### STEP4. Do manual booking for Event2, verify if it is successful ############################

Pps booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
start wait time from func 272.0
start wait time from func 1.52354964555e+12
Event is present in the Booked catalog
PPS Booking is successful for the channel 509
Manual booking was successful for third event


### STEP5. Do manual booking for Event3, verify it fail due to Tuner conflict ########################

Pps booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
Pps Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
403
{'date': 'Mon, 30 Apr 2018 07:47:28 GMT', 'flow_context': '5AE6CA10E4B0D62D4123779A', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6CA10E4B0D62D4123779A"}
Booking Failed due to Tuner Conflict for event2


### STEP6. Delete the Event1 booking ########################## 


Delete PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog/5ae6ca0fd8ba2820719bdbe0
PPS Booking Deleted successfully
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
Booking was deleted succesfully


### STEP7. Do manual booking for Event3 again and verify it should be successful ####################### 
 
Pps booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
start wait time from func 32.0
Event is present in the Booked catalog
PPS Booking is successful for the channel 510


### STEP8. Verify the Booking Catalog and it should have only Event2 and  Event3 are present #################### 

get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
start wait time from func 32.0
Event is present in the Booked catalog
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
start wait time from func 32.0
Event is present in the Booked catalog

States:
Event1: Deleted
Event2: Booked
Event3: Booked


### STEP9. Revert back the original conditions, than update the results ############################ 


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: First event is not in the booking list and second and third event present

2018/04/30 07:47:48 UTC ############################## ENDED :  corner_US31785_TC1610_furturemanual_conflict_withcurrent_manual ##############################

2018/04/30 07:47:48 UTC ############################## STARTED :  corner_US31785_TC1611_two_tuners_event_manual_series_book ##############################
US31785: As a SP, I want to provide Conflict Resolution support to the household to resolve Recorder Tuner Quota issues at Booking
TC1611 : Conflict Resolution, 2 tuners, future Series-B overlaps to a future future single recording Prog-C, Prog-C overlaps to future manual recording Prog-A with 15 minutes start early 
Starting test corner_US31785_TC1611_two_tuners_event_manual_series_book
### STEP1: Ingest Event1 of 2n minutes with a post time of n minute, series of episode of n minute with a post time of n minute , Event2 of 2n minutes with the post time of n minute  on 3 channels#################################



Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
{'services': { 508: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 8, 'programID': 'curtunerca57_1', 'rating': 1}], 'lineupLength': 8, 'message': ''},
  510: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 8, 'programID': 'curtenerca635_1', 'rating': 1}], 'lineupLength': 8, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 509: { 'lineup': [{ 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'curtuneca301_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'curtuneca301'}],
         'lineupLength': 4,
         'message': ''}},
'shows': set(['curtuneca301']),
'seasons': { 'curtuneca301': { 1: set([1])}},
'totalLength': "00:04:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 121.1104
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Fetching Number of tuners in the Household
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 4
### STEP2:Set the tuner quota to 2 ###################



Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 2
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525074609000~1525081809000?lang=eng&serviceList=508,509,510&count=255&region=101&catalogueId=1
### STEP3: Do manual booking for Event1  , verify if it is successful. #########################



Pps booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
PPS Booking is successful for the Channel 508
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
start wait time from func 399.251133057
Event is present in the Booked catalog
### STEP4: Do PPS Booking of Event2 and verify if it is successful ####################



ContentId Dictionary from the Grid Response
{u'programid://1513657213~programid://2147482811': [1525074780000, 1525075260000, 480000, u'curtenerca635_1']}
ContentId list after Sorting
[(u'programid://1513657213~programid://2147482811', [1525074780000, 1525075260000, 480000, u'curtenerca635_1'])]

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings 
Event Booking is Successful for the event contentId programid://1513657213~programid://2147482811 
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1513657213~programid://2147482811'] is in BOOKED state
### STEP5: Do the series booking and verify it fail due to Tuner conflict  ########



{u'programid://1309771619~programid://1029018997': [1525074780000, 1525075020000, 240000, u'curtuneca301_1_1', 1904860260, 1]}
[(u'programid://1309771619~programid://1029018997', [1525074780000, 1525075020000, 240000, u'curtuneca301_1_1', 1904860260, 1])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
PPS Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
403
{'date': 'Mon, 30 Apr 2018 07:50:12 GMT', 'flow_context': '5AE6CAB4E4B056714510D907', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6CAB4E4B056714510D907"}
 PPS Booking failed due to Tuner Conflict
### STEP6:Delete the Event2 booking #####




Delete PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog/5ae6cab2b1f9e9206752a809
PPS Booking Deleted successfully
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1513657213~programid://2147482811'] is not in BOOKED state
### STEP7: Do series Booking of again and verify it should be successful ######



{u'programid://1309771619~programid://1029018997': [1525074780000, 1525075020000, 240000, u'curtuneca301_1_1', 1904860260, 1]}
[(u'programid://1309771619~programid://1029018997', [1525074780000, 1525075020000, 240000, u'curtuneca301_1_1', 1904860260, 1])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
Series Booking Successfull seriesId curtuneca301_1_1 
### STEP8: Verify the Booking Catalog and it should have only Event1 and all episodes of the series are present .############



get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
start wait time from func 296.251133057
Event is present in the Booked catalog
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1309771619~programid://1029018997'] is in BOOKED state
### STEP9: Revert back the original conditions, than update the results #### 




#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

 Testcase passed : Event1 and all episodes of the series are present in the booked catalog

2018/04/30 07:52:12 UTC ############################## ENDED :  corner_US31785_TC1611_two_tuners_event_manual_series_book ##############################

2018/04/30 07:52:12 UTC ############################## STARTED :  corner_US31785_TC1612_two_tuners_three_event_book ##############################
US31785: As a SP, I want to provide Conflict Resolution support to the household to resolve Recorder Tuner Quota issues at Booking
TC1612 : Conflict Resolution, 2 tuners, future single recording Prog-A and Prog-B start at same time on different channels, current recording Prog-C overlaps to Prog-A and Prog-B 
Starting test corner_US31785_TC1612_two_tuners_three_event_book
### STEP1: Ingest Event1 of n minutes with a posttime of n minute, Event2 of 2n minutes with the post time of n minute and  Event3 of 2n minutes without  the post time on 3 channels.#################################



{'services': { 508: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'ca11curtn57_1', 'rating': 1}], 'lineupLength': 4, 'message': ''},
  509: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 8, 'programID': 'ca22urtu1301_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 8, 'programID': 'ca22urtu1301_2', 'rating': 1}],
         'lineupLength': 16,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:16:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 510: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 8, 'programID': 'ca33curtu635_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 8, 'programID': 'ca33curtu635_2', 'rating': 1}],
         'lineupLength': 16,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:16:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 122.2208
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Fetching Number of tuners in the Household
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 4
### STEP2:Set the tuner quota to 2 ###################



Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 2
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525071275000~1525078475000?lang=eng&serviceList=508,509,510&count=255&region=101&catalogueId=1
### STEP3: Do the PPS Booking of Event1 and verify it is successful. #########################



ContentId Dictionary from the Grid Response
{u'programid://2129687677~programid://537463472': [1525075080000, 1525075320000, 240000, u'ca11curtn57_1']}
ContentId list after Sorting
[(u'programid://2129687677~programid://537463472', [1525075080000, 1525075320000, 240000, u'ca11curtn57_1'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
Event Booking is Successful for the event contentId programid://2129687677~programid://537463472 
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://2129687677~programid://537463472'] is in BOOKED state
### STEP4: Do pps booking for Event2  , verify if it is successful ####################



ContentId Dictionary from the Grid Response
{u'programid://2147480268~programid://1947899621': [1525075560000, 1525076040000, 480000, u'ca22urtu1301_2'], u'programid://2147480269~programid://1947899622': [1525075080000, 1525075560000, 480000, u'ca22urtu1301_1']}
ContentId list after Sorting
[(u'programid://2147480269~programid://1947899622', [1525075080000, 1525075560000, 480000, u'ca22urtu1301_1']), (u'programid://2147480268~programid://1947899621', [1525075560000, 1525076040000, 480000, u'ca22urtu1301_2'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
Event Booking is Successful for the event contentId programid://2147480269~programid://1947899622 
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://2129687677~programid://537463472'] is in BOOKED state
###STEP5: Do pps booking for Event3  , verify it fail due to Tuner conflict #######



ContentId Dictionary from the Grid Response
{u'programid://1909647212~programid://139464266': [1525075320000, 1525075800000, 480000, u'ca33curtu635_2'], u'programid://1909647213~programid://139464267': [1525074840000, 1525075320000, 480000, u'ca33curtu635_1']}
ContentId list after Sorting
[(u'programid://1909647213~programid://139464267', [1525074840000, 1525075320000, 480000, u'ca33curtu635_1']), (u'programid://1909647212~programid://139464266', [1525075320000, 1525075800000, 480000, u'ca33curtu635_2'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
PPS Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
403
{'date': 'Mon, 30 Apr 2018 07:54:39 GMT', 'flow_context': '5AE6CBBFE4B0D0D969BAE61F', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6CBBFE4B0D0D969BAE61F"}
 PPS Booking failed due to Tuner Conflict
### STEP6: Delete the Event1 booking  #####




Delete PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog/5ae6cbbba3078b20f29fe83d
PPS Booking Deleted successfully
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://2129687677~programid://537463472'] is not in BOOKED state
### STEP7: Do pps booking for Event3 again and verify it should be successful############



ContentId Dictionary from the Grid Response
{u'programid://1909647212~programid://139464266': [1525075320000, 1525075800000, 480000, u'ca33curtu635_2'], u'programid://1909647213~programid://139464267': [1525074840000, 1525075320000, 480000, u'ca33curtu635_1']}
ContentId list after Sorting
[(u'programid://1909647213~programid://139464267', [1525074840000, 1525075320000, 480000, u'ca33curtu635_1']), (u'programid://1909647212~programid://139464266', [1525075320000, 1525075800000, 480000, u'ca33curtu635_2'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
Event Booking is Successful for the event contentId programid://1909647213~programid://139464267 
### STEP8: STEP8: Verify the Booking Catalog and it should have only Event2 and  Event3 are present #################



get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://2147480269~programid://1947899622'] is in BOOKED state
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1909647213~programid://139464267'] is in BOOKED state
### STEP9: Revert back the original conditions, than update the results #### 




#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

 Testcase passed : Event2 and  Event3 are present in the booked catalog

2018/04/30 07:56:33 UTC ############################## ENDED :  corner_US31785_TC1612_two_tuners_three_event_book ##############################

2018/04/30 07:56:33 UTC ############################## STARTED :  corner_US31785_TC1616_two_tuners_event_book ##############################

 US31785: As a SP, I want to provide Conflict Resolution support to the household to resolve Recorder Tuner Quota issues at Booking

TC1616 : Conflict Resolution, 2 tuners,2 future single recording Prog-A and Prog-A1 back to back on Ch. A, 2 future single recording Prog-B and Prog-B1 back to back on Ch. B, one future single recording Prog-C Ch.C overlaps to Prog-A, Prog-A1, Prog-B and Prog-B1 
Starting test corner_US31785_TC1616_two_tuners_event_book
###STEP1: Ingest 2 Event of n minutes with a posttime of n minute on channel 1, ingest 2 Event of n minutes with the post time of n minute on channel 2,ingest 1 Event of 2n minutes with the post time of n minute on channel 3.#################################



{'services': { 508: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'twotun1eve57_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'twotun1eve57_2', 'rating': 1}],
         'lineupLength': 8,
         'message': ''},
  509: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'twotun2eve301_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'twotun2eve301_2', 'rating': 1}],
         'lineupLength': 8,
         'message': ''},
  510: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 8, 'programID': 'twotun3eve635_1', 'rating': 1}], 'lineupLength': 8, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.5552
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Fetching Number of tuners in the Household
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 4
### STEP2:Set the tuner quota to 2 ###################



Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 2
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525075135000~1525082335000?lang=eng&serviceList=508,509,510&count=255&region=101&catalogueId=1
### STEP3: Do pps booking for both the event on channel 1  , verify if it is successful. #########################



[u'programid://1431783491~programid://1499465911', u'programid://1431783490~programid://1499465912']

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
Event Booking Successfull for contentId programid://1431783491~programid://1499465911

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
Event Booking Successfull for contentId programid://1431783490~programid://1499465912
All events booked successfully
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1431783491~programid://1499465911', u'programid://1431783490~programid://1499465912'] is in BOOKED state
###STEP4: Do pps booking for both the event on channel 2  , verify if it is successful ##########



[u'programid://1384968443~programid://1778848913', u'programid://1384968442~programid://1778848914']

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
Event Booking Successfull for contentId programid://1384968443~programid://1778848913

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
Event Booking Successfull for contentId programid://1384968442~programid://1778848914
All events booked successfully
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1384968443~programid://1778848913', u'programid://1384968442~programid://1778848914'] is in BOOKED state
### STEP5: Do pps booking for all the event on channel 3  , verify it fail due to Tuner conflict ##### 



[u'programid://1968274190~programid://1626964900']

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
PPS Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
403
{'date': 'Mon, 30 Apr 2018 07:59:03 GMT', 'flow_context': '5AE6CCC7E4B0C8958DD67975', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6CCC7E4B0C8958DD67975"}
PPS Booking failed for the event contentId [u'programid://1968274190~programid://1626964900']
 PPS Booking failed due to Tuner Conflict
### STEP6: Delete all the Event booking from channel1 #####




Delete PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog/5ae6ccbfe9c28320e2419984
PPS Booking Deleted successfully

Delete PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog/5ae6ccc1fddcf120e1a08063
PPS Booking Deleted successfully
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1431783491~programid://1499465911', u'programid://1431783490~programid://1499465912'] is not in BOOKED state
### STEP7: Do pps booking for all the event on channel 3 again and verify it should be successful.############



[u'programid://1968274190~programid://1626964900']

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
PPS Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
403
{'date': 'Mon, 30 Apr 2018 08:00:35 GMT', 'flow_context': '5AE6CD23E4B0C93770ED90E6', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6CD23E4B0C93770ED90E6"}
PPS Booking failed for the event contentId [u'programid://1968274190~programid://1626964900']

#################### DEBUG STARTED ####################

Script Fetching the Household Booked/Recorded Catalog at 2018-04-30 08:00:37.544964
get all Catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog
 
Household Booked/Recorded Catalog Response:
[
    {
        "pvr": "nPVR", 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set3_scripts_2", 
        "channelId": "509", 
        "isSynchronized": true, 
        "duration": "00:04:00", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T08:00:00Z", 
        "content": {
            "instanceId": "programid://1778848913", 
            "broadcastDateTime": 1525075200000, 
            "seasonPremiere": false, 
            "locator": "{NjJkYTI1N2FhYWRjMmMyY2ZlYjQ=,java.lang.String,NORMAL}[+]{hashKey,NORMAL}", 
            "erotic": false, 
            "audioType": "stereo", 
            "duration": 240000, 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": false, 
            "macrovision": false, 
            "id": "programid://1384968443", 
            "mixSource": false, 
            "externalKey": "twotun2eve301_2_509_tk04300804", 
            "audioDescription": false, 
            "restartAvailable": false, 
            "title": "twotun2eve301_2", 
            "allOfferIdList": [
                2
            ], 
            "mixContentId": false, 
            "contentNdsDrmAttributes": {
                "isBto": false, 
                "lastOfferEndDateTime": 1765963847000, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "rentalDuration": 2147483647, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isExtendedRental": false, 
                "isIppv": false, 
                "isPar": false, 
                "isOppv": false
            }, 
            "source": "ltv", 
            "live": false, 
            "subtitlesHardOfHearing": false, 
            "type": "instance", 
            "channel": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
            "videoFormat": "sd", 
            "wideScreen": false, 
            "isPurchasable": true, 
            "hdcp": false, 
            "serviceId": "509", 
            "adult": false, 
            "sortTitle": "twotun2eve301_2", 
            "endAvailability": 1525075440000, 
            "hasChapters": false, 
            "cdvrAvailable": true, 
            "seasonFinale": false, 
            "shortSynopsis": "twotun2eve301_2 - synopsis", 
            "synopsis": "twotun2eve301_2 - synopsis", 
            "broadcaster": "VGE", 
            "serviceEquivalenceKey": "509", 
            "ict": false
        }, 
        "title": "twotun2eve301_2", 
        "recurrence": "NONE", 
        "state": "RECORDING", 
        "startGuardTime": "00:00:00", 
        "recordingId": "37806", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{509,java.lang.Integer,NORMAL}-|-{ZDRmNTUzMTE4Y2VhZjg4OWZhNGI=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "509", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 509, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 509", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 509", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "509", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "509", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_11455~PPS_INSTANCE_37806", 
        "startTime": "2018-04-30T07:59:59Z", 
        "bookingDuration": "00:04:00", 
        "notificationHandles": [
            "5ae6ccc329368720c773d0e5"
        ], 
        "created": "2018-04-30T07:58:59Z", 
        "lastModified": "2018-04-30T08:00:35Z", 
        "contentPlayUri": "?recId=da2c9b67-a60e-4af7-b44f-21d9b5916259", 
        "uri": "/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog/5ae6ccc329368720c773d0e5", 
        "scheduleInstance": "programid://1384968443~programid://1778848913", 
        "keep": false, 
        "contentId": "PPS_CONTENT_11455~PPS_INSTANCE_37806"
    }, 
    {
        "pvr": "nPVR", 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set3_scripts_2", 
        "channelId": "509", 
        "isSynchronized": true, 
        "duration": "00:04:00", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T07:56:00Z", 
        "content": {
            "shortSynopsis": "twotun2eve301_1 - synopsis", 
            "title": "twotun2eve301_1", 
            "instanceId": "PPS_INSTANCE_37804", 
            "recordingId": "37804", 
            "broadcastDateTime": 1525074960000, 
            "synopsis": "twotun2eve301_1 - synopsis", 
            "endAvailability": 1525075200000, 
            "source": "pvr", 
            "erotic": false, 
            "serviceId": "509", 
            "adult": false, 
            "sortTitle": "twotun2eve301_1", 
            "duration": 240000, 
            "serviceEquivalenceKey": "509", 
            "type": "instance", 
            "id": "PPS_CONTENT_11453"
        }, 
        "title": "twotun2eve301_1", 
        "recurrence": "NONE", 
        "state": "RECORDING", 
        "startGuardTime": "00:00:00", 
        "recordingId": "37804", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{509,java.lang.Integer,NORMAL}-|-{ZDRmNTUzMTE4Y2VhZjg4OWZhNGI=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "509", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 509, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 509", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 509", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "509", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "509", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_11453~PPS_INSTANCE_37804", 
        "startTime": "2018-04-30T07:58:35Z", 
        "bookingDuration": "00:04:00", 
        "notificationHandles": [
            "5ae6ccc55a35bf20e5a98854"
        ], 
        "created": "2018-04-30T07:59:01Z", 
        "lastModified": "2018-04-30T07:59:10Z", 
        "contentPlayUri": "?recId=78df1e75-0f00-492e-974d-ab52132e1db4", 
        "uri": "/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog/5ae6ccc55a35bf20e5a98854", 
        "scheduleInstance": "programid://1384968442~programid://1778848914", 
        "keep": false, 
        "contentId": "PPS_CONTENT_11453~PPS_INSTANCE_37804"
    }
]
Script Fetching Household Failed Recording Catalog at 2018-04-30 08:00:37.577474
get all failed recording catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog?filter:state=FAILED
 
Failed Recording Catalog is empty

#################### DEBUG ENDED   ####################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

 Testcase Failed :All events are not booked Successfully
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX   ^ ^ ^ ^ ^   XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX   E R R O R   XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

2018/04/30 08:00:57 UTC ############################## ENDED :  corner_US31785_TC1616_two_tuners_event_book ##############################

2018/04/30 08:00:57 UTC ############################## STARTED :  corner_US31785_TC1617_TBRoverlapsMultipleSeries_RecordedState ##############################

 US31785: As a SP, I want to provide Conflict Resolution support to the household to resolve Recorder Tuner Quota issues at Booking

 TC1617: With 4 tuners, a conflict message displays when user schedules a manual recording overlaps to Series-A and Series-B and Series-C and Series-D.  To resolve conflict, this test checks use is able to cancel one series in order to schedule a manual recording.
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']

  Verify the Recording Mode and proceed further if it is not common copy environment 


Starting test corner_US31785_TC1617_TBRoverlapsMultipleSeries_RecordedState


### STEP1: Ingest 4 series of 2 episode of n minute each(difference between the two episode is n minute)without the post-time on 4 channels
                    Ingest a manual-recording event Event1 of  2n minute with the post-time of n minute on channel 5 ###

{'services': { 508: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'TC161757_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'TC161757'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'TC161757_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'TC161757'}],
         'lineupLength': 8,
         'message': ''}},
'shows': set(['TC161757']),
'seasons': { 'TC161757': { 1: set([1, 2])}},
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "4",
'is_1050': "True"
'is_24': "False"
}
{'services': { 509: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'EP17318301_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'EP17318301'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'EP17318301_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'EP17318301'}],
         'lineupLength': 8,
         'message': ''}},
'shows': set(['EP17318301']),
'seasons': { 'EP17318301': { 1: set([1, 2])}},
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "4",
'is_1050': "True"
'is_24': "False"
}
{'services': { 510: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'TC81371635_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'TC81371635'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'TC81371635_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'TC81371635'}],
         'lineupLength': 8,
         'message': ''}},
'shows': set(['TC81371635']),
'seasons': { 'TC81371635': { 1: set([1, 2])}},
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "4",
'is_1050': "True"
'is_24': "False"
}
{'services': { 511: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'EP81371862_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'EP81371862'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'EP81371862_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'EP81371862'}],
         'lineupLength': 8,
         'message': ''}},
'shows': set(['EP81371862']),
'seasons': { 'EP81371862': { 1: set([1, 2])}},
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "4",
'is_1050': "True"
'is_24': "False"
}
{'services': { 512: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 8, 'programID': 'generic_1', 'rating': 1}], 'lineupLength': 8, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 122.776
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

 ### STEP2: Change the tuner quota to 4 ### 


Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 4
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 4
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525075401000~1525082601000?lang=eng&serviceList=508,509,510,511,512&count=255&region=101&catalogueId=1
 ### STEP3: Do the Booking of Series1, 2, 3 and Series 4,verify if it is successful ### 



                                         {
                                          "scheduleInstanceId" : "programid://2136906578~programid://2147482813",
                                          "checkConflicts" : true,
                                          "pvr":"nPVR",
                                          "recurrence":"SERIES"
                                         }
                                      

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings

                                         {
                                          "scheduleInstanceId" : "programid://1214464957~programid://697847209",
                                          "checkConflicts" : true,
                                          "pvr":"nPVR",
                                          "recurrence":"SERIES"
                                         }
                                      

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings

                                         {
                                          "scheduleInstanceId" : "programid://2147480270~programid://1761612120",
                                          "checkConflicts" : true,
                                          "pvr":"nPVR",
                                          "recurrence":"SERIES"
                                         }
                                      

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings

                                         {
                                          "scheduleInstanceId" : "programid://1457353921~programid://334411474",
                                          "checkConflicts" : true,
                                          "pvr":"nPVR",
                                          "recurrence":"SERIES"
                                         }
                                      

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings


### STEP4: Do the Manual Booking for Event1 of 2n minutes with post-time of n minutes and Verify ### 
 

starttime1525075620
{
        			"startTime": "2018-04-30T08:07:00Z",
    				"endTime": "2018-04-30T08:15:00Z",
        			"channel": "512",
    				"checkConflicts" : true,
    				"pvr":"nPVR"
    	          }
    		  

Manual booking is happening for 
 HouseholdId AUTO_3006_cornercase_set3_scripts_2  
Pps booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
Pps Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
403
{'date': 'Mon, 30 Apr 2018 08:03:21 GMT', 'flow_context': '5AE6CDC9E4B0E127EFAE430C', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6CDC9E4B0E127EFAE430C"}
PPS Booking failed due to Tuner Conflict

 wait till the time, shortProgramlength minutes before program starts  

Recording will start in 399.0seconds

 series 1- Episode 1 should have been in recording state, stop the recording, and cancel the booking 

get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/recordings
 
All Program with the contentid [u'programid://2136906578~programid://2147482813'] is in RECORDING state
### STEP5: Stop the Recording### 
 

Stop the recording via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog/5ae6cdc9e9c28320e2419985/management
Stop Recording is successful


### STEP5: Cancel the booking ### 


Delete series booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog/5ae6cdc9e9c28320e2419985/recurrence/episodes
 

Series Booking and Recording Deleted successfully
Delete PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog/5ae6cdc9e9c28320e2419985/recurrence/bookings
 

Series Booking Deleted successfully
Cancelled the series booking 


Manual booking is Doing for 
 HouseholdId AUTO_3006_cornercase_set3_scripts_2  

PPS time based booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings 
Manual booking is successful.
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
Testcase Passed: All contents are present in the library after manual re-booking
#### STEP7: Revert back the original conditions, verify the results ####

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################


2018/04/30 08:11:53 UTC ############################## ENDED :  corner_US31785_TC1617_TBRoverlapsMultipleSeries_RecordedState ##############################

2018/04/30 08:11:53 UTC ############################## STARTED :  corner_US31785_TC1618_6tuners_conflict ##############################
US31785: As a SP, I want to provide Conflict Resolution support to the household to resolve Recorder Tuner Quota issues at Booking
TC1618: User schedules 6 current single recording programs on different channels: Prog-1, Prog-2, Prog-3, Prog-4, Prog-5, Prog-6. A conflict message displays when user schedules a new current single recording Prog-7 overlaps to all other programs. To resolve conflict, user is able to cancel Prog-1 in order to schedule Prog-7
Starting test corner_US31785_TC1618_6tuners_conflict


### STEP1. Ingest  Event1 of 2n minutes without a posttime on channel 1 
 Ingest  Event2 of n minutes without a posttime on channel 2 
 Ingest  Event3 of 3n minutes without a posttime on channel 3
 Ingest  Event4 of n minutes without a posttime on channel 4
Ingest  Event5 of n minutes without a posttime on channel 5
Ingest  Event6 of 2n minutes without a posttime on channel 6
Ingest  Event7 of n minutes without a posttime on channel 7 ########################################

{'services': { 508: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 12, 'programID': 'un1con23_1', 'rating': 1}], 'lineupLength': 12, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:12:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 509: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'un2con120_1', 'rating': 1}], 'lineupLength': 6, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 510: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 18, 'programID': 'n3con254_1', 'rating': 1}], 'lineupLength': 18, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:18:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 511: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'un4con345_1', 'rating': 1}], 'lineupLength': 6, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 512: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'un5con541_1', 'rating': 1}], 'lineupLength': 6, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 513: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 12, 'programID': 'un6con629_1', 'rating': 1}], 'lineupLength': 12, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:12:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 514: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'n7con732_1', 'rating': 1}], 'lineupLength': 6, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 124.5804
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################



### STEP2. Set the Tuner Quota to 6 ##############################

Fetching Number of tuners in the Household
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 4
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 6


### STEP3. Do pps booking for event1,event2,event3,event4,event5,event6 , verify if it is successful #################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525072458000~1525079658000?lang=eng&serviceList=508,509,510,511,512,513,514&count=255&region=101&catalogueId=1
ContentID Dictionary from the Grid Response
{u'programid://2039418360~programid://566874103': [1525075980000, 1525076700000, 720000, u'un1con23_1']}
[u'programid://2039418360~programid://566874103']
ContentID Dictionary from the Grid Response
{u'programid://1847885389~programid://2147482815': [1525075980000, 1525076340000, 360000, u'un2con120_1']}
[u'programid://2039418360~programid://566874103', u'programid://1847885389~programid://2147482815']
ContentID Dictionary from the Grid Response
{u'programid://1173404316~programid://392414765': [1525075980000, 1525077060000, 1080000, u'n3con254_1']}
[u'programid://2039418360~programid://566874103', u'programid://1847885389~programid://2147482815', u'programid://1173404316~programid://392414765']
ContentID Dictionary from the Grid Response
{u'programid://1948445363~programid://2147482816': [1525075980000, 1525076340000, 360000, u'un4con345_1']}
[u'programid://2039418360~programid://566874103', u'programid://1847885389~programid://2147482815', u'programid://1173404316~programid://392414765', u'programid://1948445363~programid://2147482816']
ContentID Dictionary from the Grid Response
{u'programid://1702777646~programid://410898561': [1525075980000, 1525076340000, 360000, u'un5con541_1']}
[u'programid://2039418360~programid://566874103', u'programid://1847885389~programid://2147482815', u'programid://1173404316~programid://392414765', u'programid://1948445363~programid://2147482816', u'programid://1702777646~programid://410898561']
ContentID Dictionary from the Grid Response
{u'programid://1276179839~programid://1991351439': [1525075980000, 1525076700000, 720000, u'un6con629_1']}
[u'programid://2039418360~programid://566874103', u'programid://1847885389~programid://2147482815', u'programid://1173404316~programid://392414765', u'programid://1948445363~programid://2147482816', u'programid://1702777646~programid://410898561', u'programid://1276179839~programid://1991351439']
ContentID Dictionary from the Grid Response
{u'programid://2147476100~programid://290140244': [1525075980000, 1525076340000, 360000, u'n7con732_1']}
[u'programid://2039418360~programid://566874103', u'programid://1847885389~programid://2147482815', u'programid://1173404316~programid://392414765', u'programid://1948445363~programid://2147482816', u'programid://1702777646~programid://410898561', u'programid://1276179839~programid://1991351439', u'programid://2147476100~programid://290140244']

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://2039418360~programid://566874103'] is in BOOKED state
PPS booking is successful for the event contentId programid://2039418360~programid://566874103

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1847885389~programid://2147482815'] is in BOOKED state
PPS booking is successful for the event contentId programid://1847885389~programid://2147482815

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1173404316~programid://392414765'] is in BOOKED state
PPS booking is successful for the event contentId programid://1173404316~programid://392414765

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1948445363~programid://2147482816'] is in BOOKED state
PPS booking is successful for the event contentId programid://1948445363~programid://2147482816

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1702777646~programid://410898561'] is in BOOKED state
PPS booking is successful for the event contentId programid://1702777646~programid://410898561

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1276179839~programid://1991351439'] is in BOOKED state
PPS booking is successful for the event contentId programid://1276179839~programid://1991351439
First six bookings done successfully


### STEP4. Do pps booking of the event7 , verify it fail due to Tuner conflict #######################


PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
PPS Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
403
{'date': 'Mon, 30 Apr 2018 08:15:19 GMT', 'flow_context': '5AE6D097E4B0D0D969BAE635', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6D097E4B0D0D969BAE635"}
PPS Booking failed due to Tuner Conflict


### STEP6. Verify the recording state of  event 1  and stop/delete the  event1 recording ###############################

get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/recordings
 
Stop the recording via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog/5ae6d05bb1f9e9206752a810/management
Stop Recording is successful
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/recordings
 
All Programs with the contentids [u'programid://2039418360~programid://566874103'] is in RECORDED state
Event is in recorded state in recorded catalog after stopping the recording

Delete PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog/5ae6d05bb1f9e9206752a810
PPS Booking Deleted successfully
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://2039418360~programid://566874103'] is not in BOOKED state
Booking was deleted succesfully


### STEP7. Do pps booking event1 again and verify it should be successful #################################


PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
PPS Booking is successful for the event contentId programid://2147476100~programid://290140244


### STEP8. Verify the Booking Catalog and it should have only all events of except event1 are present ###################

get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://2039418360~programid://566874103'] is not in BOOKED state
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://2147476100~programid://290140244'] is in BOOKED state
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1847885389~programid://2147482815', u'programid://1173404316~programid://392414765', u'programid://1948445363~programid://2147482816', u'programid://1702777646~programid://410898561', u'programid://1276179839~programid://1991351439'] is in BOOKED state


### STEP9. Revert back the original conditions, than update the results ########################### 


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase passed:PPS Booking are present as required

2018/04/30 08:18:10 UTC ############################## ENDED :  corner_US31785_TC1618_6tuners_conflict ##############################

2018/04/30 08:18:10 UTC ############################## STARTED :  corner_US31785_TC1619_6tuner_manual_conflict ##############################

US31785: As a SP, I want to provide Conflict Resolution support to the household to resolve Recorder Tuner Quota issues at Booking

TC1619: With 6 tuners, user schedules 6 future manual recording on different channels: Prog-1, Prog-2, Prog-3, Prog-4, Prog-5, Prog-6. A conflict message displays when user schedules a new future manual recording Prog-7 overlaps to all other programs. To resolve conflict, user is able to cancel Prog-3 in order to schedule Prog-7
Starting test corner_US31785_TC1619_6tuner_manual_conflict
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']


### STEP1. Ingest  Event1 of n minutes with a posttime of 2n minute on channel 1 


###        Ingest  Event2 of 2n minutes with a posttime of 2n minute on channel 2 


###        Ingest  Event3 of  n minutes with a posttime of 2n minuteon channel 3 


###        Ingest  Event4 of  2n minutes with a posttime of n minute on channel 4 


###        Ingest  Event5 of n minutes with a posttime of 2n minute on channel 5 


###        Ingest  Event6 of 2n minutes with a posttime of n minuteon channel 6 


###        Ingest  Event7 of n minutes with a posttime of 2n minuteon channel 7 
{'services': { 508: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'un9con23_1', 'rating': 1}], 'lineupLength': 4, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:04:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 509: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 8, 'programID': 'unc8on120_1', 'rating': 1}], 'lineupLength': 8, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 510: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'nc7on254_1', 'rating': 1}], 'lineupLength': 4, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:04:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 511: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 8, 'programID': 'unco6n345_1', 'rating': 1}], 'lineupLength': 8, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 512: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'unc5on541_1', 'rating': 1}], 'lineupLength': 4, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:04:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 513: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 8, 'programID': 'un4con629_1', 'rating': 1}], 'lineupLength': 8, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 514: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'nco2n732_1', 'rating': 1}], 'lineupLength': 4, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:04:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 122.776
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################



### STEP2. Set the Tuner Quota to 6 ##############################

Fetching Number of tuners in the Household
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 4
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 6
tuner quota is successfully updated 


### STEP3. Do manual booking for event1,event2,event3,event4,event5,event6 , verify if it is successful ##########################

Pps booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
Manual booking was successful
Pps booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
Manual booking was successful
Pps booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
Manual booking was successful
Pps booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
Manual booking was successful
Pps booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
Manual booking was successful
Pps booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
Manual booking was successful
pps booking successful for all the events


### STEP4. Do manual booking of the event7  , verify it fail due to Tuner conflict ##############################

Pps booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
Pps Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
403
{'date': 'Mon, 30 Apr 2018 08:20:34 GMT', 'flow_context': '5AE6D1D2E4B0D524DC1CB0C5', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6D1D2E4B0D524DC1CB0C5"}
PPS Booking Failed due to tuner conflict detected which is expected
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
start wait time from func 506.0
start wait time from func 1.52355186357e+12
start wait time from func 1.52507541492e+15
start wait time from func 1.52507693847e+18
Event is present in the Booked catalog


### STEP6. Delete the event1 booking ############################


Delete PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog/5ae6d1d296094c205988ec28
PPS Booking Deleted successfully
Booking was deleted successfully before recording start


### STEP7. Do pps booking event1 again and verify it should be successful ##################################

Pps booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
Manual booking was successful


### STEP8. Verify the Booking Catalog and it should have only all events of except event1 are present ######################

get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
start wait time from func 506.0
start wait time from func 1.52355186357e+12
start wait time from func 1.52507541492e+15
start wait time from func 1.52507693847e+18
Event is present in the Booked catalog
booking is present in the booking catalog
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
start wait time from func 506.0
start wait time from func 1.52355186357e+12
start wait time from func 1.52507541492e+15
start wait time from func 1.52507693847e+18
Event is present in the Booked catalog
booking is present in the booking catalog
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
start wait time from func 506.0
start wait time from func 1.52355186357e+12
start wait time from func 1.52507541492e+15
start wait time from func 1.52507693847e+18
Event is present in the Booked catalog
booking is present in the booking catalog
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
start wait time from func 506.0
start wait time from func 1.52355186357e+12
start wait time from func 1.52507541492e+15
start wait time from func 1.52507693847e+18
Event is present in the Booked catalog
booking is present in the booking catalog
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
start wait time from func 506.0
start wait time from func 1.52355186357e+12
start wait time from func 1.52507541492e+15
start wait time from func 1.52507693847e+18
Event is present in the Booked catalog
booking is present in the booking catalog
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
start wait time from func 506.0
start wait time from func 1.52355186357e+12
start wait time from func 1.52507541492e+15
start wait time from func 1.52507693847e+18
Event is present in the Booked catalog
booking is present in the booking catalog


### STEP9. Revert back the original conditions, than update the results ###########################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

testcase Passed : all booking are present

2018/04/30 08:20:54 UTC ############################## ENDED :  corner_US31785_TC1619_6tuner_manual_conflict ##############################

2018/04/30 08:20:54 UTC ############################## STARTED :  corner_US31785_TC863_Provide_Bookings_List ##############################

US31785:As a SP, I want to provide Conflict Resolution support to the household to resolve Recorder Tuner Quota issues at Booking

TC863: Provide Bookings list
Starting test corner_US31785_TC863_Provide_Bookings_List
Final list :[('cmdc', 'pps.cdvr.dcpt01.ciscocdvr.net', 'upm.cdvr.dcpt01.ciscocdvr.net')]

#Step1A: Ingest Event1 of 5n minute with n min posttime on Channel1 
STEP1B: Ingest Event2 of 4n minutes with 2n min posttime on Channel2 
STEP1C: Ingest Event3 of 3n minute with 3n min posttime on Channel3  
STEP1D: Ingest Event4 of 2n minute with 4n min posttime on Channel4 
STEP1E: Ingest Event5 of n minute with 5n min posttime on Channel5 

{'services': { 508: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 15, 'programID': 'TC863114_1_1', 'rating': 1}], 'lineupLength': 15, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:15:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 509: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 12, 'programID': 'TC863114_2_1', 'rating': 1}], 'lineupLength': 12, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:12:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 510: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 9, 'programID': 'TC863114_3_1', 'rating': 1}], 'lineupLength': 9, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:09:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 511: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'TC863114_4_1', 'rating': 1}], 'lineupLength': 6, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 512: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'TC863114_5_1', 'rating': 1}], 'lineupLength': 3, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:03:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 123.123
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################


###Step2: Get the Tuner Quota and modify to 4 if it has different value, Verify the same is been updated ###############
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 4
Number of tuners is 4 to proceed further

###Step3: Do the pps booking of all the 5 events, Verify the Event5 booking failed due to 'Tuner Conflict'#########
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525076598000~1525083798000?lang=eng&serviceList=508,509,510,511,512&count=255&region=101&catalogueId=1

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
PPS Booking completed successfully for the contentid programid://2045431172~programid://1567352380

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
PPS Booking completed successfully for the contentid programid://1190902498~programid://624928546

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
PPS Booking completed successfully for the contentid programid://1696713317~programid://623392337

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
PPS Booking completed successfully for the contentid programid://2098767962~programid://2058198501

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
PPS Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
403
{'date': 'Mon, 30 Apr 2018 08:23:18 GMT', 'flow_context': '5AE6D276E4B0D62D412377C0', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6D276E4B0D62D412377C0"}
Testcase Failed: PPS Booking Failed for the event contentId programid://1703809947~programid://541345903
ContentId programid://1703809947~programid://541345903 Booking Failed due to Tuner Conflict
All Events booked successfully except Event5 which fails due to Tuner Conflict

###Step4: Get the booking list with in the particular time frame and verify those 5 events are present in the booking list and no bookings present with future broadcasttime #######
Booked library for the timeframe fetched  via URL :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings?filter:startTime=(2018-04-30T08:20:54Z,2018-04-30T09:20:54Z)
Starttime and Endtime in the timeframe: 1525076454.79,1525080054.79
Starttime list from the booking list within timeframe [1525076640, 1525076820, 1525077000, 1525077180]

#################### DEBUG STARTED ####################

Script Fetching the Household Booked/Recorded Catalog at 2018-04-30 08:23:18.776822
get all Catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog
 
Household Booked/Recorded Catalog Response:
[
    {
        "pvr": "nPVR", 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set3_scripts_2", 
        "channelId": "508", 
        "isSynchronized": true, 
        "duration": "00:15:00", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T08:24:00Z", 
        "content": {
            "instanceId": "programid://1567352380", 
            "broadcastDateTime": 1525076640000, 
            "seasonPremiere": false, 
            "locator": "{NzYxNTg4NmRlMWJhMmU3YTY5MmU=,java.lang.String,NORMAL}[+]{hashKey,NORMAL}", 
            "erotic": false, 
            "audioType": "stereo", 
            "duration": 900000, 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": false, 
            "macrovision": false, 
            "id": "programid://2045431172", 
            "mixSource": false, 
            "externalKey": "TC863114_1_1_508_tk04300839", 
            "audioDescription": false, 
            "restartAvailable": false, 
            "title": "TC863114_1_1", 
            "allOfferIdList": [
                2
            ], 
            "mixContentId": false, 
            "contentNdsDrmAttributes": {
                "isBto": false, 
                "lastOfferEndDateTime": 1765963847000, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "rentalDuration": 2147483647, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isExtendedRental": false, 
                "isIppv": false, 
                "isPar": false, 
                "isOppv": false
            }, 
            "source": "ltv", 
            "live": false, 
            "subtitlesHardOfHearing": false, 
            "type": "instance", 
            "channel": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
            "videoFormat": "sd", 
            "wideScreen": false, 
            "isPurchasable": true, 
            "hdcp": false, 
            "serviceId": "508", 
            "adult": false, 
            "sortTitle": "TC863114_1_1", 
            "endAvailability": 1525077540000, 
            "hasChapters": false, 
            "cdvrAvailable": true, 
            "seasonFinale": false, 
            "shortSynopsis": "TC863114_1_1 - synopsis", 
            "synopsis": "TC863114_1_1 - synopsis", 
            "broadcaster": "VGE", 
            "serviceEquivalenceKey": "508", 
            "ict": false
        }, 
        "title": "TC863114_1_1", 
        "recurrence": "NONE", 
        "state": "BOOKED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "37852", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{508,java.lang.Integer,NORMAL}-|-{MjhlMWFhODYyYzllMjg4N2VmNTM=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "508", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 508, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 508", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 508", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "508", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "508", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_11553~PPS_INSTANCE_37852", 
        "startTime": "2018-04-30T08:24:00Z", 
        "bookingDuration": "00:15:00", 
        "notificationHandles": [
            "5ae6d276fddcf120e1a08065"
        ], 
        "created": "2018-04-30T08:23:18Z", 
        "lastModified": "2018-04-30T08:23:18Z", 
        "contentPlayUri": "?recId=e886d89a-3c4b-438d-8fcb-d167f50baabf", 
        "uri": "/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog/5ae6d276fddcf120e1a08065", 
        "scheduleInstance": "programid://2045431172~programid://1567352380", 
        "keep": false, 
        "contentId": "programid://2045431172~programid://1567352380"
    }, 
    {
        "pvr": "nPVR", 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set3_scripts_2", 
        "channelId": "509", 
        "isSynchronized": true, 
        "duration": "00:12:00", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T08:27:00Z", 
        "content": {
            "instanceId": "programid://624928546", 
            "broadcastDateTime": 1525076820000, 
            "seasonPremiere": false, 
            "locator": "{YTBjNzc0OTQ1ZWI3OTk5NTRkOTI=,java.lang.String,NORMAL}[+]{hashKey,NORMAL}", 
            "erotic": false, 
            "audioType": "stereo", 
            "duration": 720000, 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": false, 
            "macrovision": false, 
            "id": "programid://1190902498", 
            "mixSource": false, 
            "externalKey": "TC863114_2_1_509_tk04300839", 
            "audioDescription": false, 
            "restartAvailable": false, 
            "title": "TC863114_2_1", 
            "allOfferIdList": [
                2
            ], 
            "mixContentId": false, 
            "contentNdsDrmAttributes": {
                "isBto": false, 
                "lastOfferEndDateTime": 1765963847000, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "rentalDuration": 2147483647, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isExtendedRental": false, 
                "isIppv": false, 
                "isPar": false, 
                "isOppv": false
            }, 
            "source": "ltv", 
            "live": false, 
            "subtitlesHardOfHearing": false, 
            "type": "instance", 
            "channel": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
            "videoFormat": "sd", 
            "wideScreen": false, 
            "isPurchasable": true, 
            "hdcp": false, 
            "serviceId": "509", 
            "adult": false, 
            "sortTitle": "TC863114_2_1", 
            "endAvailability": 1525077540000, 
            "hasChapters": false, 
            "cdvrAvailable": true, 
            "seasonFinale": false, 
            "shortSynopsis": "TC863114_2_1 - synopsis", 
            "synopsis": "TC863114_2_1 - synopsis", 
            "broadcaster": "VGE", 
            "serviceEquivalenceKey": "509", 
            "ict": false
        }, 
        "title": "TC863114_2_1", 
        "recurrence": "NONE", 
        "state": "BOOKED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "37853", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{509,java.lang.Integer,NORMAL}-|-{ZDRmNTUzMTE4Y2VhZjg4OWZhNGI=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "509", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 509, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 509", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 509", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "509", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "509", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_11554~PPS_INSTANCE_37853", 
        "startTime": "2018-04-30T08:27:00Z", 
        "bookingDuration": "00:12:00", 
        "notificationHandles": [
            "5ae6d276a3078b20f29fe83e"
        ], 
        "created": "2018-04-30T08:23:18Z", 
        "lastModified": "2018-04-30T08:23:18Z", 
        "contentPlayUri": "?recId=1f74a5bc-1c83-4928-997f-2452c3189b08", 
        "uri": "/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog/5ae6d276a3078b20f29fe83e", 
        "scheduleInstance": "programid://1190902498~programid://624928546", 
        "keep": false, 
        "contentId": "programid://1190902498~programid://624928546"
    }, 
    {
        "pvr": "nPVR", 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set3_scripts_2", 
        "channelId": "510", 
        "isSynchronized": true, 
        "duration": "00:09:00", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T08:30:00Z", 
        "content": {
            "instanceId": "programid://623392337", 
            "broadcastDateTime": 1525077000000, 
            "seasonPremiere": false, 
            "locator": "{ZTcxMmIwY2FmYjhiNDVlNTYyZTY=,java.lang.String,NORMAL}[+]{hashKey,NORMAL}", 
            "erotic": false, 
            "audioType": "stereo", 
            "duration": 540000, 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": false, 
            "macrovision": false, 
            "id": "programid://1696713317", 
            "mixSource": false, 
            "externalKey": "TC863114_3_1_510_tk04300839", 
            "audioDescription": false, 
            "restartAvailable": false, 
            "title": "TC863114_3_1", 
            "allOfferIdList": [
                2
            ], 
            "mixContentId": false, 
            "contentNdsDrmAttributes": {
                "isBto": false, 
                "lastOfferEndDateTime": 1765963847000, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "rentalDuration": 2147483647, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isExtendedRental": false, 
                "isIppv": false, 
                "isPar": false, 
                "isOppv": false
            }, 
            "source": "ltv", 
            "live": false, 
            "subtitlesHardOfHearing": false, 
            "type": "instance", 
            "channel": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
            "videoFormat": "sd", 
            "wideScreen": false, 
            "isPurchasable": true, 
            "hdcp": false, 
            "serviceId": "510", 
            "adult": false, 
            "sortTitle": "TC863114_3_1", 
            "endAvailability": 1525077540000, 
            "hasChapters": false, 
            "cdvrAvailable": true, 
            "seasonFinale": false, 
            "shortSynopsis": "TC863114_3_1 - synopsis", 
            "synopsis": "TC863114_3_1 - synopsis", 
            "broadcaster": "VGE", 
            "serviceEquivalenceKey": "510", 
            "ict": false
        }, 
        "title": "TC863114_3_1", 
        "recurrence": "NONE", 
        "state": "BOOKED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "37854", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{510,java.lang.Integer,NORMAL}-|-{NDM2NmNlZjRiYzhjNWIyODhmNDM=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "510", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 510, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 510", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 510", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "510", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "510", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_11555~PPS_INSTANCE_37854", 
        "startTime": "2018-04-30T08:30:00Z", 
        "bookingDuration": "00:09:00", 
        "notificationHandles": [
            "5ae6d2762660f71ffec4eafe"
        ], 
        "created": "2018-04-30T08:23:18Z", 
        "lastModified": "2018-04-30T08:23:18Z", 
        "contentPlayUri": "?recId=c7d7721f-c75e-470c-9a56-6a3929ff166c", 
        "uri": "/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog/5ae6d2762660f71ffec4eafe", 
        "scheduleInstance": "programid://1696713317~programid://623392337", 
        "keep": false, 
        "contentId": "programid://1696713317~programid://623392337"
    }, 
    {
        "pvr": "nPVR", 
        "lock": false, 
        "household": "AUTO_3006_cornercase_set3_scripts_2", 
        "channelId": "511", 
        "isSynchronized": true, 
        "duration": "00:06:00", 
        "bookingType": "EVENT", 
        "bookingStartTime": "2018-04-30T08:33:00Z", 
        "content": {
            "instanceId": "programid://2058198501", 
            "broadcastDateTime": 1525077180000, 
            "seasonPremiere": false, 
            "locator": "{NjNiMmEzZGMyZTQwNWUwOWRkYjc=,java.lang.String,NORMAL}[+]{hashKey,NORMAL}", 
            "erotic": false, 
            "audioType": "stereo", 
            "duration": 360000, 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": false, 
            "macrovision": false, 
            "id": "programid://2098767962", 
            "mixSource": false, 
            "externalKey": "TC863114_4_1_511_tk04300839", 
            "audioDescription": false, 
            "restartAvailable": false, 
            "title": "TC863114_4_1", 
            "allOfferIdList": [
                2
            ], 
            "mixContentId": false, 
            "contentNdsDrmAttributes": {
                "isBto": false, 
                "lastOfferEndDateTime": 1765963847000, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "rentalDuration": 2147483647, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isExtendedRental": false, 
                "isIppv": false, 
                "isPar": false, 
                "isOppv": false
            }, 
            "source": "ltv", 
            "live": false, 
            "subtitlesHardOfHearing": false, 
            "type": "instance", 
            "channel": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
            "videoFormat": "sd", 
            "wideScreen": false, 
            "isPurchasable": true, 
            "hdcp": false, 
            "serviceId": "511", 
            "adult": false, 
            "sortTitle": "TC863114_4_1", 
            "endAvailability": 1525077540000, 
            "hasChapters": false, 
            "cdvrAvailable": true, 
            "seasonFinale": false, 
            "shortSynopsis": "TC863114_4_1 - synopsis", 
            "synopsis": "TC863114_4_1 - synopsis", 
            "broadcaster": "VGE", 
            "serviceEquivalenceKey": "511", 
            "ict": false
        }, 
        "title": "TC863114_4_1", 
        "recurrence": "NONE", 
        "state": "BOOKED", 
        "startGuardTime": "00:00:00", 
        "recordingId": "37855", 
        "type": "LINEAR-RECORDING", 
        "channel": {
            "locator": "{511,java.lang.Integer,NORMAL}-|-{OGJlNGZiMzlhMTUwMGU4YWE5ODQ=,java.lang.String,NORMAL}[+]{logicalChannelNumber.101,NORMAL}-|-{hashKey,NORMAL}", 
            "offerIdList": [
                2
            ], 
            "catchupAvailable": true, 
            "id": "511", 
            "relatedRecommendationsAvailable": true, 
            "logicalChannelNumber": 511, 
            "genres": [
                {
                    "_links": {
                        "genres": {
                            "href": "/cmdc/genre/urn%3Annds%3Auhe%3Agenre%3A01%3A1%3A0?lang=eng"
                        }
                    }, 
                    "type": "Action/Adventure", 
                    "id": 1
                }
            ], 
            "drmProtected": false, 
            "restartAvailable": true, 
            "_links": {
                "parentalRatings": [
                    {
                        "href": "/cmdc/parentalRating/urn%3Annds%3Auhe%3AparentalGuidance%3A01%3A2?lang=eng"
                    }
                ]
            }, 
            "provider": "VGE", 
            "hidden": false, 
            "type": "1", 
            "description": "Service Description 511", 
            "recordControl": "noRecording", 
            "isPurchasable": true, 
            "scheduleAvailable": true, 
            "cdvrAvailable": true, 
            "operatorSpecificData": [
                {
                    "data": "false", 
                    "namespace": "urn:nnds:mercury:service:PPV"
                }
            ], 
            "adult": false, 
            "name": "Service 511", 
            "serviceNdsDrmAttributes": {
                "hasFecm": false, 
                "isDrmFree": false, 
                "price": 20, 
                "isIsu": false, 
                "isSubscription": true, 
                "currencySymbol": "$", 
                "isBundle": false, 
                "isIppv": false, 
                "isOppv": false
            }, 
            "parentalRating": {
                "rating": 2, 
                "scheme": "custom"
            }, 
            "serviceDeliveries": [
                {
                    "externalServiceId": "511", 
                    "bandwidth": 15, 
                    "type": "abr", 
                    "uri": "http://linear.cdvr.primetime.com/coid/coid.m3u8", 
                    "mode": "hlsabr"
                }
            ], 
            "serviceEquivalenceKey": "511", 
            "storeAvailable": false, 
            "runningStatus": true, 
            "protectionType": "VGS"
        }, 
        "endGuardTime": "00:00:00", 
        "recordingContentId": "PPS_CONTENT_11556~PPS_INSTANCE_37855", 
        "startTime": "2018-04-30T08:33:00Z", 
        "bookingDuration": "00:06:00", 
        "notificationHandles": [
            "5ae6d276a7f2b7218ae8e14b"
        ], 
        "created": "2018-04-30T08:23:18Z", 
        "lastModified": "2018-04-30T08:23:18Z", 
        "contentPlayUri": "?recId=74ada502-650a-4bc1-a020-13493c41a8ae", 
        "uri": "/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog/5ae6d276a7f2b7218ae8e14b", 
        "scheduleInstance": "programid://2098767962~programid://2058198501", 
        "keep": false, 
        "contentId": "programid://2098767962~programid://2058198501"
    }
]
Script Fetching Household Failed Recording Catalog at 2018-04-30 08:23:18.823217
get all failed recording catalog by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog?filter:state=FAILED
 
Failed Recording Catalog is empty

#################### DEBUG ENDED   ####################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: Booking List has been verified successfully within the given timeframe

2018/04/30 08:23:39 UTC ############################## ENDED :  corner_US31785_TC863_Provide_Bookings_List ##############################

2018/04/30 08:23:39 UTC ############################## STARTED :  corner_US31786_TC1240_one_tuner_conflict_nevent_booking ##############################
US31786:As a SP, I want an API to be able to change from my Billing System the recorder tuner quota for a household account
TC1240 : Single program conflicts with single program, upgrade from 1 tuner to n tuners 
Starting test corner_US31786_TC1240_one_tuner_conflict_nevent_booking
### STEP1: Ingest program A of 2n mins on Channel 1 with a post-time of 'n' minutes.Ingest program B of n mins on Channel 2 with a post-time of 'n' minutes.Ingest program C of 2n mins on Channel 3 with a post-time of '2n' minutes.Ingest program D of n mins on Channel 4 with a post-time of '2n' minutes.Ingest program E of n mins on Channel 5 with a post-time of '2n' minutes. #################################



{'services': { 508: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 8, 'programID': 'can1curtu57_1', 'rating': 1}], 'lineupLength': 8, 'message': ''},
  509: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'can2curtu301_1', 'rating': 1}], 'lineupLength': 4, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 510: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 8, 'programID': 'ca3curtu2635_1', 'rating': 1}], 'lineupLength': 8, 'message': ''},
  511: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'ca4curtu3862_1', 'rating': 1}], 'lineupLength': 4, 'message': ''},
  512: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'ca5curtu41229_1', 'rating': 1}], 'lineupLength': 4, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 121.1104
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Fetching Number of tuners in the Household
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 4
### STEP2:Set the tuner quota to 1 ###################



Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 1
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525076760000~1525083960000?lang=eng&serviceList=508,509,510,511,512&count=255&region=101&catalogueId=1
### STEP3: Do PPS Boking of program A & verify if it is successful #########################



ContentId Dictionary from the Grid Response
{u'programid://1534683452~programid://200630621': [1525076940000, 1525077420000, 480000, u'can1curtu57_1']}
ContentId list after Sorting
[(u'programid://1534683452~programid://200630621', [1525076940000, 1525077420000, 480000, u'can1curtu57_1'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
Event Booking is Successful for the event contentId programid://1534683452~programid://200630621 
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1534683452~programid://200630621'] is in BOOKED state
### STEP4: Do PPS Booking of program B & verify that fails due to Tuner conflict. ####################



ContentId Dictionary from the Grid Response
{u'programid://1526727425~programid://1034194290': [1525076940000, 1525077180000, 240000, u'can2curtu301_1']}
ContentId list after Sorting
[(u'programid://1526727425~programid://1034194290', [1525076940000, 1525077180000, 240000, u'can2curtu301_1'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
PPS Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
403
{'date': 'Mon, 30 Apr 2018 08:26:02 GMT', 'flow_context': '5AE6D31AE4B0CA76F1C6FA2E', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6D31AE4B0CA76F1C6FA2E"}
 PPS Booking failed due to Tuner Conflict
###STEP5: Modify the Tuner quota to 3 #######



Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 3
### STEP6: Do PPS Booking of program B & verify if it is successful #### 



ContentId Dictionary from the Grid Response
{u'programid://1526727425~programid://1034194290': [1525076940000, 1525077180000, 240000, u'can2curtu301_1']}
ContentId list after Sorting
[(u'programid://1526727425~programid://1034194290', [1525076940000, 1525077180000, 240000, u'can2curtu301_1'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
Event Booking is Successful for the event contentId programid://1526727425~programid://1034194290 
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1526727425~programid://1034194290'] is in BOOKED state
###STEP7: Do PPS Booking of program C & verify if it is successful  ########



ContentId Dictionary from the Grid Response
{u'programid://1793508141~programid://188274424': [1525077180000, 1525077660000, 480000, u'ca3curtu2635_1']}
ContentId list after Sorting
[(u'programid://1793508141~programid://188274424', [1525077180000, 1525077660000, 480000, u'ca3curtu2635_1'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
Event Booking is Successful for the event contentId programid://1793508141~programid://188274424 
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1793508141~programid://188274424'] is in BOOKED state
###STEP8: Do PPS Booking of program D & verify if it is successful ####



ContentId Dictionary from the Grid Response
{u'programid://2133841347~programid://2147482822': [1525077180000, 1525077420000, 240000, u'ca4curtu3862_1']}
ContentId list after Sorting
[(u'programid://2133841347~programid://2147482822', [1525077180000, 1525077420000, 240000, u'ca4curtu3862_1'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
Event Booking is Successful for the event contentId programid://2133841347~programid://2147482822 
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://2133841347~programid://2147482822'] is in BOOKED state
### STEP9: Do PPS Booking of program E & verify that fails due to Tuner conflict ####



ContentId Dictionary from the Grid Response
{u'programid://1604071565~programid://1206341703': [1525077180000, 1525077420000, 240000, u'ca5curtu41229_1']}
ContentId list after Sorting
[(u'programid://1604071565~programid://1206341703', [1525077180000, 1525077420000, 240000, u'ca5curtu41229_1'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
PPS Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
403
{'date': 'Mon, 30 Apr 2018 08:26:11 GMT', 'flow_context': '5AE6D323E4B08D9582AA8172', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6D323E4B08D9582AA8172"}
 PPS Booking failed due to Tuner Conflict
### STEP10: Revert back the original conditions, then update the results ###




#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

 Testcase Passed: Event booking is failed due to Tuner Conflict

2018/04/30 08:26:33 UTC ############################## ENDED :  corner_US31786_TC1240_one_tuner_conflict_nevent_booking ##############################

2018/04/30 08:26:33 UTC ############################## STARTED :  corner_US31786_TC1241_one_tuner_conflict_nmanual_booking ##############################
US31786:  As a SP, I want an API to be able to change from my Billing System the recorder tuner quota for a household account
TC1241 : Manual program conflicst with other manual program by end late, upgrade from 1 tuner to n tuners  
Starting test corner_US31786_TC1241_one_tuner_conflict_nmanual_booking
### STEP1: Ingest Manual program A of 2n mins on Channel 1 with a post-time of n mins.Ingest manual program B of n mins on Channel 2 without post-time.Ingest Manual program B1 of n mins on Channel 2 with a post-time of 2n mins.Ingest Manual program C of n mins on Channel 4 with a post-time of 2n mins. #################################



Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
{'services': { 509: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 8, 'programID': 'can6curtun57_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 8, 'programID': 'can6curtun57_2', 'rating': 1}],
         'lineupLength': 16,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:16:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 510: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'can7curtu1301_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'can7curtu1301_2', 'rating': 1}],
         'lineupLength': 8,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 510: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'can8curtu2635_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'can8curtu2635_2', 'rating': 1}],
         'lineupLength': 8,
         'message': ''},
  511: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'can9curtu3862_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'can9curtu3862_2', 'rating': 1}],
         'lineupLength': 8,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 122.2208
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Fetching Number of tuners in the Household
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 4
### STEP2:Set the tuner quota to 1 ###################



Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 1
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525076936000~1525084136000?lang=eng&serviceList=509,510,511&count=255&region=101&catalogueId=1
### STEP3: Do PPS Booking for program A & B verify program A is successful while program B fails due to tuner conflict. #########################



Pps booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
PPS Booking is successful for the Channel 509
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
start wait time from func 217.440273926
Event is present in the Booked catalog
Pps booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
Pps Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
403
{'date': 'Mon, 30 Apr 2018 08:28:56 GMT', 'flow_context': '5AE6D3C8E4B0520F9FFB57EB', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6D3C8E4B0520F9FFB57EB"}
 PPS Booking failed due to Tuner Conflict
### STEP4: Modify Tuner quota to 2 ##### 



Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 2
### STEP5: Do PPS Boking of program B & verify if it is successful #### 



Pps booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
PPS Booking is successful for the Channel 510
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
start wait time from func 1
Event is present in the Booked catalog
### STEP6: Do PPS Boking of program B1 & verify if it is successful. #####



Pps booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
PPS Booking is successful for the Channel 510
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
start wait time from func 457.633093994
Event is present in the Booked catalog
### STEP7: Do PPS Boking of program C & verify that fails due to Tuner conflict. ########



Pps booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
Pps Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
403
{'date': 'Mon, 30 Apr 2018 08:28:56 GMT', 'flow_context': '5AE6D3C8E4B0CBA15170C33C', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6D3C8E4B0CBA15170C33C"}
 PPS Booking failed due to Tuner Conflict
### STEP8: Revert back the original conditions, then update the results. #####




#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

 Testcase Passed: Event booking is failed due to Tuner Conflict

2018/04/30 08:29:16 UTC ############################## ENDED :  corner_US31786_TC1241_one_tuner_conflict_nmanual_booking ##############################

2018/04/30 08:29:16 UTC ############################## STARTED :  corner_US31786_TC1242_book_withUpdate_tuners ##############################
US31786: As a SP, I want an API to be able to change from my Billing System the recorder tuner quota for a household account
TC1242: User schedules a Series-A Ch.A (8:00am-8:30am), anh he is unable to schedule a Series-B Ch.B (8:00am-8:30am) . This test checks user is able to schedule more programs after household upgrades to n tuners (n>1).
Starting test corner_US31786_TC1242_book_withUpdate_tuners


### STEP1, Ingest series A with 1 episode of n mins on Channel 1 without a post-time


###        Ingest series A1 with 1 episode of n mins on Channel 1 with a post-time of 2n mins.


###        Ingest series B with 1 episode on Channel 2 without post-time.


###        Ingest series B1 with 1 episode of n mins on Channel 2 with a post-time of 2n mins.


###        Ingest series C with 1 episode of n mins on Channel 3 with a post-time of 2n mins.


###        Ingest series D with 1 episode of n mins on Channel 4 with a post-time of 2n mins.


###        Ingest series E with 1 episode of n mins on Channel 5 with a post-time of 2n mins.


###        Ingest series F with 1 episode of n mins on Channel 6 with a post-time of 2n mins.


###        Ingest series G with 1 episode of n mins on Channel 7 with a post-time of 2n mins ##########################

Titles of events to be booked:  ['serieA23', 'serieB255', 'serieA1121', 'serieB1346', 'serieC492', 'serieD555', 'serieE659', 'serieF762', 'serieG866']
{'services': { 508: { 'lineup': [{ 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'serieA23_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'serieA23'}],
         'lineupLength': 4,
         'message': ''}},
'shows': set(['serieA23']),
'seasons': { 'serieA23': { 1: set([1])}},
'totalLength': "00:04:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 508: { 'lineup': [{ 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'serieA1121_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'serieA1121'}],
         'lineupLength': 4,
         'message': ''}},
'shows': set(['serieA1121']),
'seasons': { 'serieA1121': { 1: set([1])}},
'totalLength': "00:04:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 509: { 'lineup': [{ 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'serieB255_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'serieB255'}],
         'lineupLength': 4,
         'message': ''}},
'shows': set(['serieB255']),
'seasons': { 'serieB255': { 1: set([1])}},
'totalLength': "00:04:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 509: { 'lineup': [{ 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'serieB1346_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'serieB1346'}],
         'lineupLength': 4,
         'message': ''}},
'shows': set(['serieB1346']),
'seasons': { 'serieB1346': { 1: set([1])}},
'totalLength': "00:04:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 510: { 'lineup': [{ 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'serieC492_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'serieC492'}],
         'lineupLength': 4,
         'message': ''},
  511: { 'lineup': [{ 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'serieD555_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'serieD555'}],
         'lineupLength': 4,
         'message': ''},
  512: { 'lineup': [{ 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'serieE659_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'serieE659'}],
         'lineupLength': 4,
         'message': ''},
  513: { 'lineup': [{ 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'serieF762_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'serieF762'}],
         'lineupLength': 4,
         'message': ''},
  514: { 'lineup': [{ 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'serieG866_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'serieG866'}],
         'lineupLength': 4,
         'message': ''}},
'shows': set(['serieC492', 'serieD555', 'serieE659', 'serieF762', 'serieG866']),
'seasons': { 'serieC492': { 1: set([1])}, 'serieD555': { 1: set([1])}, 'serieE659': { 1: set([1])}, 'serieF762': { 1: set([1])}, 'serieG866': { 1: set([1])}},
'totalLength': "00:04:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 121.388
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################



### STEP2. Set the tuner value to 1 ############################## 

Fetching Number of tuners in the Household
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 4
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 1
Tuner value set successfully to 1


### STEP3, Do PPS Booking for series A & series B. Verify series A booked successfully, series B fails due to Tuner conflict##########################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525073499000~1525080699000?lang=eng&serviceList=508,509,510,511,512,513,514&count=255&region=101&catalogueId=1
Content id list:  [(u'programid://1620503879~programid://2147482823', [1525077060000, 1525077300000, 240000, u'serieA23_1_1'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
Booked succesfully
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1620503879~programid://2147482823'] is in BOOKED state
PPS Booking Successfull and verified from booked catalog for title: serieA23
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1620503879~programid://2147482823'] is in BOOKED state
Booking state verified for content id: programid://1620503879~programid://2147482823, Title: serieA23
Content id list:  [(u'programid://2147480284~programid://474511829', [1525077060000, 1525077300000, 240000, u'serieB255_1_1'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
PPS Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
403
{'date': 'Mon, 30 Apr 2018 08:31:40 GMT', 'flow_context': '5AE6D46CE4B0D1FE7D344C17', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6D46CE4B0D1FE7D344C17"}
Contentid list for Series1 and Series2 [[u'programid://1620503879~programid://2147482823']]
First series booked succesfully
Second series booking failed due to tuner conflict


### STEP4, Modify Tuner quota to 6 ##########################

Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 6
Tuner value set to 6


### STEP5, Do PPS Booking for series A1, B1, C, D, E, F, G. Verify all those series booked successfully, and series G fails due to Tuner conflict.##########################

Content id list:  [(u'programid://1961778150~programid://1359708623', [1525077480000, 1525077720000, 240000, u'serieA1121_1_1'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
Booked succesfully
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1961778150~programid://1359708623'] is in BOOKED state
PPS Booking Successfull and verified from booked catalog for title: serieA1121
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1961778150~programid://1359708623'] is in BOOKED state
Booking state verified for content id: programid://1961778150~programid://1359708623, Title: serieA1121
Content id list:  [(u'programid://1389348175~programid://2147482824', [1525077480000, 1525077720000, 240000, u'serieB1346_1_1'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
Booked succesfully
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1389348175~programid://2147482824'] is in BOOKED state
PPS Booking Successfull and verified from booked catalog for title: serieB1346
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1389348175~programid://2147482824'] is in BOOKED state
Booking state verified for content id: programid://1389348175~programid://2147482824, Title: serieB1346
Content id list:  [(u'programid://1995620780~programid://1818254154', [1525077480000, 1525077720000, 240000, u'serieC492_1_1'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
Booked succesfully
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1995620780~programid://1818254154'] is in BOOKED state
PPS Booking Successfull and verified from booked catalog for title: serieC492
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1995620780~programid://1818254154'] is in BOOKED state
Booking state verified for content id: programid://1995620780~programid://1818254154, Title: serieC492
Content id list:  [(u'programid://2147480285~programid://1660242169', [1525077480000, 1525077720000, 240000, u'serieD555_1_1'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
Booked succesfully
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://2147480285~programid://1660242169'] is in BOOKED state
PPS Booking Successfull and verified from booked catalog for title: serieD555
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://2147480285~programid://1660242169'] is in BOOKED state
Booking state verified for content id: programid://2147480285~programid://1660242169, Title: serieD555
Content id list:  [(u'programid://1730848221~programid://991704316', [1525077480000, 1525077720000, 240000, u'serieE659_1_1'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
Booked succesfully
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1730848221~programid://991704316'] is in BOOKED state
PPS Booking Successfull and verified from booked catalog for title: serieE659
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1730848221~programid://991704316'] is in BOOKED state
Booking state verified for content id: programid://1730848221~programid://991704316, Title: serieE659
Content id list:  [(u'programid://1615418124~programid://387630004', [1525077480000, 1525077720000, 240000, u'serieF762_1_1'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
Booked succesfully
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1615418124~programid://387630004'] is in BOOKED state
PPS Booking Successfull and verified from booked catalog for title: serieF762
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1615418124~programid://387630004'] is in BOOKED state
Booking state verified for content id: programid://1615418124~programid://387630004, Title: serieF762
Content id list:  [(u'programid://2037946258~programid://2147482825', [1525077480000, 1525077720000, 240000, u'serieG866_1_1'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
PPS Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
403
{'date': 'Mon, 30 Apr 2018 08:31:40 GMT', 'flow_context': '5AE6D46CE4B056714510D996', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6D46CE4B056714510D996"}
all booked


### STEP6, Revert back the original conditions, then update the results ##########################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: series G failed due to Tuner conflict

2018/04/30 08:32:01 UTC ############################## ENDED :  corner_US31786_TC1242_book_withUpdate_tuners ##############################

2018/04/30 08:32:01 UTC ############################## STARTED :  corner_US31786_TC1243_Conflict_upgradetunerToN_FromOne ##############################
US31786: As a SP, I want an API to be able to change from my Billing System the recorder tuner quota for a household account
TC1243: User schedules Series-A on Ch.A, and he is unable to schedule Series-B on Ch.B because the first episode of Series-B conflicts with episode of Series-A . This test checks user is able to schedule more programs after household upgrades to n tuners (n>1)
Starting test corner_US31786_TC1243_Conflict_upgradetunerToN_FromOne


### STEP1, Ingest Series A with 2 episodes without post-time on Channel 1 (time difference between 2 episodes are n mins)


###        Ingest Series B with 1 episode with post-time 2n mins on Channel 2.


###        Ingest an individual event with n mins & posttime of 2n mins on Channel 3.##########################

{'services': { 508: { 'lineup': [{ 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'siriA46_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'siriA46'}],
         'lineupLength': 4,
         'message': ''}},
'shows': set(['siriA46']),
'seasons': { 'siriA46': { 1: set([1])}},
'totalLength': "00:04:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 508: { 'lineup': [{ 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'siriA46_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'siriA46'}],
         'lineupLength': 4,
         'message': ''}},
'shows': set(['siriA46']),
'seasons': { 'siriA46': { 1: set([2])}},
'totalLength': "00:04:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 509: { 'lineup': [{ 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'siriB242_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'siriB242'}],
         'lineupLength': 4,
         'message': ''}},
'shows': set(['siriB242']),
'seasons': { 'siriB242': { 1: set([1])}},
'totalLength': "00:04:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 510: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'evec509_1', 'rating': 1}], 'lineupLength': 4, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:04:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 121.1104
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################



### STEP2. Set the tuner quota to 1 ########################### 

Fetching Number of tuners in the Household
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 4
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 1
Tuner quota set to value 1


### STEP3, Do PPS Booking for series A & verify if its successful.##########################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525073663000~1525080863000?lang=eng&serviceList=508,509,510&count=255&region=101&catalogueId=1
content id list:  [(u'programid://1360303161~programid://2130806692', [1525077240000, 1525077480000, 240000, u'siriA46_1_1']), (u'programid://1657441924~programid://2147482826', [1525077720000, 1525077960000, 240000, u'siriA46_1_2'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1360303161~programid://2130806692', u'programid://1657441924~programid://2147482826'] is in BOOKED state


### STEP4, Do PPS Booking for series B & verify if its failed due to Tuner conflict error.##########################

content id list:  [(u'programid://1211312213~programid://2147482827', [1525077660000, 1525077900000, 240000, u'siriB242_1_1'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
PPS Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
403
{'date': 'Mon, 30 Apr 2018 08:35:23 GMT', 'flow_context': '5AE6D54BE4B0286852CB1DB8', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6D54BE4B0286852CB1DB8"}
Series B booking failed due to tuner conflict


### STEP5, Modify the Tuner quota to 2.##########################

Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 2
Tuner quota value set to 2


### STEP6, Do PPS Booking for series B & verify if its successful.##########################

content id list:  [(u'programid://1211312213~programid://2147482827', [1525077660000, 1525077900000, 240000, u'siriB242_1_1'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1211312213~programid://2147482827'] is in BOOKED state
Series B booking passed after setting tuner value to 2


### STEP7, Do PPS Booking for event & verify if it is failing due to conflict error.##########################

content id list:  [(u'programid://2147480286~programid://206020606', [1525077660000, 1525077900000, 240000, u'evec509_1'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
PPS Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
403
{'date': 'Mon, 30 Apr 2018 08:36:23 GMT', 'flow_context': '5AE6D587E4B0A57495AA76FE', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6D587E4B0A57495AA76FE"}


### STEP8, Revert back the original conditions, then update the results ##########################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: PPS booking failed due to tuner conflict

2018/04/30 08:36:43 UTC ############################## ENDED :  corner_US31786_TC1243_Conflict_upgradetunerToN_FromOne ##############################

2018/04/30 08:36:43 UTC ############################## STARTED :  corner_US31786_TC1245_four_tuners_event_manual_series_book ##############################
US31786:  As a SP, I want an API to be able to change from my Billing System the recorder tuner quota for a household account
TC1245 : Schedule 1 program, wait for upgrade from 1 tuner to n tuners, shedule new programs with single, manual and series 
Starting test corner_US31786_TC1245_four_tuners_event_manual_series_book
### STEP1: Ingets 1 event of 2n mins in Channel1 with posttime of n mins, 1 event of n mins in Channel2 with posttime of 2n mins, 1 event of 2n mins in Channel3 with posttime of 2n mins, seriesA with 1 episode of n mins in Channel4 with posttime of 2n mins, 1 event of 2n mins in Channel5 with posttime of 2n mins #################################



Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
{'services': { 508: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 8, 'programID': 'cancur1un57_1', 'rating': 1}], 'lineupLength': 8, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 509: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'cancur2u1301_1', 'rating': 1}], 'lineupLength': 4, 'message': ''},
  510: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 8, 'programID': 'cancur3u2635_1', 'rating': 1}], 'lineupLength': 8, 'message': ''},
  511: { 'lineup': [{ 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'cancur4u3862_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'cancur4u3862'}],
         'lineupLength': 4,
         'message': ''},
  512: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 8, 'programID': 'cancur5u41229_1', 'rating': 1}], 'lineupLength': 8, 'message': ''}},
'shows': set(['cancur4u3862']),
'seasons': { 'cancur4u3862': { 1: set([1])}},
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 121.1104
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Fetching Number of tuners in the Household
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 4
### STEP2:Set the tuner quota to 1 ###################



Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 1
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525077545000~1525084745000?lang=eng&serviceList=508,509,510,511,512&count=255&region=101&catalogueId=1
### STEP3: Do the manual bookign in channel1 #########################



Pps booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
PPS Booking is successful for the Channel 508
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
start wait time from func 218.684258057
Event is present in the Booked catalog
### STEP4: Set the tuner quota to 4 ##### 



Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 4
### STEP5: Do the pps booking of event in channel2 ####################



ContentId Dictionary from the Grid Response
{u'programid://1601893648~programid://1366623009': [1525077720000, 1525077960000, 240000, u'cancur2u1301_1']}
ContentId list after Sorting
[(u'programid://1601893648~programid://1366623009', [1525077720000, 1525077960000, 240000, u'cancur2u1301_1'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
Event Booking is Successful for the event contentId programid://1601893648~programid://1366623009 
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1601893648~programid://1366623009'] is in BOOKED state
###STEP6: Do the pps booking of event in Channel3 #######



ContentId Dictionary from the Grid Response
{u'programid://1325543217~programid://1435553905': [1525077720000, 1525078200000, 480000, u'cancur3u2635_1']}
ContentId list after Sorting
[(u'programid://1325543217~programid://1435553905', [1525077720000, 1525078200000, 480000, u'cancur3u2635_1'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
Event Booking is Successful for the event contentId programid://1325543217~programid://1435553905 
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1325543217~programid://1435553905'] is in BOOKED state
### STEP7: Do the series booking in Channel4 ########



{u'programid://1096382464~programid://1313893388': [1525077720000, 1525077960000, 240000, u'cancur4u3862_1_1', 1335603037, 1]}
[(u'programid://1096382464~programid://1313893388', [1525077720000, 1525077960000, 240000, u'cancur4u3862_1_1', 1335603037, 1])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
Series Booking Successfull seriesId cancur4u3862_1_1 
### STEP8: Verify all the bookings are successful #####



get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1096382464~programid://1313893388'] is in BOOKED state
### STEP9: Do the event booking on channel5 and verify the tuner conflict ####



ContentId Dictionary from the Grid Response
{u'programid://2147480287~programid://179007372': [1525077720000, 1525078200000, 480000, u'cancur5u41229_1']}
ContentId list after Sorting
[(u'programid://2147480287~programid://179007372', [1525077720000, 1525078200000, 480000, u'cancur5u41229_1'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
PPS Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
403
{'date': 'Mon, 30 Apr 2018 08:39:14 GMT', 'flow_context': '5AE6D632E4B08D9582AA817D', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6D632E4B08D9582AA817D"}
 PPS Booking failed due to Tuner Conflict
### STEP10: Revert the tuner to default ####




#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

 Testcase Passed : PPS Booking Failed due to Tuner Conflict

2018/04/30 08:39:36 UTC ############################## ENDED :  corner_US31786_TC1245_four_tuners_event_manual_series_book ##############################

2018/04/30 08:39:36 UTC ############################## STARTED :  corner_US31786_TC1247_tuner_conflict_one_program_with_two_programs ##############################
US317856: As a SP, I want an API to be able to change from my Billing System the recorder tuner quota for a household account
TC1247: 1 program conflict with 2 programs, upgrade 2 tuners to n tuners
Starting test corner_US31786_TC1247_tuner_conflict_one_program_with_two_programs
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']

### STEP 1. Ingest  series1 of 2 episode of n minute with the post time of n minute on channel 1                            
Ingest first event of  2n minute  and second event of n minute (back to back )without a post time on channel 2                            
Ingest first event of  2n minute  and second event of n minute (back to back )without a post time on channel 3                           
Ingest 1 event of n minute with post time of 2n minute on channel 4
{'services': { 508: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 2, 'programID': 'TC1247A46_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'TC1247A46'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 2, 'programID': 'TC1247A46_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'TC1247A46'}],
         'lineupLength': 4,
         'message': ''}},
'shows': set(['TC1247A46']),
'seasons': { 'TC1247A46': { 1: set([1, 2])}},
'totalLength': "00:04:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 509: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'TC1247B262_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'TC1247B262_2', 'rating': 1}],
         'lineupLength': 8,
         'message': ''},
  510: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'TC1247C608_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'TC1247C608_2', 'rating': 1}],
         'lineupLength': 8,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 511: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 2, 'programID': 'TC1247D835_1', 'rating': 1}], 'lineupLength': 2, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:02:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Current time :  2018-04-30 08:39:37.354438
Series A Episode 1 on Channel 1 starts on :  2018-04-30 08:45:36  Length :  4
First event on Channel 2 start on :  2018-04-30 08:43:36  Length :  8
First event on Channel 3 start on :  2018-04-30 08:43:36  Length :  8
First event on Channel 4 start on :  2018-04-30 08:47:36  Length :  2
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.9716
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Fetching Number of tuners in the Household
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 4
### STEP2:Set the tuner quota to 2 ####



Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 2
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525077718000~1525084918000?lang=eng&serviceList=508,509,510,511&count=255&region=101&catalogueId=1
ContentID dictionary from the Grid Response
{u'programid://2147476335~programid://93676735': [1525078020000, 1525078140000, u'TC1247A46_1_2', 2147477854, 2], u'programid://2147476336~programid://93676734': [1525077900000, 1525078020000, u'TC1247A46_1_1', 2147477854, 1]}
ContentId list after Sorting
[(u'programid://2147476336~programid://93676734', [1525077900000, 1525078020000, u'TC1247A46_1_1', 2147477854, 1]), (u'programid://2147476335~programid://93676735', [1525078020000, 1525078140000, u'TC1247A46_1_2', 2147477854, 2])]

### STEP 3. Do the series booking of series 1 and verify it is successful ###

PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings 
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://2147476336~programid://93676734', u'programid://2147476335~programid://93676735'] is in BOOKED state

Series A on Channel 1 is booked successfully

###  STEP 4. Do manual booking of first event of channel 2, verify it is successful ########
ContentId Dictionary from the Grid Response
{u'programid://1917640284~programid://1392936511': [1525078020000, 1525078260000, 240000, u'TC1247B262_2'], u'programid://1917640285~programid://1392936510': [1525077780000, 1525078020000, 240000, u'TC1247B262_1']}
Manual booking Start time :  2018-04-30T08:43:00Z  End time :  2018-04-30T08:47:00Z
Pps booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
Time Based Booking is successful for the Channel 509
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
start wait time from func 1.52355270228e+12
Event is present in the Booked catalog

Manual Booking of First Event on Channel 2 is successfull

### STEP 5. Do pps booking of first event of channel 3, verify it is fail due to 'tuner conflict'#####
ContentId Dictionary from the Grid Response
{u'programid://1459733068~programid://1537332637': [1525078020000, 1525078260000, 240000, u'TC1247C608_2'], u'programid://1459733067~programid://1537332638': [1525077780000, 1525078020000, 240000, u'TC1247C608_1']}
ContentId list after Sorting
[(u'programid://1459733067~programid://1537332638', [1525077780000, 1525078020000, 240000, u'TC1247C608_1']), (u'programid://1459733068~programid://1537332637', [1525078020000, 1525078260000, 240000, u'TC1247C608_2'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
PPS Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
403
{'date': 'Mon, 30 Apr 2018 08:42:03 GMT', 'flow_context': '5AE6D6DBE4B01484F81ABF76', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6D6DBE4B01484F81ABF76"}
PPS booking of event failed for contentId programid://1459733067~programid://1537332638
PPS Booking failed due to Tuner Conflict

### STEP 6. Update the tuner quota to 3 #####
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 3

### STEP 7. Do pps booking of first event of channel 3, verify it is successful ###
ContentId Dictionary from the Grid Response
{u'programid://1459733068~programid://1537332637': [1525078020000, 1525078260000, 240000, u'TC1247C608_2'], u'programid://1459733067~programid://1537332638': [1525077780000, 1525078020000, 240000, u'TC1247C608_1']}
ContentId list after Sorting
[(u'programid://1459733067~programid://1537332638', [1525077780000, 1525078020000, 240000, u'TC1247C608_1']), (u'programid://1459733068~programid://1537332637', [1525078020000, 1525078260000, 240000, u'TC1247C608_2'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
Event Booking is Successful for the event contentId programid://1459733067~programid://1537332638 

First event on Channel 3 is booked successfully

### STEP 8. Do pps booking of second event of channel 2, verify it is successful ###
ContentId Dictionary from the Grid Response
{u'programid://1917640284~programid://1392936511': [1525078020000, 1525078260000, 240000, u'TC1247B262_2'], u'programid://1917640285~programid://1392936510': [1525077780000, 1525078020000, 240000, u'TC1247B262_1']}
ContentId list after Sorting
[(u'programid://1917640285~programid://1392936510', [1525077780000, 1525078020000, 240000, u'TC1247B262_1']), (u'programid://1917640284~programid://1392936511', [1525078020000, 1525078260000, 240000, u'TC1247B262_2'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
Event Booking is Successful for the event contentId programid://1917640284~programid://1392936511 

Seconds event on Channel 2 is booked successfully

### STEP 9. Do pps booking of second event of channel 3, verify it is successful ###
ContentId Dictionary from the Grid Response
{u'programid://1459733068~programid://1537332637': [1525078020000, 1525078260000, 240000, u'TC1247C608_2'], u'programid://1459733067~programid://1537332638': [1525077780000, 1525078020000, 240000, u'TC1247C608_1']}
ContentId list after Sorting
[(u'programid://1459733067~programid://1537332638', [1525077780000, 1525078020000, 240000, u'TC1247C608_1']), (u'programid://1459733068~programid://1537332637', [1525078020000, 1525078260000, 240000, u'TC1247C608_2'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
Event Booking is Successful for the event contentId programid://1459733068~programid://1537332637 

Seconds event on Channel 3 is booked successfully

### STEP 10.Do manual booking of first event of channel 4,verify it is fail due to 'tuner conflict' ###
Manual booking Start time :  2018-04-30T08:47:36Z  End time :  2018-04-30T08:49:36Z
Pps booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
Pps Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
403
{'date': 'Mon, 30 Apr 2018 08:42:11 GMT', 'flow_context': '5AE6D6E3E4B0D1FE7D344C24', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6D6E3E4B0D1FE7D344C24"}
Time Based or Manual Booking failed for the channel 511 
Manual Booking failed due to Tuner Conflict
Manual booking of First event in Channel 4 is failed due to Tuner Conflict as expected

#### STEP 11.Revert the tuner quota ####

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed : Manual, Series and Event booking are successfull in CH1, CH2 and CH3

2018/04/30 08:42:32 UTC ############################## ENDED :  corner_US31786_TC1247_tuner_conflict_one_program_with_two_programs ##############################

2018/04/30 08:42:32 UTC ############################## STARTED :  corner_US31786_TC1248_book_with_max_tuners ##############################

 US31786: As a SP, I want an API to be able to change from my Billing System the recorder tuner quota for a household account

 TC1248: User schedules programs to maximum available tuners.  User cancels all programs and reduces tuners. User has at least 1 tuner available.  This test checks user only able to schedule programs with the new tuner settings.  This test also checks the maximum of new quota tuners.


### STEP1: Verify the Recording Mode and proceed further if it is not common copy environment ### 


Starting test corner_US31786_TC1248_book_with_max_tuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']


### STEP2: Ingest 2Events of n Minutes with the post-time of 2n minutes on Channel1
                       #        Ingest 2Events of 2n Minutes with the post-time of 2n minutes on Channel2
                       #        Ingest 1Event of 2n Minutes with the post-time of n minutes on Channel3
                       #        Ingest 1Event of 2n Minutes with the post-time of n minutes on Channel4 ###

{'services': { 510: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 8, 'programID': 'TC1248A656_1', 'rating': 1}], 'lineupLength': 8, 'message': ''},
  511: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 8, 'programID': 'TC1248B116_1', 'rating': 1}], 'lineupLength': 8, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 508: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'generic_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'generic_2', 'rating': 1}],
         'lineupLength': 8,
         'message': ''},
  509: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 8, 'programID': 'generic_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 8, 'programID': 'generic_2', 'rating': 1}],
         'lineupLength': 16,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:16:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 121.6656
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

 ### STEP3: Change the tuner quota to 4 ### 


Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 4
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 4


### STEP4: Do the Manual Booking for Event1 of n minutes with post-time of 2n minutes and Verify ### 
 

starttime : 1525078260

Manual booking on HouseholdId AUTO_3006_cornercase_set3_scripts_2  

PPS time based booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings 
### STEP5: Do the Manual Booking of Event of 2n Minutes on Channel 2, verify if it is successful

Manual booking on HouseholdId AUTO_3006_cornercase_set3_scripts_2  

PPS time based booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings 
### Manual booking is successful ###
### STEP6: Do PPS Booking for 2 events of 2n minutes with posttime of n minutes ### 


cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525077894000~1525085094000?lang=eng&serviceList=508,509,510,511&count=255&region=101&catalogueId=1
ContentId list after sorting
[(u'programid://1155416960~programid://407935348', [1525078020000, 1525078500000, 480000, u'TC1248A656_1'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
PPS booking is successful for the event contentId programid://1155416960~programid://407935348
ContentId list after sorting
[(u'programid://1862692178~programid://2147482831', [1525078020000, 1525078500000, 480000, u'TC1248B116_1'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
PPS booking is successful for the event contentId programid://1862692178~programid://2147482831


### STEP7: Delete Manual Booking of Channel1, Manual Booking of Channel2, Event on Channel3, Event on Channel4. Verify the booked catalog ### 


get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
start wait time from func 362.0
start wait time from func 1.5235531821e+12
Event is present in the Booked catalog

Delete PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog/5ae6d7861ab94a20f760ba21
PPS Booking Deleted successfully
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
start wait time from func 602.0
Event is present in the Booked catalog

Delete PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog/5ae6d786d8ba2820719bdbe4
PPS Booking Deleted successfully
Cancelled the 2 manual bookings 

get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1155416960~programid://407935348'] is in BOOKED state

Delete PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog/5ae6d786b1f9e9206752a813
PPS Booking Deleted successfully
pps delete is successful
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1862692178~programid://2147482831'] is in BOOKED state

Delete PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog/5ae6d78896094c205988ec34
PPS Booking Deleted successfully
pps delete is successful
### STEP8: Modify the tuner quota to 2 ### 


Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 2
### STEP9: Rebook the Manual Booking of Event from Step3. verify if it is successful ### 

### STEP10: Rebook the Manual Booking of Event from Step4, Verify if it is successful ### 



PPS time based booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings 

PPS time based booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings 
Manual Re-booking is successful.
### STEP11: Rebook the Events on Channel3 and Channel4, verify both fails due to Tuner Conflict ### 



PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
PPS Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
403
{'date': 'Mon, 30 Apr 2018 08:44:58 GMT', 'flow_context': '5AE6D78AE4B0A57495AA7706', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6D78AE4B0A57495AA7706"}

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
PPS Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
403
{'date': 'Mon, 30 Apr 2018 08:44:58 GMT', 'flow_context': '5AE6D78AE4B056714510D9C5', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6D78AE4B056714510D9C5"}
PPS Re-Booking failed due to Tuner Conflict
Testcase Passed: 2 manual bookings successful, and 2 events booking failed after Tuner Quota modification

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################


2018/04/30 08:45:18 UTC ############################## ENDED :  corner_US31786_TC1248_book_with_max_tuners ##############################

2018/04/30 08:45:18 UTC ############################## STARTED :  corner_US31786_TC1620 ##############################
US31785: As a SP, I want to provide Conflict Resolution support to the household to resolve Recorder Tuner Quota issues at Booking
TC1620: With 6 tuners, user schedules many single and manual programs on different channels. A conflict message displays when user schedules new programs overlaps to multiple other programs. To resolve conflict, this test checks user is able to cancel one existing program in order to schedule new program
Starting test corner_US31786_TC1620
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']


### STEP1. Ingest  1 Event of 4n minutes without a posttime on channel 1


###        Ingest 1 Event of 2n minutes with a posttime of 2n minute on channel 2


###        Ingest 2 Event of  n minutes with a posttime of n minuteon channel 3


###        Ingest 2 Event of  n minutes without a posttime(diff between 2 event is n) on channel 4


###        Ingest 1 Event of n minutes without a posttime  on channel 5


###        Ingest 1 Event of 2n minutes without a posttime on channel 6


###        Ingest 1 Event of n minutes with a posttime of 2n minute on channel  7


###        Ingest 1 Event of 2n minutes with a posttime of n minute on channel 8


###        Ingest 1 Event of n minutes with a posttime of n minute on channel 9 ###########################################

Titles of events to be booked:  ['evee123', 'evee3255', 'evee5492', 'evee6555', 'evee7659', 'evee9866', 'maua2121', 'maua4346', 'maua8762']
{'services': { 508: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 13, 'programID': 'evee123_1', 'rating': 1}], 'lineupLength': 13, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:13:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 509: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 7, 'programID': 'maua2121_1', 'rating': 1}], 'lineupLength': 7, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:07:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 510: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'evee3255_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'evee3255_2', 'rating': 1}],
         'lineupLength': 8,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 511: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'maua4346_1', 'rating': 1}], 'lineupLength': 4, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:04:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 511: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'maua4346_1', 'rating': 1}], 'lineupLength': 4, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:04:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 512: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'evee5492_1', 'rating': 1}], 'lineupLength': 4, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:04:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 513: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 7, 'programID': 'evee6555_1', 'rating': 1}], 'lineupLength': 7, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:07:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 514: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'evee7659_1', 'rating': 1}], 'lineupLength': 4, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:04:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 500: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 7, 'programID': 'maua8762_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 7, 'programID': 'maua8762_2', 'rating': 1}],
         'lineupLength': 14,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:14:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 501: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'evee9866_1', 'rating': 1}], 'lineupLength': 4, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:04:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 124.7886
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################



### STEP2. Set the tuner value to 6 ############################## 

Fetching Number of tuners in the Household
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 4
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 6
Tuner value set successfully to 6


### STEP3. Do pps booking for event of channel 1, manual booking for event of channel 2, pps booking for 2 event of channel 3, manual booking for 2 event of channel 4, pps booking for event of channel 5, pps booking for event of channel 6, pps booking for event of channel 7, manual booking for event of channel 8,  pps booking for event of channel 9,verify all bookings are succesful except for channel 9 which should fail due to Tuner conflict ##############################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525074464000~1525081664000?lang=eng&serviceList=508,509,510,511,512,513,514,500,501&count=255&region=101&catalogueId=1
Content id list:  [(u'programid://1950435625~programid://2147482832', [1525078020000, 1525078800000, 780000, u'evee123_1'])]
Content id list:  [(u'programid://1660376383~programid://2147482834', [1525078260000, 1525078500000, 240000, u'evee3255_1']), (u'programid://1660376382~programid://2147482833', [1525078500000, 1525078740000, 240000, u'evee3255_2'])]
Content id list:  [(u'programid://1430649464~programid://2147482835', [1525078020000, 1525078260000, 240000, u'evee5492_1'])]
Content id list:  [(u'programid://1586940135~programid://1074682461', [1525078020000, 1525078440000, 420000, u'evee6555_1'])]
Content id list:  [(u'programid://2037490940~programid://1637311026', [1525078440000, 1525078680000, 240000, u'evee7659_1'])]
Content id list:  [(u'programid://1630182351~programid://742057089', [1525078440000, 1525078680000, 240000, u'evee9866_1'])]
ALl the content id fetched succesfully
List details of events for manual booking:  [['2018-04-30T08:55:00Z', '2018-04-30T09:02:00Z', 509, 1525078500], ['2018-04-30T08:48:00Z', '2018-04-30T08:52:00Z', 511, 1525078080], ['2018-04-30T08:56:00Z', '2018-04-30T09:00:00Z', 511, 1525078560], ['2018-04-30T08:52:00Z', '2018-04-30T08:59:00Z', 500, 1525078320]]
Content ids of events to be booked:  [u'programid://1950435625~programid://2147482832', u'programid://1660376383~programid://2147482834', u'programid://1660376382~programid://2147482833', u'programid://1430649464~programid://2147482835', u'programid://1586940135~programid://1074682461', u'programid://2037490940~programid://1637311026', u'programid://1630182351~programid://742057089']
Booking list:  [u'programid://1950435625~programid://2147482832', ['2018-04-30T08:55:00Z', '2018-04-30T09:02:00Z', 509, 1525078500], u'programid://1660376383~programid://2147482834', u'programid://1660376382~programid://2147482833', ['2018-04-30T08:48:00Z', '2018-04-30T08:52:00Z', 511, 1525078080], ['2018-04-30T08:56:00Z', '2018-04-30T09:00:00Z', 511, 1525078560], u'programid://1430649464~programid://2147482835', u'programid://1586940135~programid://1074682461', u'programid://2037490940~programid://1637311026', ['2018-04-30T08:52:00Z', '2018-04-30T08:59:00Z', 500, 1525078320], u'programid://1630182351~programid://742057089']

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
Booked succesfully
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1950435625~programid://2147482832'] is in BOOKED state

Booking done succesfully for :  programid://1950435625~programid://2147482832 

Pps booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
start wait time from func 436.0
Event is present in the Booked catalog
PPS Booking is successful for the channel 509

Booking done succesfully for :  ['2018-04-30T08:55:00Z', '2018-04-30T09:02:00Z', 509, 1525078500] 


PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
Booked succesfully
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1660376383~programid://2147482834'] is in BOOKED state

Booking done succesfully for :  programid://1660376383~programid://2147482834 


PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
Booked succesfully
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1660376382~programid://2147482833'] is in BOOKED state

Booking done succesfully for :  programid://1660376382~programid://2147482833 

Pps booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
start wait time from func 15.0
Event is present in the Booked catalog
PPS Booking is successful for the channel 511

Booking done succesfully for :  ['2018-04-30T08:48:00Z', '2018-04-30T08:52:00Z', 511, 1525078080] 

Pps booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
start wait time from func 495.0
Event is present in the Booked catalog
PPS Booking is successful for the channel 511

Booking done succesfully for :  ['2018-04-30T08:56:00Z', '2018-04-30T09:00:00Z', 511, 1525078560] 


PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
Booked succesfully
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1430649464~programid://2147482835'] is in BOOKED state

Booking done succesfully for :  programid://1430649464~programid://2147482835 


PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
Booked succesfully
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1586940135~programid://1074682461'] is in BOOKED state

Booking done succesfully for :  programid://1586940135~programid://1074682461 


PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
Booked succesfully
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://2037490940~programid://1637311026'] is in BOOKED state

Booking done succesfully for :  programid://2037490940~programid://1637311026 

Pps booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
start wait time from func 255.0
Event is present in the Booked catalog
PPS Booking is successful for the channel 500

Booking done succesfully for :  ['2018-04-30T08:52:00Z', '2018-04-30T08:59:00Z', 500, 1525078320] 


PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
PPS Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
403
{'date': 'Mon, 30 Apr 2018 08:47:45 GMT', 'flow_context': '5AE6D831E4B0CA76F1C6FA45', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6D831E4B0CA76F1C6FA45"}
all events booked successfully
Ninth event booking failed due to tuner conflict


##4. Delete the Event booking from Channel7 ################

get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 

Delete PPS booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/catalog/5ae6d831d8ba2820719bdbe7
PPS Booking Deleted successfully
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://2037490940~programid://1637311026'] is not in BOOKED state
Event from channel7 deleted succesfully



##5. Dopps booking for event of channel 9 again and verify it should be successful ##############


PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
Booked succesfully
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1630182351~programid://742057089'] is in BOOKED state


##6. Verify the Booking Catalog and it should have only all events of except event of channel 7 are present ####################

get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1950435625~programid://2147482832'] is in BOOKED state
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
start wait time from func 435.0
Event is present in the Booked catalog
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1660376383~programid://2147482834'] is in BOOKED state
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1660376382~programid://2147482833'] is in BOOKED state
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
start wait time from func 15.0
Event is present in the Booked catalog
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
start wait time from func 495.0
Event is present in the Booked catalog
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1430649464~programid://2147482835'] is in BOOKED state
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1586940135~programid://1074682461'] is in BOOKED state
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
start wait time from func 255.0
Event is present in the Booked catalog
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1630182351~programid://742057089'] is in BOOKED state
All the events are present in booked catalog


### STEP7. Revert back the original conditions, than update the results ############################# 


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: all events of except event of channel 7 are present

2018/04/30 08:48:06 UTC ############################## ENDED :  corner_US31786_TC1620 ##############################

2018/04/30 08:48:06 UTC ############################## STARTED :  corner_US31810_TC1157_SeriesOverlapsTBR_singleEvent ##############################
US31810: As a SP, when a series recording is created I want the cDVR System to perform Recording Tuner Quota checking on the first episode in the series
TC1153: With 2 tuners, there are current nanual current recording Prog-A and a single current Prog-C with guardband 30 minutes late.  This test checks user is able to schedule a Series-B overlaps to manual Prog-A and single recording Prog-C
Starting test corner_US31810_TC1157_SeriesOverlapsTBR_singleEvent
 #### STEP1: Ingest 2 Events with 2n minutes without the posttime on Channel1, SeriesA of 1 Episode of n minutes with posttime of n minutes on Channel2, 2 Event of n minutes without the posttime on Channel3 ###########

{'services': { 508: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 10, 'programID': 'tc16229134_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 10, 'programID': 'tc16229134_2', 'rating': 1}],
         'lineupLength': 20,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:20:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 509: { 'lineup': [{ 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 5, 'programID': 'sertuncon76_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'sertuncon76'}],
         'lineupLength': 5,
         'message': ''}},
'shows': set(['sertuncon76']),
'seasons': { 'sertuncon76': { 1: set([1])}},
'totalLength': "00:05:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 510: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 5, 'programID': 'tc92261282_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 5, 'programID': 'tc92261282_2', 'rating': 1}],
         'lineupLength': 10,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:10:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 122.429
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################



### STEP2: Change the tuner quota to 2 ################################

Fetching Number of tuners in the Household
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 4
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 2


###STEP3: Do the PPS Manual Booking on Channel1 and verify it is successful ####

{
                                "startTime": "2018-04-30T08:49:00Z",
                                "endTime": "2018-04-30T08:59:00Z",
                                "channel": "508",
                                "checkConflicts" : true,
                                "pvr":"nPVR"
                                }
                                

PPS booking is Doing for householdId AUTO_3006_cornercase_set3_scripts_2 : 

PPS time based booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings 
Manual booking of Event 1 on Channel1 is successful


### Step4: Do the PPS Booking for 1stEvent on Channel3 with endGuardTime:n minutes and verify if it is successful #####

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525074629000~1525081829000?lang=eng&serviceList=508,509,510&count=255&region=101&catalogueId=1
[(u'programid://1390646366~programid://1222400846', [1525078080000, 1525078380000, 300000]), (u'programid://1390646367~programid://1222400845', [1525078380000, 1525078680000, 300000])]
Payload with end gaurd time on Channel3 : {
                                    "checkConflicts": true,
                                    "pvr": "nPVR",
                                    "scheduleInstanceId": "programid://1390646366~programid://1222400846",
                                    "endGuardTime" : "00:03:00"
                                    }

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
PPS booking is successful
PPS Booking completed successfully
get all Bookings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
All programs with the contentids [u'programid://1390646366~programid://1222400846'] is in BOOKED state
Event3 is present in the catalog

Details for:  programid://1390646366~programid://1222400846
Start guard time:  00:00:00 , End guard time :  00:03:00 

### STEP5: Do the PPS Booking for the Series and verify that booking is successful ##########################################################

[(u'programid://1921496748~programid://1749907041', [1525078380000, 1525078680000, u'sertuncon76_1_1', 1638501107, 1])]

                                 {
                                 "scheduleInstanceId" : "programid://1921496748~programid://1749907041",
                                 "checkConflicts" : true,
                                 "pvr":"nPVR",
                                 "recurrence":"SERIES"
                                 }
                                 

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings


### STEP6: Revert back to the original value which is stored initially from UPM ###########################################################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase passed: PPS Booking is successfull without any conflict

2018/04/30 08:50:49 UTC ############################## ENDED :  corner_US31810_TC1157_SeriesOverlapsTBR_singleEvent ##############################

2018/04/30 08:50:49 UTC ############################## STARTED :  corner_US31810_TC1158_TBRoverlapsMultiSeries_TunerConflict ##############################

US31810: As a SP, when a series recording is created I want the cDVR System to perform Recording Tuner Quota checking on the first episode in the series

TC1158: Conflict, 4 tuners, schedule a manual recording overlaps Series-A and Series-B and Series C and Series-D
Starting test corner_US31810_TC1158_TBRoverlapsMultiSeries_TunerConflict
STEP1: Ingest Series1, Series2, Series3,Series4 of 2 Episodes with n minutes on 4 Channels respectively without the posttime (Diff between Ep1 and Ep2 is n minutes), 2Events of 2n minutes with the posttime of nminutes on Channel5
     ###

{'services': { 508: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'TC115857_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'TC115857'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'TC115857_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'TC115857'}],
         'lineupLength': 8,
         'message': ''}},
'shows': set(['TC115857']),
'seasons': { 'TC115857': { 1: set([1, 2])}},
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "4",
'is_1050': "True"
'is_24': "False"
}
{'services': { 509: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'EP16230301_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'EP16230301'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'EP16230301_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'EP16230301'}],
         'lineupLength': 8,
         'message': ''}},
'shows': set(['EP16230301']),
'seasons': { 'EP16230301': { 1: set([1, 2])}},
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "4",
'is_1050': "True"
'is_24': "False"
}
{'services': { 510: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'TC03261635_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'TC03261635'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'TC03261635_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'TC03261635'}],
         'lineupLength': 8,
         'message': ''}},
'shows': set(['TC03261635']),
'seasons': { 'TC03261635': { 1: set([1, 2])}},
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "4",
'is_1050': "True"
'is_24': "False"
}
{'services': { 511: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'EP03261862_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'EP03261862'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'EP03261862_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'EP03261862'}],
         'lineupLength': 8,
         'message': ''}},
'shows': set(['EP03261862']),
'seasons': { 'EP03261862': { 1: set([1, 2])}},
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "4",
'is_1050': "True"
'is_24': "False"
}
{'services': { 512: { 'lineup': [{ 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 8, 'programID': 'generic_1', 'rating': 1}], 'lineupLength': 8, 'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 122.776
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525078393000~1525085593000?lang=eng&serviceList=508,509,510,511,512&count=255&region=101&catalogueId=1
 ### STEP3: Do the Booking of Series1, 2, 3 and Series 4,verify if it is successful ### 



                                         {
                                          "scheduleInstanceId" : "programid://1686618912~programid://2147482839",
                                          "checkConflicts" : true,
                                          "pvr":"nPVR",
                                          "recurrence":"SERIES"
                                         }
                                      

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings

                                         {
                                          "scheduleInstanceId" : "programid://1311914284~programid://287282782",
                                          "checkConflicts" : true,
                                          "pvr":"nPVR",
                                          "recurrence":"SERIES"
                                         }
                                      

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings

                                         {
                                          "scheduleInstanceId" : "programid://1465625182~programid://1327704777",
                                          "checkConflicts" : true,
                                          "pvr":"nPVR",
                                          "recurrence":"SERIES"
                                         }
                                      

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings

                                         {
                                          "scheduleInstanceId" : "programid://1142405049~programid://1095316196",
                                          "checkConflicts" : true,
                                          "pvr":"nPVR",
                                          "recurrence":"SERIES"
                                         }
                                      

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings


### STEP4: Do the Manual Booking (starttime will be the posttime and endtime is starttime+2n minutes) and verify that booking fails due to Tuner Conflict ### 
 

starttime1525078620
{
        			"startTime": "2018-04-30T08:57:00Z",
    				"endTime": "2018-04-30T09:05:00Z",
        			"channel": "512",
    				"checkConflicts" : true,
    				"pvr":"nPVR"
    	          }
    		  

Manual booking is Doing for 
 HouseholdId AUTO_3006_cornercase_set3_scripts_2  
Pps booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
 
Pps Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
403
{'date': 'Mon, 30 Apr 2018 08:53:13 GMT', 'flow_context': '5AE6D979E4B0C8958DD679A7', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6D979E4B0C8958DD679A7"}
Testcase Passed:PPS Booking failed due to Tuner Conflict
#### STEP5: Revert back the original conditions, than update the results ####

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################


2018/04/30 08:53:33 UTC ############################## ENDED :  corner_US31810_TC1158_TBRoverlapsMultiSeries_TunerConflict ##############################

2018/04/30 08:53:33 UTC ############################## STARTED :  corner_US31810_TC1159_SeriesOverlaps4SerieswithGuardBand ##############################

US31810: As a SP, when a series recording is created I want the cDVR System to perform Recording Tuner Quota checking on the first episode in the series

TC1159:No Conflict, 4 tuners, schedule a Series-E with guardband 15 minutes early and 15 minutes late, Series-E overlaps to Series-A and Series-B and Series C andSeries-D 
Starting test corner_US31810_TC1159_SeriesOverlaps4SerieswithGuardBand


### STEP1: Ingest Series1, Series2, Series3,Series4 of 2 Episodes with n minutes on 4 Channels respectively without the posttime (Diff between Ep1 and Ep2 is n minutes), Series5 of 1 Episode with n minutes with the posttime of nminutes on Channel5############################

{'services': { 508: { 'lineup': [{ 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'sertuncoa23_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'sertuncoa23'}],
         'lineupLength': 6,
         'message': ''},
  509: { 'lineup': [{ 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'sertuncob120_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'sertuncob120'}],
         'lineupLength': 6,
         'message': ''},
  510: { 'lineup': [{ 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'sertuncoc254_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'sertuncoc254'}],
         'lineupLength': 6,
         'message': ''},
  511: { 'lineup': [{ 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'sertuncod345_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'sertuncod345'}],
         'lineupLength': 6,
         'message': ''}},
'shows': set(['sertuncoa23', 'sertuncob120', 'sertuncoc254', 'sertuncod345']),
'seasons': { 'sertuncoa23': { 1: set([1])}, 'sertuncob120': { 1: set([1])}, 'sertuncoc254': { 1: set([1])}, 'sertuncod345': { 1: set([1])}},
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "6",
'is_1050': "True"
'is_24': "False"
}
{'services': { 512: { 'lineup': [{ 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'sertuncoe541_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'sertuncoe541'}],
         'lineupLength': 6,
         'message': ''}},
'shows': set(['sertuncoe541']),
'seasons': { 'sertuncoe541': { 1: set([1])}},
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 120.8328
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################



### STEP2: Change the tuner quota to 4 ##########################################################################################################

Fetching Number of tuners in the Household
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 4
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 4


### STEP3: Do the Series Booking for Series1, Series2, Series3 and Series4############################################################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525074955000~1525082155000?lang=eng&serviceList=508,509,510,511,512&count=255&region=101&catalogueId=1

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
PPS booking is successful

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
PPS booking is successful

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
PPS booking is successful

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
PPS booking is successful
 pps booking passed for all the first 4 series 


### STEP4: Do the Series5 Booking  with the startguard and endguardtime of n-2 minutes and verify that booking is successful########################

list=== [(u'programid://1272565673~programid://2147482840', [1525078860000, 1525079220000, 360000, u'sertuncoe541_1_1', 2147479264, 1])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
prgoram will wait for 540ecs to start rec
pgm will end rec in 405.0ecs
### STEP6:  Verify Recording catalog, & take Content play URI  ### 


get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/recordings
 
All Programs with the contentids [u'programid://1272565673~programid://2147482840'] is in RECORDED state
Playback the event for 3 Households using the contentplayuri 
event is successfully recorded for household
### STEP7: Get RecordingId from content play URI ### 
 
 
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/recordings
 
Playback URI list : [u'?recId=bce759fe-35eb-4278-b431-6695ebb1df6a']
### STEP8:Get contentID from Recording ID ### 
 
 
URL to get contentid from recoring id : http://rr.cdvr.dcpt01.ciscocdvr.net:80/recordingInfo/bce759fe-35eb-4278-b431-6695ebb1df6a?contentType=MPEG4&mode=playback&responseFormat=json
ContentId list : [u'1e311176-d0c0-4226-9613-7182cbd1dafd']
### STEP9: Get Start time, end time from VMR & verify if the start time, end time inclusive of guard time given in config file. ### 
 
 

URL to get the stream id, start time and end time: http://192.168.21.66:9999/api/findxrid/1e311176-d0c0-4226-9613-7182cbd1dafd
JSON response : [{"XRID":"1e311176-d0c0-4226-9613-7182cbd1dafd","IRID":"38280596832678558","CopyType":"UNIQUE","ISID":"512","AccountID":"AUTO_3006_cornercase_set3_scripts_2","BatchID":1,"StartTime":"2018-04-30T08:58:00Z","EndTime":"2018-04-30T09:10:00Z","ScheduledTime":"2018-04-30T08:56:00.032Z","ActualStartTime":"2018-04-30T08:57:59.077198Z","ActualEndTime":"2018-04-30T09:10:05.803198Z","StreamID":"512","AdZone":"0","StationID":"512","A8UpdateURL":"http://rr.cdvr.dcpt01.ciscocdvr.net:80/a8/update/PRIMETIME_RECORDER","ErasedTime":"0001-01-01T00:00:00Z","ErrorCode":0,"Status":"COMPLETE"}]
Stream id , Starttime and Endtime List: [[u'512', u'20180430085759.077198', u'20180430091005.803198', u'512', 1]]


### STEP5: Revert back to the original value which is stored initially from UPM ###########################################################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase passed: PPS Booking is successfull without any conflict

2018/04/30 09:12:01 UTC ############################## ENDED :  corner_US31810_TC1159_SeriesOverlaps4SerieswithGuardBand ##############################

2018/04/30 09:12:01 UTC ############################## STARTED :  corner_US31810_TC1299_SeriesOverlapsSerieswithGuardband_1Tuner ##############################

US31735: UseCase: Schedule Series Recording

TC1299: Book a new series with start time 1 minute before other records' end, Tuner Quota =max-1, Schedule recordings is successful
Starting test corner_US31810_TC1299_SeriesOverlapsSerieswithGuardband_1Tuner


### STEP1: Ingest Series1 and Series2 of 2 Episodes on 2 channels(n minutes) with the posttime of n minutes and another series of 1 episode into 3rd channel with the posttime of 2n -1 minutes ############################

{'services': { 508: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'sertuncon23_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'sertuncon23'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'sertuncon23_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'sertuncon23'}],
         'lineupLength': 12,
         'message': ''},
  509: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'sertuncon120_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'sertuncon120'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'sertuncon120_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'sertuncon120'}],
         'lineupLength': 12,
         'message': ''}},
'shows': set(['sertuncon120', 'sertuncon23']),
'seasons': { 'sertuncon120': { 1: set([1, 2])}, 'sertuncon23': { 1: set([1, 2])}},
'totalLength': "00:12:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 510: { 'lineup': [{ 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'sertuncon254_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'sertuncon254'}],
         'lineupLength': 6,
         'message': ''}},
'shows': set(['sertuncon254']),
'seasons': { 'sertuncon254': { 1: set([1])}},
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 121.2492
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################



### STEP2: Change the tuner quota to 3 ##########################################################################################################

Fetching Number of tuners in the Household
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 4
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 2


### STEP3: Do the PPS Booking for 1st and 2nd Series and verify if both are successful########################################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525076063000~1525083263000?lang=eng&serviceList=508,509,510&count=255&region=101&catalogueId=1
{u'programid://1761522758~programid://825843244': [1525080240000, 1525080600000, 360000, u'sertuncon23_1_2', 2002174785, 2], u'programid://1761522757~programid://825843243': [1525079880000, 1525080240000, 360000, u'sertuncon23_1_1', 2002174785, 1]}
sleeping for 90 secs

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
PPS booking is successful
{u'programid://2147480302~programid://2147482843': [1525080240000, 1525080600000, 360000, u'sertuncon120_1_2', 1537092051, 2], u'programid://2147480301~programid://2147482842': [1525079880000, 1525080240000, 360000, u'sertuncon120_1_1', 1537092051, 1]}
sleeping for 90 secs

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
PPS booking is successful
pps booking is successfull for the first and the second series 


### STEP4:Do the PPS Booking for 3rd Series and verify it is successful##########################################################

{u'programid://2002578581~programid://2147482844': [1525081260000, 1525081620000, 360000, u'sertuncon254_1_1', 1606599914, 1]}
sleeping for 90 secs

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings


### STEP5: Revert back to the original value which is stored initially from UPM ###########################################################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase passed: PPS Booking is successfull without any conflict

2018/04/30 09:19:14 UTC ############################## ENDED :  corner_US31810_TC1299_SeriesOverlapsSerieswithGuardband_1Tuner ##############################

2018/04/30 09:19:14 UTC ############################## STARTED :  corner_US71577_TC1152 ##############################

US71577: As a SP, when a series recording is created I want the cDVR System to perform Recording Tuner Quota checking on the first episode in the series

TC1152: With 2 tuners, Series-A and Series-B with its episodes are currently recording. This test checks a 'Conflict Message' displays when user schedules a future Series-B, but the first episode of Seriec-C ovelaps to Series-A and Series-B
Starting test corner_US71577_TC1152


### STEP1: Ingest Series1 of 1 Episode with 2n minutes, Series2 of 2 Episode(Difference between Episode1 and Episode2 will be 2n Minutes), Series3 of 2 Episodes(Difference between Ep1 and Ep2 is n minutes) without the posttime on 3 channels respectively ###############

{'services': { 508: { 'lineup': [{ 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 12, 'programID': 'sertuncn126_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'sertuncn126'}],
         'lineupLength': 12,
         'message': ''}},
'shows': set(['sertuncn126']),
'seasons': { 'sertuncn126': { 1: set([1])}},
'totalLength': "00:12:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 509: { 'lineup': [{ 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'ser1tuncn605_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'ser1tuncn605'}],
         'lineupLength': 6,
         'message': ''},
  510: { 'lineup': [{ 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'ser2tuncn908_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'ser2tuncn908'}],
         'lineupLength': 6,
         'message': ''}},
'shows': set(['ser1tuncn605', 'ser2tuncn908']),
'seasons': { 'ser1tuncn605': { 1: set([1])}, 'ser2tuncn908': { 1: set([1])}},
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 509: { 'lineup': [{ 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'ser1tuncn605_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'ser1tuncn605'}],
         'lineupLength': 6,
         'message': ''}},
'shows': set(['ser1tuncn605']),
'seasons': { 'ser1tuncn605': { 1: set([2])}},
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 510: { 'lineup': [{ 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 6, 'programID': 'ser2tuncn908_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'ser2tuncn908'}],
         'lineupLength': 6,
         'message': ''}},
'shows': set(['ser2tuncn908']),
'seasons': { 'ser2tuncn908': { 1: set([2])}},
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 122.082
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Fetching Number of tuners in the Household


### STEP2: Set the Tuner Quota to 2 ##############

Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 4
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 2


### STEP3: Do the PPS Booking for 1st and 2nd series and verify if both are successful #####################

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525076497000~1525083697000?lang=eng&serviceList=508,509,510&count=255&region=101&catalogueId=1
[(u'programid://1995385576~programid://1039098136', [1525080060000, 1525080780000, 720000, u'sertuncn126_1_1', 1944447183, 1])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
PPS booking is successful
[(u'programid://1558821828~programid://1594273922', [1525080060000, 1525080420000, 360000, u'ser1tuncn605_1_1', 2021247564, 1]), (u'programid://1633917545~programid://1772501965', [1525081140000, 1525081500000, 360000, u'ser1tuncn605_1_2', 2021247564, 2])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
PPS booking is successful
First two series' pps bookings were successful


### STEP4: Verify the Recording State of Series1Ep1 and Series2 Ep1 ###############

get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/recordings
 
All Program with the contentid [u'programid://1995385576~programid://1039098136'] is in RECORDING state
get all Recordings by:  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/recordings
 
All Program with the contentid [u'programid://1558821828~programid://1594273922'] is in RECORDING state
Recording State of Series1Ep1 and Series2 Ep1 verified


### STEP5: Do the PPS Booking for Series3 and it should fail due to Tuner Conflict ############

[(u'programid://1767873456~programid://1889046559', [1525080060000, 1525080420000, 360000, u'ser2tuncn908_1_1', 1514767858, 1]), (u'programid://1550589453~programid://2147482845', [1525080780000, 1525081140000, 360000, u'ser2tuncn908_1_2', 1514767858, 2])]

                                 {
                                 "scheduleInstanceId" : "programid://1767873456~programid://1889046559",
                                 "checkConflicts" : true,
                                 "pvr":"nPVR",
                                 "recurrence":"SERIES"
                                 }
                                 

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
PPS Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
403
{'date': 'Mon, 30 Apr 2018 09:22:37 GMT', 'flow_context': '5AE6E05DE4B0C93770ED912C', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6E05DE4B0C93770ED912C"}


### STEP6: Revert back the original conditions, than update the results ##################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed : PPS Booking failed due to Tuner Conflict

2018/04/30 09:22:58 UTC ############################## ENDED :  corner_US71577_TC1152 ##############################

2018/04/30 09:22:58 UTC ############################## STARTED :  corner_US71577_TC1153 ##############################

US71577: As a SP, when a series recording is created I want the cDVR System to perform Recording Tuner Quota checking on the first episode in the series

TC1153: With 2 tuners, schedule Series-A and Series-B without overlap.  This test checks user is able to schedule a Series-C overlaps to episode of Series-A or Series-B
Starting test corner_US71577_TC1153
 ### STEP1: Ingest Series1 of 2 Episodes with n minutes with the post time of n minutes(Difference between Ep1 and Ep2 is n minutes), Series2 of 2 Episode of n minutes without post time(Difference between 2 Episodes is n minutes), Series3 of 2 Episode of 2n minutes with the posttime of n minutes on 3 channels respectively### 


{'services': { 508: { 'lineup': [{ 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'sertuncua80_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'sertuncua80'}],
         'lineupLength': 3,
         'message': ''}},
'shows': set(['sertuncua80']),
'seasons': { 'sertuncua80': { 1: set([2])}},
'totalLength': "00:03:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 509: { 'lineup': [{ 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'sertuncub423_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'sertuncub423'}],
         'lineupLength': 3,
         'message': ''}},
'shows': set(['sertuncub423']),
'seasons': { 'sertuncub423': { 1: set([1])}},
'totalLength': "00:03:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 509: { 'lineup': [{ 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'sertuncub423_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'sertuncub423'}],
         'lineupLength': 3,
         'message': ''}},
'shows': set(['sertuncub423']),
'seasons': { 'sertuncub423': { 1: set([2])}},
'totalLength': "00:03:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 510: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'sertuncuc862_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'sertuncuc862'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 3, 'programID': 'sertuncuc862_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'sertuncuc862'}],
         'lineupLength': 6,
         'message': ''}},
'shows': set(['sertuncuc862']),
'seasons': { 'sertuncuc862': { 1: set([1, 2])}},
'totalLength': "00:06:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 121.2492
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

 ### STEP2: Change the tuner quota to 2 ### 


Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 4
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 2
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525076720000~1525083920000?lang=eng&serviceList=508,509,510&count=255&region=101&catalogueId=1
 ### STEP3: Do the Booking of Series1 and Series2,verify if it is successful ### 



PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
PPS booking is successful

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
PPS booking is successful
pps booking successfull for both first and the second series
### STEP4: Do PPS booking for series 3 ### 



PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase passed : PPS Booking is successfull for 3rd series

2018/04/30 09:25:40 UTC ############################## ENDED :  corner_US71577_TC1153 ##############################

2018/04/30 09:25:40 UTC ############################## STARTED :  corner_US71577_TC1154 ##############################
US71577: As a SP, when a series recording is created I want the cDVR System to perform Recording Tuner Quota checking on the first episode in the series
TC1154: With 2 tuners, Series B overlaps to Series A.  This test checks user is able to schedule a Series-C overlaps to Series-B
Starting test corner_US71577_TC1154
 #### STEP1: Ingest SeriesA of 1 Episode with n minutes with the posttime of 3n minutes on Channel1, Ingest SeriesB of 2 Episode of 2n minutes without posttime on Channel2, Ingest SeriesC of 1 Episode of 2n minutes with the posttime of n minutes on Channel3 
 ####
{'services': { 508: { 'lineup': [{ 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'sertuncaa76_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'sertuncaa76'}],
         'lineupLength': 4,
         'message': ''}},
'shows': set(['sertuncaa76']),
'seasons': { 'sertuncaa76': { 1: set([1])}},
'totalLength': "00:04:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 509: { 'lineup': [ { 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 8, 'programID': 'sertuncab403_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'sertuncab403'},
                     { 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 8, 'programID': 'sertuncab403_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'sertuncab403'}],
         'lineupLength': 16,
         'message': ''}},
'shows': set(['sertuncab403']),
'seasons': { 'sertuncab403': { 1: set([1, 2])}},
'totalLength': "00:16:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 510: { 'lineup': [{ 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 8, 'programID': 'sertuncae847_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'sertuncae847'}],
         'lineupLength': 8,
         'message': ''}},
'shows': set(['sertuncae847']),
'seasons': { 'sertuncae847': { 1: set([1])}},
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 121.9432
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################



### STEP2: Change the tuner quota to 2 ################################

Fetching Number of tuners in the Household
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 4
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 2


### STEP3: Do the PPS Booking of SeriesA and SeriesB, verify the booking are successful ########

cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525076883000~1525084083000?lang=eng&serviceList=508,509,510&count=255&region=101&catalogueId=1
Contend Id Dict : {u'programid://2147476357~programid://211976992': [1525081140000, 1525081380000, 240000, u'sertuncaa76_1_1', 1253913721, 1]}

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
PPS booking is successful
Contend Id Dict : {u'programid://1368283735~programid://113402830': [1525080420000, 1525080900000, 480000, u'sertuncab403_1_1', 1970177934, 1], u'programid://1368283734~programid://113402829': [1525080900000, 1525081380000, 480000, u'sertuncab403_1_2', 1970177934, 2]}

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
PPS booking is successful
pps booking successfull for both first and the second series


### Step4: Do the PPS Booking of SeriesC, verify the booking is successful ########


PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings


### STEP5: Revert back to the original value which is stored initially from UPM ################################


#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase Passed: SeriesC booking successful

2018/04/30 09:28:23 UTC ############################## ENDED :  corner_US71577_TC1154 ##############################

2018/04/30 09:28:23 UTC ############################## STARTED :  corner_US71577_TC1155 ##############################

 US71577: As a SP, when a series recording is created I want the cDVR System to perform Recording Tuner Quota checking on the first episode in the series

 TC1155: With 2 tuners, this test checks a 'Conflict Message' displays when first episode of Series-B overlaps to a current manual recording and single recording


### STEP1: Verify the Recording Mode and proceed further if it is not common copy environment ### 


Starting test corner_US71577_TC1155


### STEP2: Ingest 2 Events with 2n minutes without the posttime on Channel1, Series2 of 2 Episode of n minutes without post time(Difference between 2 Episodes is n minutes), Event2 of n minutes without the posttime on 3 channels respectively ###

{'services': { 508: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 8, 'programID': 'sertuncur81_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 8, 'programID': 'sertuncur81_2', 'rating': 1}],
         'lineupLength': 16,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:16:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 509: { 'lineup': [{ 'episodeNum': 1, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'sertuncur192_1_1', 'rating': 1, 'seasonNum': 1, 'showID': 'sertuncur192'}],
         'lineupLength': 4,
         'message': ''}},
'shows': set(['sertuncur192']),
'seasons': { 'sertuncur192': { 1: set([1])}},
'totalLength': "00:04:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 509: { 'lineup': [{ 'episodeNum': 2, 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'sertuncur192_1_2', 'rating': 1, 'seasonNum': 1, 'showID': 'sertuncur192'}],
         'lineupLength': 4,
         'message': ''}},
'shows': set(['sertuncur192']),
'seasons': { 'sertuncur192': { 1: set([2])}},
'totalLength': "00:04:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
{'services': { 510: { 'lineup': [ { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'sertuncur74_1', 'rating': 1},
                     { 'flags': ['CDVR', 'PVR'], 'genre': 0, 'length': 4, 'programID': 'sertuncur74_2', 'rating': 1}],
         'lineupLength': 8,
         'message': ''}},
'shows': set(),
'seasons': { },
'totalLength': "00:08:00",
'BoundaryInMinutes': "1",
'gap': "0",
'is_1050': "True"
'is_24': "False"
}
Waiting for the customized catalog ingest to successfully post and sync with CI Host in seconds: 122.2208
Cleaning up the household bookings and recordings before testcase execution

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

 ### STEP3: Change the tuner quota to 2 ### 


Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 4
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Setting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Test flag available.... ['no_prm', 'no_ipom', 'no_tstvm', 'upm_proxy']
Getting Number of Tuners via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2/numOfTuners
Number of Tuners is 2
cmdcServiceList fetch via URL :  http://cmdc:5600/cmdc/services/schedule/1525077046000~1525084246000?lang=eng&serviceList=508,509,510&count=255&region=101&catalogueId=1


### STEP4: Do the Manual Booking and Verify ### 
 

{
				         	"startTime": "2018-04-30T09:31:00Z",
						"endTime": "2018-04-30T09:37:00Z",
					        "channel": "508",
		               			"checkConflicts" : true, 
						"pvr":"nPVR"
			                  	}  
					  

Manual booking is Doing for 
 HouseholdId AUTO_3006_cornercase_set3_scripts_2  

PPS time based booking via http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings 
PPS booking is successful
 ### STEP5: Do a event booking with n minutes ### 


ContentId list after sorting
[(u'programid://2049172394~programid://1847953948', [1525080600000, 1525080840000, 240000, u'sertuncur74_1']), (u'programid://2049172395~programid://1847953949', [1525080840000, 1525081080000, 240000, u'sertuncur74_2'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
PPS booking is successful for the event contentId programid://2049172394~programid://1847953948
Contend Id Dict : {u'programid://1638861568~programid://1707434340': [1525081020000, 1525081260000, 240000, u'sertuncur192_1_2', 1405683602, 2], u'programid://2100089601~programid://1623444083': [1525080600000, 1525080840000, 240000, u'sertuncur192_1_1', 1405683602, 1]}
 ### STEP6: Do a series booking for 2 episodes ### 


ContentId list after sorting
[(u'programid://2049172394~programid://1847953948', [1525080600000, 1525080840000, 240000, u'sertuncur74_1']), (u'programid://2049172395~programid://1847953949', [1525080840000, 1525081080000, 240000, u'sertuncur74_2'])]

PPS Booking via :  http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
PPS Booking Failed via  url http://pps.cdvr.dcpt01.ciscocdvr.net:6060/pps/households/AUTO_3006_cornercase_set3_scripts_2/bookings
403
{'date': 'Mon, 30 Apr 2018 09:30:46 GMT', 'flow_context': '5AE6E246E4B0286852CB1E4F', 'content-length': '103', 'content-type': 'application/json', 'server': 'Jetty(9.2.4.v20141103)'}
{"code":"PPS.403.001.005","message":"Tuner Conflict Detected","flowContext":"5AE6E246E4B0286852CB1E4F"}

#################### HOUSEHOLD CLEANUP STARTED ####################


#################### HOUSEHOLD CLEANUP ENDED   ####################

Testcase passed:PPS Booking failed due to Tuner Conflict

2018/04/30 09:31:07 UTC ############################## ENDED :  corner_US71577_TC1155 ##############################

2018/04/30 09:31:07 UTC ############################## STARTED :  corner_delete_household ##############################
Starting test corner_delete_household
delete via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_0
delete via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_1
delete via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_2
delete via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_3
waiting a few seconds in an effort for PVR deletion to catch up
delete via http://upm.cdvr.dcpt01.ciscocdvr.net:6040/upm/households/AUTO_3006_cornercase_set3_scripts_4
waiting a few seconds in an effort for PVR deletion to catch up

2018/04/30 09:31:14 UTC ############################## ENDED :  corner_delete_household ##############################

2018/04/30 09:31:14 UTC done

##############################   Summary   ##############################

The following scripts returned non-zero exit codes:

Test Name                                          Return Code
-------------------------------------------------- -----------
corner_US31785_TC1616_two_tuners_event_book             1     
corner_TC7883_CreateHH_no_recorderregion_Event_Recording_Playback      1     
corner_TC7881_CreateHH_empty_recorderregion_Event_Recording_Playback      1     
corner_TC7882_CreateHH_invalid_recorderregion_Event_Recording_Playback      1     
corner_TC7219_hybrid_common_unique_copy_record_now      1     
corner_US31743_TC1222                                   1     
